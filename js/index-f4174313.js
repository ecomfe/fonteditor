!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=124)}([function(t,e,n){"use strict";var i=n(42);e.a=new i.a([["zh-cn",{copy:"复制",paste:"粘贴",cut:"剪切",del:"删除",save:"保存",undo:"撤销",redo:"重做",rangemode:"轮廓模式",pointmode:"点模式",order:"顺序",upshape:"上移一层",downshape:"下移一层",reversepoints:"改变方向",topshape:"置前",bottomshape:"置后",align:"水平方向",alignleft:"左对齐",aligncenter:"居中对齐",alignright:"右对齐",verticalalign:"垂直方向",alignshapes:"对齐形状",aligntop:"顶端对齐",alignmiddle:"垂直居中对齐",aligndescent:"底端对齐",alignbaseline:"基线对齐",rotateleft:"向左旋转",rotateright:"向右旋转",transform:"变换",flip:"翻转",mirror:"镜像",splitshapes:"切割轮廓",joinshapes:"结合",intersectshapes:"相交",tangencyshapes:"相切",removeshapes:"删除轮廓",adjustpos:"调整位置",adjustglyf:"调整字形",addpath:"添加路径",addshapes:"添加形状",circle:"圆",rect:"矩形",roundrect:"圆角矩形",star:"五角星",arrow:"箭头",triangle:"三角形",heart:"心形",tel:"电话",drop:"水滴",du:"度图标",setting:"设置",gridsorption:"吸附到网格线",shapesorption:"吸附到轮廓",showgrid:"显示网格",moresetting:"更多..",addreferenceline:"添加参考线",clearreferenceline:"清除参考线",addboundreferenceline:"添加边界参考线",rescale:"重置缩放",fontsetting:"字形信息",addpoint:"添加点",removepoint:"删除点",oncurve:"在曲线上",offcurve:"远离曲线",asstart:"作为开始点"}],["en-us",{copy:"Copy",paste:"Paste",cut:"Cut",del:"Del",save:"Save",undo:"Undo",redo:"Redo",rangemode:"Range Mode",pointmode:"Point Mode",order:"Order",upshape:"Bring Forward",downshape:"Send Back",reversepoints:"Change Direction",topshape:"Bring To Front",bottomshape:"Send To Back",align:"Horizontal Align",alignleft:"Align Left",aligncenter:"Align Center",alignright:"Align Right",verticalalign:"Vertical Align",alignshapes:"Align Shapes",aligntop:"Align Top",alignmiddle:"Align Middle",aligndescent:"Align Bottom",alignbaseline:"Align Baseline",rotateleft:"Rotate Left",rotateright:"Rotate Right",transform:"Transform",flip:"Flip",mirror:"Mirror",splitshapes:"Split Contours",joinshapes:"Join Contours",intersectshapes:"Intersection",tangencyshapes:"Tangency",removeshapes:"Remove",adjustpos:"Adjust Position",adjustglyf:"Adjust Glyph",addpath:"Add Contour",addshapes:"Add Shape",circle:"Circle",rect:"Rectangle",roundrect:"Rounded Rectangle",star:"Star",arrow:"Arrow",triangle:"Triangle",heart:"Heart",tel:"Tel",drop:"Drop",du:"Du Icon",setting:"Setting",gridsorption:"Adsorbed to Grid",shapesorption:"Adsorbed to Contour",showgrid:"Show Grid",moresetting:"More..",addreferenceline:"Add Reference Line",clearreferenceline:"Clear Reference Line",addboundreferenceline:"Bound Reference Line",rescale:"Rescale",fontsetting:"Font Setting",addpoint:"Add Point",removepoint:"Remove Point",oncurve:"On Curve",offcurv:"Off Curve",asstart:"First Point"}]],window.language)},function(t,e,n){"use strict";const i={Int8:1,Uint8:2,Int16:3,Uint16:4,Int32:5,Uint32:6,Fixed:7,FUnit:8,F2Dot14:11,LongDateTime:12,Char:13,String:14,Bytes:15,Uint24:20},r={};Object.keys(i).forEach(t=>{r[i[t]]=t}),i.names=r,e.a=i},function(t,e,n){"use strict";var i=n(12);e.a={clone:i.a,overwrite:i.f,debounce:i.c,throttle:i.g,equals:i.d,parseQuery:t=>t.split("&").map((function(t){return[(t=t.split("="))[0],decodeURIComponent(t[1])]})).reduce((function(t,e){return t[e[0]]=e[1],t}),{})}},function(t,e,n){"use strict";var i=n(10);e.a={computeBounding:i.a,quadraticBezier:i.d,computePath:i.b,computePathBox:i.c}},function(t,e,n){"use strict";var i=n(9);n.d(e,"a",(function(){return i.a}))},function(t,e,n){"use strict";var i=n(11);var r=new(n(40).a)([["zh-cn",{10001:"超出读取范围：${0}, ${1}",10002:"超出写入范围：${0}, ${1}",10003:"未知数据类型：${0}, ${1}",10004:"不支持svg解析",10101:"错误的ttf文件",10102:"错误的woff文件",10103:"错误的svg文件",10104:"读取ttf文件错误",10105:"读取woff文件错误",10106:"读取svg文件错误",10107:"写入ttf文件错误",10108:"写入woff文件错误",10109:"写入svg文件错误",10112:"写入svg symbol 错误",10110:"读取eot文件错误",10111:"读取eot字体错误",10200:"重复的unicode代码点，字形序号：${0}",10201:"ttf字形轮廓数据为空",10202:"不支持标志位：ARGS_ARE_XY_VALUES",10203:"未找到表：${0}",10204:"读取ttf表错误",10205:"未找到解压函数",10301:"错误的otf文件",10302:"读取otf表错误",10303:"otf字形轮廓数据为空"}],["en-us",{10001:"Reading index out of range: ${0}, ${1}",10002:"Writing index out of range: ${0}, ${1}",10003:"Unknown datatype: ${0}, ${1}",10004:"No svg parser",10101:"ttf file damaged",10102:"woff file damaged",10103:"svg file damaged",10104:"Read ttf error",10105:"Read woff error",10106:"Read svg error",10107:"Write ttf error",10108:"Write woff error",10109:"Write svg error",10112:"Write svg symbol error",10110:"Read eot error",10111:"Write eot error",10200:"Repeat unicode, glyph index: ${0}",10201:"ttf `glyph` data is empty",10202:"Not support compound glyph flag: ARGS_ARE_XY_VALUES",10203:"No ttf table: ${0}",10204:"Read ttf table data error",10205:"No zip deflate function",10301:"otf file damaged",10302:"Read otf table error",10303:"otf `glyph` data is empty"}]],"undefined"!=typeof window?window.language:"en-us");e.a={raise(t,...e){let n,s;"object"==typeof t?(n=t.number||0,s=t.data):n=t;let a=r.lang[n];if(e.length>0){const t="object"==typeof e[0]?e[0]:e;a=i.a.format(a,t)}const o=new Error(a);throw o.number=n,s&&(o.data=s),o}}},function(t,e,n){"use strict";var i=n(1),r=n(5);function s(t){const e=this.offset;void 0!==e&&t.seek(e);const n=this;return this.struct.forEach(e=>{const s=e[0],a=e[1];let o=null;switch(a){case i.a.Int8:case i.a.Uint8:case i.a.Int16:case i.a.Uint16:case i.a.Int32:case i.a.Uint32:o=i.a.names[a],n[s]=t.read(o);break;case i.a.Fixed:n[s]=t.readFixed();break;case i.a.LongDateTime:n[s]=t.readLongDateTime();break;case i.a.Bytes:n[s]=t.readBytes(t.offset,e[2]||0);break;case i.a.Char:n[s]=t.readChar();break;case i.a.String:n[s]=t.readString(t.offset,e[2]||0);break;default:r.a.raise(10003,s,a)}}),this.valueOf()}function a(t,e){const n=e[this.name];return n||r.a.raise(10203,this.name),this.struct.forEach(e=>{const s=e[0],a=e[1];let o=null;switch(a){case i.a.Int8:case i.a.Uint8:case i.a.Int16:case i.a.Uint16:case i.a.Int32:case i.a.Uint32:o=i.a.names[a],t.write(o,n[s]);break;case i.a.Fixed:t.writeFixed(n[s]);break;case i.a.LongDateTime:t.writeLongDateTime(n[s]);break;case i.a.Bytes:t.writeBytes(n[s],e[2]||0);break;case i.a.Char:t.writeChar(n[s]);break;case i.a.String:t.writeString(n[s],e[2]||0);break;default:r.a.raise(10003,s,a)}}),t}function o(){let t=0;return this.struct.forEach(e=>{const n=e[1];switch(n){case i.a.Int8:case i.a.Uint8:t+=1;break;case i.a.Int16:case i.a.Uint16:t+=2;break;case i.a.Int32:case i.a.Uint32:case i.a.Fixed:t+=4;break;case i.a.LongDateTime:t+=8;break;case i.a.Bytes:t+=e[2]||0;break;case i.a.Char:t+=1;break;case i.a.String:t+=e[2]||0;break;default:r.a.raise(10003,name,n)}}),t}function l(){const t={},e=this;return this.struct.forEach(n=>{t[n[0]]=e[n[0]]}),t}e.a={read:s,write:a,size:o,valueOf:l,create(t,e,n){class i{constructor(n){this.name=t,this.struct=e,this.offset=n}}return i.prototype.read=s,i.prototype.write=a,i.prototype.size=o,i.prototype.valueOf=l,Object.assign(i.prototype,n),i}}},function(t,e,n){"use strict";const i={on(t,e){"function"==typeof t&&(e=t,t="*"),this._listeners=this._listeners||{};let n=this._listeners[t]||[];return n.indexOf(e)<0&&(e.$type=t,n.push(e)),this._listeners[t]=n,this},once(t,e){return this.on(t,(function(n){e.call(this,n),this.un(t,e)})),this},un(t,e){if("function"==typeof t)e=t,t="*";else if(void 0===t)return delete this._listeners,this._listeners={},this;this._listeners=this._listeners||{};let n=this._listeners[t];if(n)if(e){let t=n.indexOf(e);~t&&delete n[t]}else n.length=0,delete this._listeners[t];return this},fire(t,e){this._listeners=this._listeners||{};let n=this._listeners[t];if(n){let i=this;n.forEach((function(n){(e=e||{}).type=t,n.call(i,e)}))}return"*"!==t&&this.fire("*",e),this}};e.a={mixin:t=>void 0===t?t:Object.assign(t,i)}},function(t,e,n){"use strict";var i=n(0),r=[{name:"add",title:i.a.lang.addpoint},{name:"remove",title:i.a.lang.removepoint},{name:"onCurve",title:i.a.lang.oncurve},{name:"offCurve",title:i.a.lang.offcurve},{name:"asStart",title:i.a.lang.asstart}],s=[{name:"removeshapes",title:i.a.lang.removeshapes},{name:"reversepoints",title:i.a.lang.reversepoints},{name:"cutshapes",title:i.a.lang.cut},{name:"copyshapes",title:i.a.lang.copy},{name:"order",title:i.a.lang.order,items:[{name:"topshape",title:i.a.lang.topshape},{name:"bottomshape",title:i.a.lang.bottomshape},{name:"upshape",title:i.a.lang.upshape},{name:"downshape",title:i.a.lang.downshape}]},{name:"transform",title:i.a.lang.transform,items:[{name:"rotateleft",title:i.a.lang.rotateleft},{name:"rotateright",title:i.a.lang.rotateright},{name:"flipshapes",title:i.a.lang.flip},{name:"mirrorshapes",title:i.a.lang.mirror}]},{name:"horizontalalignshapes_",title:i.a.lang.align,items:[{name:"horizontalalignshapes",align:"left",title:i.a.lang.alignleft},{name:"horizontalalignshapes",align:"center",title:i.a.lang.aligncenter},{name:"horizontalalignshapes",align:"right",title:i.a.lang.alignright}]},{name:"verticalalignshapes_",title:i.a.lang.verticalalign,items:[{name:"verticalalignshapes",align:"ascent",title:i.a.lang.aligntop},{name:"verticalalignshapes",align:"middle",title:i.a.lang.alignmiddle},{name:"verticalalignshapes",align:"descent",title:i.a.lang.aligndescent},{name:"verticalalignshapes",align:"baseline",title:i.a.lang.alignbaseline}]},{name:"addreferenceline",title:i.a.lang.addboundreferenceline}],a=[{name:"reversepoints",title:i.a.lang.reversepoints},{name:"removeshapes",title:i.a.lang.removeshapes},{name:"cutshapes",title:i.a.lang.cut},{name:"copyshapes",title:i.a.lang.copy},{name:"join",title:i.a.lang.joinshapes,items:[{name:"joinshapes",title:i.a.lang.joinshapes},{name:"intersectshapes",title:i.a.lang.intersectshapes},{name:"tangencyshapes",title:i.a.lang.tangencyshapes}]},{name:"transform",title:i.a.lang.transform,items:[{name:"rotateleft",title:i.a.lang.rotateleft},{name:"rotateright",title:i.a.lang.rotateright},{name:"flipshapes",title:i.a.lang.flip},{name:"mirrorshapes",title:i.a.lang.mirror}]},{name:"alignshapes_",title:i.a.lang.alignshapes,items:[{name:"alignshapes",align:"left",title:i.a.lang.alignleft},{name:"alignshapes",align:"center",title:i.a.lang.aligncenter},{name:"alignshapes",align:"right",title:i.a.lang.alignright},{name:"alignshapes",align:"top",title:i.a.lang.aligntop},{name:"alignshapes",align:"middle",title:i.a.lang.alignmiddle},{name:"alignshapes",align:"bottom",title:i.a.lang.aligndescent}]},{name:"horizontalalignshapes_",title:i.a.lang.align,items:[{name:"horizontalalignshapes",align:"left",title:i.a.lang.alignleft},{name:"horizontalalignshapes",align:"center",title:i.a.lang.aligncenter},{name:"horizontalalignshapes",align:"right",title:i.a.lang.alignright}]},{name:"verticalalignshapes_",title:i.a.lang.verticalalign,items:[{name:"verticalalignshapes",align:"ascent",title:i.a.lang.aligntop},{name:"verticalalignshapes",align:"middle",title:i.a.lang.alignmiddle},{name:"verticalalignshapes",align:"descent",title:i.a.lang.aligndescent},{name:"verticalalignshapes",align:"baseline",title:i.a.lang.alignbaseline}]},{name:"addreferenceline",title:i.a.lang.addboundreferenceline}],o=[{name:"addpath",title:i.a.lang.addpath},{name:"add_shapes",title:i.a.lang.addshapes,items:[{name:"addsupportshapes",type:"circle",title:i.a.lang.circle},{name:"addsupportshapes",type:"rect",title:i.a.lang.rect},{name:"addsupportshapes",type:"roundrect",title:i.a.lang.roundrect},{name:"addsupportshapes",type:"star",title:i.a.lang.star},{name:"addsupportshapes",type:"arrow",title:i.a.lang.arrow},{name:"addsupportshapes",type:"triangle",title:i.a.lang.triangle},{name:"addsupportshapes",type:"heart",title:i.a.lang.heart},{name:"addsupportshapes",type:"tel",title:i.a.lang.tel},{name:"addsupportshapes",type:"drop",title:i.a.lang.drop},{name:"addsupportshapes",type:"du",title:i.a.lang.du}]},{name:"undo",title:i.a.lang.undo},{name:"redo",title:i.a.lang.redo},{name:"paste",title:i.a.lang.paste},{name:"split",title:i.a.lang.splitshapes},{name:"setting",title:i.a.lang.setting,items:[{name:"gridsorption",title:i.a.lang.gridsorption},{name:"shapesorption",title:i.a.lang.shapesorption},{name:"showgrid",title:i.a.lang.showgrid},{name:"moresetting",title:i.a.lang.moresetting}]},{name:"addreferenceline",title:i.a.lang.addreferenceline},{name:"clearreferenceline",title:i.a.lang.clearreferenceline},{name:"rescale",title:i.a.lang.rescale},{name:"fontsetting",title:i.a.lang.fontsetting},{name:"save",title:i.a.lang.save}];e.a={point:r,shape:s,shapes:a,editor:o}},function(t,e,n){"use strict";function i(t,e,n,i,r){e=void 0===e?1:e,n=void 0===n?1:n;const s=i||0,a=r||0;let o;for(let i=0,r=t.length;i<r;i++)o=t[i],o.x=e*(o.x+s),o.y=n*(o.y+a);return t}n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return o})),n.d(e,"d",(function(){return l})),n.d(e,"b",(function(){return u}));var i=n(31);function r(t){if(0===t.length)return!1;let e=t[0].x,n=t[0].x,i=t[0].y,r=t[0].y;for(let s=1;s<t.length;s++){const a=t[s];a.x<e&&(e=a.x),a.x>n&&(n=a.x),a.y<i&&(i=a.y),a.y>r&&(r=a.y)}return{x:e,y:i,width:n-e,height:r-i}}function s(t,e,n){let i,s,a=t.x+n.x-2*e.x;i=0===a?.5:(t.x-e.x)/a,a=t.y+n.y-2*e.y,s=0===a?.5:(t.y-e.y)/a,i=Math.max(Math.min(i,1),0),s=Math.max(Math.min(s,1),0);const o=1-i,l=1-s;return r([t,n,{x:o*o*t.x+2*o*i*e.x+i*i*n.x,y:o*o*t.y+2*o*i*e.y+i*i*n.y},{x:l*l*t.x+2*l*s*e.x+s*s*n.x,y:l*l*t.y+2*l*s*e.y+s*s*n.y}])}function a(...t){let e=[];if(1===t.length)e=t[0];else for(let n=0,i=t.length;n<i;n++)Array.prototype.splice.apply(e,[e.length,0].concat(t[n]));return r(e)}const o=r,l=s,u=function(...t){const e=[],n=function(t,n,i,r){if("L"===t)e.push(n),e.push(i);else if("Q"===t){const t=s(n,i,r);e.push(t),e.push({x:t.x+t.width,y:t.y+t.height})}};if(1===t.length)Object(i.a)(t[0],(t,n,i,r)=>{if("L"===t)e.push(n),e.push(i);else if("Q"===t){const t=s(n,i,r);e.push(t),e.push({x:t.x+t.width,y:t.y+t.height})}});else for(let e=0,r=t.length;e<r;e++)Object(i.a)(t[e],n);return r(e)}},function(t,e,n){"use strict";e.a={decodeHTML:t=>String(t).replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&#([\d]+);/g,(t,e)=>String.fromCodePoint(parseInt(e,10))),encodeHTML:t=>String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),getLength:t=>String(t).replace(/[^\x00-\xff]/g,"11").length,format:(t,e)=>t.replace(/\$\{([\w.]+)\}/g,(t,n)=>{const i=n.split(".");let r,s=e;for(;null!=s&&(r=i.shift());)s=s[r];return null!=s?s:""}),pad:(t,e,n)=>(t=String(t)).length>e?t.slice(t.length-e):new Array(e-t.length+1).join(n||"0")+t,hashcode(t){if(!t)return 0;let e=0;for(let n=0,i=t.length;n<i;n++)e=34359738367&31*e+t.charCodeAt(n);return e}}},function(t,e,n){"use strict";function i(t){for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}function r(t,...e){return function(...n){const i=e.concat(n);return t.apply(this,i)}}function s(t,e,n){return e?((n=n||Object.keys(e)).forEach(n=>{t[n]&&"object"==typeof t[n]&&e[n]&&"object"==typeof e[n]?s(t[n],e[n]):t[n]=e[n]}),t):t}function a(t){if(!t||"object"!=typeof t)return t;let e=t;if(null!=(n=t)&&"Array"===toString.call(n).slice(8,-1))e=t.slice().map(a);else if(function(t){return null!=t&&"Object"===toString.call(t).slice(8,-1)}(t)&&"isPrototypeOf"in t){e={};for(const n of Object.keys(t))e[n]=a(t[n])}var n;return e}function o(t,e){let n,i,r,s=0;const a=function(){s=new Date,i=null,r=t.apply(n,void 0)};return function(...o){const l=new Date,u=e-(l-s);return n=this,u<=0?(clearTimeout(i),i=null,s=l,r=t.apply(n,o)):i||(i=setTimeout(a,u)),r}}function l(t,e,n){let i,r;return function(...s){const a=this,o=n&&!i;return clearTimeout(i),i=setTimeout((function(){i=null,n||(r=t.apply(a,s))}),e),o&&(r=t.apply(a,s)),r}}function u(t,e,n){if(t===e)return!0;if(null==t&&null==e)return!0;if(null==t&&null!=e||null!=t&&null==e)return!1;if(!(n=n||("object"==typeof t?Object.keys(t):[])).length)return t===e;let i=!0;for(let r,s=0,a=n.length;i&&s<a;s++)r=n[s],i=t[r]&&"object"==typeof t[r]&&e[r]&&"object"==typeof e[r]?i&&u(t[r],e[r]):i&&t[r]===e[r];return i}n.d(e,"e",(function(){return i})),n.d(e,"b",(function(){return r})),n.d(e,"f",(function(){return s})),n.d(e,"a",(function(){return a})),n.d(e,"g",(function(){return o})),n.d(e,"c",(function(){return l})),n.d(e,"d",(function(){return u}))},function(t,e,n){"use strict";var i=n(63),r=n(64);function s(t){if(!t)return t;let e="";for(let n,i=0,r=t.length;i<r;i++)n=t.charCodeAt(i),0!==n&&(e+=String.fromCharCode(n));return e}e.a={stringify:s,escape:t=>t?String(t).replace(/[\uff-\uffff]/g,t=>escape(t).replace("%","\\")):t,getString(t){let e="";for(let n=0,i=t.length;n<i;n++)e+=String.fromCharCode(t[n]);return e},getUnicodeName(t){const e=i.a[t];return void 0!==e?r.a[e]:"uni"+t.toString(16).toUpperCase()},toUTF8Bytes(t){const e=[];for(let n=0,i=(t=s(t)).length;n<i;n++)if(t.charCodeAt(n)<=127)e.push(t.charCodeAt(n));else{const i=t.codePointAt(n);i>65535&&n++;const r=encodeURIComponent(String.fromCodePoint(i)).slice(1).split("%");for(let t=0;t<r.length;t++)e.push(parseInt(r[t],16))}return e},toUCS2Bytes(t){const e=[];for(let n,i=0,r=(t=s(t)).length;i<r;i++)n=t.charCodeAt(i),e.push(n>>8),e.push(255&n);return e},toPascalStringBytes(t){const e=[],n=t?t.length<256?t.length:255:0;e.push(n);for(let n=0,i=t.length;n<i;n++){const i=t.charCodeAt(n);e.push(i<128?i:42)}return e},getUTF8String(t){let e="";for(let n=0,i=t.length;n<i;n++)t[n]<127?e+=String.fromCharCode(t[n]):e+="%"+(256+t[n]).toString(16).slice(1);return unescape(e)},getUCS2String(t){let e="";for(let n=0,i=t.length;n<i;n+=2)e+=String.fromCharCode((t[n]<<8)+t[n+1]);return e},getPascalString(t){const e=[];let n=0;const i=t.length;for(;n<i;){let r=t[n++],a="";for(;r-- >0&&n<i;)a+=String.fromCharCode(t[n++]);a=s(a),e.push(a)}return e}}},function(t,e,n){"use strict";var i=n(19);e.a={interpolate:function(t){const e=[];for(let n=0,i=t.length;n<i;n++){const r=n===i-1?0:n+1;e.push(t[n]),t[n].onCurve||t[r].onCurve||e.push({x:(t[n].x+t[r].x)/2,y:(t[n].y+t[r].y)/2,onCurve:!0})}return e},deInterpolate:function(t){const e=[];for(let n=0,i=t.length;n<i;n++){const r=n===i-1?0:n+1,s=0===n?i-1:n-1;!t[s].onCurve&&t[n].onCurve&&!t[r].onCurve&&Math.abs(2*t[n].x-t[s].x-t[r].x)<.001&&Math.abs(2*t[n].y-t[s].y-t[r].y)<.001||e.push(t[n])}return e},isClockWise:function(t){if(t.length<3)return 0;let e=0;for(let n=0,i=t.length;n<i;n++){const r=t[n],s=0===n?t[i-1]:t[n-1],a=n===i-1?t[0]:t[n+1],o=(r.x-s.x)*(a.y-r.y)-(r.y-s.y)*(a.x-r.x);o<0?e--:o>0&&e++}return 0===e?0:e<0?1:-1},getPathHash:function(t){let e=0;return t.forEach(t=>{e=2147483647&131*e+Object(i.b)(t)+(t.onCurve?1:0)}),e},removeOverlapPoints:function(t){const e={},n=[];for(let i=0,r=t.length;i<r;i++){const r=31*t[i].x+t[i].y;e[r]||(n.push(t[i]),e[r]=1)}return n},makeLink:function(t){for(let e=0,n=t.length;e<n;e++){const i=t[e],r=0===e?t[n-1]:t[e-1],s=e===n-1?t[0]:t[e+1];i.index=e,i.next=s,i.prev=r}return t},scale:function(t,e){for(let n=0,i=t.length;n<i;n++){const i=t[n];i.x*=e,i.y*=e}return t},clone:function(t){return t?t.map(t=>{const e={x:t.x,y:t.y};return t.onCurve&&(e.onCurve=!0),e}):t}}},function(t,e,n){var i,r,s=new function(a){var o=new function(){var t=/^(statics|enumerable|beans|preserve)$/,e=[].forEach||function(t,e){for(var n=0,i=this.length;n<i;n++)t.call(e,this[n],n,this)},n=function(t,e){for(var n in this)this.hasOwnProperty(n)&&t.call(e,this[n],n,this)},i=Object.create||function(t){return{__proto__:t}},r=Object.getOwnPropertyDescriptor||function(t,e){var n=t.__lookupGetter__&&t.__lookupGetter__(e);return n?{get:n,set:t.__lookupSetter__(e),enumerable:!0,configurable:!0}:t.hasOwnProperty(e)?{value:t[e],enumerable:!0,configurable:!0,writable:!0}:null},s=Object.defineProperty||function(t,e,n){return(n.get||n.set)&&t.__defineGetter__?(n.get&&t.__defineGetter__(e,n.get),n.set&&t.__defineSetter__(e,n.set)):t[e]=n.value,t},a=function(t,e,n){return delete t[e],s(t,e,n)};function l(e,n,i,s,l){var u={};function h(t,h){"string"==typeof(h=h||(h=r(n,t))&&(h.get?h:h.value))&&"#"===h[0]&&(h=e[h.substring(1)]||h);var c,d="function"==typeof h,f=h,p=l||d&&!h.base?h&&h.get?t in e:e[t]:null;l&&p||(d&&p&&(h.base=p),d&&!1!==s&&(c=t.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(u[c[3].toLowerCase()+c[4]]=c[2]),f&&!d&&f.get&&"function"==typeof f.get&&o.isPlainObject(f)||(f={value:f,writable:!0}),(r(e,t)||{configurable:!0}).configurable&&(f.configurable=!0,f.enumerable=i),a(e,t,f))}if(n){for(var c in n)n.hasOwnProperty(c)&&!t.test(c)&&h(c);for(var c in u){var d=u[c],f=e["set"+d],p=e["get"+d]||f&&e["is"+d];!p||!0!==s&&0!==p.length||h(c,{get:p,set:f})}}return e}function u(t,i,r){return t&&("length"in t&&!t.getLength&&"number"==typeof t.length?e:n).call(t,i,r=r||t),r}function h(t,e,n){for(var i in e)!e.hasOwnProperty(i)||n&&n[i]||(t[i]=e[i]);return t}return l((function(){for(var t=0,e=arguments.length;t<e;t++)h(this,arguments[t])}),{inject:function(t){if(t){var e=!0===t.statics?t:t.statics,n=t.beans,i=t.preserve;e!==t&&l(this.prototype,t,t.enumerable,n,i),l(this,e,!0,n,i)}for(var r=1,s=arguments.length;r<s;r++)this.inject(arguments[r]);return this},extend:function(){for(var t,e,n=this,r=0,s=arguments.length;r<s&&!(t=arguments[r].initialize);r++);return e=(t=t||function(){n.apply(this,arguments)}).prototype=i(this.prototype),a(e,"constructor",{value:t,writable:!0,configurable:!0}),l(t,this,!0),arguments.length&&this.inject.apply(t,arguments),t.base=n,t}},!0).inject({inject:function(){for(var t=0,e=arguments.length;t<e;t++){var n=arguments[t];n&&l(this,n,n.enumerable,n.beans,n.preserve)}return this},extend:function(){var t=i(this);return t.inject.apply(t,arguments)},each:function(t,e){return u(this,t,e)},set:function(t){return h(this,t)},clone:function(){return new this.constructor(this)},statics:{each:u,create:i,define:a,describe:r,set:h,clone:function(t){return h(new t.constructor,t)},isPlainObject:function(t){var e=null!=t&&t.constructor;return e&&(e===Object||e===o||"Object"===e.name)},pick:function(t,e){return void 0!==t?t:e}}})};t.exports=o,o.inject({toString:function(){return null!=this._id?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+o.each(this,(function(t,e){if(!/^_/.test(e)){var n=typeof t;this.push(e+": "+("number"===n?c.instance.number(t):"string"===n?"'"+t+"'":t))}}),[]).join(", ")+" }"},getClassName:function(){return this._class||""},exportJSON:function(t){return o.exportJSON(this,t)},toJSON:function(){return o.serialize(this)},_set:function(t,e,n){if(t&&(n||o.isPlainObject(t))){for(var i=Object.keys(t._filtering||t),r=0,s=i.length;r<s;r++){var a=i[r];if(!e||!e[a]){var l=t[a];void 0!==l&&(this[a]=l)}}return!0}},statics:{exports:{enumerable:!0},extend:function t(){var e=t.base.apply(this,arguments),n=e.prototype._class;return n&&!o.exports[n]&&(o.exports[n]=e),e},equals:function(t,e){if(t===e)return!0;if(t&&t.equals)return t.equals(e);if(e&&e.equals)return e.equals(t);if(t&&e&&"object"==typeof t&&"object"==typeof e){if(Array.isArray(t)&&Array.isArray(e)){if((n=t.length)!==e.length)return!1;for(;n--;)if(!o.equals(t[n],e[n]))return!1}else{var n,i=Object.keys(t);if((n=i.length)!==Object.keys(e).length)return!1;for(;n--;){var r=i[n];if(!e.hasOwnProperty(r)||!o.equals(t[r],e[r]))return!1}}return!0}return!1},read:function(t,e,n,i){if(this===o){var r=this.peek(t,e);return t.__index++,r}var s=this.prototype._readIndex,a=e||s&&t.__index||0;i||(i=t.length-a);var l=t[a];return l instanceof this||n&&n.readNull&&null==l&&i<=1?(s&&(t.__index=a+1),l&&n&&n.clone?l.clone():l):(l=o.create(this.prototype),s&&(l.__read=!0),l=l.initialize.apply(l,a>0||i<t.length?Array.prototype.slice.call(t,a,a+i):t)||l,s&&(t.__index=a+l.__read,l.__read=void 0),l)},peek:function(t,e){return t[t.__index=e||t.__index||0]},remain:function(t){return t.length-(t.__index||0)},readAll:function(t,e,n){for(var i,r=[],s=e||0,a=t.length;s<a;s++)r.push(Array.isArray(i=t[s])?this.read(i,0,n):this.read(t,s,n,1));return r},readNamed:function(t,e,n,i,r){var s=this.getNamed(t,e),a=void 0!==s;if(a){var l=t._filtered;l||((l=t._filtered=o.create(t[0]))._filtering=t[0]),l[e]=void 0}return this.read(a?[s]:t,n,i,r)},getNamed:function(t,e){var n=t[0];if(void 0===t._hasObject&&(t._hasObject=1===t.length&&o.isPlainObject(n)),t._hasObject)return e?n[e]:t._filtered||n},hasNamed:function(t,e){return!!this.getNamed(t,e)},isPlainValue:function(t,e){return this.isPlainObject(t)||Array.isArray(t)||e&&"string"==typeof t},serialize:function(t,e,n,i){e=e||{};var r,s=!i;if(s&&(e.formatter=new c(e.precision),i={length:0,definitions:{},references:{},add:function(t,e){var n="#"+t._id,i=this.references[n];if(!i){this.length++;var r=e.call(t),s=t._class;s&&r[0]!==s&&r.unshift(s),this.definitions[n]=r,i=this.references[n]=[n]}return i}}),t&&t._serialize){r=t._serialize(e,i);var a=t._class;!a||n||r._compact||r[0]===a||r.unshift(a)}else if(Array.isArray(t)){r=[];for(var l=0,u=t.length;l<u;l++)r[l]=o.serialize(t[l],e,n,i);n&&(r._compact=!0)}else if(o.isPlainObject(t)){r={};var h=Object.keys(t);for(l=0,u=h.length;l<u;l++){var d=h[l];r[d]=o.serialize(t[d],e,n,i)}}else r="number"==typeof t?e.formatter.number(t,e.precision):t;return s&&i.length>0?[["dictionary",i.definitions],r]:r},deserialize:function(t,e,n,i){var r=t,s=!n;if(n=n||{},Array.isArray(t)){var a=t[0],l="dictionary"===a;if(1==t.length&&/^#/.test(a))return n.dictionary[a];a=o.exports[a],r=[],i&&(n.dictionary=r);for(var u=a?1:0,h=t.length;u<h;u++)r.push(o.deserialize(t[u],e,n,l));if(a){var c=r;e?r=e(a,c):(r=o.create(a.prototype),a.apply(r,c))}}else if(o.isPlainObject(t))for(var d in r={},i&&(n.dictionary=r),t)r[d]=o.deserialize(t[d],e,n);return s&&t&&t.length&&"dictionary"===t[0][0]?r[1]:r},exportJSON:function(t,e){var n=o.serialize(t,e);return e&&!1===e.asString?n:JSON.stringify(n)},importJSON:function(t,e){return o.deserialize("string"==typeof t?JSON.parse(t):t,(function(t,n){var i=e&&e.constructor===t?e:o.create(t.prototype),r=i===e;if(1===n.length&&i instanceof C&&(r||!(i instanceof T))){var s=n[0];o.isPlainObject(s)&&(s.insert=!1)}return t.apply(i,n),r&&(e=null),i}))},splice:function(t,e,n,i){var r=e&&e.length,s=void 0===n;(n=s?t.length:n)>t.length&&(n=t.length);for(var a=0;a<r;a++)e[a]._index=n+a;if(s)return t.push.apply(t,e),[];var o=[n,i];e&&o.push.apply(o,e);for(var l=t.splice.apply(t,o),u=(a=0,l.length);a<u;a++)l[a]._index=void 0;for(a=n+r,u=t.length;a<u;a++)t[a]._index=a;return l},capitalize:function(t){return t.replace(/\b[a-z]/g,(function(t){return t.toUpperCase()}))},camelize:function(t){return t.replace(/-(.)/g,(function(t,e){return e.toUpperCase()}))},hyphenate:function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var l={on:function(t,e){if("string"!=typeof t)o.each(t,(function(t,e){this.on(e,t)}),this);else{var n=this._eventTypes,i=n&&n[t],r=this._callbacks=this._callbacks||{};-1===(r=r[t]=r[t]||[]).indexOf(e)&&(r.push(e),i&&i.install&&1===r.length&&i.install.call(this,t))}return this},off:function(t,e){if("string"==typeof t){var n,i=this._eventTypes,r=i&&i[t],s=this._callbacks&&this._callbacks[t];return s&&(!e||-1!==(n=s.indexOf(e))&&1===s.length?(r&&r.uninstall&&r.uninstall.call(this,t),delete this._callbacks[t]):-1!==n&&s.splice(n,1)),this}o.each(t,(function(t,e){this.off(e,t)}),this)},once:function(t,e){return this.on(t,(function(){e.apply(this,arguments),this.off(t,e)}))},emit:function(t,e){var n=this._callbacks&&this._callbacks[t];if(!n)return!1;for(var i=[].slice.call(arguments,1),r=0,s=(n=n.slice()).length;r<s;r++)if(!1===n[r].apply(this,i)){e&&e.stop&&e.stop();break}return!0},responds:function(t){return!(!this._callbacks||!this._callbacks[t])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(t){var e=this._callbacks,n=t?"install":"uninstall";for(var i in e)if(e[i].length>0){var r=this._eventTypes,s=r&&r[i],a=s&&s[n];a&&a.call(this,i)}},statics:{inject:function t(e){var n=e._events;if(n){var i={};o.each(n,(function(t,n){var r="string"==typeof t,s=r?t:n,a=o.capitalize(s),l=s.substring(2).toLowerCase();i[l]=r?{}:t,s="_"+s,e["get"+a]=function(){return this[s]},e["set"+a]=function(t){var e=this[s];e&&this.off(l,e),t&&this.on(l,t),this[s]=t}})),e._eventTypes=i}return t.base.apply(this,arguments)}}},u=o.extend({_class:"PaperScope",initialize:function t(){s=this,this.settings=new o({applyMatrix:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this.palettes=[],this._id=t._id++,t._scopes[this._id]=this;var e=t.prototype;if(!this.support){var n=it.getContext(1,1);e.support={nativeDash:"setLineDash"in n||"mozDash"in n,nativeBlendModes:rt.nativeModes},it.release(n)}if(!this.browser){var i=navigator.userAgent.toLowerCase(),r=(/(win)/.exec(i)||/(mac)/.exec(i)||/(linux)/.exec(i)||[])[0],a=e.browser={platform:r};r&&(a[r]=!0),i.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:([.\d]+))?/g,(function(t,e,n,i,r){if(!a.chrome){var s="opera"===e?i:n;"trident"===e&&(s=r,e="msie"),a.version=s,a.versionNumber=parseFloat(s),a.name=e,a[e]=!0}})),a.chrome&&delete a.webkit,a.atom&&delete a.chrome}},version:"0.9.25",getView:function(){return this.project&&this.project.getView()},getPaper:function(){return this},execute:function(t,e,n){s.PaperScript.execute(t,this,e,n),W.updateFocus()},install:function(t){var e=this;for(var n in o.each(["project","view","tool"],(function(n){o.define(t,n,{configurable:!0,get:function(){return e[n]}})})),this)!/^_/.test(n)&&this[n]&&(t[n]=this[n])},setup:function(t){return s=this,this.project=new b(t),this},activate:function(){s=this},clear:function(){for(var t=this.projects.length-1;t>=0;t--)this.projects[t].remove();for(t=this.tools.length-1;t>=0;t--)this.tools[t].remove();for(t=this.palettes.length-1;t>=0;t--)this.palettes[t].remove()},remove:function(){this.clear(),delete u._scopes[this._id]},statics:new function(){function t(t){return t+="Attribute",function(e,n){return e[t](n)||e[t]("data-paper-"+n)}}return{_scopes:{},_id:0,get:function(t){return this._scopes[t]||null},getAttribute:t("get"),hasAttribute:t("has")}}}),h=o.extend(l,{initialize:function(t){this._scope=s,this._index=this._scope[this._list].push(this)-1,!t&&this._scope[this._reference]||this.activate()},activate:function(){if(!this._scope)return!1;var t=this._scope[this._reference];return t&&t!==this&&t.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",t),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return null!=this._index&&(o.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)}}),c=o.extend({initialize:function(t){this.precision=t||5,this.multiplier=Math.pow(10,this.precision)},number:function(t){return Math.round(t*this.multiplier)/this.multiplier},pair:function(t,e,n){return this.number(t)+(n||",")+this.number(e)},point:function(t,e){return this.number(t.x)+(e||",")+this.number(t.y)},size:function(t,e){return this.number(t.width)+(e||",")+this.number(t.height)},rectangle:function(t,e){return this.point(t,e)+(e||",")+this.size(t,e)}});c.instance=new c;var d=new function(){var t=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],e=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],n=Math.abs,i=Math.sqrt,r=Math.pow;function s(t,e,n){return t<e?e:t>n?n:t}return{TOLERANCE:1e-6,EPSILON:1e-12,MACHINE_EPSILON:112e-18,CURVETIME_EPSILON:4e-7,GEOMETRIC_EPSILON:2e-7,WINDING_EPSILON:2e-7,TRIGONOMETRIC_EPSILON:1e-7,CLIPPING_EPSILON:1e-7,KAPPA:4*(i(2)-1)/3,isZero:function(t){return t>=-1e-12&&t<=1e-12},integrate:function(n,i,r,s){for(var a=t[s-2],o=e[s-2],l=.5*(r-i),u=l+i,h=0,c=s+1>>1,d=1&s?o[h++]*n(u):0;h<c;){var f=l*a[h];d+=o[h++]*(n(u+f)+n(u-f))}return l*d},findRoot:function(t,e,i,r,s,a,o){for(var l=0;l<a;l++){var u=t(i),h=u/e(i),c=i-h;if(n(h)<o)return c;u>0?(s=i,i=c<=r?.5*(r+s):c):(r=i,i=c>=s?.5*(r+s):c)}return i},solveQuadratic:function(t,e,a,o,l,u){var h,c,d=0,f=l-1e-12,p=u+1e-12,g=1/0,m=e;if(0!==(c=(e/=-2)*e-t*a)&&n(c)<112e-18){var y=r(n(t*e*a),1/3);if(y<1e-8){var v=r(10,n(Math.floor(Math.log(y)*Math.LOG10E)));isFinite(v)||(v=0),c=(e*=v)*e-(t*=v)*(a*=v)}}if(n(t)<1e-12){if(n(m)<1e-12)return n(a)<1e-12?-1:0;h=-a/m}else if(c>=-112e-18){var _=c<0?0:i(c),x=e+(e<0?-_:_);0===x?g=-(h=a/t):(h=x/t,g=a/x)}return isFinite(h)&&(null==l||h>f&&h<p)&&(o[d++]=null==l?h:s(h,l,u)),g!==h&&isFinite(g)&&(null==l||g>f&&g<p)&&(o[d++]=null==l?g:s(g,l,u)),d},solveCubic:function(t,e,a,o,l,u,h){var c,f,p,g=0;if(n(t)<1e-12)t=e,f=a,p=o,c=1/0;else if(n(o)<1e-12)f=e,p=a,c=0;else{var m,y,v,_,x,w,b;if(v=((b=t*(c=-e/t/3))+(f=b+e))*c+(p=f*c+a),x=r(n(_=(y=p*c+o)/t),1/3),(m=c-(w=_<0?-1:1)*(x=(_=-v/t)>0?1.3247179572*Math.max(x,i(_)):x))!==c){do{if(y=(p=(f=(b=t*(c=m))+e)*c+a)*c+o,(m=0===(v=(b+f)*c+p)?c:c-y/v/(1+112e-18))===c){c=m;break}}while(w*m>w*c);n(t)*c*c>n(o/c)&&(f=((p=-o/c)-a)/c)}}g=d.solveQuadratic(t,f,p,l,u,h);return isFinite(c)&&(0===g||c!==l[g-1])&&(null==u||c>u-1e-12&&c<h+1e-12)&&(l[g++]=null==u?c:s(c,u,h)),g}}},f={_id:1,_pools:{},get:function(t){if(t){var e=t._class,n=this._pools[e];return n||(n=this._pools[e]={_id:1}),n._id++}return this._id++}},p=o.extend({_class:"Point",_readIndex:!0,initialize:function(t,e){var n=typeof t;if("number"===n){var i="number"==typeof e;this.x=t,this.y=i?e:t,this.__read&&(this.__read=i?2:1)}else"undefined"===n||null===t?(this.x=this.y=0,this.__read&&(this.__read=null===t?1:0)):(Array.isArray(t)?(this.x=t[0],this.y=t.length>1?t[1]:t[0]):null!=t.x?(this.x=t.x,this.y=t.y):null!=t.width?(this.x=t.width,this.y=t.height):null!=t.angle?(this.x=t.length,this.y=0,this.setAngle(t.angle)):(this.x=this.y=0,this.__read&&(this.__read=0)),this.__read&&(this.__read=1))},set:function(t,e){return this.x=t,this.y=e,this},equals:function(t){return this===t||t&&(this.x===t.x&&this.y===t.y||Array.isArray(t)&&this.x===t[0]&&this.y===t[1])||!1},clone:function(){return new p(this.x,this.y)},toString:function(){var t=c.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(t){if(this.isZero()){var e=this._angle||0;this.set(Math.cos(e)*t,Math.sin(e)*t)}else{var n=t/this.getLength();d.isZero(n)&&this.getAngle(),this.set(this.x*n,this.y*n)}},getAngle:function(){return 180*this.getAngleInRadians.apply(this,arguments)/Math.PI},setAngle:function(t){this.setAngleInRadians.call(this,t*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var t=p.read(arguments),e=this.getLength()*t.getLength();if(d.isZero(e))return NaN;var n=this.dot(t)/e;return Math.acos(n<-1?-1:n>1?1:n)}return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(t){if(this._angle=t,!this.isZero()){var e=this.getLength();this.set(Math.cos(t)*e,Math.sin(t)*e)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var t=p.read(arguments);return 180*Math.atan2(this.cross(t),this.dot(t))/Math.PI},getDistance:function(){var t=p.read(arguments),e=t.x-this.x,n=t.y-this.y,i=e*e+n*n,r=o.read(arguments);return r?i:Math.sqrt(i)},normalize:function(t){void 0===t&&(t=1);var e=this.getLength(),n=0!==e?t/e:0,i=new p(this.x*n,this.y*n);return n>=0&&(i._angle=this._angle),i},rotate:function(t,e){if(0===t)return this.clone();t=t*Math.PI/180;var n=e?this.subtract(e):this,i=Math.sin(t),r=Math.cos(t);return n=new p(n.x*r-n.y*i,n.x*i+n.y*r),e?n.add(e):n},transform:function(t){return t?t._transformPoint(this):this},add:function(){var t=p.read(arguments);return new p(this.x+t.x,this.y+t.y)},subtract:function(){var t=p.read(arguments);return new p(this.x-t.x,this.y-t.y)},multiply:function(){var t=p.read(arguments);return new p(this.x*t.x,this.y*t.y)},divide:function(){var t=p.read(arguments);return new p(this.x/t.x,this.y/t.y)},modulo:function(){var t=p.read(arguments);return new p(this.x%t.x,this.y%t.y)},negate:function(){return new p(-this.x,-this.y)},isInside:function(){return v.read(arguments).contains(this)},isClose:function(){var t=p.read(arguments),e=o.read(arguments);return this.getDistance(t)<e},isCollinear:function(){var t=p.read(arguments);return p.isCollinear(this.x,this.y,t.x,t.y)},isColinear:"#isCollinear",isOrthogonal:function(){var t=p.read(arguments);return p.isOrthogonal(this.x,this.y,t.x,t.y)},isZero:function(){return d.isZero(this.x)&&d.isZero(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},dot:function(){var t=p.read(arguments);return this.x*t.x+this.y*t.y},cross:function(){var t=p.read(arguments);return this.x*t.y-this.y*t.x},project:function(){var t=p.read(arguments),e=t.isZero()?0:this.dot(t)/t.dot(t);return new p(t.x*e,t.y*e)},statics:{min:function(){var t=p.read(arguments),e=p.read(arguments);return new p(Math.min(t.x,e.x),Math.min(t.y,e.y))},max:function(){var t=p.read(arguments),e=p.read(arguments);return new p(Math.max(t.x,e.x),Math.max(t.y,e.y))},random:function(){return new p(Math.random(),Math.random())},isCollinear:function(t,e,n,i){return Math.abs(t*i-e*n)<=1e-7*Math.sqrt((t*t+e*e)*(n*n+i*i))},isOrthogonal:function(t,e,n,i){return Math.abs(t*n+e*i)<=1e-7*Math.sqrt((t*t+e*e)*(n*n+i*i))}}},o.each(["round","ceil","floor","abs"],(function(t){var e=Math[t];this[t]=function(){return new p(e(this.x),e(this.y))}}),{})),g=p.extend({initialize:function(t,e,n,i){this._x=t,this._y=e,this._owner=n,this._setter=i},set:function(t,e,n){return this._x=t,this._y=e,n||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner[this._setter](this)}}),m=o.extend({_class:"Size",_readIndex:!0,initialize:function(t,e){var n=typeof t;if("number"===n){var i="number"==typeof e;this.width=t,this.height=i?e:t,this.__read&&(this.__read=i?2:1)}else"undefined"===n||null===t?(this.width=this.height=0,this.__read&&(this.__read=null===t?1:0)):(Array.isArray(t)?(this.width=t[0],this.height=t.length>1?t[1]:t[0]):null!=t.width?(this.width=t.width,this.height=t.height):null!=t.x?(this.width=t.x,this.height=t.y):(this.width=this.height=0,this.__read&&(this.__read=0)),this.__read&&(this.__read=1))},set:function(t,e){return this.width=t,this.height=e,this},equals:function(t){return t===this||t&&(this.width===t.width&&this.height===t.height||Array.isArray(t)&&this.width===t[0]&&this.height===t[1])||!1},clone:function(){return new m(this.width,this.height)},toString:function(){var t=c.instance;return"{ width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.width),e.number(this.height)]},add:function(){var t=m.read(arguments);return new m(this.width+t.width,this.height+t.height)},subtract:function(){var t=m.read(arguments);return new m(this.width-t.width,this.height-t.height)},multiply:function(){var t=m.read(arguments);return new m(this.width*t.width,this.height*t.height)},divide:function(){var t=m.read(arguments);return new m(this.width/t.width,this.height/t.height)},modulo:function(){var t=m.read(arguments);return new m(this.width%t.width,this.height%t.height)},negate:function(){return new m(-this.width,-this.height)},isZero:function(){return d.isZero(this.width)&&d.isZero(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(t,e){return new m(Math.min(t.width,e.width),Math.min(t.height,e.height))},max:function(t,e){return new m(Math.max(t.width,e.width),Math.max(t.height,e.height))},random:function(){return new m(Math.random(),Math.random())}}},o.each(["round","ceil","floor","abs"],(function(t){var e=Math[t];this[t]=function(){return new m(e(this.width),e(this.height))}}),{})),y=m.extend({initialize:function(t,e,n,i){this._width=t,this._height=e,this._owner=n,this._setter=i},set:function(t,e,n){return this._width=t,this._height=e,n||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(t){this._width=t,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(t){this._height=t,this._owner[this._setter](this)}}),v=o.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(t,e,n,i){var r=typeof t,s=0;if("number"===r?(this.x=t,this.y=e,this.width=n,this.height=i,s=4):"undefined"===r||null===t?(this.x=this.y=this.width=this.height=0,s=null===t?1:0):1===arguments.length&&(Array.isArray(t)?(this.x=t[0],this.y=t[1],this.width=t[2],this.height=t[3],s=1):void 0!==t.x||void 0!==t.width?(this.x=t.x||0,this.y=t.y||0,this.width=t.width||0,this.height=t.height||0,s=1):void 0===t.from&&void 0===t.to&&(this.x=this.y=this.width=this.height=0,this._set(t),s=1)),!s){var a=p.readNamed(arguments,"from"),l=o.peek(arguments);if(this.x=a.x,this.y=a.y,l&&void 0!==l.x||o.hasNamed(arguments,"to")){var u=p.readNamed(arguments,"to");this.width=u.x-a.x,this.height=u.y-a.y,this.width<0&&(this.x=u.x,this.width=-this.width),this.height<0&&(this.y=u.y,this.height=-this.height)}else{var h=m.read(arguments);this.width=h.width,this.height=h.height}s=arguments.__index}this.__read&&(this.__read=s)},set:function(t,e,n,i){return this.x=t,this.y=e,this.width=n,this.height=i,this},clone:function(){return new v(this.x,this.y,this.width,this.height)},equals:function(t){var e=o.isPlainValue(t)?v.read(arguments):t;return e===this||e&&this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height||!1},toString:function(){var t=c.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+", width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y),e.number(this.width),e.number(this.height)]},getPoint:function(t){return new(t?p:g)(this.x,this.y,this,"setPoint")},setPoint:function(){var t=p.read(arguments);this.x=t.x,this.y=t.y},getSize:function(t){return new(t?m:y)(this.width,this.height,this,"setSize")},setSize:function(){var t=m.read(arguments);this._fixX&&(this.x+=(this.width-t.width)*this._fixX),this._fixY&&(this.y+=(this.height-t.height)*this._fixY),this.width=t.width,this.height=t.height,this._fixW=1,this._fixH=1},getLeft:function(){return this.x},setLeft:function(t){this._fixW||(this.width-=t-this.x),this.x=t,this._fixX=0},getTop:function(){return this.y},setTop:function(t){this._fixH||(this.height-=t-this.y),this.y=t,this._fixY=0},getRight:function(){return this.x+this.width},setRight:function(t){void 0!==this._fixX&&1!==this._fixX&&(this._fixW=0),this._fixW?this.x=t-this.width:this.width=t-this.x,this._fixX=1},getBottom:function(){return this.y+this.height},setBottom:function(t){void 0!==this._fixY&&1!==this._fixY&&(this._fixH=0),this._fixH?this.y=t-this.height:this.height=t-this.y,this._fixY=1},getCenterX:function(){return this.x+.5*this.width},setCenterX:function(t){this.x=t-.5*this.width,this._fixX=.5},getCenterY:function(){return this.y+.5*this.height},setCenterY:function(t){this.y=t-.5*this.height,this._fixY=.5},getCenter:function(t){return new(t?p:g)(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var t=p.read(arguments);return this.setCenterX(t.x),this.setCenterY(t.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return 0===this.width||0===this.height},contains:function(t){return t&&void 0!==t.width||4==(Array.isArray(t)?t:arguments).length?this._containsRectangle(v.read(arguments)):this._containsPoint(p.read(arguments))},_containsPoint:function(t){var e=t.x,n=t.y;return e>=this.x&&n>=this.y&&e<=this.x+this.width&&n<=this.y+this.height},_containsRectangle:function(t){var e=t.x,n=t.y;return e>=this.x&&n>=this.y&&e+t.width<=this.x+this.width&&n+t.height<=this.y+this.height},intersects:function(){var t=v.read(arguments);return t.x+t.width>this.x&&t.y+t.height>this.y&&t.x<this.x+this.width&&t.y<this.y+this.height},touches:function(){var t=v.read(arguments);return t.x+t.width>=this.x&&t.y+t.height>=this.y&&t.x<=this.x+this.width&&t.y<=this.y+this.height},intersect:function(){var t=v.read(arguments),e=Math.max(this.x,t.x),n=Math.max(this.y,t.y),i=Math.min(this.x+this.width,t.x+t.width),r=Math.min(this.y+this.height,t.y+t.height);return new v(e,n,i-e,r-n)},unite:function(){var t=v.read(arguments),e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),i=Math.max(this.x+this.width,t.x+t.width),r=Math.max(this.y+this.height,t.y+t.height);return new v(e,n,i-e,r-n)},include:function(){var t=p.read(arguments),e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),i=Math.max(this.x+this.width,t.x),r=Math.max(this.y+this.height,t.y);return new v(e,n,i-e,r-n)},expand:function(){var t=m.read(arguments),e=t.width,n=t.height;return new v(this.x-e/2,this.y-n/2,this.width+e,this.height+n)},scale:function(t,e){return this.expand(this.width*t-this.width,this.height*(void 0===e?t:e)-this.height)}},o.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],(function(t,e){var n=t.join(""),i=/^[RL]/.test(n);e>=4&&(t[1]+=i?"Y":"X");var r=t[i?0:1],s=t[i?1:0],a="get"+r,o="get"+s,l="set"+r,u="set"+s,h="set"+n;this["get"+n]=function(t){return new(t?p:g)(this[a](),this[o](),this,h)},this[h]=function(){var t=p.read(arguments);this[l](t.x),this[u](t.y)}}),{beans:!0})),_=v.extend({initialize:function(t,e,n,i,r,s){this.set(t,e,n,i,!0),this._owner=r,this._setter=s},set:function(t,e,n,i,r){return this._x=t,this._y=e,this._width=n,this._height=i,r||this._owner[this._setter](this),this}},new function(){var t=v.prototype;return o.each(["x","y","width","height"],(function(t){var e=o.capitalize(t),n="_"+t;this["get"+e]=function(){return this[n]},this["set"+e]=function(t){this[n]=t,this._dontNotify||this._owner[this._setter](this)}}),o.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],(function(e){var n="set"+e;this[n]=function(){this._dontNotify=!0,t[n].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}}),{isSelected:function(){return this._owner._boundsSelected},setSelected:function(t){var e=this._owner;e.setSelected&&(e._boundsSelected=t,e.setSelected(t||e._selectedSegmentState>0))}}))}),x=o.extend({_class:"Matrix",initialize:function t(e){var n=arguments.length,i=!0;if(6===n?this.set.apply(this,arguments):1===n?e instanceof t?this.set(e._a,e._c,e._b,e._d,e._tx,e._ty):Array.isArray(e)?this.set.apply(this,e):i=!1:0===n?this.reset():i=!1,!i)throw new Error("Unsupported matrix parameters")},set:function(t,e,n,i,r,s,a){return this._a=t,this._c=e,this._b=n,this._d=i,this._tx=r,this._ty=s,a||this._changed(),this},_serialize:function(t){return o.serialize(this.getValues(),t)},_changed:function(){var t=this._owner;t&&(t._applyMatrix?t.transform(null,!0):t._changed(9))},clone:function(){return new x(this._a,this._c,this._b,this._d,this._tx,this._ty)},equals:function(t){return t===this||t&&this._a===t._a&&this._b===t._b&&this._c===t._c&&this._d===t._d&&this._tx===t._tx&&this._ty===t._ty||!1},toString:function(){var t=c.instance;return"[["+[t.number(this._a),t.number(this._b),t.number(this._tx)].join(", ")+"], ["+[t.number(this._c),t.number(this._d),t.number(this._ty)].join(", ")+"]]"},reset:function(t){return this._a=this._d=1,this._c=this._b=this._tx=this._ty=0,t||this._changed(),this},apply:function(t,e){var n=this._owner;return!!n&&(n.transform(null,!0,o.pick(t,!0),e),this.isIdentity())},translate:function(){var t=p.read(arguments),e=t.x,n=t.y;return this._tx+=e*this._a+n*this._b,this._ty+=e*this._c+n*this._d,this._changed(),this},scale:function(){var t=p.read(arguments),e=p.read(arguments,0,{readNull:!0});return e&&this.translate(e),this._a*=t.x,this._c*=t.x,this._b*=t.y,this._d*=t.y,e&&this.translate(e.negate()),this._changed(),this},rotate:function(t){t*=Math.PI/180;var e=p.read(arguments,1),n=e.x,i=e.y,r=Math.cos(t),s=Math.sin(t),a=n-n*r+i*s,o=i-n*s-i*r,l=this._a,u=this._b,h=this._c,c=this._d;return this._a=r*l+s*u,this._b=-s*l+r*u,this._c=r*h+s*c,this._d=-s*h+r*c,this._tx+=a*l+o*u,this._ty+=a*h+o*c,this._changed(),this},shear:function(){var t=p.read(arguments),e=p.read(arguments,0,{readNull:!0});e&&this.translate(e);var n=this._a,i=this._c;return this._a+=t.y*this._b,this._c+=t.y*this._d,this._b+=t.x*n,this._d+=t.x*i,e&&this.translate(e.negate()),this._changed(),this},skew:function(){var t=p.read(arguments),e=p.read(arguments,0,{readNull:!0}),n=Math.PI/180,i=new p(Math.tan(t.x*n),Math.tan(t.y*n));return this.shear(i,e)},concatenate:function(t){var e=this._a,n=this._b,i=this._c,r=this._d,s=t._a,a=t._b,o=t._c,l=t._d,u=t._tx,h=t._ty;return this._a=s*e+o*n,this._b=a*e+l*n,this._c=s*i+o*r,this._d=a*i+l*r,this._tx+=u*e+h*n,this._ty+=u*i+h*r,this._changed(),this},preConcatenate:function(t){var e=this._a,n=this._b,i=this._c,r=this._d,s=this._tx,a=this._ty,o=t._a,l=t._b,u=t._c,h=t._d,c=t._tx,d=t._ty;return this._a=o*e+l*i,this._b=o*n+l*r,this._c=u*e+h*i,this._d=u*n+h*r,this._tx=o*s+l*a+c,this._ty=u*s+h*a+d,this._changed(),this},chain:function(t){var e=this._a,n=this._b,i=this._c,r=this._d,s=this._tx,a=this._ty,o=t._a,l=t._b,u=t._c,h=t._d,c=t._tx,d=t._ty;return new x(o*e+u*n,o*i+u*r,l*e+h*n,l*i+h*r,s+c*e+d*n,a+c*i+d*r)},isIdentity:function(){return 1===this._a&&0===this._c&&0===this._b&&1===this._d&&0===this._tx&&0===this._ty},orNullIfIdentity:function(){return this.isIdentity()?null:this},isInvertible:function(){return!!this._getDeterminant()},isSingular:function(){return!this._getDeterminant()},transform:function(t,e,n){return arguments.length<3?this._transformPoint(p.read(arguments)):this._transformCoordinates(t,e,n)},_transformPoint:function(t,e,n){var i=t.x,r=t.y;return e||(e=new p),e.set(i*this._a+r*this._b+this._tx,i*this._c+r*this._d+this._ty,n)},_transformCoordinates:function(t,e,n){for(var i=0,r=0,s=2*n;i<s;){var a=t[i++],o=t[i++];e[r++]=a*this._a+o*this._b+this._tx,e[r++]=a*this._c+o*this._d+this._ty}return e},_transformCorners:function(t){var e=t.x,n=t.y,i=e+t.width,r=n+t.height,s=[e,n,i,n,i,r,e,r];return this._transformCoordinates(s,s,4)},_transformBounds:function(t,e,n){for(var i=this._transformCorners(t),r=i.slice(0,2),s=r.slice(),a=2;a<8;a++){var o=i[a],l=1&a;o<r[l]?r[l]=o:o>s[l]&&(s[l]=o)}return e||(e=new v),e.set(r[0],r[1],s[0]-r[0],s[1]-r[1],n)},inverseTransform:function(){return this._inverseTransform(p.read(arguments))},_getDeterminant:function(){var t=this._a*this._d-this._b*this._c;return isFinite(t)&&!d.isZero(t)&&isFinite(this._tx)&&isFinite(this._ty)?t:null},_inverseTransform:function(t,e,n){var i=this._getDeterminant();if(!i)return null;var r=t.x-this._tx,s=t.y-this._ty;return e||(e=new p),e.set((r*this._d-s*this._b)/i,(s*this._a-r*this._c)/i,n)},decompose:function(){var t=this._a,e=this._b,n=this._c,i=this._d;if(d.isZero(t*i-e*n))return null;var r=Math.sqrt(t*t+e*e),s=(t/=r)*n+(e/=r)*i;n-=t*s,i-=e*s;var a=Math.sqrt(n*n+i*i);return s/=a,t*(i/=a)<e*(n/=a)&&(t=-t,e=-e,s=-s,r=-r),{scaling:new p(r,a),rotation:180*-Math.atan2(e,t)/Math.PI,shearing:s}},getValues:function(){return[this._a,this._c,this._b,this._d,this._tx,this._ty]},getTranslation:function(){return new p(this._tx,this._ty)},getScaling:function(){return(this.decompose()||{}).scaling},getRotation:function(){return(this.decompose()||{}).rotation},inverted:function(){var t=this._getDeterminant();return t&&new x(this._d/t,-this._c/t,-this._b/t,this._a/t,(this._b*this._ty-this._d*this._tx)/t,(this._c*this._tx-this._a*this._ty)/t)},shiftless:function(){return new x(this._a,this._c,this._b,this._d,0,0)},applyToContext:function(t){t.transform(this._a,this._c,this._b,this._d,this._tx,this._ty)}},o.each(["a","c","b","d","tx","ty"],(function(t){var e=o.capitalize(t),n="_"+t;this["get"+e]=function(){return this[n]},this["set"+e]=function(t){this[n]=t,this._changed()}}),{})),w=o.extend({_class:"Line",initialize:function(t,e,n,i,r){var s=!1;arguments.length>=4?(this._px=t,this._py=e,this._vx=n,this._vy=i,s=r):(this._px=t.x,this._py=t.y,this._vx=e.x,this._vy=e.y,s=n),s||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new p(this._px,this._py)},getVector:function(){return new p(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(t,e){return w.intersect(this._px,this._py,this._vx,this._vy,t._px,t._py,t._vx,t._vy,!0,e)},getSide:function(t,e){return w.getSide(this._px,this._py,this._vx,this._vy,t.x,t.y,!0,e)},getDistance:function(t){return Math.abs(w.getSignedDistance(this._px,this._py,this._vx,this._vy,t.x,t.y,!0))},isCollinear:function(t){return p.isCollinear(this._vx,this._vy,t._vx,t._vy)},isOrthogonal:function(t){return p.isOrthogonal(this._vx,this._vy,t._vx,t._vy)},statics:{intersect:function(t,e,n,i,r,s,a,o,l,u){l||(n-=t,i-=e,a-=r,o-=s);var h=n*o-i*a;if(!d.isZero(h)){var c=t-r,f=e-s,g=(a*f-o*c)/h,m=(n*f-i*c)/h;if(u||-1e-12<g&&g<1+1e-12&&-1e-12<m&&m<1+1e-12)return u||(g=g<=0?0:g>=1?1:g),new p(t+g*n,e+g*i)}},getSide:function(t,e,n,i,r,s,a,o){a||(n-=t,i-=e);var l=r-t,u=l*i-(s-e)*n;return 0!==u||o||(u=(l*n+l*n)/(n*n+i*i))>=0&&u<=1&&(u=0),u<0?-1:u>0?1:0},getSignedDistance:function(t,e,n,i,r,s,a){return a||(n-=t,i-=e),0===n?i>0?r-t:t-r:0===i?n<0?s-e:e-s:((r-t)*i-(s-e)*n)/Math.sqrt(n*n+i*i)}}}),b=h.extend({_class:"Project",_list:"projects",_reference:"project",initialize:function(t){h.call(this,!0),this.layers=[],this._activeLayer=null,this.symbols=[],this._currentStyle=new G(null,null,this),this._view=W.create(this,t||it.getCanvas(1,1)),this._selectedItems={},this._selectedItemCount=0,this._updateVersion=0},_serialize:function(t,e){return o.serialize(this.layers,t,!0,e)},clear:function(){for(var t=this.layers.length-1;t>=0;t--)this.layers[t].remove();this.symbols=[]},isEmpty:function(){return 0===this.layers.length},remove:function t(){return!!t.base.call(this)&&(this._view&&this._view.remove(),!0)},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(t){this._currentStyle.initialize(t)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getActiveLayer:function(){return this._activeLayer||new T({project:this})},getSelectedItems:function(){var t=[];for(var e in this._selectedItems){var n=this._selectedItems[e];n.isInserted()&&t.push(n)}return t},insertChild:function(t,e,n){return e instanceof T?(e._remove(!1,!0),o.splice(this.layers,[e],t,0),e._setProject(this,!0),this._changes&&e._changed(5),this._activeLayer||(this._activeLayer=e)):e instanceof C?(this._activeLayer||this.insertChild(t,new T(C.NO_INSERT))).insertChild(t,e,n):e=null,e},addChild:function(t,e){return this.insertChild(void 0,t,e)},_updateSelection:function(t){var e=t._id,n=this._selectedItems;t._selected?n[e]!==t&&(this._selectedItemCount++,n[e]=t):n[e]===t&&(this._selectedItemCount--,delete n[e])},selectAll:function(){for(var t=this.layers,e=0,n=t.length;e<n;e++)t[e].setFullySelected(!0)},deselectAll:function(){var t=this._selectedItems;for(var e in t)t[e].setFullySelected(!1)},hitTest:function(){for(var t=p.read(arguments),e=A.getOptions(o.read(arguments)),n=this.layers.length-1;n>=0;n--){var i=this.layers[n]._hitTest(t,e);if(i)return i}return null},getItems:function(t){return C._getItems(this.layers,t)},getItem:function(t){return C._getItems(this.layers,t,null,null,!0)[0]||null},importJSON:function(t){this.activate();var e=this._activeLayer;return o.importJSON(t,e&&e.isEmpty()&&e)},draw:function(t,e,n){this._updateVersion++,t.save(),e.applyToContext(t);for(var i=new o({offset:new p(0,0),pixelRatio:n,viewMatrix:e.isIdentity()?null:e,matrices:[new x],updateMatrix:!0}),r=0,s=this.layers,a=s.length;r<a;r++)s[r].draw(t,i);if(t.restore(),this._selectedItemCount>0){t.save(),t.strokeWidth=1;var l=this._selectedItems,u=this._scope.settings.handleSize,h=this._updateVersion;for(var c in l)l[c]._drawSelection(t,e,u,l,h);t.restore()}}}),S=o.extend({_class:"Symbol",initialize:function(t,e){this._id=f.get(),this.project=s.project,this.project.symbols.push(this),t&&this.setDefinition(t,e)},_serialize:function(t,e){return e.add(this,(function(){return o.serialize([this._class,this._definition],t,!1,e)}))},_changed:function(t){8&t&&C._clearBoundsCache(this),1&t&&(this.project._needsUpdate=!0)},getDefinition:function(){return this._definition},setDefinition:function(t,e){t._parentSymbol&&(t=t.clone()),this._definition&&(this._definition._parentSymbol=null),this._definition=t,t.remove(),t.setSelected(!1),e||t.setPosition(new p),t._parentSymbol=this,this._changed(9)},place:function(t){return new O(this,t)},clone:function(){return new S(this._definition.clone(!1))},equals:function(t){return t===this||t&&this.definition.equals(t.definition)||!1}}),C=o.extend(l,{statics:{extend:function t(e){return e._serializeFields&&(e._serializeFields=new o(this.prototype._serializeFields,e._serializeFields)),t.base.apply(this,arguments)},NO_INSERT:{insert:!1}},_class:"Item",_applyMatrix:!0,_canApplyMatrix:!0,_boundsSelected:!1,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new x,pivot:null,locked:!1,visible:!0,blendMode:"normal",opacity:1,guide:!1,selected:!1,clipMask:!1,data:{}},initialize:function(){},_initialize:function(t,e){var n=t&&o.isPlainObject(t),i=n&&!0===t.internal,r=this._matrix=new x,a=n&&t.project||s.project;return i||(this._id=f.get()),this._applyMatrix=this._canApplyMatrix&&s.settings.applyMatrix,e&&r.translate(e),r._owner=this,this._style=new G(a._currentStyle,this,a),this._project||(i||n&&!1===t.insert?this._setProject(a):n&&t.parent?this.setParent(t.parent):(a._activeLayer||new T).addChild(this)),n&&t!==C.NO_INSERT&&this._set(t,{insert:!0,project:!0,parent:!0},!0),n},_events:o.each(["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"],(function(t){this[t]={install:function(t){this.getView()._installEvent(t)},uninstall:function(t){this.getView()._uninstallEvent(t)}}}),{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{}}),_serialize:function(t,e){var n={},i=this;function r(r){for(var s in r){var a=i[s];o.equals(a,"leading"===s?1.2*r.fontSize:r[s])||(n[s]=o.serialize(a,t,"data"!==s,e))}}return r(this._serializeFields),this instanceof E||r(this._style._defaults),[this._class,n]},_changed:function(t){var e=this._parentSymbol,n=this._parent||e,i=this._project;if(8&t&&(this._bounds=this._position=this._decomposed=this._globalMatrix=this._currentPath=void 0),n&&40&t&&C._clearBoundsCache(n),2&t&&C._clearBoundsCache(this),i&&(1&t&&(i._needsUpdate=!0),i._changes)){var r=i._changesById[this._id];r?r.flags|=t:(r={item:this,flags:t},i._changesById[this._id]=r,i._changes.push(r))}e&&e._changed(t)},set:function(t){return t&&this._set(t),this},getId:function(){return this._id},getName:function(){return this._name},setName:function(t,e){if(this._name&&this._removeNamed(),t===+t+"")throw new Error("Names consisting only of numbers are not supported.");var n=this._parent;if(t&&n){for(var i=n._children,r=n._namedChildren,s=t,a=1;e&&i[t];)t=s+" "+a++;(r[t]=r[t]||[]).push(this),i[t]=this}this._name=t||void 0,this._changed(128)},getStyle:function(){return this._style},setStyle:function(t){this.getStyle().set(t)}},o.each(["locked","visible","blendMode","opacity","guide"],(function(t){var e=o.capitalize(t);t="_"+t;this["get"+e]=function(){return this[t]},this["set"+e]=function(e){e!=this[t]&&(this[t]=e,this._changed("_locked"===t?128:129))}}),{}),{beans:!0,_locked:!1,_visible:!0,_blendMode:"normal",_opacity:1,_guide:!1,isSelected:function(){if(this._selectChildren)for(var t=this._children,e=0,n=t.length;e<n;e++)if(t[e].isSelected())return!0;return this._selected},setSelected:function(t,e){if(!e&&this._selectChildren)for(var n=this._children,i=0,r=n.length;i<r;i++)n[i].setSelected(t);(t=!!t)^this._selected&&(this._selected=t,this._project._updateSelection(this),this._changed(129))},_selected:!1,isFullySelected:function(){var t=this._children;if(t&&this._selected){for(var e=0,n=t.length;e<n;e++)if(!t[e].isFullySelected())return!1;return!0}return this._selected},setFullySelected:function(t){var e=this._children;if(e)for(var n=0,i=e.length;n<i;n++)e[n].setFullySelected(t);this.setSelected(t,!0)},isClipMask:function(){return this._clipMask},setClipMask:function(t){this._clipMask!=(t=!!t)&&(this._clipMask=t,t&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(129),this._parent&&this._parent._changed(1024))},_clipMask:!1,getData:function(){return this._data||(this._data={}),this._data},setData:function(t){this._data=t},getPosition:function(t){var e=this._position,n=t?p:g;if(!e){var i=this._pivot;e=this._position=i?this._matrix._transformPoint(i):this.getBounds().getCenter(!0)}return new n(e.x,e.y,this,"setPosition")},setPosition:function(){this.translate(p.read(arguments).subtract(this.getPosition(!0)))},getPivot:function(t){var e=this._pivot;e&&(e=new(t?p:g)(e.x,e.y,this,"setPivot"));return e},setPivot:function(){this._pivot=p.read(arguments,0,{clone:!0,readNull:!0}),this._position=void 0},_pivot:null},o.each(["bounds","strokeBounds","handleBounds","roughBounds","internalBounds","internalRoughBounds"],(function(t){var e="get"+o.capitalize(t),n=t.match(/^internal(.*)$/),i=n?"get"+n[1]:null;this[e]=function(n){var r=this._boundsGetter,s=!i&&("string"==typeof r?r:r&&r[e])||e,a=this._getCachedBounds(s,n,this,i);return"bounds"===t?new _(a.x,a.y,a.width,a.height,this,"setBounds"):a}}),{beans:!0,_getBounds:function(t,e,n){var i=this._children;if(!i||0==i.length)return new v;C._updateBoundsCache(this,n);for(var r=1/0,s=-r,a=r,o=s,l=0,u=i.length;l<u;l++){var h=i[l];if(h._visible&&!h.isEmpty()){var c=h._getCachedBounds(t,e&&e.chain(h._matrix),n);r=Math.min(c.x,r),a=Math.min(c.y,a),s=Math.max(c.x+c.width,s),o=Math.max(c.y+c.height,o)}}return isFinite(r)?new v(r,a,s-r,o-a):new v},setBounds:function(){var t=v.read(arguments),e=this.getBounds(),n=new x,i=t.getCenter();n.translate(i),t.width==e.width&&t.height==e.height||n.scale(0!=e.width?t.width/e.width:1,0!=e.height?t.height/e.height:1),i=e.getCenter(),n.translate(-i.x,-i.y),this.transform(n)},_getCachedBounds:function(t,e,n,i){e=e&&e.orNullIfIdentity();var r=i?null:this._matrix.orNullIfIdentity(),s=(!e||e.equals(r))&&t;if(C._updateBoundsCache(this._parent||this._parentSymbol,n),s&&this._bounds&&this._bounds[s])return this._bounds[s].clone();var a=this._getBounds(i||t,e||r,n);s&&(this._bounds||(this._bounds={}),(this._bounds[s]=a.clone())._internal=!!i);return a},statics:{_updateBoundsCache:function(t,e){if(t){var n=e._id,i=t._boundsCache=t._boundsCache||{ids:{},list:[]};i.ids[n]||(i.list.push(e),i.ids[n]=e)}},_clearBoundsCache:function(t){var e=t._boundsCache;if(e){t._bounds=t._position=t._boundsCache=void 0;for(var n=0,i=e.list,r=i.length;n<r;n++){var s=i[n];s!==t&&(s._bounds=s._position=void 0,s._boundsCache&&C._clearBoundsCache(s))}}}}}),{beans:!0,_decompose:function(){return this._decomposed=this._matrix.decompose()},getRotation:function(){var t=this._decomposed||this._decompose();return t&&t.rotation},setRotation:function(t){var e=this.getRotation();if(null!=e&&null!=t){var n=this._decomposed;this.rotate(t-e),n.rotation=t,this._decomposed=n}},getScaling:function(t){var e=this._decomposed||this._decompose(),n=e&&e.scaling;return n&&new(t?p:g)(n.x,n.y,this,"setScaling")},setScaling:function(){var t=this.getScaling();if(t){var e=p.read(arguments,0,{clone:!0}),n=this._decomposed;this.scale(e.x/t.x,e.y/t.y),n.scaling=e,this._decomposed=n}},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.initialize.apply(t,arguments),this._applyMatrix?this.transform(null,!0):this._changed(9)},getGlobalMatrix:function(t){var e=this._globalMatrix,n=this._project._updateVersion;if(e&&e._updateVersion!==n&&(e=null),!e){e=this._globalMatrix=this._matrix.clone();var i=this._parent;i&&e.preConcatenate(i.getGlobalMatrix(!0)),e._updateVersion=n}return t?e:e.clone()},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(t){(this._applyMatrix=this._canApplyMatrix&&!!t)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(t,e){if(this._project!==t){this._project&&this._installEvents(!1),this._project=t;for(var n=this._children,i=0,r=n&&n.length;i<r;i++)n[i]._setProject(t);e=!0}e&&this._installEvents(!0)},getView:function(){return this._project.getView()},_installEvents:function t(e){t.base.call(this,e);for(var n=this._children,i=0,r=n&&n.length;i<r;i++)n[i]._installEvents(e)},getLayer:function(){for(var t=this;t=t._parent;)if(t instanceof T)return t;return null},getParent:function(){return this._parent},setParent:function(t){return t.addChild(this)},getChildren:function(){return this._children},setChildren:function(t){this.removeChildren(),this.addChildren(t)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){return this._parent&&this._parent._children[this._index+1]||null},getPreviousSibling:function(){return this._parent&&this._parent._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(t){return t===this||t&&this._class===t._class&&this._style.equals(t._style)&&this._matrix.equals(t._matrix)&&this._locked===t._locked&&this._visible===t._visible&&this._blendMode===t._blendMode&&this._opacity===t._opacity&&this._clipMask===t._clipMask&&this._guide===t._guide&&this._equals(t)||!1},_equals:function(t){return o.equals(this._children,t._children)},clone:function(t){return this._clone(new this.constructor(C.NO_INSERT),t)},_clone:function(t,e,n){var i=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],r=this._children;t.setStyle(this._style);for(var s=0,a=r&&r.length;s<a;s++)t.addChild(r[s].clone(!1),!0);for(s=0,a=i.length;s<a;s++){var l=i[s];this.hasOwnProperty(l)&&(t[l]=this[l])}return!1!==n&&t._matrix.initialize(this._matrix),t.setApplyMatrix(this._applyMatrix),t.setPivot(this._pivot),t.setSelected(this._selected),t._data=this._data?o.clone(this._data):null,(e||void 0===e)&&t.insertAbove(this),this._name&&t.setName(this._name,!0),t},copyTo:function(t){return t.addChild(this.clone(!1))},rasterize:function(t){var e=this.getStrokeBounds(),n=(t||this.getView().getResolution())/72,i=e.getTopLeft().floor(),r=e.getBottomRight().ceil(),s=new m(r.subtract(i)),a=it.getCanvas(s.multiply(n)),l=a.getContext("2d"),u=(new x).scale(n).translate(i.negate());l.save(),u.applyToContext(l),this.draw(l,new o({matrices:[u]})),l.restore();var h=new k(C.NO_INSERT);return h.setCanvas(a),h.transform((new x).translate(i.add(s.divide(2))).scale(1/n)),h.insertAbove(this),h},contains:function(){return!!this._contains(this._matrix._inverseTransform(p.read(arguments)))},_contains:function(t){if(this._children){for(var e=this._children.length-1;e>=0;e--)if(this._children[e].contains(t))return!0;return!1}return t.isInside(this.getInternalBounds())},isInside:function(){return v.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new R.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(t,e){return t instanceof C&&this._asPathItem().getIntersections(t._asPathItem(),null,e||t._matrix,!0).length>0},hitTest:function(){return this._hitTest(p.read(arguments),A.getOptions(o.read(arguments)))},_hitTest:function(t,e){if(this._locked||!this._visible||this._guide&&!e.guides||this.isEmpty())return null;var n=this._matrix,i=e._totalMatrix,r=this.getView(),s=e._totalMatrix=i?i.chain(n):this.getGlobalMatrix().preConcatenate(r._matrix),a=e._tolerancePadding=new m(R._getPenPadding(1,s.inverted())).multiply(Math.max(e.tolerance,1e-6));if(t=n._inverseTransform(t),!this._children&&!this.getInternalRoughBounds().expand(a.multiply(2))._containsPoint(t))return null;var l,u=!(e.guides&&!this._guide||e.selected&&!this._selected||e.type&&e.type!==o.hyphenate(this._class)||e.class&&!(this instanceof e.class)),h=this;function c(e,n){var i=d["get"+n]();if(t.subtract(i).divide(a).length<=1)return new A(e,h,{name:o.hyphenate(n),point:i})}if(u&&(e.center||e.bounds)&&this._parent){var d=this.getInternalBounds();if(e.center&&(l=c("center","Center")),!l&&e.bounds)for(var f=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],p=0;p<8&&!l;p++)l=c("bounds",f[p])}var g=!l&&this._children;if(g){var y=this._getChildHitTestOptions(e);for(p=g.length-1;p>=0&&!l;p--)l=g[p]._hitTest(t,y)}return!l&&u&&(l=this._hitTestSelf(t,e)),l&&l.point&&(l.point=n.transform(l.point)),e._totalMatrix=i,l},_getChildHitTestOptions:function(t){return t},_hitTestSelf:function(t,e){if(e.fill&&this.hasFill()&&this._contains(t))return new A("fill",this)},matches:function(t,e){var n=typeof t;if("object"===n){for(var i in t)if(t.hasOwnProperty(i)&&!this.matches(i,t[i]))return!1}else{if("function"===n)return t(this);var r=/^(empty|editable)$/.test(t)?this["is"+o.capitalize(t)]():"type"===t?o.hyphenate(this._class):this[t];if(/^(constructor|class)$/.test(t)){if(!(this instanceof e))return!1}else if(e instanceof RegExp){if(!e.test(r))return!1}else if("function"==typeof e){if(!e(r))return!1}else if(o.isPlainObject(e)){if(!function t(e,n){for(var i in e)if(e.hasOwnProperty(i)){var r=e[i],s=n[i];if(o.isPlainObject(r)&&o.isPlainObject(s)){if(!t(r,s))return!1}else if(!o.equals(r,s))return!1}return!0}(e,r))return!1}else if(!o.equals(r,e))return!1}return!0},getItems:function(t){return C._getItems(this._children,t,this._matrix)},getItem:function(t){return C._getItems(this._children,t,this._matrix,null,!0)[0]||null},statics:{_getItems:function t(e,n,i,r,s){if(!r&&"object"==typeof n){var a=n.overlapping,l=n.inside;r={items:[],inside:!!l,overlapping:!!a,rect:u=(m=a||l)&&v.read([m]),path:a&&new R.Rectangle({rectangle:u,insert:!1})},m&&(n=o.set({},n,{inside:!0,overlapping:!0}))}var u,h=r&&r.items;i=(u=r&&r.rect)&&(i||new x);for(var c=0,d=e&&e.length;c<d;c++){var f=e[c],p=i&&i.chain(f._matrix),g=!0;if(u){var m=f.getBounds(p);if(!u.intersects(m))continue;r.inside&&u.contains(m)||r.overlapping&&(m.contains(u)||r.path.intersects(f,p))||(g=!1)}if(g&&f.matches(n)&&(h.push(f),s))break;if(t(f._children,n,p,r,s),s&&h.length>0)break}return h}}},{importJSON:function(t){var e=o.importJSON(t,this);return e!==this?this.addChild(e):e},addChild:function(t,e){return this.insertChild(void 0,t,e)},insertChild:function(t,e,n){var i=e?this.insertChildren(t,[e],n):null;return i&&i[0]},addChildren:function(t,e){return this.insertChildren(this._children.length,t,e)},insertChildren:function(t,e,n,i){var r=this._children;if(r&&e&&e.length>0){for(var s=(e=Array.prototype.slice.apply(e)).length-1;s>=0;s--){var a=e[s];if(!i||a instanceof i){var l=a._parent===this&&a._index<t;a._remove(!1,!0)&&l&&t--}else e.splice(s,1)}o.splice(r,e,t,0);for(var u=this._project,h=u&&u._changes,c=(s=0,e.length);s<c;s++){(a=e[s])._parent=this,a._setProject(this._project,!0),a._name&&a.setName(a._name),h&&this._changed(5)}this._changed(11)}else e=null;return e},_insertSibling:function(t,e,n){return this._parent?this._parent.insertChild(t,e,n):null},insertAbove:function(t,e){return t._insertSibling(t._index+1,this,e)},insertBelow:function(t,e){return t._insertSibling(t._index,this,e)},sendToBack:function(){return(this._parent||this instanceof T&&this._project).insertChild(0,this)},bringToFront:function(){return(this._parent||this instanceof T&&this._project).addChild(this)},appendTop:"#addChild",appendBottom:function(t){return this.insertChild(0,t)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",reduce:function(){if(this._children&&1===this._children.length){var t=this._children[0].reduce();return t.insertAbove(this),t.setStyle(this._style),this.remove(),t}return this},_removeNamed:function(){var t=this._parent;if(t){var e=t._children,n=t._namedChildren,i=this._name,r=n[i],s=r?r.indexOf(this):-1;-1!==s&&(e[i]==this&&delete e[i],r.splice(s,1),r.length?e[i]=r[r.length-1]:delete n[i])}},_remove:function(t,e){var n=this._parent;if(n){if(this._name&&this._removeNamed(),null!=this._index&&o.splice(n._children,null,this._index,1),this._installEvents(!1),t){var i=this._project;i&&i._changes&&this._changed(5)}return e&&n._changed(11),this._parent=null,!0}return!1},remove:function(){return this._remove(!0,!0)},replaceWith:function(t){var e=t&&t.insertBelow(this);return e&&this.remove(),e},removeChildren:function(t,e){if(!this._children)return null;t=t||0,e=o.pick(e,this._children.length);for(var n=o.splice(this._children,null,t,e-t),i=n.length-1;i>=0;i--)n[i]._remove(!0,!1);return n.length>0&&this._changed(11),n},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var t=0,e=this._children.length;t<e;t++)this._children[t]._index=t;this._changed(11)}},isEmpty:function(){return!this._children||0===this._children.length},isEditable:function(){for(var t=this;t;){if(!t._visible||t._locked)return!1;t=t._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(t){function e(t){var e=[];do{e.unshift(t)}while(t=t._parent);return e}for(var n=e(this),i=e(t),r=0,s=Math.min(n.length,i.length);r<s;r++)if(n[r]!=i[r])return n[r]._index<i[r]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return!!this._parent&&this._parent.isInserted()},isAbove:function(t){return-1===this._getOrder(t)},isBelow:function(t){return 1===this._getOrder(t)},isParent:function(t){return this._parent===t},isChild:function(t){return t&&t._parent===this},isDescendant:function(t){for(var e=this;e=e._parent;)if(e==t)return!0;return!1},isAncestor:function(t){return!!t&&t.isDescendant(this)},isSibling:function(t){return this._parent===t._parent},isGroupedWith:function(t){for(var e=this._parent;e;){if(e._parent&&/^(Group|Layer|CompoundPath)$/.test(e._class)&&t.isDescendant(e))return!0;e=e._parent}return!1},translate:function(){var t=new x;return this.transform(t.translate.apply(t,arguments))},rotate:function(t){return this.transform((new x).rotate(t,p.read(arguments,1,{readNull:!0})||this.getPosition(!0)))}},o.each(["scale","shear","skew"],(function(t){this[t]=function(){var e=p.read(arguments),n=p.read(arguments,0,{readNull:!0});return this.transform((new x)[t](e,n||this.getPosition(!0)))}}),{}),{transform:function(t,e,n,i){t&&t.isIdentity()&&(t=null);var r=this._matrix,s=(e||this._applyMatrix)&&(!r.isIdentity()||t||e&&n&&this._children);if(!t&&!s)return this;if(t&&r.preConcatenate(t),s=s&&this._transformContent(r,n,i)){var a=this._pivot,o=this._style,l=o.getFillColor(!0),u=o.getStrokeColor(!0);a&&r._transformPoint(a,a,!0),l&&l.transform(r),u&&u.transform(r),r.reset(!0),i&&this._canApplyMatrix&&(this._applyMatrix=!0)}var h=this._bounds,c=this._position;this._changed(9);var d=h&&t&&t.decompose();if(d&&!d.shearing&&d.rotation%90==0){for(var f in h){var p=h[f];!s&&p._internal||t._transformBounds(p,p)}var g=this._boundsGetter;(p=h[g&&g.getBounds||g||"getBounds"])&&(this._position=p.getCenter(!0)),this._bounds=h}else t&&c&&(this._position=t._transformPoint(c,c));return this},_transformContent:function(t,e,n){var i=this._children;if(i){for(var r=0,s=i.length;r<s;r++)i[r].transform(t,!0,e,n);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(p.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(p.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(p.read(arguments))},localToParent:function(){return this._matrix._transformPoint(p.read(arguments))},fitBounds:function(t,e){t=v.read(arguments);var n=this.getBounds(),i=n.height/n.width,r=t.height/t.width,s=(e?i>r:i<r)?t.width/n.width:t.height/n.height,a=new v(new p,new m(n.width*s,n.height*s));a.setCenter(t.getCenter()),this.setBounds(a)},_setStyles:function(t){var e=this._style,n=e.getFillColor(),i=e.getStrokeColor(),r=e.getShadowColor();if(n&&(t.fillStyle=n.toCanvasStyle(t)),i){var a=e.getStrokeWidth();if(a>0){t.strokeStyle=i.toCanvasStyle(t),t.lineWidth=a;var o=e.getStrokeJoin(),l=e.getStrokeCap(),u=e.getMiterLimit();if(o&&(t.lineJoin=o),l&&(t.lineCap=l),u&&(t.miterLimit=u),s.support.nativeDash){var h=e.getDashArray(),c=e.getDashOffset();h&&h.length&&("setLineDash"in t?(t.setLineDash(h),t.lineDashOffset=c):(t.mozDash=h,t.mozDashOffset=c))}}}if(r){var d=e.getShadowBlur();if(d>0){t.shadowColor=r.toCanvasStyle(t),t.shadowBlur=d;var f=this.getShadowOffset();t.shadowOffsetX=f.x,t.shadowOffsetY=f.y}}},draw:function(t,e,n){var i=this._updateVersion=this._project._updateVersion;if(this._visible&&0!==this._opacity){var r=e.matrices,s=e.viewMatrix,a=this._matrix,o=r[r.length-1].chain(a);if(o.isInvertible()){r.push(o),e.updateMatrix&&(o._updateVersion=i,this._globalMatrix=o);var l,u,h,c=this._blendMode,d=this._opacity,f="normal"===c,p=rt.nativeModes[c],g=f&&1===d||e.dontStart||e.clip||(p||f&&d<1)&&this._canComposite(),m=e.pixelRatio||1;if(!g){var y=this.getStrokeBounds(b(o));if(!y.width||!y.height)return;h=e.offset,u=e.offset=y.getTopLeft().floor(),l=t,t=it.getContext(y.getSize().ceil().add(1).multiply(m)),1!==m&&t.scale(m,m)}t.save();var v=n?n.chain(a):!this.getStrokeScaling(!0)&&b(o),_=!g&&e.clipItem,x=!v||_;if(g?(t.globalAlpha=d,p&&(t.globalCompositeOperation=c)):x&&t.translate(-u.x,-u.y),x&&(g?a:b(o)).applyToContext(t),_&&e.clipItem.draw(t,e.extend({clip:!0})),v){t.setTransform(m,0,0,m,0,0);var w=e.offset;w&&t.translate(-w.x,-w.y)}this._draw(t,e,v),t.restore(),r.pop(),e.clip&&!e.dontFinish&&t.clip(),g||(rt.process(c,t,l,d,u.subtract(h).multiply(m)),it.release(t),e.offset=h)}}function b(t){return s?s.chain(t):t}},_isUpdated:function(t){var e=this._parent;if(e instanceof z)return e._isUpdated(t);var n=this._updateVersion===t;return!n&&e&&e._visible&&e._isUpdated(t)&&(this._updateVersion=t,n=!0),n},_drawSelection:function(t,e,n,i,r){if((this._drawSelected||this._boundsSelected)&&this._isUpdated(r)){var s=this.getSelectedColor(!0)||this.getLayer().getSelectedColor(!0),a=e.chain(this.getGlobalMatrix(!0));if(t.strokeStyle=t.fillStyle=s?s.toCanvasStyle(t):"#009dec",this._drawSelected&&this._drawSelected(t,a,i),this._boundsSelected){var o=n/2,l=a._transformCorners(this.getInternalBounds());t.beginPath();for(var u=0;u<8;u++)t[0===u?"moveTo":"lineTo"](l[u],l[++u]);t.closePath(),t.stroke();for(u=0;u<8;u++)t.fillRect(l[u]-o,l[++u]-o,n,n)}}},_canComposite:function(){return!1}},o.each(["down","drag","up","move"],(function(t){this["removeOn"+o.capitalize(t)]=function(){var e={};return e[t]=!0,this.removeOn(e)}}),{removeOn:function(t){for(var e in t)if(t[e]){var n="mouse"+e,i=this._project,r=i._removeSets=i._removeSets||{};r[n]=r[n]||{},r[n][this._id]=this}return this}})),E=C.extend({_class:"Group",_selectChildren:!0,_serializeFields:{children:[]},initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||this.addChildren(Array.isArray(t)?t:arguments)},_changed:function t(e){t.base.call(this,e),1026&e&&(this._clipItem=void 0)},_getClipItem:function(){var t=this._clipItem;if(void 0===t){t=null;for(var e=0,n=this._children.length;e<n;e++){var i=this._children[e];if(i._clipMask){t=i;break}}this._clipItem=t}return t},isClipped:function(){return!!this._getClipItem()},setClipped:function(t){var e=this.getFirstChild();e&&e.setClipMask(t)},_draw:function(t,e){var n=e.clip,i=!n&&this._getClipItem(),r=!0;if(e=e.extend({clipItem:i,clip:!1}),n?this._currentPath?(t.currentPath=this._currentPath,r=!1):(t.beginPath(),e.dontStart=e.dontFinish=!0):i&&i.draw(t,e.extend({clip:!0})),r)for(var s=0,a=this._children.length;s<a;s++){var o=this._children[s];o!==i&&o.draw(t,e)}n&&(this._currentPath=t.currentPath)}}),T=E.extend({_class:"Layer",initialize:function(t){var e=o.isPlainObject(t)?new o(t):{children:Array.isArray(t)?t:arguments},n=e.insert;e.insert=!1,E.call(this,e),(n||void 0===n)&&(this._project.addChild(this),this.activate())},_remove:function t(e,n){if(this._parent)return t.base.call(this,e,n);if(null!=this._index){var i=this._project;return i._activeLayer===this&&(i._activeLayer=this.getNextSibling()||this.getPreviousSibling()),o.splice(i.layers,null,this._index,1),this._installEvents(!1),e&&i._changes&&this._changed(5),n&&(i._needsUpdate=!0),!0}return!1},getNextSibling:function t(){return this._parent?t.base.call(this):this._project.layers[this._index+1]||null},getPreviousSibling:function t(){return this._parent?t.base.call(this):this._project.layers[this._index-1]||null},isInserted:function t(){return this._parent?t.base.call(this):null!=this._index},activate:function(){this._project._activeLayer=this},_insertSibling:function t(e,n,i){return this._parent?t.base.call(this,e,n,i):this._project.insertChild(e,n,i)}}),M=C.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_boundsSelected:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(t){this._initialize(t)},_equals:function(t){return this._type===t._type&&this._size.equals(t._size)&&o.equals(this._radius,t._radius)},clone:function(t){var e=new M(C.NO_INSERT);return e.setType(this._type),e.setSize(this._size),e.setRadius(this._radius),this._clone(e,t)},getType:function(){return this._type},setType:function(t){this._type=t},getShape:"#getType",setShape:"#setType",getSize:function(){var t=this._size;return new y(t.width,t.height,this,"setSize")},setSize:function(){var t=m.read(arguments);if(this._size){if(!this._size.equals(t)){var e=this._type,n=t.width,i=t.height;if("rectangle"===e){var r=m.min(this._radius,t.divide(2));this._radius.set(r.width,r.height)}else"circle"===e?(n=i=(n+i)/2,this._radius=n/2):"ellipse"===e&&this._radius.set(n/2,i/2);this._size.set(n,i),this._changed(9)}}else this._size=t.clone()},getRadius:function(){var t=this._radius;return"circle"===this._type?t:new y(t.width,t.height,this,"setRadius")},setRadius:function(t){var e=this._type;if("circle"===e){if(t===this._radius)return;var n=2*t;this._radius=t,this._size.set(n,n)}else if(t=m.read(arguments),this._radius){if(this._radius.equals(t))return;if(this._radius.set(t.width,t.height),"rectangle"===e){n=m.max(this._size,t.multiply(2));this._size.set(n.width,n.height)}else"ellipse"===e&&this._size.set(2*t.width,2*t.height)}else this._radius=t.clone();this._changed(9)},isEmpty:function(){return!1},toPath:function(t){var e=this._clone(new(R[o.capitalize(this._type)])({center:new p,size:this._size,radius:this._radius,insert:!1}),t);return s.settings.applyMatrix&&e.setApplyMatrix(!0),e},_draw:function(t,e,n){var i=this._style,r=i.hasFill(),s=i.hasStroke(),a=e.dontFinish||e.clip,o=!n;if(r||s||a){var l=this._type,u=this._radius,h="circle"===l;if(e.dontStart||t.beginPath(),o&&h)t.arc(0,0,u,0,2*Math.PI,!0);else{var c=h?u:u.width,d=h?u:u.height,f=this._size,p=f.width,g=f.height;if(o&&"rectangle"===l&&0===c&&0===d)t.rect(-p/2,-g/2,p,g);else{var m=p/2,y=g/2,v=.44771525016920644,_=c*v,x=d*v,w=[-m,-y+d,-m,-y+x,-m+_,-y,-m+c,-y,m-c,-y,m-_,-y,m,-y+x,m,-y+d,m,y-d,m,y-x,m-_,y,m-c,y,-m+c,y,-m+_,y,-m,y-x,-m,y-d];n&&n.transform(w,w,32),t.moveTo(w[0],w[1]),t.bezierCurveTo(w[2],w[3],w[4],w[5],w[6],w[7]),m!==c&&t.lineTo(w[8],w[9]),t.bezierCurveTo(w[10],w[11],w[12],w[13],w[14],w[15]),y!==d&&t.lineTo(w[16],w[17]),t.bezierCurveTo(w[18],w[19],w[20],w[21],w[22],w[23]),m!==c&&t.lineTo(w[24],w[25]),t.bezierCurveTo(w[26],w[27],w[28],w[29],w[30],w[31])}}t.closePath()}a||!r&&!s||(this._setStyles(t),r&&(t.fill(i.getWindingRule()),t.shadowColor="rgba(0,0,0,0)"),s&&t.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(t,e){var n=new v(this._size).setCenter(0,0);return"getBounds"!==t&&this.hasStroke()&&(n=n.expand(this.getStrokeWidth())),e?e._transformBounds(n):n}},new function(){function t(t,e,n){var i=t._radius;if(!i.isZero())for(var r=t._size.divide(2),s=0;s<4;s++){var a=new p(1&s?1:-1,s>1?1:-1),o=a.multiply(r),l=o.subtract(a.multiply(i)),u=new v(o,l);if((n?u.expand(n):u).contains(e))return l}}function e(t,e){var n=t.getAngleInRadians(),i=2*e.width,r=2*e.height,s=i*Math.sin(n),a=r*Math.cos(n);return i*r/(2*Math.sqrt(s*s+a*a))}return{_contains:function e(n){if("rectangle"===this._type){var i=t(this,n);return i?n.subtract(i).divide(this._radius).getLength()<=1:e.base.call(this,n)}return n.divide(this.size).getLength()<=.5},_hitTestSelf:function n(i,r){var s=!1;if(this.hasStroke()){var a=this._type,o=this._radius,l=this.getStrokeWidth()+2*r.tolerance;if("rectangle"===a){var u=t(this,i,l);if(u){var h=i.subtract(u);s=2*Math.abs(h.getLength()-e(h,o))<=l}else{var c=new v(this._size).setCenter(0,0),d=c.expand(l),f=c.expand(-l);s=d._containsPoint(i)&&!f._containsPoint(i)}}else"ellipse"===a&&(o=e(i,o)),s=2*Math.abs(i.getLength()-o)<=l}return s?new A("stroke",this):n.base.apply(this,arguments)}}},{statics:new function(){function t(t,e,n,i,r){var s=new M(o.getNamed(r));return s._type=t,s._size=n,s._radius=i,s.translate(e)}return{Circle:function(){var e=p.readNamed(arguments,"center"),n=o.readNamed(arguments,"radius");return t("circle",e,new m(2*n),n,arguments)},Rectangle:function(){var e=v.readNamed(arguments,"rectangle"),n=m.min(m.readNamed(arguments,"radius"),e.getSize(!0).divide(2));return t("rectangle",e.getCenter(!0),e.getSize(!0),n,arguments)},Ellipse:function(){var e=M._readEllipse(arguments),n=e.radius;return t("ellipse",e.center,n.multiply(2),n,arguments)},_readEllipse:function(t){var e,n;if(o.hasNamed(t,"radius"))e=p.readNamed(t,"center"),n=m.readNamed(t,"radius");else{var i=v.readNamed(t,"rectangle");e=i.getCenter(!0),n=i.getSize(!0).divide(2)}return{center:e,radius:n}}}}}),k=C.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsGetter:"getBounds",_boundsSelected:!0,_serializeFields:{crossOrigin:null,source:null},initialize:function(t,e){this._initialize(t,void 0!==e&&p.read(arguments,1))||("string"==typeof t?this.setSource(t):this.setImage(t)),this._size||(this._size=new m,this._loaded=!1)},_equals:function(t){return this.getSource()===t.getSource()},clone:function(t){var e=new k(C.NO_INSERT),n=this._image,i=this._canvas;if(n)e.setImage(n);else if(i){var r=it.getCanvas(this._size);r.getContext("2d").drawImage(i,0,0),e.setImage(r)}return e._crossOrigin=this._crossOrigin,this._clone(e,t)},getSize:function(){var t=this._size;return new y(t?t.width:0,t?t.height:0,this,"setSize")},setSize:function(){var t=m.read(arguments);if(!t.equals(this._size))if(t.width>0&&t.height>0){var e=this.getElement();this.setImage(it.getCanvas(t)),e&&this.getContext(!0).drawImage(e,0,0,t.width,t.height)}else this._canvas&&it.release(this._canvas),this._size=t.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(t){this.setSize(t,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(t){this.setSize(this.getWidth(),t)},isEmpty:function(){var t=this._size;return!t||0===t.width&&0===t.height},getResolution:function(){var t=this._matrix,e=new p(0,0).transform(t),n=new p(1,0).transform(t).subtract(e),i=new p(0,1).transform(t).subtract(e);return new m(72/n.getLength(),72/i.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(t){this._canvas&&it.release(this._canvas),t&&t.getContext?(this._image=null,this._canvas=t,this._loaded=!0):(this._image=t,this._canvas=null,this._loaded=t&&t.complete),this._size=new m(t?t.naturalWidth||t.width:0,t?t.naturalHeight||t.height:0),this._context=null,this._changed(521)},getCanvas:function(){if(!this._canvas){var t=it.getContext(this._size);try{this._image&&t.drawImage(this._image,0,0),this._canvas=t.canvas}catch(e){it.release(t)}}return this._canvas},setCanvas:"#setImage",getContext:function(t){return this._context||(this._context=this.getCanvas().getContext("2d")),t&&(this._image=null,this._changed(513)),this._context},setContext:function(t){this._context=t},getSource:function(){return this._image&&this._image.src||this.toDataURL()},setSource:function(t){var e,n=this,i=this._crossOrigin;function r(){var t=n.getView();t&&(s=t._scope,n.setImage(e),n.emit("load"),t.update())}e=document.getElementById(t)||new Image,i&&(e.crossOrigin=i),e.naturalWidth&&e.naturalHeight?setTimeout(r,0):(V.add(e,{load:r}),e.src||(e.src=t)),this.setImage(e)},getCrossOrigin:function(){return this._image&&this._image.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(t){this._crossOrigin=t,this._image&&(this._image.crossOrigin=t)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var t=v.read(arguments),e=it.getContext(t.getSize());return e.drawImage(this.getCanvas(),t.x,t.y,t.width,t.height,0,0,t.width,t.height),e.canvas},getSubRaster:function(){var t=v.read(arguments),e=new k(C.NO_INSERT);return e.setImage(this.getSubCanvas(t)),e.translate(t.getCenter().subtract(this.getSize().divide(2))),e._matrix.preConcatenate(this._matrix),e.insertAbove(this),e},toDataURL:function(){var t=this._image&&this._image.src;if(/^data:/.test(t))return t;var e=this.getCanvas();return e?e.toDataURL.apply(e,arguments):null},drawImage:function(t){var e=p.read(arguments,1);this.getContext(!0).drawImage(t,e.x,e.y)},getAverageColor:function(t){var e,n;t?t instanceof N?(n=t,e=t.getBounds()):t.width?e=new v(t):t.x&&(e=new v(t.x-.5,t.y-.5,1,1)):e=this.getBounds();var i=Math.min(e.width,32),r=Math.min(e.height,32),s=k._sampleContext;s?s.clearRect(0,0,33,33):s=k._sampleContext=it.getContext(new m(32)),s.save();var a=(new x).scale(i/e.width,r/e.height).translate(-e.x,-e.y);a.applyToContext(s),n&&n.draw(s,new o({clip:!0,matrices:[a]})),this._matrix.applyToContext(s);var l=this.getElement(),u=this._size;l&&s.drawImage(l,-u.width/2,-u.height/2),s.restore();for(var h=s.getImageData(.5,.5,Math.ceil(i),Math.ceil(r)).data,c=[0,0,0],d=0,f=0,p=h.length;f<p;f+=4){var g=h[f+3];d+=g,g/=255,c[0]+=h[f]*g,c[1]+=h[f+1]*g,c[2]+=h[f+2]*g}for(f=0;f<3;f++)c[f]/=d;return d?$.read(c):null},getPixel:function(){var t=p.read(arguments),e=this.getContext().getImageData(t.x,t.y,1,1).data;return new $("rgb",[e[0]/255,e[1]/255,e[2]/255],e[3]/255)},setPixel:function(){var t=p.read(arguments),e=$.read(arguments),n=e._convert("rgb"),i=e._alpha,r=this.getContext(!0),s=r.createImageData(1,1),a=s.data;a[0]=255*n[0],a[1]=255*n[1],a[2]=255*n[2],a[3]=null!=i?255*i:255,r.putImageData(s,t.x,t.y)},createImageData:function(){var t=m.read(arguments);return this.getContext().createImageData(t.width,t.height)},getImageData:function(){var t=v.read(arguments);return t.isEmpty()&&(t=new v(this._size)),this.getContext().getImageData(t.x,t.y,t.width,t.height)},setImageData:function(t){var e=p.read(arguments,1);this.getContext(!0).putImageData(t,e.x,e.y)},_getBounds:function(t,e){var n=new v(this._size).setCenter(0,0);return e?e._transformBounds(n):n},_hitTestSelf:function(t){if(this._contains(t)){var e=this;return new A("pixel",e,{offset:t.add(e._size.divide(2)).round(),color:{get:function(){return e.getPixel(this.offset)}}})}},_draw:function(t){var e=this.getElement();e&&(t.globalAlpha=this._opacity,t.drawImage(e,-this._size.width/2,-this._size.height/2))},_canComposite:function(){return!0}}),O=C.extend({_class:"PlacedSymbol",_applyMatrix:!1,_canApplyMatrix:!1,_boundsGetter:{getBounds:"getStrokeBounds"},_boundsSelected:!0,_serializeFields:{symbol:null},initialize:function(t,e){this._initialize(t,void 0!==e&&p.read(arguments,1))||this.setSymbol(t instanceof S?t:new S(t))},_equals:function(t){return this._symbol===t._symbol},getSymbol:function(){return this._symbol},setSymbol:function(t){this._symbol=t,this._changed(9)},clone:function(t){var e=new O(C.NO_INSERT);return e.setSymbol(this._symbol),this._clone(e,t)},isEmpty:function(){return this._symbol._definition.isEmpty()},_getBounds:function(t,e,n){var i=this.symbol._definition;return i._getCachedBounds(t,e&&e.chain(i._matrix),n)},_hitTestSelf:function(t,e){var n=this._symbol._definition._hitTest(t,e);return n&&(n.item=this),n},_draw:function(t,e){this.symbol._definition.draw(t,e)}}),A=o.extend({_class:"HitResult",initialize:function(t,e,n){this.type=t,this.item=e,n&&(n.enumerable=!0,this.inject(n))},statics:{getOptions:function(t){return new o({type:null,tolerance:s.settings.hitTolerance,fill:!t,stroke:!t,segments:!t,handles:!1,ends:!1,center:!1,bounds:!1,guides:!1,selected:!1},t)}}}),P=o.extend({_class:"Segment",beans:!0,initialize:function(t,e,n,i,r,s){var a,o,l,u=arguments.length;0===u||(1===u?"point"in t?(a=t.point,o=t.handleIn,l=t.handleOut):a=t:2===u&&"number"==typeof t?a=arguments:u<=3?(a=t,o=e,l=n):(a=void 0!==t?[t,e]:null,o=void 0!==n?[n,i]:null,l=void 0!==r?[r,s]:null)),new I(a,this,"_point"),new I(o,this,"_handleIn"),new I(l,this,"_handleOut")},_serialize:function(t){return o.serialize(this.hasHandles()?[this._point,this._handleIn,this._handleOut]:this._point,t,!0)},_changed:function(t){var e=this._path;if(e){var n,i=e._curves,r=this._index;i&&(t&&t!==this._point&&t!==this._handleIn||!(n=r>0?i[r-1]:e._closed?i[i.length-1]:null)||n._changed(),t&&t!==this._point&&t!==this._handleOut||!(n=i[r])||n._changed()),e._changed(25)}},getPoint:function(){return this._point},setPoint:function(){var t=p.read(arguments);this._point.set(t.x,t.y)},getHandleIn:function(){return this._handleIn},setHandleIn:function(){var t=p.read(arguments);this._handleIn.set(t.x,t.y)},getHandleOut:function(){return this._handleOut},setHandleOut:function(){var t=p.read(arguments);this._handleOut.set(t.x,t.y)},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},clearHandles:function(){this._handleIn.set(0,0),this._handleOut.set(0,0)},_selectionState:0,isSelected:function(t){var e=this._selectionState;return t?t===this._point?!!(4&e):t===this._handleIn?!!(1&e):t===this._handleOut&&!!(2&e):!!(7&e)},setSelected:function(t,e){var n=this._path,i=(t=!!t,this._selectionState),r=i,s=e?e===this._point?4:e===this._handleIn?1:e===this._handleOut?2:0:7;t?i|=s:i&=~s,this._selectionState=i,n&&i!==r&&(n._updateSelection(this,r,i),n._changed(129))},getIndex:function(){return void 0!==this._index?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var t=this._path,e=this._index;return t?(e>0&&!t._closed&&e===t._segments.length-1&&e--,t.getCurves()[e]||null):null},getLocation:function(){var t=this.getCurve();return t?new L(t,this===t._segment1?0:1):null},getNext:function(){var t=this._path&&this._path._segments;return t&&(t[this._index+1]||this._path._closed&&t[0])||null},getPrevious:function(){var t=this._path&&this._path._segments;return t&&(t[this._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return 0===this._index},isLast:function(){var t=this._path;return t&&this._index===t._segments.length-1||!1},reverse:function(){var t=this._handleIn,e=this._handleOut,n=t._x,i=t._y;t.set(e._x,e._y),e.set(n,i)},reversed:function(){return new P(this._point,this._handleOut,this._handleIn)},remove:function(){return!!this._path&&!!this._path.removeSegment(this._index)},clone:function(){return new P(this._point,this._handleIn,this._handleOut)},equals:function(t){return t===this||t&&this._class===t._class&&this._point.equals(t._point)&&this._handleIn.equals(t._handleIn)&&this._handleOut.equals(t._handleOut)||!1},toString:function(){var t=["point: "+this._point];return this._handleIn.isZero()||t.push("handleIn: "+this._handleIn),this._handleOut.isZero()||t.push("handleOut: "+this._handleOut),"{ "+t.join(", ")+" }"},transform:function(t){this._transformCoordinates(t,new Array(6),!0),this._changed()},_transformCoordinates:function(t,e,n){var i=this._point,r=n&&this._handleIn.isZero()?null:this._handleIn,s=n&&this._handleOut.isZero()?null:this._handleOut,a=i._x,o=i._y,l=2;return e[0]=a,e[1]=o,r&&(e[l++]=r._x+a,e[l++]=r._y+o),s&&(e[l++]=s._x+a,e[l++]=s._y+o),t&&(t._transformCoordinates(e,e,l/2),a=e[0],o=e[1],n?(i._x=a,i._y=o,l=2,r&&(r._x=e[l++]-a,r._y=e[l++]-o),s&&(s._x=e[l++]-a,s._y=e[l++]-o)):(r||(e[l++]=a,e[l++]=o),s||(e[l++]=a,e[l++]=o))),e}}),I=p.extend({initialize:function(t,e,n){var i,r,s;if(t)if(void 0!==(i=t[0]))r=t[1];else{var a=t;void 0===(i=a.x)&&(i=(a=p.read(arguments)).x),r=a.y,s=a.selected}else i=r=0;this._x=i,this._y=r,this._owner=e,e[n]=this,s&&this.setSelected(!0)},set:function(t,e){return this._x=t,this._y=e,this._owner._changed(this),this},_serialize:function(t){var e=t.formatter,n=e.number(this._x),i=e.number(this._y);return this.isSelected()?{x:n,y:i,selected:!0}:[n,i]},getX:function(){return this._x},setX:function(t){this._x=t,this._owner._changed(this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner._changed(this)},isZero:function(){return d.isZero(this._x)&&d.isZero(this._y)},setSelected:function(t){this._owner.setSelected(t,this)},isSelected:function(){return this._owner.isSelected(this)}}),D=o.extend({_class:"Curve",initialize:function(t,e,n,i,r,s,a,o){var l,u,h,c,d,f,p=arguments.length;3===p?(this._path=t,l=e,u=n):0===p?(l=new P,u=new P):1===p?"segment1"in t?(l=new P(t.segment1),u=new P(t.segment2)):"point1"in t?(h=t.point1,d=t.handle1,f=t.handle2,c=t.point2):Array.isArray(t)&&(h=[t[0],t[1]],c=[t[6],t[7]],d=[t[2]-t[0],t[3]-t[1]],f=[t[4]-t[6],t[5]-t[7]]):2===p?(l=new P(t),u=new P(e)):4===p?(h=t,d=e,f=n,c=i):8===p&&(h=[t,e],c=[a,o],d=[n-t,i-e],f=[r-a,s-o]),this._segment1=l||new P(h,null,d),this._segment2=u||new P(c,f,null)},_serialize:function(t){return o.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],t,!0)},_changed:function(){this._length=this._bounds=void 0},clone:function(){return new D(this._segment1,this._segment2)},toString:function(){var t=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||t.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||t.push("handle2: "+this._segment2._handleIn),t.push("point2: "+this._segment2._point),"{ "+t.join(", ")+" }"},remove:function(){var t=!1;if(this._path){var e=this._segment2,n=e._handleOut;(t=e.remove())&&this._segment1._handleOut.set(n.x,n.y)}return t},getPoint1:function(){return this._segment1._point},setPoint1:function(){var t=p.read(arguments);this._segment1._point.set(t.x,t.y)},getPoint2:function(){return this._segment2._point},setPoint2:function(){var t=p.read(arguments);this._segment2._point.set(t.x,t.y)},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){var t=p.read(arguments);this._segment1._handleOut.set(t.x,t.y)},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){var t=p.read(arguments);this._segment2._handleIn.set(t.x,t.y)},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index+1]||this._path._closed&&t[0])||null},getPrevious:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return 0===this._segment1._index},isLast:function(){var t=this._path;return t&&this._segment1._index===t._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle2().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(t){this.getPoint1().setSelected(t),this.getHandle1().setSelected(t),this.getHandle2().setSelected(t),this.getPoint2().setSelected(t)},getValues:function(t){return D.getValues(this._segment1,this._segment2,t)},getPoints:function(){for(var t=this.getValues(),e=[],n=0;n<8;n+=2)e.push(new p(t[n],t[n+1]));return e},getLength:function(){return null==this._length&&(this._length=D.getLength(this.getValues(),0,1)),this._length},getArea:function(){return D.getArea(this.getValues())},getLine:function(){return new w(this._segment1._point,this._segment2._point)},getPart:function(t,e){return new D(D.getPart(this.getValues(),t,e))},getPartLength:function(t,e){return D.getLength(this.getValues(),t,e)},getIntersections:function(t){return D._getIntersections(this.getValues(),t&&t!==this?t.getValues():null,this,t,[],{})},_getParameter:function(t,e){return e?t:t&&t.curve===this?t.parameter:void 0===t&&void 0===e?.5:this.getParameterAt(t,0)},divide:function(t,e,n){var i=this._getParameter(t,e),r=null;if(i>=4e-7&&i<=1-4e-7){var s=D.subdivide(this.getValues(),i),a=s[0],o=s[1],l=n||this.hasHandles(),u=this._segment1,h=this._segment2,c=this._path;l&&(u._handleOut.set(a[2]-a[0],a[3]-a[1]),h._handleIn.set(o[4]-o[6],o[5]-o[7]));var d=a[6],f=a[7],g=new P(new p(d,f),l&&new p(a[4]-d,a[5]-f),l&&new p(o[2]-d,o[3]-f));c?(c.insert(u._index+1,g),r=this.getNext()):(this._segment2=g,r=new D(g,h))}return r},split:function(t,e){return this._path?this._path.split(this._segment1._index,this._getParameter(t,e)):null},reversed:function(){return new D(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut.set(0,0),this._segment2._handleIn.set(0,0)},statics:{getValues:function(t,e,n){var i=t._point,r=t._handleOut,s=e._handleIn,a=e._point,o=[i._x,i._y,i._x+r._x,i._y+r._y,a._x+s._x,a._y+s._y,a._x,a._y];return n&&n._transformCoordinates(o,o,4),o},subdivide:function(t,e){var n=t[0],i=t[1],r=t[2],s=t[3],a=t[4],o=t[5],l=t[6],u=t[7];void 0===e&&(e=.5);var h=1-e,c=h*n+e*r,d=h*i+e*s,f=h*r+e*a,p=h*s+e*o,g=h*a+e*l,m=h*o+e*u,y=h*c+e*f,v=h*d+e*p,_=h*f+e*g,x=h*p+e*m,w=h*y+e*_,b=h*v+e*x;return[[n,i,c,d,y,v,w,b],[w,b,_,x,g,m,l,u]]},solveCubic:function(t,e,n,i,r,s){var a=t[e],o=t[e+2],l=3*(o-a),u=3*(t[e+4]-o)-l,h=t[e+6]-a-l-u;return d.solveCubic(h,u,l,a-n,i,r,s)},getParameterOf:function(t,e){var n=new p(t[0],t[1]),i=new p(t[6],t[7]),r=e.isClose(n,1e-12)?0:e.isClose(i,1e-12)?1:null;if(null!==r)return r;for(var s=[e.x,e.y],a=[],o=0;o<2;o++)for(var l=D.solveCubic(t,o,s[o],a,0,1),u=0;u<l;u++)if(r=a[u],e.isClose(D.getPoint(t,r),2e-7))return r;return e.isClose(n,2e-7)?0:e.isClose(i,2e-7)?1:null},getNearestParameter:function(t,e){if(D.isStraight(t)){var n=t[0],i=t[1],r=t[6]-n,s=t[7]-i,a=r*r+s*s;if(0===a)return 0;var o=((e.x-n)*r+(e.y-i)*s)/a;return o<1e-12?0:o>.999999999999?1:D.getParameterOf(t,new p(n+o*r,i+o*s))}var l=1/0,u=0;function h(n){if(n>=0&&n<=1){var i=e.getDistance(D.getPoint(t,n),!0);if(i<l)return l=i,u=n,!0}}for(var c=0;c<=100;c++)h(c/100);for(var d=.005;d>4e-7;)h(u-d)||h(u+d)||(d/=2);return u},getPart:function(t,e,n){var i=e>n;if(i){var r=e;e=n,n=r}return e>0&&(t=D.subdivide(t,e)[1]),n<1&&(t=D.subdivide(t,(n-e)/(1-e))[0]),i?[t[6],t[7],t[4],t[5],t[2],t[3],t[0],t[1]]:t},hasHandles:function(t){var e=d.isZero;return!(e(t[0]-t[2])&&e(t[1]-t[3])&&e(t[4]-t[6])&&e(t[5]-t[7]))},isFlatEnough:function(t,e){var n=t[0],i=t[1],r=t[2],s=t[3],a=t[4],o=t[5],l=t[6],u=t[7],h=3*r-2*n-l,c=3*s-2*i-u,d=3*a-2*l-n,f=3*o-2*u-i;return Math.max(h*h,d*d)+Math.max(c*c,f*f)<10*e*e},getArea:function(t){var e=t[0],n=t[1],i=t[6],r=t[7],s=(t[2]+e)/2,a=(t[3]+n)/2,o=(t[4]+t[6])/2,l=(t[5]+t[7])/2;return 6*((e-s)*(a+n)+(s-o)*(l+a)+(o-i)*(r+l))/10},getBounds:function(t){for(var e=t.slice(0,2),n=e.slice(),i=[0,0],r=0;r<2;r++)D._addBounds(t[r],t[r+2],t[r+4],t[r+6],r,0,e,n,i);return new v(e[0],e[1],n[0]-e[0],n[1]-e[1])},_addBounds:function(t,e,n,i,r,s,a,o,l){function u(t,e){var n=t-e,i=t+e;n<a[r]&&(a[r]=n),i>o[r]&&(o[r]=i)}var h=3*(e-n)-t+i,c=2*(t+n)-4*e,f=e-t,p=d.solveQuadratic(h,c,f,l);u(i,0);for(var g=0;g<p;g++){var m=l[g],y=1-m;4e-7<m&&m<1-4e-7&&u(y*y*y*t+3*y*y*m*e+3*y*m*m*n+m*m*m*i,s)}}}},o.each(["getBounds","getStrokeBounds","getHandleBounds","getRoughBounds"],(function(t){this[t]=function(){this._bounds||(this._bounds={});var e=this._bounds[t];if(!e){var n=this._path;e=this._bounds[t]=R[t]([this._segment1,this._segment2],!1,n&&n.getStyle())}return e.clone()}}),{}),o.each({isStraight:function(t,e,n){if(e.isZero()&&n.isZero())return!0;if(t.isZero())return!1;if(e.isCollinear(t)&&n.isCollinear(t)){var i=t.dot(t),r=t.dot(e)/i,s=t.dot(n)/i;return r>=0&&r<=1&&s<=0&&s>=-1}return!1},isLinear:function(t,e,n){var i=t.divide(3);return e.equals(i)&&n.negate().equals(i)}},(function(t,e){this[e]=function(){var e=this._segment1,n=this._segment2;return t(n._point.subtract(e._point),e._handleOut,n._handleIn)},this.statics[e]=function(e){var n=e[0],i=e[1],r=e[6],s=e[7];return t(new p(r-n,s-i),new p(e[2]-n,e[3]-i),new p(e[4]-r,e[5]-s))}}),{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},isCollinear:function(t){return t&&this.isStraight()&&t.isStraight()&&this.getLine().isCollinear(t.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAt(.5,!0).y)<1e-7},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAt(.5,!0).x)<1e-7}}),{beans:!1,getParameterAt:function(t,e){return D.getParameterAt(this.getValues(),t,e)},getParameterOf:function(){return D.getParameterOf(this.getValues(),p.read(arguments))},getLocationAt:function(t,e){var n=e?t:this.getParameterAt(t);return null!=n&&n>=0&&n<=1?new L(this,n):null},getLocationOf:function(){return this.getLocationAt(this.getParameterOf(p.read(arguments)),!0)},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getNearestLocation:function(){var t=p.read(arguments),e=this.getValues(),n=D.getNearestParameter(e,t),i=D.getPoint(e,n);return new L(this,n,i,null,t.getDistance(i))},getNearestPoint:function(){return this.getNearestLocation.apply(this,arguments).getPoint()}},new function(){var t=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return o.each(t,(function(t){this[t+"At"]=function(e,n){var i=this.getValues();return D[t](i,n?e:D.getParameterAt(i,e,0))}}),{statics:{evaluateMethods:t}})},new function(){function t(t){var e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],a=t[5],o=t[6],l=t[7],u=9*(i-s)+3*(o-e),h=6*(e+s)-12*i,c=3*(i-e),d=9*(r-a)+3*(l-n),f=6*(n+a)-12*r,p=3*(r-n);return function(t){var e=(u*t+h)*t+c,n=(d*t+f)*t+p;return Math.sqrt(e*e+n*n)}}function e(t,e){return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(e-t))))}function n(t,e,n,i){if(null==e||e<0||e>1)return null;var r,s,a=t[0],o=t[1],l=t[2],u=t[3],h=t[4],c=t[5],d=t[6],f=t[7];if(0===n&&(e<4e-7||e>1-4e-7)){var g=e<4e-7;r=g?a:d,s=g?o:f}else{var m=3*(l-a),y=3*(h-l)-m,v=d-a-m-y,_=3*(u-o),x=3*(c-u)-_,w=f-o-_-x;if(0===n)r=((v*e+y)*e+m)*e+a,s=((w*e+x)*e+_)*e+o;else{if(e<4e-7?(r=m,s=_):e>1-4e-7?(r=3*(d-h),s=3*(f-c)):(r=(3*v*e+2*y)*e+m,s=(3*w*e+2*x)*e+_),i){0===r&&0===s&&(e<4e-7||e>1-4e-7)&&(r=h-l,s=c-u);var b=Math.sqrt(r*r+s*s);b&&(r/=b,s/=b)}if(3===n){var S=6*v*e+2*y,C=6*w*e+2*x,E=Math.pow(r*r+s*s,1.5);r=0!==E?(r*C-s*S)/E:0,s=0}}}return 2===n?new p(s,-r):new p(r,s)}return{statics:{getLength:function(n,i,r){if(void 0===i&&(i=0),void 0===r&&(r=1),0===i&&1===r&&D.isStraight(n)){var s=n[6]-n[0],a=n[7]-n[1];return Math.sqrt(s*s+a*a)}var o=t(n);return d.integrate(o,i,r,e(i,r))},getParameterAt:function(n,i,r){if(void 0===r&&(r=i<0?1:0),0===i)return r;var s=Math.abs,a=i>0,o=a?r:0,l=a?1:r,u=t(n),h=d.integrate(u,o,l,e(o,l));if(s(i-h)<1e-12)return a?l:o;if(s(i)>h)return null;var c=i/h,f=0;return d.findRoot((function(t){return f+=d.integrate(u,r,t,e(r,t)),r=t,f-i}),u,r+c,o,l,32,1e-12)},getPoint:function(t,e){return n(t,e,0,!1)},getTangent:function(t,e){return n(t,e,1,!0)},getWeightedTangent:function(t,e){return n(t,e,1,!1)},getNormal:function(t,e){return n(t,e,2,!0)},getWeightedNormal:function(t,e){return n(t,e,2,!1)},getCurvature:function(t,e){return n(t,e,3,!1).x}}}},new function(){function t(t,e,n,i,r,s,a,o,l,u,h){var c=e.startConnected,d=e.endConnected;if(null==r&&(r=D.getParameterOf(n,s)),null!==r&&r>=(c?4e-7:0)&&r<=(d?1-4e-7:1)&&(null==l&&(l=D.getParameterOf(a,u)),null!==l&&l>=(d?4e-7:0)&&l<=(c?1-4e-7:1))){var f=e.renormalize;if(f){var p=f(r,l);r=p[0],l=p[1]}var g=new L(i,r,s||D.getPoint(n,r),h),m=new L(o,l,u||D.getPoint(a,l),h),y=g.getPath()===m.getPath()&&g.getIndex()>m.getIndex()?m:g,v=e.include;g._intersection=m,m._intersection=g,v&&!v(y)||L.insert(t,y,!0)}}function e(i,r,s,a,o,l,u,h,c,d,f,p,g){if(!(++g>=24)){var m,y,v=r[0],_=r[1],x=r[6],b=r[7],S=w.getSignedDistance,C=S(v,_,x,b,r[2],r[3]),E=S(v,_,x,b,r[4],r[5]),T=C*E>0?3/4:4/9,M=T*Math.min(0,C,E),k=T*Math.max(0,C,E),O=function(t,e,n,i){var r,s=[0,t],a=[1/3,e],o=[2/3,n],l=[1,i],u=e-(2*t+i)/3,h=n-(t+2*i)/3;if(u*h<0)r=[[s,a,l],[s,o,l]];else{var c=u/h;r=[c>=2?[s,a,l]:c<=.5?[s,o,l]:[s,a,o,l],[s,l]]}return(u||h)<0?r.reverse():r}(S(v,_,x,b,i[0],i[1]),S(v,_,x,b,i[2],i[3]),S(v,_,x,b,i[4],i[5]),S(v,_,x,b,i[6],i[7])),A=O[0],P=O[1];if(null!=(m=n(A,P,M,k))&&null!=(y=n(A.reverse(),P.reverse(),M,k))){i=D.getPart(i,m,y);var I=y-m,L=u+(h-u)*m,N=u+(h-u)*y;if(f>.5&&I>.5)if(N-L>d-c){var R=L+(N-L)/2;e(r,(z=D.subdivide(i,.5))[0],a,s,o,l,c,d,L,R,I,!p,g),e(r,z[1],a,s,o,l,c,d,R,N,I,!p,g)}else{var z;R=c+(d-c)/2;e((z=D.subdivide(r,.5))[0],i,a,s,o,l,c,R,L,N,I,!p,g),e(z[1],i,a,s,o,l,R,d,L,N,I,!p,g)}else if(Math.max(d-c,N-L)<1e-7){var U=L+(N-L)/2,j=c+(d-c)/2;i=s.getValues(),r=a.getValues(),t(o,l,p?r:i,p?a:s,p?j:U,null,p?i:r,p?s:a,p?U:j,null)}else I>1e-12&&e(r,i,a,s,o,l,c,d,L,N,I,!p,g)}}}function n(t,e,n,r){return t[0][1]<n?i(t,!0,n):e[0][1]>r?i(e,!1,r):t[0][0]}function i(t,e,n){for(var i=t[0][0],r=t[0][1],s=1,a=t.length;s<a;s++){var o=t[s][0],l=t[s][1];if(e?l>=n:l<=n)return l===n?o:i+(n-r)*(o-i)/(l-r);i=o,r=l}return null}function r(e,n,i,r,s,a){for(var o=D.isStraight(e),l=o?n:e,u=o?e:n,h=u[0],c=u[1],f=u[6]-h,p=u[7]-c,g=Math.atan2(-p,f),m=Math.sin(g),y=Math.cos(g),v=[],_=0;_<8;_+=2){var x=l[_]-h,w=l[_+1]-c;v.push(x*y-w*m,x*m+w*y)}var b=[],S=D.solveCubic(v,1,0,b,0,1);for(_=0;_<S;_++){var C=b[_],E=D.getPoint(l,C),T=D.getParameterOf(u,E);if(null!==T){var M=D.getPoint(u,T),k=o?T:C,O=o?C:T;(!a.endConnected||O>d.CURVETIME_EPSILON)&&t(s,a,e,i,k,o?M:E,n,r,O,o?E:M)}}}function s(e,n,i,r,s,a){var o=w.intersect(e[0],e[1],e[6],e[7],n[0],n[1],n[6],n[7]);o&&t(s,a,e,i,null,o,n,r,null,o)}return{statics:{_getIntersections:function(n,i,a,o,l,u){if(!i)return D._getSelfIntersection(n,a,l,u);var h=n[0],c=n[1],d=n[6],f=n[7],g=i[0],m=i[1],y=i[6],v=i[7],_=(3*n[2]+h)/4,x=(3*n[3]+c)/4,w=(3*n[4]+d)/4,b=(3*n[5]+f)/4,S=(3*i[2]+g)/4,C=(3*i[3]+m)/4,E=(3*i[4]+y)/4,T=(3*i[5]+v)/4,M=Math.min,k=Math.max;if(!(k(h,_,w,d)>=M(g,S,E,y)&&M(h,_,w,d)<=k(g,S,E,y)&&k(c,x,b,f)>=M(m,C,T,v)&&M(c,x,b,f)<=k(m,C,T,v)))return l;if(!u.startConnected&&!u.endConnected){var O=D.getOverlaps(n,i);if(O){for(var A=0;A<2;A++){var P=O[A];t(l,u,n,a,P[0],null,i,o,P[1],null,!0)}return l}}var I=D.isStraight(n),L=D.isStraight(i),N=I&&L,R=l.length;if((N?s:I||L?r:e)(n,i,a,o,l,u,0,1,0,1,0,!1,0),N&&l.length>R)return l;var z=new p(h,c),U=new p(d,f),j=new p(g,m),F=new p(y,v);return z.isClose(j,1e-12)&&t(l,u,n,a,0,z,i,o,0,j),!u.startConnected&&z.isClose(F,1e-12)&&t(l,u,n,a,0,z,i,o,1,F),!u.endConnected&&U.isClose(j,1e-12)&&t(l,u,n,a,1,U,i,o,0,j),U.isClose(F,1e-12)&&t(l,u,n,a,1,U,i,o,1,F),l},_getSelfIntersection:function(t,e,n,i){var r=t[0],s=t[1],a=t[2],o=t[3],l=t[4],u=t[5],h=t[6],c=t[7],f=new w(r,s,h,c,!1),g=f.getSide(new p(a,o),!0);if(g===f.getSide(new p(l,u),!0)&&((r-l)*(o-c)+(a-h)*(u-s))*g>0)return n;var m=h-3*l+3*a-r,y=l-2*a+r,v=a-r,_=c-3*u+3*o-s,x=u-2*o+s,b=o-s,S=_*v-m*b;if(S*S-4*(_*y-m*x)*(x*v-y*b)<0){var C,E=[],T=d.solveCubic(m*m+_*_,3*(m*y+_*x),2*(y*y+x*x)+m*v+_*b,y*v+x*b,E,0,1);if(T>0){for(var M=0,k=0;M<T;M++){var O=Math.abs(e.getCurvatureAt(E[M],!0));O>k&&(k=O,C=E[M])}var A=D.subdivide(t,C);i.endConnected=!0,i.renormalize=function(t,e){return[t*C,e*(1-C)+C]},D._getIntersections(A[0],A[1],e,e,n,i)}}return n},getOverlaps:function(t,e){var n=Math.abs,i=D.isStraight(t),r=D.isStraight(e),s=i&&r;function a(t){var e=t[6]-t[0],n=t[7]-t[1];return e*e+n*n}if(s){var o=a(t)<a(e),l=o?e:t,u=o?t:e,h=new w(l[0],l[1],l[6],l[7]);if(h.getDistance(new p(u[0],u[1]))>2e-7||h.getDistance(new p(u[6],u[7]))>2e-7)return null}else if(i^r)return null;for(var c=[t,e],d=[],f=0,g=0;f<2&&d.length<2;f+=0===g?0:1,g^=1){var m=D.getParameterOf(c[1^f],new p(c[f][0===g?0:6],c[f][0===g?1:7]));if(null!=m){var y=0===f?[g,m]:[m,g];(0===d.length||n(y[0]-d[0][0])>4e-7&&n(y[1]-d[0][1])>4e-7)&&d.push(y)}if(1===f&&0===d.length)break}if(2!==d.length)d=null;else if(!s){var v=D.getPart(t,d[0][0],d[1][0]),_=D.getPart(e,d[0][1],d[1][1]);(n(_[2]-v[2])>2e-7||n(_[3]-v[3])>2e-7||n(_[4]-v[4])>2e-7||n(_[5]-v[5])>2e-7)&&(d=null)}return d}}}}),L=o.extend({_class:"CurveLocation",beans:!0,initialize:function t(e,n,i,r,s){if(n>.9999996){var a=e.getNext();a&&(n=0,e=a)}this._id=f.get(t),this._setCurve(e),this._parameter=n,this._point=i||e.getPointAt(n,!0),this._overlap=r,this._distance=s,this._intersection=this._next=this._prev=null},_setCurve:function(t){var e=t._path;this._version=e?e._version:0,this._curve=t,this._segment=null,this._segment1=t._segment1,this._segment2=t._segment2},_setSegment:function(t){this._setCurve(t.getCurve()),this._segment=t,this._parameter=t===this._segment1?0:1,this._point=t._point.clone()},getSegment:function(){var t=this.getCurve(),e=this._segment;if(!e){var n=this.getParameter();0===n?e=t._segment1:1===n?e=t._segment2:null!=n&&(e=t.getPartLength(0,n)<t.getPartLength(n,1)?t._segment1:t._segment2),this._segment=e}return e},getCurve:function(){var t=this._curve,e=t&&t._path,n=this;function i(t){var e=t&&t.getCurve();if(e&&null!=(n._parameter=e.getParameterOf(n._point)))return n._setCurve(e),n._segment=t,e}return e&&e._version!==this._version&&(t=this._parameter=this._curve=this._offset=null),t||i(this._segment)||i(this._segment1)||i(this._segment2.getPrevious())},getPath:function(){var t=this.getCurve();return t&&t._path},getIndex:function(){var t=this.getCurve();return t&&t.getIndex()},getParameter:function(){var t=this.getCurve(),e=this._parameter;return t&&null==e?this._parameter=t.getParameterOf(this._point):e},getPoint:function(){return this._point},getOffset:function(){var t=this._offset;if(null==t){t=0;var e=this.getPath(),n=this.getIndex();if(e&&null!=n)for(var i=e.getCurves(),r=0;r<n;r++)t+=i[r].getLength();this._offset=t+=this.getCurveOffset()}return t},getCurveOffset:function(){var t=this.getCurve(),e=this.getParameter();return null!=e&&t&&t.getPartLength(0,e)},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var t=this.getCurve(),e=null;return t&&(e=t.divide(this.getParameter(),!0))&&this._setSegment(e._segment1),e},split:function(){var t=this.getCurve();return t?t.split(this.getParameter(),!0):null},equals:function(t,e){var n=this===t;if(!n&&t instanceof L&&this.getPath()===t.getPath()&&this.getPoint().isClose(t.getPoint(),2e-7)){var i=this.getCurve(),r=t.getCurve(),s=Math.abs,a=s((i.isLast()&&r.isFirst()?-1:i.getIndex())+this.getParameter()-((r.isLast()&&i.isFirst()?-1:r.getIndex())+t.getParameter()));n=(a<4e-7||(a=s(this.getOffset()-t.getOffset()))<2e-7||s(this.getPath().getLength()-a)<2e-7)&&(e||!this._intersection&&!t._intersection||this._intersection&&this._intersection.equals(t._intersection,!0))}return n},toString:function(){var t=[],e=this.getPoint(),n=c.instance;e&&t.push("point: "+e);var i=this.getIndex();null!=i&&t.push("index: "+i);var r=this.getParameter();return null!=r&&t.push("parameter: "+n.number(r)),null!=this._distance&&t.push("distance: "+n.number(this._distance)),"{ "+t.join(", ")+" }"},isTouching:function(){var t=this._intersection;if(t&&this.getTangent().isCollinear(t.getTangent())){var e=this.getCurve(),n=t.getCurve();return!(e.isStraight()&&n.isStraight()&&e.getLine().intersect(n.getLine()))}return!1},isCrossing:function(){var t=this._intersection;if(!t)return!1;var e=this.getParameter(),n=t.getParameter();if(e>=4e-7&&e<=1-4e-7||n>=4e-7&&n<=1-4e-7)return!this.isTouching();var i=this.getCurve(),r=i.getPrevious(),s=t.getCurve(),a=s.getPrevious(),o=Math.PI;if(!r||!a)return!1;function l(t,e,n){return e<n?t>e&&t<n:t>e&&t<=o||t>=-o&&t<n}var u=r.getTangentAt(1-4e-7,!0).negate().getAngleInRadians(),h=i.getTangentAt(4e-7,!0).getAngleInRadians(),c=a.getTangentAt(1-4e-7,!0).negate().getAngleInRadians(),d=s.getTangentAt(4e-7,!0).getAngleInRadians();return l(c,u,h)^l(d,u,h)&&l(c,h,u)^l(d,h,u)},isOverlap:function(){return!!this._overlap}},o.each(D.evaluateMethods,(function(t){var e=t+"At";this[t]=function(){var t=this.getParameter(),n=this.getCurve();return null!=t&&n&&n[e](t,!0)}}),{preserve:!0}),new function(){function t(t,e,n){var i=t.length,r=0,s=i-1;function a(n,r){for(var s=n+r;s>=-1&&s<=i;s+=r){var a=t[(s%i+i)%i];if(!e.getPoint().isClose(a.getPoint(),2e-7))break;if(e.equals(a))return a}return null}for(;r<=s;){var o,l=r+s>>>1,u=t[l];if(n&&(o=e.equals(u)?u:a(l,-1)||a(l,1)))return e._overlap&&(o._overlap=o._intersection._overlap=!0),o;var h=e.getPath(),c=u.getPath();(h===c?e.getIndex()+e.getParameter()-(u.getIndex()+u.getParameter()):h._id-c._id)<0?s=l-1:r=l+1}return t.splice(r,0,e),e}return{statics:{insert:t,expand:function(e){for(var n=e.slice(),i=0,r=e.length;i<r;i++)t(n,e[i]._intersection,!1);return n}}}}),N=C.extend({_class:"PathItem",initialize:function(){},getIntersections:function(t,e,n,i){var r=this===t||!t,s=this._matrix.orNullIfIdentity(),a=r?s:(n||t._matrix).orNullIfIdentity();if(!r&&!this.getBounds(s).touches(t.getBounds(a)))return[];for(var o,l=this.getCurves(),u=r?l:t.getCurves(),h=l.length,c=r?h:u.length,d=[],f=[],p=0;p<c;p++)d[p]=u[p].getValues(a);for(p=0;p<h;p++){var g=l[p],m=r?d[p]:g.getValues(s),y=g.getPath();y!==t&&(t=y,o=[],f.push(o)),r&&D._getSelfIntersection(m,g,o,{include:e,startConnected:1===h&&g.getPoint1().equals(g.getPoint2())});for(var v=r?p+1:0;v<c;v++){if(i&&o.length)return o;var _=u[v];D._getIntersections(m,d[v],g,_,o,{include:e,startConnected:r&&g.getPrevious()===_,endConnected:r&&g.getNext()===_})}}o=[];p=0;for(var x=f.length;p<x;p++)o.push.apply(o,f[p]);return o},getCrossings:function(t){return this.getIntersections(t,(function(t){return t.isCrossing()}))},_asPathItem:function(){return this},setPathData:function(t){var e,n,i,r=t.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/gi),s=!1,a=new p,o=new p;function l(t,n){var i=+e[t];return s&&(i+=a[n]),i}function u(t){return new p(l(t,"x"),l(t+1,"y"))}this.clear();for(var h=0,c=r&&r.length;h<c;h++){var d=r[h],f=d[0],g=f.toLowerCase(),y=(e=d.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g))&&e.length;switch(s=f===g,"z"!==n||/[mz]/.test(g)||this.moveTo(a=o),g){case"m":case"l":for(var v="m"===g,_=0;_<y;_+=2)this[0===_&&v?"moveTo":"lineTo"](a=u(_));i=a,v&&(o=a);break;case"h":case"v":var x="h"===g?"x":"y";for(_=0;_<y;_++)a[x]=l(_,x),this.lineTo(a);i=a;break;case"c":for(_=0;_<y;_+=6)this.cubicCurveTo(u(_),i=u(_+2),a=u(_+4));break;case"s":for(_=0;_<y;_+=4)this.cubicCurveTo(/[cs]/.test(n)?a.multiply(2).subtract(i):a,i=u(_),a=u(_+2)),n=g;break;case"q":for(_=0;_<y;_+=4)this.quadraticCurveTo(i=u(_),a=u(_+2));break;case"t":for(_=0;_<y;_+=2)this.quadraticCurveTo(i=/[qt]/.test(n)?a.multiply(2).subtract(i):a,a=u(_)),n=g;break;case"a":for(_=0;_<y;_+=7)this.arcTo(a=u(_+5),new m(+e[_],+e[_+1]),+e[_+2],+e[_+4],+e[_+3]);break;case"z":this.closePath(!0)}n=g}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(t){var e=this._getWinding(t,!1,!0);return!!("evenodd"===this.getWindingRule()?1&e:e)}}),R=N.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(t){this._closed=!1,this._segments=[],this._version=0;var e=Array.isArray(t)?"object"==typeof t[0]?t:arguments:!t||void 0!==t.size||void 0===t.x&&void 0===t.point?null:arguments;e&&e.length>0?this.setSegments(e):(this._curves=void 0,this._selectedSegmentState=0,e||"string"!=typeof t||(this.setPathData(t),t=null)),this._initialize(!e&&t)},_equals:function(t){return this._closed===t._closed&&o.equals(this._segments,t._segments)},clone:function(t){var e=new R(C.NO_INSERT);return e.setSegments(this._segments),e._closed=this._closed,void 0!==this._clockwise&&(e._clockwise=this._clockwise),this._clone(e,t)},_changed:function t(e){if(t.base.call(this,e),8&e){var n=this._parent;if(n&&(n._currentPath=void 0),this._length=this._area=this._clockwise=this._monoCurves=void 0,16&e)this._version++;else if(this._curves)for(var i=0,r=this._curves.length;i<r;i++)this._curves[i]._changed()}else 32&e&&(this._bounds=void 0)},getStyle:function(){var t=this._parent;return(t instanceof z?t:this)._style},getSegments:function(){return this._segments},setSegments:function(t){var e=this.isFullySelected();this._segments.length=0,this._selectedSegmentState=0,this._curves=void 0,t&&t.length>0&&this._add(P.readAll(t)),e&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var t=this._curves,e=this._segments;if(!t){var n=this._countCurves();t=this._curves=new Array(n);for(var i=0;i<n;i++)t[i]=new D(this,e[i],e[i+1]||e[0])}return t},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var t=this.getCurves();return t[t.length-1]},isClosed:function(){return this._closed},setClosed:function(t){if(this._closed!=(t=!!t)){if(this._closed=t,this._curves){var e=this._curves.length=this._countCurves();t&&(this._curves[e-1]=new D(this,this._segments[e-1],this._segments[0]))}this._changed(25)}}},{beans:!0,getPathData:function(t,e){var n,i,r,s,a,o,l,u,h=this._segments,d=h.length,f=new c(e),p=new Array(6),g=!0,m=[];function y(e,h){e._transformCoordinates(t,p,!1),n=p[0],i=p[1],g?(m.push("M"+f.pair(n,i)),g=!1):(a=p[2],o=p[3],a===n&&o===i&&l===r&&u===s?h||m.push("l"+f.pair(n-r,i-s)):m.push("c"+f.pair(l-r,u-s)+" "+f.pair(a-r,o-s)+" "+f.pair(n-r,i-s))),r=n,s=i,l=p[4],u=p[5]}if(0===d)return"";for(var v=0;v<d;v++)y(h[v]);return this._closed&&d>0&&(y(h[0],!0),m.push("z")),m.join("")}},{isEmpty:function(){return 0===this._segments.length},_transformContent:function(t){for(var e=new Array(6),n=0,i=this._segments.length;n<i;n++)this._segments[n]._transformCoordinates(t,e,!0);return!0},_add:function(t,e){for(var n=this._segments,i=this._curves,r=t.length,s=null==e,a=(e=s?n.length:e,0);a<r;a++){var o=t[a];o._path&&(o=t[a]=o.clone()),o._path=this,o._index=e+a,o._selectionState&&this._updateSelection(o,0,o._selectionState)}if(s)n.push.apply(n,t);else{n.splice.apply(n,[e,0].concat(t));a=e+r;for(var l=n.length;a<l;a++)n[a]._index=a}if(i){var u=this._countCurves(),h=e+r-1===u?e-1:e,c=h,d=Math.min(h+r,u);t._curves&&(i.splice.apply(i,[h,0].concat(t._curves)),c+=t._curves.length);for(a=c;a<d;a++)i.splice(a,0,new D(this,null,null));this._adjustCurves(h,d)}return this._changed(25),t},_adjustCurves:function(t,e){for(var n,i=this._segments,r=this._curves,s=t;s<e;s++)(n=r[s])._path=this,n._segment1=i[s],n._segment2=i[s+1]||i[0],n._changed();(n=r[this._closed&&0===t?i.length-1:t-1])&&(n._segment2=i[t]||i[0],n._changed()),(n=r[e])&&(n._segment1=i[e],n._changed())},_countCurves:function(){var t=this._segments.length;return!this._closed&&t>0?t-1:t},add:function(t){return arguments.length>1&&"number"!=typeof t?this._add(P.readAll(arguments)):this._add([P.read(arguments)])[0]},insert:function(t,e){return arguments.length>2&&"number"!=typeof e?this._add(P.readAll(arguments,1),t):this._add([P.read(arguments,1)],t)[0]},addSegment:function(){return this._add([P.read(arguments)])[0]},insertSegment:function(t){return this._add([P.read(arguments,1)],t)[0]},addSegments:function(t){return this._add(P.readAll(t))},insertSegments:function(t,e){return this._add(P.readAll(e),t)},removeSegment:function(t){return this.removeSegments(t,t+1)[0]||null},removeSegments:function(t,e,n){t=t||0,e=o.pick(e,this._segments.length);var i=this._segments,r=this._curves,s=i.length,a=i.splice(t,e-t),l=a.length;if(!l)return a;for(var u=0;u<l;u++){var h=a[u];h._selectionState&&this._updateSelection(h,h._selectionState,0),h._index=h._path=null}u=t;for(var c=i.length;u<c;u++)i[u]._index=u;if(r){var d=t>0&&e===s+(this._closed?1:0)?t-1:t;r=r.splice(d,l);n&&(a._curves=r.slice(1)),this._adjustCurves(d,d)}return this._changed(25),a},clear:"#removeSegments",hasHandles:function(){for(var t=this._segments,e=0,n=t.length;e<n;e++)if(t[e].hasHandles())return!0;return!1},clearHandles:function(){for(var t=this._segments,e=0,n=t.length;e<n;e++)t[e].clearHandles()},getLength:function(){if(null==this._length){for(var t=this.getCurves(),e=0,n=0,i=t.length;n<i;n++)e+=t[n].getLength();this._length=e}return this._length},getArea:function(){if(null==this._area){for(var t=this._segments,e=t.length,n=e-1,i=0,r=0,s=this._closed?e:n;r<s;r++)i+=D.getArea(D.getValues(t[r],t[r<n?r+1:0]));this._area=i}return this._area},isClockwise:function(){return void 0!==this._clockwise?this._clockwise:this.getArea()>=0},setClockwise:function(t){this.isClockwise()!=(t=!!t)&&this.reverse(),this._clockwise=t},isFullySelected:function(){var t=this._segments.length;return this._selected&&t>0&&this._selectedSegmentState===7*t},setFullySelected:function(t){t&&this._selectSegments(!0),this.setSelected(t)},setSelected:function t(e){e||this._selectSegments(!1),t.base.call(this,e)},_selectSegments:function(t){var e=this._segments.length;this._selectedSegmentState=t?7*e:0;for(var n=0;n<e;n++)this._segments[n]._selectionState=t?7:0},_updateSelection:function(t,e,n){t._selectionState=n,(this._selectedSegmentState+=n-e)>0&&this.setSelected(!0)},flatten:function(t){for(var e=new U(this,64,.1),n=0,i=e.length/Math.ceil(e.length/t),r=e.length+(this._closed?-i:i)/2,s=[];n<=r;)s.push(new P(e.getPointAt(n))),n+=i;this.setSegments(s)},reduce:function(){for(var t=this.getCurves(),e=t.length-1;e>=0;e--){var n=t[e];n.hasHandles()||0!==n.getLength()&&!n.isCollinear(n.getNext())||n.remove()}return this},simplify:function(t){if(this._segments.length>2){var e=new j(this,t||2.5);this.setSegments(e.fit())}},split:function(t,e){if(null===e)return null;if(1===arguments.length){var n=t;if("number"==typeof n&&(n=this.getLocationAt(n)),!n)return null;t=n.index,e=n.parameter}var i=4e-7,r=1-i;e>=r&&(t++,e--);var s=this.getCurves();if(t>=0&&t<s.length){e>=i&&s[t++].divide(e,!0);var a,o=this.removeSegments(t,this._segments.length,!0);return this._closed?(this.setClosed(!1),a=this):((a=new R(C.NO_INSERT)).insertAbove(this,!0),this._clone(a)),a._add(o,0),this.addSegment(o[0]),a}return null},reverse:function(){this._segments.reverse();for(var t=0,e=this._segments.length;t<e;t++){var n=this._segments[t],i=n._handleIn;n._handleIn=n._handleOut,n._handleOut=i,n._index=t}this._curves=null,void 0!==this._clockwise&&(this._clockwise=!this._clockwise),this._changed(9)},join:function(t){if(t){var e=t._segments,n=this.getLastSegment(),i=t.getLastSegment();if(!i)return this;n&&n._point.equals(i._point)&&t.reverse();var r=t.getFirstSegment();if(n&&n._point.equals(r._point))n.setHandleOut(r._handleOut),this._add(e.slice(1));else{var s=this.getFirstSegment();s&&s._point.equals(r._point)&&t.reverse(),i=t.getLastSegment(),s&&s._point.equals(i._point)?(s.setHandleIn(i._handleIn),this._add(e.slice(0,e.length-1),0)):this._add(e.slice())}t._closed&&this._add([e[0]]),t.remove()}var a=this.getFirstSegment(),o=this.getLastSegment();return a!==o&&a._point.equals(o._point)&&(a.setHandleIn(o._handleIn),o.remove(),this.setClosed(!0)),this},toShape:function(t){if(!this._closed)return null;var e,n,i,r,s,a,o,l=this._segments;function u(t,e){var n=l[t],i=n.getNext(),r=l[e],s=r.getNext();return n._handleOut.isZero()&&i._handleIn.isZero()&&r._handleOut.isZero()&&s._handleIn.isZero()&&i._point.subtract(n._point).isCollinear(s._point.subtract(r._point))}function h(t){var e=l[t],n=e.getNext(),i=e._handleOut,r=n._handleIn,s=.5522847498307936;if(i.isOrthogonal(r)){var a=e._point,o=n._point,u=new w(a,i,!0).intersect(new w(o,r,!0),!0);return u&&d.isZero(i.getLength()/u.subtract(a).getLength()-s)&&d.isZero(r.getLength()/u.subtract(o).getLength()-s)}return!1}function c(t,e){return l[t]._point.getDistance(l[e]._point)}if(!this.hasHandles()&&4===l.length&&u(0,2)&&u(1,3)&&(s=l[1],a=s.getPrevious(),o=s.getNext(),a._handleOut.isZero()&&s._handleIn.isZero()&&s._handleOut.isZero()&&o._handleIn.isZero()&&s._point.subtract(a._point).isOrthogonal(o._point.subtract(s._point)))?(e=M.Rectangle,n=new m(c(0,3),c(0,1)),r=l[1]._point.add(l[2]._point).divide(2)):8===l.length&&h(0)&&h(2)&&h(4)&&h(6)&&u(1,5)&&u(3,7)?(e=M.Rectangle,i=(n=new m(c(1,6),c(0,3))).subtract(new m(c(0,7),c(1,2))).divide(2),r=l[3]._point.add(l[4]._point).divide(2)):4===l.length&&h(0)&&h(1)&&h(2)&&h(3)&&(d.isZero(c(0,2)-c(1,3))?(e=M.Circle,i=c(0,2)/2):(e=M.Ellipse,i=new m(c(2,0)/2,c(3,1)/2)),r=l[1]._point),e){var f=this.getPosition(!0),p=this._clone(new e({center:f,size:n,radius:i,insert:!1}),t,!1);return p.rotate(r.subtract(f).getAngle()+90),p}return null},_hitTestSelf:function(t,e){var n,i,r,s,a,o,l=this,u=this.getStyle(),h=this._segments,c=h.length,d=this._closed,f=e._tolerancePadding,g=f,m=e.stroke&&u.hasStroke(),y=e.fill&&u.hasFill(),v=e.curves,_=m?u.getStrokeWidth()/2:y&&e.tolerance>0||v?0:null;function x(e,n){return t.subtract(e).divide(n).length<=1}function w(t,n,i){if(!e.selected||n.isSelected()){var r=t._point;if(n!==r&&(n=n.add(r)),x(n,g))return new A(i,l,{segment:t,point:n})}}function b(t,n){return(n||e.segments)&&w(t,t._point,"segment")||!n&&e.handles&&(w(t,t._handleIn,"handle-in")||w(t,t._handleOut,"handle-out"))}function S(t){s.add(t)}function C(e){var a;if(("round"!==n||"round"!==i)&&(s=new R({internal:!0,closed:!0}),d||e._index>0&&e._index<c-1?"round"!==n&&(e._handleIn.isZero()||e._handleOut.isZero())&&R._addBevelJoin(e,n,_,r,S,!0):"round"!==i&&R._addSquareCap(e,i,_,S,!0),!s.isEmpty()))return s.contains(t)||(a=s.getNearestLocation(t))&&x(a.getPoint(),f);return x(e._point,g)}if(null!==_&&(_>0?(n=u.getStrokeJoin(),i=u.getStrokeCap(),r=_*u.getMiterLimit(),g=f.add(new p(_,_))):n=i="round"),!e.ends||e.segments||d){if(e.segments||e.handles)for(var E=0;E<c;E++)if(o=b(h[E]))return o}else if(o=b(h[0],!0)||b(h[c-1],!0))return o;if(null!==_){if(a=this.getNearestLocation(t)){var T=a.getParameter();0===T||1===T&&c>1?C(a.getSegment())||(a=null):x(a.getPoint(),g)||(a=null)}if(!a&&"miter"===n&&c>1)for(E=0;E<c;E++){var M=h[E];if(t.getDistance(M._point)<=r&&C(M)){a=M.getLocation();break}}}return!a&&y&&this._contains(t)||a&&!m&&!v?new A("fill",this):a?new A(m?"stroke":"curve",this,{location:a,point:a.getPoint()}):null}},o.each(D.evaluateMethods,(function(t){this[t+"At"]=function(e,n){var i=this.getLocationAt(e,n);return i&&i[t]()}}),{beans:!1,getLocationOf:function(){for(var t=p.read(arguments),e=this.getCurves(),n=0,i=e.length;n<i;n++){var r=e[n].getLocationOf(t);if(r)return r}return null},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getLocationAt:function(t,e){var n=this.getCurves(),i=0;if(e){var r=~~t;return(o=n[r])?o.getLocationAt(t-r,!0):null}for(var s=0,a=n.length;s<a;s++){var o,l=i;if((i+=(o=n[s]).getLength())>t)return o.getLocationAt(t-l)}return n.length>0&&t<=this.getLength()?new L(n[n.length-1],1):null},getNearestLocation:function(){for(var t=p.read(arguments),e=this.getCurves(),n=1/0,i=null,r=0,s=e.length;r<s;r++){var a=e[r].getNearestLocation(t);a._distance<n&&(n=a._distance,i=a)}return i},getNearestPoint:function(){return this.getNearestLocation.apply(this,arguments).getPoint()}}),new function(){function t(t,e,n){var i,r,s,a,o,l,u,h,c=e._segments,d=c.length,f=new Array(6),p=!0;function g(e){if(n)e._transformCoordinates(n,f,!1),i=f[0],r=f[1];else{var c=e._point;i=c._x,r=c._y}if(p)t.moveTo(i,r),p=!1;else{if(n)o=f[2],l=f[3];else{var d=e._handleIn;o=i+d._x,l=r+d._y}o===i&&l===r&&u===s&&h===a?t.lineTo(i,r):t.bezierCurveTo(u,h,o,l,i,r)}if(s=i,a=r,n)u=f[4],h=f[5];else{d=e._handleOut;u=s+d._x,h=a+d._y}}for(var m=0;m<d;m++)g(c[m]);e._closed&&d>0&&g(c[0])}return{_draw:function(e,n,i){var r=n.dontStart,a=n.dontFinish||n.clip,o=this.getStyle(),l=o.hasFill(),u=o.hasStroke(),h=o.getDashArray(),c=!s.support.nativeDash&&u&&h&&h.length;function d(t){return h[(t%c+c)%c]}if(r||e.beginPath(),!r&&this._currentPath?e.currentPath=this._currentPath:(l||u&&!c||a)&&(t(e,this,i),this._closed&&e.closePath(),r||(this._currentPath=e.currentPath)),!a&&(l||u)&&(this._setStyles(e),l&&(e.fill(o.getWindingRule()),e.shadowColor="rgba(0,0,0,0)"),u)){if(c){r||e.beginPath();var f,p=new U(this,32,.25,i),g=p.length,m=-o.getDashOffset(),y=0;for(m%=g;m>0;)m-=d(y--)+d(y--);for(;m<g;)f=m+d(y++),(m>0||f>0)&&p.drawPart(e,Math.max(m,0),Math.max(f,0)),m=f+d(y++)}e.stroke()}},_drawSelected:function(e,n){e.beginPath(),t(e,this,n),e.stroke(),function(t,e,n,i){var r=i/2;function s(e){var n=a[e],i=a[e+1];c==n&&d==i||(t.beginPath(),t.moveTo(c,d),t.lineTo(n,i),t.stroke(),t.beginPath(),t.arc(n,i,r,0,2*Math.PI,!0),t.fill())}for(var a=new Array(6),o=0,l=e.length;o<l;o++){var u=e[o];u._transformCoordinates(n,a,!1);var h=u._selectionState,c=a[0],d=a[1];if(1&h&&s(2),2&h&&s(4),t.fillRect(c-r,d-r,i,i),!(4&h)){var f=t.fillStyle;t.fillStyle="#ffffff",t.fillRect(c-r+1,d-r+1,i-2,i-2),t.fillStyle=f}}}(e,this._segments,n,s.settings.handleSize)}}},new function(){function t(t){var e=t.length,n=[],i=[],r=2;n[0]=t[0]/r;for(var s=1;s<e;s++)i[s]=1/r,r=(s<e-1?4:2)-i[s],n[s]=(t[s]-n[s-1])/r;for(s=1;s<e;s++)n[e-s-1]-=i[e-s]*n[e-s];return n}return{smooth:function(){var e=this._segments,n=e.length,i=this._closed,r=n,s=0;if(!(n<=2)){i&&(s=Math.min(n,4),r+=2*Math.min(n,s));for(var a=[],o=0;o<n;o++)a[o+s]=e[o]._point;if(i)for(o=0;o<s;o++)a[o]=e[o+n-s]._point,a[o+n+s]=e[o]._point;else r--;var l=[];for(o=1;o<r-1;o++)l[o]=4*a[o]._x+2*a[o+1]._x;l[0]=a[0]._x+2*a[1]._x,l[r-1]=3*a[r-1]._x;var u=t(l);for(o=1;o<r-1;o++)l[o]=4*a[o]._y+2*a[o+1]._y;l[0]=a[0]._y+2*a[1]._y,l[r-1]=3*a[r-1]._y;var h=t(l);if(i){o=0;for(var c=n;o<s;o++,c++){var d=o/s,f=1-d,g=o+s,m=c+s;u[c]=u[o]*d+u[c]*f,h[c]=h[o]*d+h[c]*f,u[m]=u[g]*f+u[m]*d,h[m]=h[g]*f+h[m]*d}r--}var y=null;for(o=s;o<=r-s;o++){var v=e[o-s];y&&v.setHandleIn(y.subtract(v._point)),o<r&&(v.setHandleOut(new p(u[o],h[o]).subtract(v._point)),y=o<r-1?new p(2*a[o+1]._x-u[o+1],2*a[o+1]._y-h[o+1]):new p((a[r]._x+u[r-1])/2,(a[r]._y+h[r-1])/2))}if(i&&y)(v=this._segments[0]).setHandleIn(y.subtract(v._point))}}}},new function(){function t(t){var e=t._segments;if(0===e.length)throw new Error("Use a moveTo() command first");return e[e.length-1]}return{moveTo:function(){var t=this._segments;1===t.length&&this.removeSegment(0),t.length||this._add([new P(p.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new P(p.read(arguments))])},cubicCurveTo:function(){var e=p.read(arguments),n=p.read(arguments),i=p.read(arguments),r=t(this);r.setHandleOut(e.subtract(r._point)),this._add([new P(i,n.subtract(i))])},quadraticCurveTo:function(){var e=p.read(arguments),n=p.read(arguments),i=t(this)._point;this.cubicCurveTo(e.add(i.subtract(e).multiply(1/3)),e.add(n.subtract(e).multiply(1/3)),n)},curveTo:function(){var e=p.read(arguments),n=p.read(arguments),i=o.pick(o.read(arguments),.5),r=1-i,s=t(this)._point,a=e.subtract(s.multiply(r*r)).subtract(n.multiply(i*i)).divide(2*i*r);if(a.isNaN())throw new Error("Cannot put a curve through points with parameter = "+i);this.quadraticCurveTo(a,n)},arcTo:function(){var e,n,i,r,s=t(this),a=s._point,l=p.read(arguments),u=o.peek(arguments);if("boolean"==typeof(f=o.pick(u,!0)))var h=(y=a.add(l).divide(2)).add(y.subtract(a).rotate(f?-90:90));else if(o.remain(arguments)<=2)h=l,l=p.read(arguments);else{var c=m.read(arguments);if(c.isZero())return this.lineTo(l);var d=o.read(arguments),f=!!o.read(arguments),g=!!o.read(arguments),y=a.add(l).divide(2),v=(X=a.subtract(y).rotate(-d)).x,_=X.y,b=Math.abs,S=b(c.width),C=b(c.height),E=S*S,T=C*C,M=v*v,k=_*_,O=Math.sqrt(M/E+k/T);if(O>1&&(E=(S*=O)*S,T=(C*=O)*C),b(O=(E*T-E*k-T*M)/(E*k+T*M))<1e-12&&(O=0),O<0)throw new Error("Cannot create an arc with the given arguments");e=new p(S*_/C,-C*v/S).multiply((g===f?-1:1)*Math.sqrt(O)).rotate(d).add(y),n=(i=(r=(new x).translate(e).rotate(d).scale(S,C))._inverseTransform(a)).getDirectedAngle(r._inverseTransform(l)),!f&&n>0?n-=360:f&&n<0&&(n+=360)}if(h){var A=new w(a.add(h).divide(2),h.subtract(a).rotate(90),!0),I=new w(h.add(l).divide(2),l.subtract(h).rotate(90),!0),D=new w(a,l),L=D.getSide(h);if(!(e=A.intersect(I,!0))){if(!L)return this.lineTo(l);throw new Error("Cannot create an arc with the given arguments")}n=(i=a.subtract(e)).getDirectedAngle(l.subtract(e));var N=D.getSide(e);0===N?n=L*Math.abs(n):L===N&&(n+=n<0?360:-360)}for(var R=Math.abs(n),z=R>=360?4:Math.ceil(R/90),U=n/z,j=U*Math.PI/360,F=4/3*Math.sin(j)/(1+Math.cos(j)),B=[],$=0;$<=z;$++){var X=l,H=null;if($<z&&(H=i.rotate(90).multiply(F),r?(X=r._transformPoint(i),H=r._transformPoint(i.add(H)).subtract(X)):X=e.add(i)),0===$)s.setHandleOut(H);else{var G=i.rotate(-90).multiply(F);r&&(G=r._transformPoint(i.add(G)).subtract(X)),B.push(new P(X,G,H))}i=i.rotate(U)}this._add(B)},lineBy:function(){var e=p.read(arguments),n=t(this)._point;this.lineTo(n.add(e))},curveBy:function(){var e=p.read(arguments),n=p.read(arguments),i=o.read(arguments),r=t(this)._point;this.curveTo(r.add(e),r.add(n),i)},cubicCurveBy:function(){var e=p.read(arguments),n=p.read(arguments),i=p.read(arguments),r=t(this)._point;this.cubicCurveTo(r.add(e),r.add(n),r.add(i))},quadraticCurveBy:function(){var e=p.read(arguments),n=p.read(arguments),i=t(this)._point;this.quadraticCurveTo(i.add(e),i.add(n))},arcBy:function(){var e=t(this)._point,n=e.add(p.read(arguments)),i=o.pick(o.peek(arguments),!0);"boolean"==typeof i?this.arcTo(n,i):this.arcTo(n,e.add(p.read(arguments)))},closePath:function(t){this.setClosed(!0),t&&this.join()}}},{_getBounds:function(t,e){return R[t](this._segments,this._closed,this.getStyle(),e)},statics:{getBounds:function(t,e,n,i,r){var s=t[0];if(!s)return new v;var a=new Array(6),o=s._transformCoordinates(i,new Array(6),!1),l=o.slice(0,2),u=l.slice(),h=new Array(2);function c(t){t._transformCoordinates(i,a,!1);for(var e=0;e<2;e++)D._addBounds(o[e],o[e+4],a[e+2],a[e],e,r?r[e]:0,l,u,h);var n=o;o=a,a=n}for(var d=1,f=t.length;d<f;d++)c(t[d]);return e&&c(s),new v(l[0],l[1],u[0]-l[0],u[1]-l[1])},getStrokeBounds:function(t,e,n,i){if(!n.hasStroke())return R.getBounds(t,e,n,i);var r=t.length-(e?0:1),s=n.getStrokeWidth()/2,a=R._getPenPadding(s,i),o=R.getBounds(t,e,n,i,a),l=n.getStrokeJoin(),u=n.getStrokeCap(),h=s*n.getMiterLimit(),c=new v(new m(a).multiply(2));function d(t){o=o.include(i?i._transformPoint(t,t):t)}function f(t){o=o.unite(c.setCenter(i?i._transformPoint(t._point):t._point))}function p(t,e){var n=t._handleIn,i=t._handleOut;"round"===e||!n.isZero()&&!i.isZero()&&n.isCollinear(i)?f(t):R._addBevelJoin(t,e,s,h,d)}function g(t,e){"round"===e?f(t):R._addSquareCap(t,e,s,d)}for(var y=1;y<r;y++)p(t[y],l);return e?p(t[0],l):r>0&&(g(t[0],u),g(t[t.length-1],u)),o},_getPenPadding:function(t,e){if(!e)return[t,t];var n=e.shiftless(),i=n.transform(new p(t,0)),r=n.transform(new p(0,t)),s=i.getAngleInRadians(),a=i.getLength(),o=r.getLength(),l=Math.sin(s),u=Math.cos(s),h=Math.tan(s),c=-Math.atan(o*h/a),d=Math.atan(o/(h*a));return[Math.abs(a*Math.cos(c)*u-o*Math.sin(c)*l),Math.abs(o*Math.sin(d)*u+a*Math.cos(d)*l)]},_addBevelJoin:function(t,e,n,i,r,s){var a=t.getCurve(),o=a.getPrevious(),l=a.getPointAt(0,!0),u=o.getNormalAt(1,!0),h=a.getNormalAt(0,!0),c=u.getDirectedAngle(h)<0?-n:n;if(u.setLength(c),h.setLength(c),s&&(r(l),r(l.add(u))),"miter"===e){var d=new w(l.add(u),new p(-u.y,u.x),!0).intersect(new w(l.add(h),new p(-h.y,h.x),!0),!0);if(d&&l.getDistance(d)<=i&&(r(d),!s))return}s||r(l.add(u)),r(l.add(h))},_addSquareCap:function(t,e,n,i,r){var s=t._point,a=t.getLocation(),o=a.getNormal().multiply(n);r&&(i(s.subtract(o)),i(s.add(o))),"square"===e&&(s=s.add(o.rotate(0===a.getParameter()?-90:90))),i(s.add(o)),i(s.subtract(o))},getHandleBounds:function(t,e,n,i,r,s){for(var a=new Array(6),o=1/0,l=-o,u=o,h=l,c=0,d=t.length;c<d;c++){t[c]._transformCoordinates(i,a,!1);for(var f=0;f<6;f+=2){var p=0===f?s:r,g=p?p[0]:0,m=p?p[1]:0,y=a[f],_=a[f+1],x=y-g,w=y+g,b=_-m,S=_+m;x<o&&(o=x),w>l&&(l=w),b<u&&(u=b),S>h&&(h=S)}}return new v(o,u,l-o,h-u)},getRoughBounds:function(t,e,n,i){var r=n.hasStroke()?n.getStrokeWidth()/2:0,s=r;return r>0&&("miter"===n.getStrokeJoin()&&(s=r*n.getMiterLimit()),"square"===n.getStrokeCap()&&(s=Math.max(s,r*Math.sqrt(2)))),R.getHandleBounds(t,e,n,i,R._getPenPadding(r,i),R._getPenPadding(s,i))}}});R.inject({statics:new function(){var t=.5522847498307936,e=[new P([-1,0],[0,t],[0,-t]),new P([0,-1],[-t,0],[t,0]),new P([1,0],[0,-t],[0,t]),new P([0,1],[t,0],[-t,0])];function n(t,e,n){var i=o.getNamed(n),r=new R(i&&!1===i.insert&&C.NO_INSERT);return r._add(t),r._closed=e,r.set(i)}function i(t,i,r){for(var s=new Array(4),a=0;a<4;a++){var o=e[a];s[a]=new P(o._point.multiply(i).add(t),o._handleIn.multiply(i),o._handleOut.multiply(i))}return n(s,!0,r)}return{Line:function(){return n([new P(p.readNamed(arguments,"from")),new P(p.readNamed(arguments,"to"))],!1,arguments)},Circle:function(){var t=p.readNamed(arguments,"center"),e=o.readNamed(arguments,"radius");return i(t,new m(e),arguments)},Rectangle:function(){var e,i=v.readNamed(arguments,"rectangle"),r=m.readNamed(arguments,"radius",0,{readNull:!0}),s=i.getBottomLeft(!0),a=i.getTopLeft(!0),o=i.getTopRight(!0),l=i.getBottomRight(!0);if(!r||r.isZero())e=[new P(s),new P(a),new P(o),new P(l)];else{var u=(r=m.min(r,i.getSize(!0).divide(2))).width,h=r.height,c=u*t,d=h*t;e=[new P(s.add(u,0),null,[-c,0]),new P(s.subtract(0,h),[0,d]),new P(a.add(0,h),null,[0,-d]),new P(a.add(u,0),[-c,0],null),new P(o.subtract(u,0),null,[c,0]),new P(o.add(0,h),[0,-d],null),new P(l.subtract(0,h),null,[0,d]),new P(l.subtract(u,0),[c,0])]}return n(e,!0,arguments)},RoundRectangle:"#Rectangle",Ellipse:function(){var t=M._readEllipse(arguments);return i(t.center,t.radius,arguments)},Oval:"#Ellipse",Arc:function(){var t=p.readNamed(arguments,"from"),e=p.readNamed(arguments,"through"),n=p.readNamed(arguments,"to"),i=o.getNamed(arguments),r=new R(i&&!1===i.insert&&C.NO_INSERT);return r.moveTo(t),r.arcTo(e,n),r.set(i)},RegularPolygon:function(){for(var t=p.readNamed(arguments,"center"),e=o.readNamed(arguments,"sides"),i=o.readNamed(arguments,"radius"),r=360/e,s=!(e%3),a=new p(0,s?-i:i),l=s?-1:.5,u=new Array(e),h=0;h<e;h++)u[h]=new P(t.add(a.rotate((h+l)*r)));return n(u,!0,arguments)},Star:function(){for(var t=p.readNamed(arguments,"center"),e=2*o.readNamed(arguments,"points"),i=o.readNamed(arguments,"radius1"),r=o.readNamed(arguments,"radius2"),s=360/e,a=new p(0,-1),l=new Array(e),u=0;u<e;u++)l[u]=new P(t.add(a.rotate(s*u).multiply(u%2?r:i)));return n(l,!0,arguments)}}}});var z=N.extend({_class:"CompoundPath",_serializeFields:{children:[]},initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||("string"==typeof t?this.setPathData(t):this.addChildren(Array.isArray(t)?t:arguments))},insertChildren:function t(e,n,i){for(var r=n.length-1;r>=0;r--){(a=n[r])instanceof z&&(n.splice.apply(n,[r,1].concat(a.removeChildren())),a.remove())}n=t.base.call(this,e,n,i,R);r=0;for(var s=!i&&n&&n.length;r<s;r++){var a;void 0===(a=n[r])._clockwise&&a.setClockwise(0===a._index)}return n},reverse:function(){for(var t=this._children,e=0,n=t.length;e<n;e++)t[e].reverse()},smooth:function(){for(var t=0,e=this._children.length;t<e;t++)this._children[t].smooth()},reduce:function t(){for(var e=this._children,n=e.length-1;n>=0;n--){var i;(i=e[n].reduce()).isEmpty()&&e.splice(n,1)}return 0===e.length?((i=new R(C.NO_INSERT)).insertAbove(this),i.setStyle(this._style),this.remove(),i):t.base.call(this)},isClockwise:function(){var t=this.getFirstChild();return t&&t.isClockwise()},setClockwise:function(t){this.isClockwise()!==!!t&&this.reverse()},getFirstSegment:function(){var t=this.getFirstChild();return t&&t.getFirstSegment()},getLastSegment:function(){var t=this.getLastChild();return t&&t.getLastSegment()},getCurves:function(){for(var t=this._children,e=[],n=0,i=t.length;n<i;n++)e.push.apply(e,t[n].getCurves());return e},getFirstCurve:function(){var t=this.getFirstChild();return t&&t.getFirstCurve()},getLastCurve:function(){var t=this.getLastChild();return t&&t.getFirstCurve()},getArea:function(){for(var t=this._children,e=0,n=0,i=t.length;n<i;n++)e+=t[n].getArea();return e}},{beans:!0,getPathData:function(t,e){for(var n=this._children,i=[],r=0,s=n.length;r<s;r++){var a=n[r],o=a._matrix;i.push(a.getPathData(t&&!o.isIdentity()?t.chain(o):t,e))}return i.join(" ")}},{_getChildHitTestOptions:function(t){return t.class===R||"path"===t.type?t:new o(t,{fill:!1})},_draw:function(t,e,n){var i=this._children;if(0!==i.length){if(this._currentPath)t.currentPath=this._currentPath;else{e=e.extend({dontStart:!0,dontFinish:!0}),t.beginPath();for(var r=0,s=i.length;r<s;r++)i[r].draw(t,e,n);this._currentPath=t.currentPath}if(!e.clip){this._setStyles(t);var a=this._style;a.hasFill()&&(t.fill(a.getWindingRule()),t.shadowColor="rgba(0,0,0,0)"),a.hasStroke()&&t.stroke()}}},_drawSelected:function(t,e,n){for(var i=this._children,r=0,s=i.length;r<s;r++){var a=i[r],o=a._matrix;n[a._id]||a._drawSelected(t,o.isIdentity()?e:e.chain(o))}}},new function(){function t(t,e){var n=t._children;if(e&&0===n.length)throw new Error("Use a moveTo() command first");return n[n.length-1]}var e={moveTo:function(){var e=t(this),n=e&&e.isEmpty()?e:new R(C.NO_INSERT);n!==e&&this.addChild(n),n.moveTo.apply(n,arguments)},moveBy:function(){var e=t(this,!0),n=e&&e.getLastSegment(),i=p.read(arguments);this.moveTo(n?i.add(n._point):i)},closePath:function(e){t(this,!0).closePath(e)}};return o.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],(function(n){e[n]=function(){var e=t(this,!0);e[n].apply(e,arguments)}})),e});N.inject(new function(){var t={unite:function(t){return 1===t||0===t},intersect:function(t){return 2===t},subtract:function(t){return 1===t},exclude:function(t){return 1===t}};function e(t,e){var n=t.clone(!1).reduce().transform(null,!0,!0);return e?n.resolveCrossings().reorient():n}function n(t,e,n,i,r){var s=new t(C.NO_INSERT);return s.addChildren(e,!0),r&&(s=s.reduce()),s.insertAbove(i&&n.isSibling(i)&&n.getIndex()<i.getIndex()?i:n),s.setStyle(n._style),s}function i(t,i,r){if(!t._children&&!t._closed)return function(t,i,r){if(!i||!i._children&&!i._closed||!/^(subtract|intersect)$/.test(r))return null;var s=e(t,!1),a=e(i,!1),o=s.getIntersections(a,(function(t){return t.isOverlap()||t.isCrossing()})),l="subtract"===r,u=[];function h(t){if(a.contains(t.getPointAt(t.getLength()/2))^l)return u.unshift(t),!0}for(var c=o.length-1;c>=0;c--){var d=o[c].split();d&&(h(d)&&d.getFirstSegment().setHandleIn(0,0),s.getLastSegment().setHandleOut(0,0))}return h(s),n(E,u,t,i)}(t,i,r);var a=e(t,!0),u=i&&t!==i&&e(i,!0);u&&/^(subtract|exclude)$/.test(r)^u.isClockwise()!==a.isClockwise()&&u.reverse();var h=L.expand(a.getIntersections(u,(function(t){return u&&t.isOverlap()||t.isCrossing()})));s(h);var c=[],d=[];function f(t){for(var e=0,n=t.length;e<n;e++){var i=t[e];c.push.apply(c,i._segments),d.push.apply(d,i._getMonoCurves())}}f(a._children||[a]),u&&f(u._children||[u]);for(var p=0,g=h.length;p<g;p++)o(h[p]._segment,a,u,d,r);for(p=0,g=c.length;p<g;p++){var m=c[p];null==m._winding&&o(m,a,u,d,r)}return n(z,l(c,r),t,i,!0)}function r(t,e){for(var n=t;n;){if(n===e)return;n=n._prev}for(;t._next&&t._next!==e;)t=t._next;if(!t._next){for(;e._prev;)e=e._prev;t._next=e,e._prev=t}}function s(t){for(var e,n,i=!1,s=[],a=t.length-1;a>=0;a--){var o,l=t[a],u=l._curve,h=l._parameter,c=h;u!==e?i=!u.hasHandles():n>0&&(h/=n),h<4e-7?o=u._segment1:h>1-4e-7?o=u._segment2:(o=u.divide(h,!0,!0)._segment1,i&&s.push(o)),l._setSegment(o);var d=o._intersection,f=l._intersection;if(d){r(d,f);for(var p=d;p;)r(p._intersection,d),p=p._next}else o._intersection=f;e=u,n=c}a=0;for(var g=s.length;a<g;a++)s[a].clearHandles()}function a(t,e,n,i){var r=t.x,s=t.y,o=0,l=0,u=[],h=Math.abs;if(n){for(var c=-1/0,f=1/0,g=s-2e-7,m=s+2e-7,y=0,v=e.length;y<v;y++){var _=e[y].values;if(D.solveCubic(_,0,r,u,0,1)>0)for(var x=u.length-1;x>=0;x--){var w=D.getPoint(_,u[x]).y;w<g&&w>c?c=w:w>m&&w<f&&(f=w)}}f=(f+s)/2,(c=(c+s)/2)>-1/0&&(o=a(new p(r,c),e,!1,i)),f<1/0&&(l=a(new p(r,f),e,!1,i))}else{var b,S,C=r-2e-7,E=r+2e-7,T=!1;for(y=0,v=e.length;y<v;y++){var M=e[y],k=(_=M.values,M.winding);if(k&&(1===k&&s>=_[1]&&s<=_[7]||s>=_[7]&&s<=_[1])&&1===D.solveCubic(_,1,s,u,0,1)){var O=u[0];if(!(O>1-4e-7&&T&&M.next!==e[y+1]||O<4e-7&&S>1-4e-7&&M.previous===b)){var A=D.getPoint(_,O).x,P=D.getTangent(_,O).y,I=!1;d.isZero(P)&&!D.isStraight(_)||O<4e-7&&P*D.getTangent(M.previous.values,1).y<0||O>1-4e-7&&P*D.getTangent(M.next.values,0).y<0?i&&A>=C&&A<=E&&(++o,++l,I=!0):A<=C?(o+=k,I=!0):A>=E&&(l+=k,I=!0),M.previous!==e[y-1]&&(T=O<4e-7&&I)}b=M,S=O}}}return Math.max(h(o),h(l))}function o(t,e,n,i,r){var s=[],o=t,l=0,u=0;do{var h=(m=t.getCurve()).getLength();s.push({segment:t,curve:m,length:h}),l+=h,t=t.getNext()}while(t&&!t._intersection&&t!==o);for(var c=0;c<3;c++){h=l*(c+1)/4;for(var d=0,f=s.length;d<f;d++){var p=s[d],g=p.length;if(h<=g){(h<2e-7||g-h<2e-7)&&(h=g/2);var m,y=(m=p.curve)._path,v=y._parent,_=m.getPointAt(h),x=m.isHorizontal();v instanceof z&&(y=v),u+="subtract"===r&&n&&(y===e&&n._getWinding(_,x)||y===n&&!e._getWinding(_,x))?0:a(_,i,x);break}h-=g}}for(var w=Math.round(u/3),b=s.length-1;b>=0;b--)s[b].segment._winding=w}function l(e,n){var i,r,s=[],a=t[n],o={unite:{1:2},intersect:{2:1}}[n];function l(t,e){if(t._visited)return!1;if(!a)return!0;var n=t._winding,i=t._intersection;return i&&e&&o&&i.isOverlap()&&(n=o[n]||n),a(n)}function u(t){return t===i||t===r}function h(t,e){if(!t._next)return t;for(;t;){var n=t._segment,i=n.getNext(),r=i._intersection;if(u(i)||!n._visited&&!i._visited&&(!a||(!e||l(n))&&(!(e&&r&&r.isOverlap())&&l(i)||!e&&r&&l(r._segment))))return t;t=t._next}return null}function c(t,e){for(;t;){var n=t._segment;if(u(n))return n;t=t[e?"_next":"_prev"]}}for(var f=0,p=e.length;f<p;f++){var g=e[f],m=null,y=!1;if(l(g,!0)){for(i=r=null;!y;){var v=g._intersection,_=m&&g._handleIn,x=(v=v&&(h(v,!0)||h(v,!1))||v)&&v._segment;if(x&&l(x)&&(g=x),g._visited){if(!(y=u(g))&&v){var w=c(v,!0)||c(v,!1);w&&(g=w,y=!0)}break}m||(m=new R(C.NO_INSERT),i=g,r=x),m.add(new P(g._point,_,g._handleOut)),g._visited=!0,y=u(g=g.getNext())}y?(m.firstSegment.setHandleIn(g._handleIn),m.setClosed(!0)):m&&(console.error("Boolean operation resulted in open path","segments =",m._segments.length,"length =",m.getLength()),m=null),m&&(m._segments.length>8||!d.isZero(m.getArea()))&&(s.push(m),m=null)}}return s}return{_getWinding:function(t,e,n){return a(t,this._getMonoCurves(),e,n)},unite:function(t){return i(this,t,"unite")},intersect:function(t){return i(this,t,"intersect")},subtract:function(t){return i(this,t,"subtract")},exclude:function(t){return i(this,t,"exclude")},divide:function(t){return n(E,[this.subtract(t),this.intersect(t)],this,t,!0)},resolveCrossings:function(){var t=this.getCrossings();if(!t.length)return this;s(L.expand(t));for(var e=this._children||[this],i=[],r=0,a=e.length;r<a;r++)i.push.apply(i,e[r]._segments);return n(z,l(i),this,null,!1)}}}),R.inject({_getMonoCurves:function(){var t,e=this._monoCurves;function n(n){var i=n[1],r=n[7],s={values:n,winding:i===r?0:i>r?-1:1,previous:t,next:null};t&&(t.next=s),e.push(s),t=s}function i(t){if(0!==D.getLength(t)){var e=t[1],i=t[3],r=t[5],s=t[7];if(D.isStraight(t))n(t);else{var a=3*(i-r)-e+s,o=2*(e+r)-4*i,l=i-e,u=[],h=d.solveQuadratic(a,o,l,u,4e-7,1-4e-7);if(0===h)n(t);else{u.sort();var c=u[0],f=D.subdivide(t,c);n(f[0]),h>1&&(c=(u[1]-c)/(1-c),n((f=D.subdivide(f[1],c))[0])),n(f[1])}}}}if(!e){e=this._monoCurves=[];for(var r=this.getCurves(),s=this._segments,a=0,o=r.length;a<o;a++)i(r[a].getValues());if(!this._closed&&s.length>1){var l=s[s.length-1]._point,u=s[0]._point,h=l._x,c=l._y,f=u._x,p=u._y;i([h,c,h,c,f,p,f,p])}if(e.length>0){var g=e[0],m=e[e.length-1];g.previous=m,m.next=g}}return e},getInteriorPoint:function(){var t=this.getBounds().getCenter(!0);if(!this.contains(t)){for(var e=this._getMonoCurves(),n=[],i=t.y,r=[],s=0,a=e.length;s<a;s++){var o=e[s].values;if((1===e[s].winding&&i>=o[1]&&i<=o[7]||i>=o[7]&&i<=o[1])&&D.solveCubic(o,1,i,n,0,1)>0)for(var l=n.length-1;l>=0;l--)r.push(D.getPoint(o,n[l]).x);if(r.length>1)break}t.x=(r[0]+r[1])/2}return t},reorient:function(){return this.setClockwise(!0),this}}),z.inject({_getMonoCurves:function(){for(var t=this._children,e=[],n=0,i=t.length;n<i;n++)e.push.apply(e,t[n]._getMonoCurves());return e},reorient:function(){var t=this.removeChildren().sort((function(t,e){return e.getBounds().getArea()-t.getBounds().getArea()}));if(t.length>0){this.addChildren(t);for(var e=t[0].isClockwise(),n=1,i=t.length;n<i;n++){for(var r=t[n].getInteriorPoint(),s=0,a=n-1;a>=0;a--)t[a].contains(r)&&s++;t[n].setClockwise(s%2==0&&e)}}return this}});var U=o.extend({_class:"PathIterator",initialize:function(t,e,n,i){var r,s=[],a=[],o=0,l=1/(e||32),u=t._segments,h=u[0];function c(t,e){var r=D.getValues(t,e,i);s.push(r),function t(e,i,r,s){if(s-r>l&&!D.isFlatEnough(e,n||.25)){var u=D.subdivide(e,.5),h=(r+s)/2;t(u[0],i,r,h),t(u[1],i,h,s)}else{var c=e[6]-e[0],d=e[7]-e[1],f=Math.sqrt(c*c+d*d);f>1e-6&&(o+=f,a.push({offset:o,value:s,index:i}))}}(r,t._index,0,1)}for(var d=1,f=u.length;d<f;d++)c(h,r=u[d]),h=r;t._closed&&c(r,u[0]),this.curves=s,this.parts=a,this.length=o,this.index=0},getParameterAt:function(t){for(var e,n=this.index;e=n,!(0==n||this.parts[--n].offset<t););for(var i=this.parts.length;e<i;e++){if((o=this.parts[e]).offset>=t){this.index=e;var r=this.parts[e-1],s=r&&r.index==o.index?r.value:0,a=r?r.offset:0;return{value:s+(o.value-s)*(t-a)/(o.offset-a),index:o.index}}}var o;return{value:1,index:(o=this.parts[this.parts.length-1]).index}},drawPart:function(t,e,n){e=this.getParameterAt(e),n=this.getParameterAt(n);for(var i=e.index;i<=n.index;i++){var r=D.getPart(this.curves[i],i==e.index?e.value:0,i==n.index?n.value:1);i==e.index&&t.moveTo(r[0],r[1]),t.bezierCurveTo.apply(t,r.slice(2))}}},o.each(D.evaluateMethods,(function(t){this[t+"At"]=function(e,n){var i=this.getParameterAt(e);return D[t](this.curves[i.index],i.value,n)}}),{})),j=o.extend({initialize:function(t,e){for(var n,i=this.points=[],r=t._segments,s=0,a=r.length;s<a;s++){var o=r[s].point.clone();n&&n.equals(o)||(i.push(o),n=o)}t._closed&&(this.closed=!0,i.unshift(i[i.length-1]),i.push(i[1])),this.error=e},fit:function(){var t=this.points,e=t.length,n=this.segments=e>0?[new P(t[0])]:[];return e>1&&this.fitCubic(0,e-1,t[1].subtract(t[0]).normalize(),t[e-2].subtract(t[e-1]).normalize()),this.closed&&(n.shift(),n.pop()),n},fitCubic:function(t,e,n,i){if(e-t!=1){for(var r,s=this.chordLengthParameterize(t,e),a=Math.max(this.error,this.error*this.error),o=!0,l=0;l<=4;l++){var u=this.generateBezier(t,e,s,n,i),h=this.findMaxError(t,e,u,s);if(h.error<this.error&&o)return void this.addCurve(u);if(r=h.index,h.error>=a)break;o=this.reparameterize(t,e,s,u),a=h.error}var c=this.points[r-1].subtract(this.points[r]),d=this.points[r].subtract(this.points[r+1]),f=c.add(d).divide(2).normalize();this.fitCubic(t,r,n,f),this.fitCubic(r,e,f.negate(),i)}else{var p=this.points[t],g=this.points[e],m=p.getDistance(g)/3;this.addCurve([p,p.add(n.normalize(m)),g.add(i.normalize(m)),g])}},addCurve:function(t){this.segments[this.segments.length-1].setHandleOut(t[1].subtract(t[0])),this.segments.push(new P(t[3],t[2].subtract(t[3])))},generateBezier:function(t,e,n,i,r){for(var s=this.points[t],a=this.points[e],o=[[0,0],[0,0]],l=[0,0],u=0,h=e-t+1;u<h;u++){var c=n[u],d=1-c,f=3*c*d,p=d*d*d,g=f*d,m=f*c,y=c*c*c,v=i.normalize(g),_=r.normalize(m),x=this.points[t+u].subtract(s.multiply(p+g)).subtract(a.multiply(m+y));o[0][0]+=v.dot(v),o[0][1]+=v.dot(_),o[1][0]=o[0][1],o[1][1]+=_.dot(_),l[0]+=v.dot(x),l[1]+=_.dot(x)}var w,b,S=o[0][0]*o[1][1]-o[1][0]*o[0][1];if(Math.abs(S)>1e-12){var C=o[0][0]*l[1]-o[1][0]*l[0];w=(l[0]*o[1][1]-l[1]*o[0][1])/S,b=C/S}else{var E=o[0][0]+o[0][1],T=o[1][0]+o[1][1];w=b=Math.abs(E)>1e-12?l[0]/E:Math.abs(T)>1e-12?l[1]/T:0}var M,k,O=a.getDistance(s),A=1e-12*O;if(w<A||b<A)w=b=O/3;else{var P=a.subtract(s);M=i.normalize(w),k=r.normalize(b),M.dot(P)-k.dot(P)>O*O&&(w=b=O/3,M=k=null)}return[s,s.add(M||i.normalize(w)),a.add(k||r.normalize(b)),a]},reparameterize:function(t,e,n,i){for(var r=t;r<=e;r++)n[r-t]=this.findRoot(i,this.points[r],n[r-t]);r=1;for(var s=n.length;r<s;r++)if(n[r]<=n[r-1])return!1;return!0},findRoot:function(t,e,n){for(var i=[],r=[],s=0;s<=2;s++)i[s]=t[s+1].subtract(t[s]).multiply(3);for(s=0;s<=1;s++)r[s]=i[s+1].subtract(i[s]).multiply(2);var a=this.evaluate(3,t,n),o=this.evaluate(2,i,n),l=this.evaluate(1,r,n),u=a.subtract(e),h=o.dot(o)+u.dot(l);return Math.abs(h)<1e-6?n:n-u.dot(o)/h},evaluate:function(t,e,n){for(var i=e.slice(),r=1;r<=t;r++)for(var s=0;s<=t-r;s++)i[s]=i[s].multiply(1-n).add(i[s+1].multiply(n));return i[0]},chordLengthParameterize:function(t,e){for(var n=[0],i=t+1;i<=e;i++)n[i-t]=n[i-t-1]+this.points[i].getDistance(this.points[i-1]);i=1;for(var r=e-t;i<=r;i++)n[i]/=n[r];return n},findMaxError:function(t,e,n,i){for(var r=Math.floor((e-t+1)/2),s=0,a=t+1;a<e;a++){var o=this.evaluate(3,n,i[a-t]).subtract(this.points[a]),l=o.x*o.x+o.y*o.y;l>=s&&(s=l,r=a)}return{error:s,index:r}}}),F=C.extend({_class:"TextItem",_boundsSelected:!0,_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsGetter:"getBounds",initialize:function(t){this._content="",this._lines=[];var e=t&&o.isPlainObject(t)&&void 0===t.x&&void 0===t.y;this._initialize(e&&t,!e&&p.read(arguments))},_equals:function(t){return this._content===t._content},_clone:function t(e,n,i){return e.setContent(this._content),t.base.call(this,e,n,i)},getContent:function(){return this._content},setContent:function(t){this._content=""+t,this._lines=this._content.split(/\r\n|\n|\r/gm),this._changed(265)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),B=F.extend({_class:"PointText",initialize:function(){F.apply(this,arguments)},clone:function(t){return this._clone(new B(C.NO_INSERT),t)},getPoint:function(){var t=this._matrix.getTranslation();return new g(t.x,t.y,this,"setPoint")},setPoint:function(){var t=p.read(arguments);this.translate(t.subtract(this._matrix.getTranslation()))},_draw:function(t){if(this._content){this._setStyles(t);var e=this._style,n=this._lines,i=e.getLeading(),r=t.shadowColor;t.font=e.getFontStyle(),t.textAlign=e.getJustification();for(var s=0,a=n.length;s<a;s++){t.shadowColor=r;var o=n[s];e.hasFill()&&(t.fillText(o,0,0),t.shadowColor="rgba(0,0,0,0)"),e.hasStroke()&&t.strokeText(o,0,0),t.translate(0,i)}}},_getBounds:function(t,e){var n=this._style,i=this._lines,r=i.length,s=n.getJustification(),a=n.getLeading(),o=this.getView().getTextWidth(n.getFontStyle(),i),l=0;"left"!==s&&(l-=o/("center"===s?2:1));var u=new v(l,r?-.75*a:0,o,r*a);return e?e._transformBounds(u,u):u}}),$=o.extend(new function(){var t,e={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},n={},i={};function r(e){var n,r=e.match(/^#(\w{1,2})(\w{1,2})(\w{1,2})$/);if(r){n=[0,0,0];for(var s=0;s<3;s++){var a=r[s+1];n[s]=parseInt(1==a.length?a+a:a,16)/255}}else if(r=e.match(/^rgba?\((.*)\)$/)){s=0;for(var o=(n=r[1].split(",")).length;s<o;s++){a=+n[s];n[s]=s<3?a/255:a}}else{var l=i[e];if(!l){t||((t=it.getContext(1,1)).globalCompositeOperation="copy"),t.fillStyle="rgba(0,0,0,0)",t.fillStyle=e,t.fillRect(0,0,1,1);var u=t.getImageData(0,0,1,1).data;l=i[e]=[u[0]/255,u[1]/255,u[2]/255]}n=l.slice()}return n}var s=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],a={"rgb-hsb":function(t,e,n){var i=Math.max(t,e,n),r=i-Math.min(t,e,n);return[0===r?0:60*(i==t?(e-n)/r+(e<n?6:0):i==e?(n-t)/r+2:(t-e)/r+4),0===i?0:r/i,i]},"hsb-rgb":function(t,e,n){var i,r=(t=(t/60%6+6)%6)-(i=Math.floor(t)),a=[n,n*(1-e),n*(1-e*r),n*(1-e*(1-r))];return[a[(i=s[i])[0]],a[i[1]],a[i[2]]]},"rgb-hsl":function(t,e,n){var i=Math.max(t,e,n),r=Math.min(t,e,n),s=i-r,a=0===s,o=(i+r)/2;return[a?0:60*(i==t?(e-n)/s+(e<n?6:0):i==e?(n-t)/s+2:(t-e)/s+4),a?0:o<.5?s/(i+r):s/(2-i-r),o]},"hsl-rgb":function(t,e,n){if(0===e)return[n,n,n];for(var i=[(t=(t/360%1+1)%1)+1/3,t,t-1/3],r=n<.5?n*(1+e):n+e-n*e,s=2*n-r,a=[],o=0;o<3;o++){var l=i[o];l<0&&(l+=1),l>1&&(l-=1),a[o]=6*l<1?s+6*(r-s)*l:2*l<1?r:3*l<2?s+(r-s)*(2/3-l)*6:s}return a},"rgb-gray":function(t,e,n){return[.2989*t+.587*e+.114*n]},"gray-rgb":function(t){return[t,t,t]},"gray-hsb":function(t){return[0,0,t]},"gray-hsl":function(t){return[0,0,t]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return o.each(e,(function(t,i){n[i]=[],o.each(t,(function(t,r){var s=o.capitalize(t),a=/^(hue|saturation)$/.test(t),l=n[i][r]="gradient"===t?function(t){var e=this._components[0];return e!==(t=X.read(Array.isArray(t)?t:arguments,0,{readNull:!0}))&&(e&&e._removeOwner(this),t&&t._addOwner(this)),t}:"gradient"===i?function(){return p.read(arguments,0,{readNull:"highlight"===t,clone:!0})}:function(t){return null==t||isNaN(t)?0:t};this["get"+s]=function(){return this._type===i||a&&/^hs[bl]$/.test(this._type)?this._components[r]:this._convert(i)[r]},this["set"+s]=function(t){this._type===i||a&&/^hs[bl]$/.test(this._type)||(this._components=this._convert(i),this._properties=e[i],this._type=i),this._components[r]=l.call(this,t),this._changed()}}),this)}),{_class:"Color",_readIndex:!0,initialize:function t(i){var s,a,o,l,u=Array.prototype.slice,h=arguments,c=0;Array.isArray(i)&&(i=(h=i)[0]);var d=null!=i&&typeof i;if("string"===d&&i in e&&(s=i,i=h[1],Array.isArray(i)?(a=i,o=h[2]):(this.__read&&(c=1),h=u.call(h,1),d=typeof i)),!a){if(l="number"===d?h:"object"===d&&null!=i.length?i:null){s||(s=l.length>=3?"rgb":"gray");var p=e[s].length;o=l[p],this.__read&&(c+=l===arguments?p+(null!=o?1:0):1),l.length>p&&(l=u.call(l,0,p))}else if("string"===d)s="rgb",4===(a=r(i)).length&&(o=a[3],a.length--);else if("object"===d)if(i.constructor===t){if(s=i._type,a=i._components.slice(),o=i._alpha,"gradient"===s)for(var g=1,m=a.length;g<m;g++){var y=a[g];y&&(a[g]=y.clone())}}else if(i.constructor===X)s="gradient",l=h;else{var v=e[s="hue"in i?"lightness"in i?"hsl":"hsb":"gradient"in i||"stops"in i||"radial"in i?"gradient":"gray"in i?"gray":"rgb"],_=n[s];this._components=a=[];for(g=0,m=v.length;g<m;g++){null==(x=i[v[g]])&&0===g&&"gradient"===s&&"stops"in i&&(x={stops:i.stops,radial:i.radial}),null!=(x=_[g].call(this,x))&&(a[g]=x)}o=i.alpha}this.__read&&s&&(c=1)}if(this._type=s||"rgb",this._id=f.get(t),!a){this._components=a=[];for(g=0,m=(_=n[this._type]).length;g<m;g++){var x;null!=(x=_[g].call(this,l&&l[g]))&&(a[g]=x)}}this._components=a,this._properties=e[this._type],this._alpha=o,this.__read&&(this.__read=c)},_serialize:function(t,e){var n=this.getComponents();return o.serialize(/^(gray|rgb)$/.test(this._type)?n:[this._type].concat(n),t,!0,e)},_changed:function(){this._canvasStyle=null,this._owner&&this._owner._changed(65)},_convert:function(t){var e;return this._type===t?this._components.slice():(e=a[this._type+"-"+t])?e.apply(this,this._components):a["rgb-"+t].apply(this,a[this._type+"-rgb"].apply(this,this._components))},convert:function(t){return new $(t,this._convert(t),this._alpha)},getType:function(){return this._type},setType:function(t){this._components=this._convert(t),this._properties=e[t],this._type=t},getComponents:function(){var t=this._components.slice();return null!=this._alpha&&t.push(this._alpha),t},getAlpha:function(){return null!=this._alpha?this._alpha:1},setAlpha:function(t){this._alpha=null==t?null:Math.min(Math.max(t,0),1),this._changed()},hasAlpha:function(){return null!=this._alpha},equals:function(t){var e=o.isPlainValue(t,!0)?$.read(arguments):t;return e===this||e&&this._class===e._class&&this._type===e._type&&this._alpha===e._alpha&&o.equals(this._components,e._components)||!1},toString:function(){for(var t=this._properties,e=[],n="gradient"===this._type,i=c.instance,r=0,s=t.length;r<s;r++){var a=this._components[r];null!=a&&e.push(t[r]+": "+(n?a:i.number(a)))}return null!=this._alpha&&e.push("alpha: "+i.number(this._alpha)),"{ "+e.join(", ")+" }"},toCSS:function(t){var e=this._convert("rgb"),n=t||null==this._alpha?1:this._alpha;function i(t){return Math.round(255*(t<0?0:t>1?1:t))}return e=[i(e[0]),i(e[1]),i(e[2])],n<1&&e.push(n<0?0:n),t?"#"+((1<<24)+(e[0]<<16)+(e[1]<<8)+e[2]).toString(16).slice(1):(4==e.length?"rgba(":"rgb(")+e.join(",")+")"},toCanvasStyle:function(t){if(this._canvasStyle)return this._canvasStyle;if("gradient"!==this._type)return this._canvasStyle=this.toCSS();var e,n=this._components,i=n[0],r=i._stops,s=n[1],a=n[2];if(i._radial){var o=a.getDistance(s),l=n[3];if(l){var u=l.subtract(s);u.getLength()>o&&(l=s.add(u.normalize(o-.1)))}var h=l||s;e=t.createRadialGradient(h.x,h.y,0,s.x,s.y,o)}else e=t.createLinearGradient(s.x,s.y,a.x,a.y);for(var c=0,d=r.length;c<d;c++){var f=r[c];e.addColorStop(f._rampPoint,f._color.toCanvasStyle())}return this._canvasStyle=e},transform:function(t){if("gradient"===this._type){for(var e=this._components,n=1,i=e.length;n<i;n++){var r=e[n];t._transformPoint(r,r,!0)}this._changed()}},statics:{_types:e,random:function(){var t=Math.random;return new $(t(),t(),t())}}})},new function(){return o.each({add:function(t,e){return t+e},subtract:function(t,e){return t-e},multiply:function(t,e){return t*e},divide:function(t,e){return t/e}},(function(t,e){this[e]=function(e){e=$.read(arguments);for(var n=this._type,i=this._components,r=e._convert(n),s=0,a=i.length;s<a;s++)r[s]=t(i[s],r[s]);return new $(n,r,null!=this._alpha?t(this._alpha,e.getAlpha()):null)}}),{})}),X=o.extend({_class:"Gradient",initialize:function(t,e){this._id=f.get(),t&&this._set(t)&&(t=e=null),this._stops||this.setStops(t||["white","black"]),null==this._radial&&this.setRadial("string"==typeof e&&"radial"===e||e||!1)},_serialize:function(t,e){return e.add(this,(function(){return o.serialize([this._stops,this._radial],t,!0,e)}))},_changed:function(){for(var t=0,e=this._owners&&this._owners.length;t<e;t++)this._owners[t]._changed()},_addOwner:function(t){this._owners||(this._owners=[]),this._owners.push(t)},_removeOwner:function(t){var e=this._owners?this._owners.indexOf(t):-1;-1!=e&&(this._owners.splice(e,1),0===this._owners.length&&(this._owners=void 0))},clone:function(){for(var t=[],e=0,n=this._stops.length;e<n;e++)t[e]=this._stops[e].clone();return new X(t,this._radial)},getStops:function(){return this._stops},setStops:function(t){if(this.stops)for(var e=0,n=this._stops.length;e<n;e++)this._stops[e]._owner=void 0;if(t.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");this._stops=H.readAll(t,0,{clone:!0});for(e=0,n=this._stops.length;e<n;e++){var i=this._stops[e];i._owner=this,i._defaultRamp&&i.setRampPoint(e/(n-1))}this._changed()},getRadial:function(){return this._radial},setRadial:function(t){this._radial=t,this._changed()},equals:function(t){if(t===this)return!0;if(t&&this._class===t._class&&this._stops.length===t._stops.length){for(var e=0,n=this._stops.length;e<n;e++)if(!this._stops[e].equals(t._stops[e]))return!1;return!0}return!1}}),H=o.extend({_class:"GradientStop",initialize:function(t,e){var n,i;t&&(void 0===e&&Array.isArray(t)?(n=t[0],i=t[1]):t.color?(n=t.color,i=t.rampPoint):(n=t,i=e),this.setColor(n),this.setRampPoint(i))},clone:function(){return new H(this._color.clone(),this._rampPoint)},_serialize:function(t,e){return o.serialize([this._color,this._rampPoint],t,!0,e)},_changed:function(){this._owner&&this._owner._changed(65)},getRampPoint:function(){return this._rampPoint},setRampPoint:function(t){this._defaultRamp=null==t,this._rampPoint=t||0,this._changed()},getColor:function(){return this._color},setColor:function(t){this._color=$.read(arguments),this._color===t&&(this._color=t.clone()),this._color._owner=this,this._changed()},equals:function(t){return t===this||t&&this._class===t._class&&this._color.equals(t._color)&&this._rampPoint==t._rampPoint||!1}}),G=o.extend(new function(){var t={fillColor:void 0,strokeColor:void 0,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],windingRule:"nonzero",shadowColor:void 0,shadowBlur:0,shadowOffset:new p,selectedColor:void 0,fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,font:"sans-serif",leading:null,justification:"left"},e={strokeWidth:97,strokeCap:97,strokeJoin:97,strokeScaling:105,miterLimit:97,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},n={beans:!0},i={_defaults:t,_textDefaults:new o(t,{fillColor:new $}),beans:!0};return o.each(t,(function(t,r){var s=/Color$/.test(r),a="shadowOffset"===r,l=o.capitalize(r),u=e[r],h="set"+l,c="get"+l;i[h]=function(t){var e=this._owner,n=e&&e._children;if(n&&n.length>0&&!(e instanceof z))for(var i=0,a=n.length;i<a;i++)n[i]._style[h](t);else{var o=this._values[r];o!==t&&(s&&(o&&(o._owner=void 0),t&&t.constructor===$&&(t._owner&&(t=t.clone()),t._owner=e)),this._values[r]=t,e&&e._changed(u||65))}},i[c]=function(t){var e=this._owner,n=e&&e._children;if(!n||0===n.length||t||e instanceof z){var i;if(void 0===(i=this._values[r]))(i=this._defaults[r])&&i.clone&&(i=i.clone());else{var l=s?$:a?p:null;!l||i&&i.constructor===l||(this._values[r]=i=l.read([i],0,{readNull:!0,clone:!0}),i&&s&&(i._owner=e))}return i}for(var u=0,h=n.length;u<h;u++){var d=n[u]._style[c]();if(0===u)i=d;else if(!o.equals(i,d))return}return i},n[c]=function(t){return this._style[c](t)},n[h]=function(t){this._style[h](t)}})),C.inject(n),i},{_class:"Style",initialize:function(t,e,n){this._values={},this._owner=e,this._project=e&&e._project||n||s.project,e instanceof F&&(this._defaults=this._textDefaults),t&&this.set(t)},set:function(t){var e=t instanceof G,n=e?t._values:t;if(n)for(var i in n)if(i in this._defaults){var r=n[i];this[i]=r&&e&&r.clone?r.clone():r}},equals:function(t){return t===this||t&&this._class===t._class&&o.equals(this._values,t._values)||!1},hasFill:function(){return!!this.getFillColor()},hasStroke:function(){return!!this.getStrokeColor()&&this.getStrokeWidth()>0},hasShadow:function(){return!!this.getShadowColor()&&this.getShadowBlur()>0},getView:function(){return this._project.getView()},getFontStyle:function(){var t=this.getFontSize();return this.getFontWeight()+" "+t+(/[a-z]/i.test(t+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function t(){var e=t.base.call(this),n=this.getFontSize();return/pt|em|%|px/.test(n)&&(n=this.getView().getPixelSize(n)),null!=e?e:1.2*n}}),q=new function(){function t(t,e,n,i){for(var r=["","webkit","moz","Moz","ms","o"],s=e[0].toUpperCase()+e.substring(1),a=0;a<6;a++){var o=r[a],l=o?o+s:e;if(l in t){if(!n)return t[l];t[l]=i;break}}}return{getStyles:function(t){var e=t&&9!==t.nodeType?t.ownerDocument:t,n=e&&e.defaultView;return n&&n.getComputedStyle(t,"")},getBounds:function(t,e){var n,i=t.ownerDocument,r=i.body,s=i.documentElement;try{n=t.getBoundingClientRect()}catch(t){n={left:0,top:0,width:0,height:0}}var a=n.left-(s.clientLeft||r.clientLeft||0),o=n.top-(s.clientTop||r.clientTop||0);if(!e){var l=i.defaultView;a+=l.pageXOffset||s.scrollLeft||r.scrollLeft,o+=l.pageYOffset||s.scrollTop||r.scrollTop}return new v(a,o,n.width,n.height)},getViewportBounds:function(t){var e=t.ownerDocument,n=e.defaultView,i=e.documentElement;return new v(0,0,n.innerWidth||i.clientWidth,n.innerHeight||i.clientHeight)},getOffset:function(t,e){return q.getBounds(t,e).getPoint()},getSize:function(t){return q.getBounds(t,!0).getSize()},isInvisible:function(t){return q.getSize(t).equals(new m(0,0))},isInView:function(t){return!q.isInvisible(t)&&q.getViewportBounds(t).intersects(q.getBounds(t,!0))},getPrefixed:function(e,n){return t(e,n)},setPrefixed:function(e,n,i){if("object"==typeof n)for(var r in n)t(e,r,!0,n[r]);else t(e,n,!0,i)}}},V={add:function(t,e){for(var n in e)for(var i=e[n],r=n.split(/[\s,]+/g),s=0,a=r.length;s<a;s++)t.addEventListener(r[s],i,!1)},remove:function(t,e){for(var n in e)for(var i=e[n],r=n.split(/[\s,]+/g),s=0,a=r.length;s<a;s++)t.removeEventListener(r[s],i,!1)},getPoint:function(t){var e=t.targetTouches?t.targetTouches.length?t.targetTouches[0]:t.changedTouches[0]:t;return new p(e.pageX||e.clientX+document.documentElement.scrollLeft,e.pageY||e.clientY+document.documentElement.scrollTop)},getTarget:function(t){return t.target||t.srcElement},getRelatedTarget:function(t){return t.relatedTarget||t.toElement},getOffset:function(t,e){return V.getPoint(t).subtract(q.getOffset(e||V.getTarget(t)))},stop:function(t){t.stopPropagation(),t.preventDefault()}};V.requestAnimationFrame=new function(){var t,e=q.getPrefixed(window,"requestAnimationFrame"),n=!1,i=[],r=!0;function s(){for(var t=i.length-1;t>=0;t--){var a=i[t],o=a[0],l=a[1];(!l||("true"==u.getAttribute(l,"keepalive")||r)&&q.isInView(l))&&(i.splice(t,1),o())}e&&(i.length?e(s):n=!1)}return V.add(window,{focus:function(){r=!0},blur:function(){r=!1}}),function(r,a){i.push([r,a]),e?n||(e(s),n=!0):t||(t=setInterval(s,1e3/60))}};var W=o.extend(l,{_class:"View",initialize:function t(e,n){var i;this._project=e,this._scope=e._scope,this._element=n,this._pixelRatio||(this._pixelRatio=window.devicePixelRatio||1),this._id=n.getAttribute("id"),null==this._id&&n.setAttribute("id",this._id="view-"+t._id++),V.add(n,this._viewEvents);function r(t){return n[t]||parseInt(n.getAttribute(t),10)}function s(){var t=q.getSize(n);return t.isNaN()||t.isZero()?new m(r("width"),r("height")):t}if(q.setPrefixed(n.style,{userSelect:"none",touchAction:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}),u.hasAttribute(n,"resize")){var a=this;V.add(window,this._windowEvents={resize:function(){a.setViewSize(s())}})}if(this._setViewSize(i=s()),u.hasAttribute(n,"stats")&&"undefined"!=typeof Stats){this._stats=new Stats;var o=this._stats.domElement,l=o.style,h=q.getOffset(n);l.position="absolute",l.left=h.x+"px",l.top=h.y+"px",document.body.appendChild(o)}t._views.push(this),t._viewsById[this._id]=this,this._viewSize=i,(this._matrix=new x)._owner=this,this._zoom=1,t._focused||(t._focused=this),this._frameItems={},this._frameItemCount=0},remove:function(){return!!this._project&&(W._focused===this&&(W._focused=null),W._views.splice(W._views.indexOf(this),1),delete W._viewsById[this._id],this._project._view===this&&(this._project._view=null),V.remove(this._element,this._viewEvents),V.remove(window,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0)},_events:o.each(["onResize","onMouseDown","onMouseUp","onMouseMove"],(function(t){this[t]={install:function(t){this._installEvent(t)},uninstall:function(t){this._uninstallEvent(t)}}}),{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,_requestFrame:function(){var t=this;V.requestAnimationFrame((function(){t._requested=!1,t._animate&&(t._requestFrame(),t._handleFrame())}),this._element),this._requested=!0},_handleFrame:function(){s=this._scope;var t=Date.now()/1e3,e=this._before?t-this._before:0;this._before=t,this._handlingFrame=!0,this.emit("frame",new o({delta:e,time:this._time+=e,count:this._count++})),this._stats&&this._stats.update(),this._handlingFrame=!1,this.update()},_animateItem:function(t,e){var n=this._frameItems;e?(n[t._id]={item:t,time:0,count:0},1==++this._frameItemCount&&this.on("frame",this._handleFrameItems)):(delete n[t._id],0==--this._frameItemCount&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(t){for(var e in this._frameItems){var n=this._frameItems[e];n.item.emit("frame",new o(t,{time:n.time+=t.delta,count:n.count++}))}},_update:function(){this._project._needsUpdate=!0,this._handlingFrame||(this._animate?this._handleFrame():this.update())},_changed:function(t){1&t&&(this._project._needsUpdate=!0)},_transform:function(t){this._matrix.concatenate(t),this._bounds=null,this._update()},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return 72*this._pixelRatio},getViewSize:function(){var t=this._viewSize;return new y(t.width,t.height,this,"setViewSize")},setViewSize:function(){var t=m.read(arguments),e=t.subtract(this._viewSize);e.isZero()||(this._viewSize.set(t.width,t.height),this._setViewSize(t),this._bounds=null,this.emit("resize",{size:t,delta:e}),this._update())},_setViewSize:function(t){var e=this._element;e.width=t.width,e.height=t.height},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new v(new p,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var t=p.read(arguments);this.scrollBy(t.subtract(this.getCenter()))},getZoom:function(){return this._zoom},setZoom:function(t){this._transform((new x).scale(t/this._zoom,this.getCenter())),this._zoom=t},isVisible:function(){return q.isInView(this._element)},scrollBy:function(){this._transform((new x).translate(p.read(arguments).negate()))},play:function(){this._animate=!0,this._requested||this._requestFrame()},pause:function(){this._animate=!1},draw:function(){this.update()},projectToView:function(){return this._matrix._transformPoint(p.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(p.read(arguments))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(t,e){return"string"==typeof e&&(e=document.getElementById(e)),new Y(t,e)}}},new function(){var t,e,n,i=!1;function r(t){var e=V.getTarget(t);return e.getAttribute&&W._viewsById[e.getAttribute("id")]}function s(t,e){return t.viewToProject(V.getOffset(e,t._element))}function a(){if(!W._focused||!W._focused.isVisible())for(var t=0,e=W._views.length;t<e;t++){var i=W._views[t];if(i&&i.isVisible()){W._focused=n=i;break}}}function o(t,e,n){t._handleEvent("mousemove",e,n);var r=t._scope.tool;return r&&r._handleEvent(i&&r.responds("mousedrag")?"mousedrag":"mousemove",e,n),t.update(),r}var l,u,h,c=window.navigator;c.pointerEnabled||c.msPointerEnabled?(l="pointerdown MSPointerDown",u="pointermove MSPointerMove",h="pointerup pointercancel MSPointerUp MSPointerCancel"):(l="touchstart",u="touchmove",h="touchend touchcancel","ontouchstart"in window&&c.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(l+=" mousedown",u+=" mousemove",h+=" mouseup"));var d={"selectstart dragstart":function(t){i&&t.preventDefault()}},f={mouseout:function(t){var e=W._focused,n=V.getRelatedTarget(t);!e||n&&"HTML"!==n.nodeName||o(e,s(e,t),t)},scroll:a};d[l]=function(e){var n=W._focused=r(e),a=s(n,e);i=!0,n._handleEvent("mousedown",a,e),(t=n._scope.tool)&&t._handleEvent("mousedown",a,e),n.update()},f[u]=function(l){var u=W._focused;if(!i){var h=r(l);h?(u!==h&&o(u,s(u,l),l),e=u,u=W._focused=n=h):n&&n===u&&(u=W._focused=e,a())}if(u){var c=s(u,l);(i||u.getBounds().contains(c))&&(t=o(u,c,l))}},f[h]=function(e){var n=W._focused;if(n&&i){var r=s(n,e);i=!1,n._handleEvent("mouseup",r,e),t&&t._handleEvent("mouseup",r,e),n.update()}},V.add(document,f),V.add(window,{load:a});var p={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:d,_handleEvent:function(){},_installEvent:function(t){var e=this._eventCounters;if(e)for(var n in p)e[n]=(e[n]||0)+(p[n][t]||0)},_uninstallEvent:function(t){var e=this._eventCounters;if(e)for(var n in p)e[n]-=p[n][t]||0},statics:{updateFocus:a}}}),Y=W.extend({_class:"CanvasView",initialize:function(t,e){if(!(e instanceof HTMLCanvasElement)){var n=m.read(arguments,1);if(n.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+[].slice.call(arguments,1));e=it.getCanvas(n)}if(this._context=e.getContext("2d"),this._eventCounters={},this._pixelRatio=1,!/^off|false$/.test(u.getAttribute(e,"hidpi"))){var i=window.devicePixelRatio||1,r=q.getPrefixed(this._context,"backingStorePixelRatio")||1;this._pixelRatio=i/r}W.call(this,t,e)},_setViewSize:function(t){var e=this._element,n=this._pixelRatio,i=t.width,r=t.height;if(e.width=i*n,e.height=r*n,1!==n){if(!u.hasAttribute(e,"resize")){var s=e.style;s.width=i+"px",s.height=r+"px"}this._context.scale(n,n)}},getPixelSize:function(t){var e,n=s.browser;if(n&&n.firefox){var i=this._element.parentNode,r=document.createElement("div");r.style.fontSize=t,i.appendChild(r),e=parseFloat(q.getStyles(r).fontSize),i.removeChild(r)}else{var a=this._context,o=a.font;a.font=t+" serif",e=parseFloat(a.font),a.font=o}return e},getTextWidth:function(t,e){var n=this._context,i=n.font,r=0;n.font=t;for(var s=0,a=e.length;s<a;s++)r=Math.max(r,n.measureText(e[s]).width);return n.font=i,r},update:function(t){var e=this._project;if(!e||!t&&!e._needsUpdate)return!1;var n=this._context,i=this._viewSize;return n.clearRect(0,0,i.width+1,i.height+1),e.draw(n,this._matrix,this._pixelRatio),e._needsUpdate=!1,!0}},new function(){var t,e,n,i,r,s,a,o,l;function u(t,e,n,i,r,s){var a,o=r;function l(t){if(t.responds(e)&&(a||(a=new J(e,n,i,r,s?i.subtract(s):null)),t.emit(e,a)&&a.isStopped))return n.preventDefault(),!0}for(;o;){if(l(o))return!0;o=o.getParent()}return!!l(t)}return{_handleEvent:function(h,c,d){if(this._eventCounters[h]){var f=this._project.hitTest(c,{tolerance:0,fill:!0,stroke:!0}),p=f&&f.item,g=!1;switch(h){case"mousedown":for(g=u(this,h,d,c,p),o=r==p&&Date.now()-l<300,i=r=p,t=e=n=c,a=!g&&p;a&&!a.responds("mousedrag");)a=a._parent;break;case"mouseup":g=u(this,h,d,c,p,t),a&&(e&&!e.equals(c)&&u(this,"mousedrag",d,c,a,e),p!==a&&u(this,"mousemove",d,c,p,n=c)),!g&&p&&p===i&&(l=Date.now(),u(this,o&&i.responds("doubleclick")?"doubleclick":"click",d,t,p),o=!1),i=a=null;break;case"mousemove":a&&(g=u(this,"mousedrag",d,c,a,e)),g||(p!==s&&(n=c),g=u(this,h,d,c,p,n)),e=n=c,p!==s&&(u(this,"mouseleave",d,c,s),s=p,u(this,"mouseenter",d,c,p))}return g}}}}),Z=o.extend({_class:"Event",initialize:function(t){this.event=t},isPrevented:!1,isStopped:!1,preventDefault:function(){this.isPrevented=!0,this.event.preventDefault()},stopPropagation:function(){this.isStopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getModifiers:function(){return Q.modifiers}}),K=Z.extend({_class:"KeyEvent",initialize:function(t,e,n,i){Z.call(this,i),this.type=t?"keydown":"keyup",this.key=e,this.character=n},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),Q=new function(){var t,e,n={8:"backspace",9:"tab",13:"enter",16:"shift",17:"control",18:"option",19:"pause",20:"caps-lock",27:"escape",32:"space",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",46:"delete",91:"command",93:"command",224:"command"},i={9:!0,13:!0,32:!0},r=new o({shift:!1,control:!1,option:!1,command:!1,capsLock:!1,space:!1}),a={},l={};function u(e,i,h,c){var d,f=h?String.fromCharCode(h):"",p=n[i],g=p||f.toLowerCase(),m=e?"keydown":"keyup",y=W._focused,v=y&&y.isVisible()&&y._scope,_=v&&v.tool;if(l[g]=e,e?a[i]=h:delete a[i],p&&(d=o.camelize(p))in r){r[d]=e;var x=s.browser;if("command"===d&&x&&x.mac)if(e)t={};else{for(var w in t)w in a&&u(!1,w,t[w],c);t=null}}else e&&t&&(t[i]=h);_&&_.responds(m)&&(s=v,_.emit(m,new K(e,g,f,c)),y&&y.update())}return V.add(document,{keydown:function(t){var s=t.which||t.keyCode;s in n||r.command?u(!0,s,s in i||r.command?s:0,t):e=s},keypress:function(t){null!=e&&(u(!0,e,t.which||t.keyCode,t),e=null)},keyup:function(t){var e=t.which||t.keyCode;e in a&&u(!1,e,a[e],t)}}),V.add(window,{blur:function(t){for(var e in a)u(!1,e,a[e],t)}}),{modifiers:r,isDown:function(t){return!!l[t]}}},J=Z.extend({_class:"MouseEvent",initialize:function(t,e,n,i,r){Z.call(this,e),this.type=t,this.point=n,this.target=i,this.delta=r},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),tt=Z.extend({_class:"ToolEvent",_item:null,initialize:function(t,e,n){this.tool=t,this.type=e,this.event=n},_choosePoint:function(t,e){return t||(e?e.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(t){this._point=t},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(t){this._lastPoint=t},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(t){this._downPoint=t},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(t){this._middlePoint=t},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(t){this._delta=t},getCount:function(){return/^mouse(down|up)$/.test(this.type)?this.tool._downCount:this.tool._count},setCount:function(t){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=t},getItem:function(){if(!this._item){var t=this.tool._scope.project.hitTest(this.getPoint());if(t){for(var e=t.item,n=e._parent;/^(Group|CompoundPath)$/.test(n._class);)e=n,n=n._parent;this._item=e}}return this._item},setItem:function(t){this._item=t},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),et=h.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onActivate","onDeactivate","onEditOptions","onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onKeyDown","onKeyUp"],initialize:function(t){h.call(this),this._firstMove=!0,this._count=0,this._downCount=0,this._set(t)},getMinDistance:function(){return this._minDistance},setMinDistance:function(t){this._minDistance=t,null!=t&&null!=this._maxDistance&&t>this._maxDistance&&(this._maxDistance=t)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(t){this._maxDistance=t,null!=this._minDistance&&null!=t&&t<this._minDistance&&(this._minDistance=t)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(t){this._minDistance=this._maxDistance=t},_updateEvent:function(t,e,n,i,r,s,a){if(!r){if(null!=n||null!=i){var o=null!=n?n:0,l=e.subtract(this._point),u=l.getLength();if(u<o)return!1;if(null!=i&&0!=i)if(u>i)e=this._point.add(l.normalize(i));else if(a)return!1}if(s&&e.equals(this._point))return!1}switch(this._lastPoint=r&&"mousemove"==t?e:this._point,this._point=e,t){case"mousedown":this._lastPoint=this._downPoint,this._downPoint=this._point,this._downCount++;break;case"mouseup":this._lastPoint=this._downPoint}return this._count=r?0:this._count+1,!0},_fireEvent:function(t,e){var n=s.project._removeSets;if(n){"mouseup"===t&&(n.mousedrag=null);var i=n[t];if(i){for(var r in i){var a=i[r];for(var o in n){var l=n[o];l&&l!=i&&delete l[a._id]}a.remove()}n[t]=null}}return this.responds(t)&&this.emit(t,new tt(this,t,e))},_handleEvent:function(t,e,n){s=this._scope;var i=!1;switch(t){case"mousedown":this._updateEvent(t,e,null,null,!0,!1,!1),i=this._fireEvent(t,n);break;case"mousedrag":for(var r=!1,a=!1;this._updateEvent(t,e,this.minDistance,this.maxDistance,!1,r,a);)i=this._fireEvent(t,n)||i,r=!0,a=!0;break;case"mouseup":!e.equals(this._point)&&this._updateEvent("mousedrag",e,this.minDistance,this.maxDistance,!1,!1,!1)&&(i=this._fireEvent("mousedrag",n)),this._updateEvent(t,e,null,this.maxDistance,!1,!1,!1),i=this._fireEvent(t,n)||i,this._updateEvent(t,e,null,null,!0,!1,!1),this._firstMove=!0;break;case"mousemove":for(;this._updateEvent(t,e,this.minDistance,this.maxDistance,this._firstMove,!0,!1);)i=this._fireEvent(t,n)||i,this._firstMove=!1}return i&&n.preventDefault(),i}}),nt=function(t,e,n,i){i=void 0===i||i;var r=new(window.ActiveXObject||XMLHttpRequest)("Microsoft.XMLHTTP");return r.open(t.toUpperCase(),e,i),"overrideMimeType"in r&&r.overrideMimeType("text/plain"),r.onreadystatechange=function(){if(4===r.readyState){var t=r.status;if(0!==t&&200!==t)throw new Error("Could not load "+e+" (Error "+t+")");n.call(r,r.responseText)}},r.send(null)},it={canvases:[],getCanvas:function(t,e){var n;"object"==typeof t&&(e=t.height,t=t.width);var i=(n=this.canvases.length?this.canvases.pop():document.createElement("canvas")).getContext("2d");return n.width===t&&n.height===e?i.clearRect(0,0,t+1,e+1):(n.width=t,n.height=e),i.save(),n},getContext:function(t,e){return this.getCanvas(t,e).getContext("2d")},release:function(t){var e=t.canvas?t.canvas:t;e.getContext("2d").restore(),this.canvases.push(e)}},rt=new function(){var t,e,n,i,r,s,a,l,u,h,c,d=Math.min,f=Math.max,p=Math.abs;function g(t,e,n){return.2989*t+.587*e+.114*n}function m(t,e,n,i){var r=i-g(t,e,n),s=(i=g(u=t+r,h=e+r,c=n+r),d(u,h,c)),a=f(u,h,c);if(s<0){var o=i-s;u=i+(u-i)*i/o,h=i+(h-i)*i/o,c=i+(c-i)*i/o}if(a>255){var l=255-i,p=a-i;u=i+(u-i)*l/p,h=i+(h-i)*l/p,c=i+(c-i)*l/p}}function y(t,e,n){return f(t,e,n)-d(t,e,n)}function v(t,e,n,i){var r,s=[t,e,n],a=f(t,e,n),o=d(t,e,n);r=0===d(o=o===t?0:o===e?1:2,a=a===t?0:a===e?1:2)?1===f(o,a)?2:1:0,s[a]>s[o]?(s[r]=(s[r]-s[o])*i/(s[a]-s[o]),s[a]=i):s[r]=s[a]=0,s[o]=0,u=s[0],h=s[1],c=s[2]}var _={multiply:function(){u=r*t/255,h=s*e/255,c=a*n/255},screen:function(){u=r+t-r*t/255,h=s+e-s*e/255,c=a+n-a*n/255},overlay:function(){u=r<128?2*r*t/255:255-2*(255-r)*(255-t)/255,h=s<128?2*s*e/255:255-2*(255-s)*(255-e)/255,c=a<128?2*a*n/255:255-2*(255-a)*(255-n)/255},"soft-light":function(){var i=t*r/255;u=i+r*(255-(255-r)*(255-t)/255-i)/255,h=(i=e*s/255)+s*(255-(255-s)*(255-e)/255-i)/255,c=(i=n*a/255)+a*(255-(255-a)*(255-n)/255-i)/255},"hard-light":function(){u=t<128?2*t*r/255:255-2*(255-t)*(255-r)/255,h=e<128?2*e*s/255:255-2*(255-e)*(255-s)/255,c=n<128?2*n*a/255:255-2*(255-n)*(255-a)/255},"color-dodge":function(){u=0===r?0:255===t?255:d(255,255*r/(255-t)),h=0===s?0:255===e?255:d(255,255*s/(255-e)),c=0===a?0:255===n?255:d(255,255*a/(255-n))},"color-burn":function(){u=255===r?255:0===t?0:f(0,255-255*(255-r)/t),h=255===s?255:0===e?0:f(0,255-255*(255-s)/e),c=255===a?255:0===n?0:f(0,255-255*(255-a)/n)},darken:function(){u=r<t?r:t,h=s<e?s:e,c=a<n?a:n},lighten:function(){u=r>t?r:t,h=s>e?s:e,c=a>n?a:n},difference:function(){(u=r-t)<0&&(u=-u),(h=s-e)<0&&(h=-h),(c=a-n)<0&&(c=-c)},exclusion:function(){u=r+t*(255-r-r)/255,h=s+e*(255-s-s)/255,c=a+n*(255-a-a)/255},hue:function(){v(t,e,n,y(r,s,a)),m(u,h,c,g(r,s,a))},saturation:function(){v(r,s,a,y(t,e,n)),m(u,h,c,g(r,s,a))},luminosity:function(){m(r,s,a,g(t,e,n))},color:function(){m(t,e,n,g(r,s,a))},add:function(){u=d(r+t,255),h=d(s+e,255),c=d(a+n,255)},subtract:function(){u=f(r-t,0),h=f(s-e,0),c=f(a-n,0)},average:function(){u=(r+t)/2,h=(s+e)/2,c=(a+n)/2},negation:function(){u=255-p(255-t-r),h=255-p(255-e-s),c=255-p(255-n-a)}},x=this.nativeModes=o.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],(function(t){this[t]=!0}),{}),w=it.getContext(1,1);o.each(_,(function(t,e){var n="darken"===e,i=!1;w.save();try{w.fillStyle=n?"#300":"#a00",w.fillRect(0,0,1,1),w.globalCompositeOperation=e,w.globalCompositeOperation===e&&(w.fillStyle=n?"#a00":"#300",w.fillRect(0,0,1,1),i=w.getImageData(0,0,1,1).data[0]!==n?170:51)}catch(t){}w.restore(),x[e]=i})),it.release(w),this.process=function(o,d,f,p,g){var m=d.canvas,y="normal"===o;if(y||x[o])f.save(),f.setTransform(1,0,0,1,0,0),f.globalAlpha=p,y||(f.globalCompositeOperation=o),f.drawImage(m,g.x,g.y),f.restore();else{var v=_[o];if(!v)return;for(var w=f.getImageData(g.x,g.y,m.width,m.height),b=w.data,S=d.getImageData(0,0,m.width,m.height).data,C=0,E=b.length;C<E;C+=4){t=S[C],r=b[C],e=S[C+1],s=b[C+1],n=S[C+2],a=b[C+2],i=S[C+3],l=b[C+3],v();var T=i*p/255,M=1-T;b[C]=T*u+M*r,b[C+1]=T*h+M*s,b[C+2]=T*c+M*a,b[C+3]=i*p+M*l}f.putImageData(w,g.x,g.y)}}},st=o.each({fillColor:["fill","color"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(t,e){return!e&&(t instanceof N||t instanceof M||t instanceof F)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","string"]},(function(t,e){var n=o.capitalize(e),i=t[2];this[e]={type:t[1],property:e,attribute:t[0],toSVG:i,fromSVG:i&&o.each(i,(function(t,e){this[t]=e}),{}),exportFilter:t[3],get:"get"+n,set:"set"+n}}),{}),at={href:"http://www.w3.org/1999/xlink",xlink:"http://www.w3.org/2000/xmlns"};return new function(){var t;function e(e,n){for(var i in n){var r=n[i],s=at[i];"number"==typeof r&&(r=t.number(r)),s?e.setAttributeNS(s,i,r):e.setAttribute(i,r)}return e}function n(t,n){return e(document.createElementNS("http://www.w3.org/2000/svg",t),n)}function i(e,n,i){var r=new o,s=e.getTranslation();if(n){var a=(e=e.shiftless())._inverseTransform(s);r[i?"cx":"x"]=a.x,r[i?"cy":"y"]=a.y,s=null}if(!e.isIdentity()){var l=e.decompose();if(l&&!l.shearing){var u=[],h=l.rotation,c=l.scaling;s&&!s.isZero()&&u.push("translate("+t.point(s)+")"),d.isZero(c.x-1)&&d.isZero(c.y-1)||u.push("scale("+t.point(c)+")"),h&&u.push("rotate("+t.number(h)+")"),r.transform=u.join(" ")}else r.transform="matrix("+e.getValues().join(",")+")"}return r}function r(t,r){for(var s=i(t._matrix),a=t._children,o=n("g",s),l=0,u=a.length;l<u;l++){var h=a[l],c=g(h,r);if(c)if(h.isClipMask()){var d=n("clipPath");d.appendChild(c),f(h,d,"clip"),e(o,{"clip-path":"url(#"+d.id+")"})}else o.appendChild(c)}return o}function s(t){var e=t._type,r=t._radius,s=i(t._matrix,!0,"rectangle"!==e);if("rectangle"===e){e="rect";var a=t._size,o=a.width,l=a.height;s.x-=o/2,s.y-=l/2,s.width=o,s.height=l,r.isZero()&&(r=null)}return r&&("circle"===e?s.r=r:(s.rx=r.width,s.ry=r.height)),n(e,s)}var a,l={Group:r,Layer:r,Raster:function(t,e){var r=i(t._matrix,!0),s=t.getSize(),a=t.getImage();return r.x-=s.width/2,r.y-=s.height/2,r.width=s.width,r.height=s.height,r.href=!1===e.embedImages&&a&&a.src||t.toDataURL(),n("image",r)},Path:function(e,r){var a=r.matchShapes;if(a){var o=e.toShape(!1);if(o)return s(o)}var l,u=e._segments,h=i(e._matrix);if(0===u.length)return null;if(a&&!e.hasHandles())if(u.length>=3){l=e._closed?"polygon":"polyline";for(var c=[],d=0,f=u.length;d<f;d++)c.push(t.point(u[d]._point));h.points=c.join(" ")}else{l="line";var p=u[0]._point,g=u[u.length-1]._point;h.set({x1:p.x,y1:p.y,x2:g.x,y2:g.y})}else l="path",h.d=e.getPathData(null,r.precision);return n(l,h)},Shape:s,CompoundPath:function(t,e){var r=i(t._matrix),s=t.getPathData(null,e.precision);return s&&(r.d=s),n("path",r)},PlacedSymbol:function(e,r){var s=i(e._matrix,!0),a=e.getSymbol(),o=h(a,"symbol"),l=a.getDefinition(),u=l.getBounds();return o||((o=n("symbol",{viewBox:t.rectangle(u)})).appendChild(g(l,r)),f(a,o,"symbol")),s.href="#"+o.id,s.x+=u.x,s.y+=u.y,s.width=t.number(u.width),s.height=t.number(u.height),s.overflow="visible",n("use",s)},PointText:function(t){var e=n("text",i(t._matrix,!0));return e.textContent=t._content,e}};function u(i,r,s){var a={},l=!s&&i.getParent();return null!=i._name&&(a.id=i._name),o.each(st,(function(e){var r=e.get,s=e.type,u=i[r]();if(e.exportFilter?e.exportFilter(i,u):!l||!o.equals(l[r](),u)){if("color"===s&&null!=u){var c=u.getAlpha();c<1&&(a[e.attribute+"-opacity"]=c)}a[e.attribute]=null==u?"none":"number"===s?t.number(u):"color"===s?u.gradient?function(t){var e=h(t,"color");if(!e){var i,r=t.getGradient(),s=r._radial,a=t.getOrigin().transform(),o=t.getDestination().transform();if(s){i={cx:a.x,cy:a.y,r:a.getDistance(o)};var l=t.getHighlight();l&&(l=l.transform(),i.fx=l.x,i.fy=l.y)}else i={x1:a.x,y1:a.y,x2:o.x,y2:o.y};i.gradientUnits="userSpaceOnUse",e=n((s?"radial":"linear")+"Gradient",i);for(var u=r._stops,c=0,d=u.length;c<d;c++){var p=u[c],g=p._color,m=g.getAlpha();i={offset:p._rampPoint,"stop-color":g.toCSS(!0)},m<1&&(i["stop-opacity"]=m),e.appendChild(n("stop",i))}f(t,e,"color")}return"url(#"+e.id+")"}(u):u.toCSS(!0):"array"===s?u.join(","):"lookup"===s?e.toSVG[u]:u}})),1===a.opacity&&delete a.opacity,i._visible||(a.visibility="hidden"),e(r,a)}function h(t,e){return a||(a={ids:{},svgs:{}}),t&&a.svgs[e+"-"+t._id]}function f(t,e,n){a||h();var i=a.ids[n]=(a.ids[n]||0)+1;e.id=n+"-"+i,a.svgs[n+"-"+t._id]=e}function p(t,e){var i=t,r=null;if(a){for(var s in i="svg"===t.nodeName.toLowerCase()&&t,a.svgs)r||(i||(i=n("svg")).appendChild(t),r=i.insertBefore(n("defs"),i.firstChild)),r.appendChild(a.svgs[s]);a=null}return e.asString?(new XMLSerializer).serializeToString(i):i}function g(t,e,n){var i=l[t._class],r=i&&i(t,e);if(r){var s=e.onExport;s&&(r=s(t,r,e)||r);var a=JSON.stringify(t._data);a&&"{}"!==a&&"null"!==a&&r.setAttribute("data-paper-data",a)}return r&&u(t,r,n)}function m(e){return e||(e={}),t=new c(e.precision),e}C.inject({exportSVG:function(t){return p(g(this,t=m(t),!0),t)}}),b.inject({exportSVG:function(t){t=m(t);var e=this.layers,r=this.getView(),s=r.getViewSize(),a=n("svg",{x:0,y:0,width:s.width,height:s.height,version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}),o=a,l=r._matrix;l.isIdentity()||(o=a.appendChild(n("g",i(l))));for(var u=0,h=e.length;u<h;u++)o.appendChild(g(e[u],t,!0));return p(a,t)}})},new function(){function t(t,e,n,i){var r=at[e],s=r?t.getAttributeNS(r,e):t.getAttribute(e);return"null"===s&&(s=null),null==s?i?null:n?"":0:n?s:parseFloat(s)}function e(e,n,i,r){return n=t(e,n,!1,r),i=t(e,i,!1,r),!r||null!=n&&null!=i?new p(n,i):null}function n(e,n,i,r){return n=t(e,n,!1,r),i=t(e,i,!1,r),!r||null!=n&&null!=i?new m(n,i):null}function i(t,e,n){return"none"===t?null:"number"===e?parseFloat(t):"array"===e?t?t.split(/[\s,]+/g).map(parseFloat):[]:"color"===e?_(t)||t:"lookup"===e?n[t]:t}function r(t,e,n,i){var r=t.childNodes,s="clippath"===e,a=new E,o=a._project,l=o._currentStyle,u=[];if(s||(a=g(a,t,i),o._currentStyle=a._style.clone()),i)for(var h=t.querySelectorAll("defs"),c=0,d=h.length;c<d;c++)w(h[c],n,!1);for(c=0,d=r.length;c<d;c++){var f,p=r[c];1!==p.nodeType||"defs"===p.nodeName.toLowerCase()||!(f=w(p,n,!1))||f instanceof S||u.push(f)}return a.addChildren(u),s&&(a=g(a.reduce(),t,i)),o._currentStyle=l,(s||"defs"===e)&&(a.remove(),a=null),a}function a(t,e){for(var n=t.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),i=[],r=0,s=n.length;r<s;r+=2)i.push(new p(parseFloat(n[r]),parseFloat(n[r+1])));var a=new R(i);return"polygon"===e&&a.closePath(),a}function l(n,i){var r,s,a,o,l=(t(n,"href",!0)||"").substring(1),u="radialgradient"===i;if(l)r=y[l].getGradient();else{for(var h=n.childNodes,c=[],d=0,f=h.length;d<f;d++){var p=h[d];1===p.nodeType&&c.push(g(new H,p))}r=new X(c,u)}return u?(a=(s=e(n,"cx","cy")).add(t(n,"r"),0),o=e(n,"fx","fy",!0)):(s=e(n,"x1","y1"),a=e(n,"x2","y2")),g(new $(r,s,a,o),n),null}var u={"#document":function(t,e,n,i){for(var r=t.childNodes,s=0,a=r.length;s<a;s++){var o=r[s];if(1===o.nodeType){var l=o.nextSibling;document.body.appendChild(o);var u=w(o,n,i);return l?t.insertBefore(o,l):t.appendChild(o),u}}},g:r,svg:r,clippath:r,polygon:a,polyline:a,path:function(t){var e=t.getAttribute("d"),n={pathData:e};return(e.match(/m/gi)||[]).length>1||/z\S+/i.test(e)?new z(n):new R(n)},lineargradient:l,radialgradient:l,image:function(i){var r=new k(t(i,"href",!0));return r.on("load",(function(){var t=n(i,"width","height");this.setSize(t);var r=this._matrix._transformPoint(e(i,"x","y").add(t.divide(2)));this.translate(r)})),r},symbol:function(t,e,n,i){return new S(r(t,e,n,i),!0)},defs:r,use:function(n){var i=(t(n,"href",!0)||"").substring(1),r=y[i],s=e(n,"x","y");return r?r instanceof S?r.place(s):r.clone().translate(s):null},circle:function(n){return new M.Circle(e(n,"cx","cy"),t(n,"r"))},ellipse:function(t){return new M.Ellipse({center:e(t,"cx","cy"),radius:n(t,"rx","ry")})},rect:function(t){var i=e(t,"x","y"),r=n(t,"width","height"),s=n(t,"rx","ry");return new M.Rectangle(new v(i,r),s)},line:function(t){return new R.Line(e(t,"x1","y1"),e(t,"x2","y2"))},text:function(t){var n=new B(e(t,"x","y").add(e(t,"dx","dy")));return n.setContent(t.textContent.trim()||""),n}};function h(t,e,n,i){for(var r=(i.getAttribute(n)||"").split(/\)\s*/g),s=new x,a=0,o=r.length;a<o;a++){var l=r[a];if(!l)break;for(var u=l.split(/\(\s*/),h=u[0],c=u[1].split(/[\s,]+/g),d=0,f=c.length;d<f;d++)c[d]=parseFloat(c[d]);switch(h){case"matrix":s.concatenate(new x(c[0],c[1],c[2],c[3],c[4],c[5]));break;case"rotate":s.rotate(c[0],c[1],c[2]);break;case"translate":s.translate(c[0],c[1]);break;case"scale":s.scale(c);break;case"skewX":s.skew(c[0],0);break;case"skewY":s.skew(0,c[0])}}t.transform(s)}function c(t,e,n){var i=t["fill-opacity"===n?"getFillColor":"getStrokeColor"]();i&&i.setAlpha(parseFloat(e))}var d=o.set(o.each(st,(function(t){this[t.attribute]=function(e,n){if(e[t.set](i(n,t.type,t.fromSVG)),"color"===t.type&&e instanceof M){var r=e[t.get]();r&&r.transform((new x).translate(e.getPosition(!0).negate()))}}}),{}),{id:function(t,e){y[e]=t,t.setName&&t.setName(e)},"clip-path":function(t,e){var n=_(e);if(n){if((n=n.clone()).setClipMask(!0),!(t instanceof E))return new E(n,t);t.insertChild(0,n)}},gradientTransform:h,transform:h,"fill-opacity":c,"stroke-opacity":c,visibility:function(t,e){t.setVisible("visible"===e)},display:function(t,e){t.setVisible(null!==e)},"stop-color":function(t,e){t.setColor&&t.setColor(e)},"stop-opacity":function(t,e){t._color&&t._color.setAlpha(parseFloat(e))},offset:function(t,e){var n=e.match(/(.*)%$/);t.setRampPoint(n?n[1]/100:parseFloat(e))},viewBox:function(t,e,r,s,a){var o=new v(i(e,"array")),l=n(s,"width","height",!0);if(t instanceof E){var u=l?o.getSize().divide(l):1,h=(new x).translate(o.getPoint()).scale(u);t.transform(h.inverted())}else if(t instanceof S){l&&o.setSize(l);var c="visible"!=f(s,"overflow",a),d=t._definition;c&&!o.contains(d.getBounds())&&((c=new M.Rectangle(o).transform(d._matrix)).setClipMask(!0),d.addChild(c))}}});function f(t,e,n){var i=t.attributes[e],r=i&&i.value;if(!r){var s=o.camelize(e);(r=t.style[s])||n.node[s]===n.parent[s]||(r=n.node[s])}return r?"none"===r?null:r:void 0}function g(t,e,n){var i={node:q.getStyles(e)||{},parent:!n&&q.getStyles(e.parentNode)||{}};return o.each(d,(function(n,r){var s=f(e,r,i);void 0!==s&&(t=o.pick(n(t,s,r,e,i),t))})),t}var y={};function _(t){var e=t&&t.match(/\((?:#|)([^)']+)/);return e&&y[e[1]]}function w(t,e,n){if(!t)return null;e?"function"==typeof e&&(e={onLoad:e}):e={};var i=t,r=s;function a(t){s=r;var i=w(t,e,n),a=e.onLoad,o=r.project&&r.getView();a&&a.call(this,i),o.update()}if(n)if("string"!=typeof t||/^.*</.test(t)){if("undefined"!=typeof File&&t instanceof File){var l=new FileReader;return l.onload=function(){a(l.result)},l.readAsText(t)}}else{if(!(i=document.getElementById(t)))return nt("get",t,a);t=null}if("string"==typeof t&&(i=(new DOMParser).parseFromString(t,"image/svg+xml")),!i.nodeName)throw new Error("Unsupported SVG source: "+t);var h,c=i.nodeName.toLowerCase(),d=u[c],f=i.getAttribute&&i.getAttribute("data-paper-data"),p=r.settings,m=p.applyMatrix;if(p.applyMatrix=!1,h=d&&d(i,c,e,n)||null,p.applyMatrix=m,h){"#document"===c||h instanceof E||(h=g(h,i,n));var v=e.onImport;v&&(h=v(i,h,e)||h),e.expandShapes&&h instanceof M&&(h.remove(),h=h.toPath()),f&&(h._data=JSON.parse(f))}return n&&(y={},h&&o.pick(e.applyMatrix,m)&&h.matrix.apply(!0,!0)),h}C.inject({importSVG:function(t,e){return this.addChild(w(t,e,!0))}}),b.inject({importSVG:function(t,e){return this.activate(),w(t,e,!0)}})},o.exports.PaperScript=function(){var t=this;!function(t,e){e(t.acorn||(t.acorn={}))}(this,(function(t){"use strict";function e(t){for(var e in Y=t||{},J)Object.prototype.hasOwnProperty.call(Y,e)||(Y[e]=J[e]);Q=Y.sourceFile||null}function n(t,e){var n=tt(Z,t);e+=" ("+n.line+":"+n.column+")";var i=new SyntaxError(e);throw i.pos=t,i.loc=n,i.raisedAt=et,i}function i(t){function e(t){if(1==t.length)return n+="return str === "+JSON.stringify(t[0])+";";n+="switch(str){";for(var e=0;e<t.length;++e)n+="case "+JSON.stringify(t[e])+":";n+="return true}return false;"}t=t.split(" ");var n="",i=[];t:for(var r=0;r<t.length;++r){for(var s=0;s<i.length;++s)if(i[s][0].length==t[r].length){i[s].push(t[r]);continue t}i.push([t[r]])}if(i.length>3){i.sort((function(t,e){return e.length-t.length})),n+="switch(str.length){";for(r=0;r<i.length;++r){var a=i[r];n+="case "+a[0].length+":",e(a)}n+="}"}else e(t);return new Function("str",n)}function r(){this.line=ut,this.column=et-ht}function s(){ut=1,et=ht=0,lt=!0,u()}function a(t,e){it=et,Y.locations&&(st=new r),at=t,u(),ot=e,lt=t.beforeExpr}function o(){var t=Y.onComment&&Y.locations&&new r,e=et,i=Z.indexOf("*/",et+=2);if(-1===i&&n(et-2,"Unterminated comment"),et=i+2,Y.locations){De.lastIndex=e;for(var s;(s=De.exec(Z))&&s.index<et;)++ut,ht=s.index+s[0].length}Y.onComment&&Y.onComment(!0,Z.slice(e+2,i),e,et,t,Y.locations&&new r)}function l(){for(var t=et,e=Y.onComment&&Y.locations&&new r,n=Z.charCodeAt(et+=2);K>et&&10!==n&&13!==n&&8232!==n&&8233!==n;)++et,n=Z.charCodeAt(et);Y.onComment&&Y.onComment(!1,Z.slice(t+2,et),t,et,e,Y.locations&&new r)}function u(){for(;K>et;){var t=Z.charCodeAt(et);if(32===t)++et;else if(13===t){++et,10===(e=Z.charCodeAt(et))&&++et,Y.locations&&(++ut,ht=et)}else if(10===t||8232===t||8233===t)++et,Y.locations&&(++ut,ht=et);else if(t>8&&14>t)++et;else if(47===t){var e;if(42===(e=Z.charCodeAt(et+1)))o();else{if(47!==e)break;l()}}else if(160===t)++et;else{if(!(t>=5760&&ke.test(String.fromCharCode(t))))break;++et}}}function h(t){switch(t){case 46:return function(){var t=Z.charCodeAt(et+1);return t>=48&&57>=t?g(!0):(++et,a(re))}();case 40:return++et,a(Jt);case 41:return++et,a(te);case 59:return++et,a(ne);case 44:return++et,a(ee);case 91:return++et,a(Yt);case 93:return++et,a(Zt);case 123:return++et,a(Kt);case 125:return++et,a(Qt);case 58:return++et,a(ie);case 63:return++et,a(se);case 48:var e=Z.charCodeAt(et+1);if(120===e||88===e)return function(){et+=2;var t=p(16);return null==t&&n(nt+2,"Expected hexadecimal number"),Le(Z.charCodeAt(et))&&n(et,"Identifier directly after number"),a(vt,t)}();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return g(!1);case 34:case 39:return function(t){et++;for(var e="";;){et>=K&&n(nt,"Unterminated string constant");var i=Z.charCodeAt(et);if(i===t)return++et,a(xt,e);if(92===i){i=Z.charCodeAt(++et);var r=/^[0-7]+/.exec(Z.slice(et,et+3));for(r&&(r=r[0]);r&&parseInt(r,8)>255;)r=r.slice(0,r.length-1);if("0"===r&&(r=null),++et,r)mt&&n(et-2,"Octal literal in strict mode"),e+=String.fromCharCode(parseInt(r,8)),et+=r.length-1;else switch(i){case 110:e+="\n";break;case 114:e+="\r";break;case 120:e+=String.fromCharCode(m(2));break;case 117:e+=String.fromCharCode(m(4));break;case 85:e+=String.fromCharCode(m(8));break;case 116:e+="\t";break;case 98:e+="\b";break;case 118:e+="\v";break;case 102:e+="\f";break;case 48:e+="\0";break;case 13:10===Z.charCodeAt(et)&&++et;case 10:Y.locations&&(ht=et,++ut);break;default:e+=String.fromCharCode(i)}}else(13===i||10===i||8232===i||8233===i)&&n(nt,"Unterminated string constant"),e+=String.fromCharCode(i),++et}}(t);case 47:return function(){var t=Z.charCodeAt(et+1);return lt?(++et,f()):61===t?d(le,2):d(ae,1)}();case 37:case 42:return 61===Z.charCodeAt(et+1)?d(le,2):d(xe,1);case 124:case 38:return function(t){var e=Z.charCodeAt(et+1);return e===t?d(124===t?de:fe,2):61===e?d(le,2):d(124===t?pe:me,1)}(t);case 94:return 61===Z.charCodeAt(et+1)?d(le,2):d(ge,1);case 43:case 45:return function(t){var e=Z.charCodeAt(et+1);return e===t?45==e&&62==Z.charCodeAt(et+2)&&Ie.test(Z.slice(dt,et))?(et+=3,l(),u(),c()):d(he,2):61===e?d(le,2):d(ue,1)}(t);case 60:case 62:return function(t){var e=Z.charCodeAt(et+1),n=1;return e===t?(n=62===t&&62===Z.charCodeAt(et+2)?3:2,61===Z.charCodeAt(et+n)?d(le,n+1):d(_e,n)):33==e&&60==t&&45==Z.charCodeAt(et+2)&&45==Z.charCodeAt(et+3)?(et+=4,l(),u(),c()):(61===e&&(n=61===Z.charCodeAt(et+2)?3:2),d(ve,n))}(t);case 61:case 33:return function(t){return 61===Z.charCodeAt(et+1)?d(ye,61===Z.charCodeAt(et+2)?3:2):d(61===t?oe:ce,1)}(t);case 126:return d(ce,1)}return!1}function c(t){if(t?et=nt+1:nt=et,Y.locations&&(rt=new r),t)return f();if(et>=K)return a(bt);var e=Z.charCodeAt(et);if(Le(e)||92===e)return v();var i=h(e);if(!1===i){var s=String.fromCharCode(e);if("\\"===s||Ae.test(s))return v();n(et,"Unexpected character '"+s+"'")}return i}function d(t,e){var n=Z.slice(et,et+e);et+=e,a(t,n)}function f(){for(var t,e,i=et;;){et>=K&&n(i,"Unterminated regular expression");var r=Z.charAt(et);if(Ie.test(r)&&n(i,"Unterminated regular expression"),t)t=!1;else{if("["===r)e=!0;else if("]"===r&&e)e=!1;else if("/"===r&&!e)break;t="\\"===r}++et}var s=Z.slice(i,et);++et;var o=y();return o&&!/^[gmsiy]*$/.test(o)&&n(i,"Invalid regexp flag"),a(_t,new RegExp(s,o))}function p(t,e){for(var n=et,i=0,r=0,s=null==e?1/0:e;s>r;++r){var a,o=Z.charCodeAt(et);if((a=o>=97?o-97+10:o>=65?o-65+10:o>=48&&57>=o?o-48:1/0)>=t)break;++et,i=i*t+a}return et===n||null!=e&&et-n!==e?null:i}function g(t){var e=et,i=!1,r=48===Z.charCodeAt(et);t||null!==p(10)||n(e,"Invalid number"),46===Z.charCodeAt(et)&&(++et,p(10),i=!0);var s=Z.charCodeAt(et);(69===s||101===s)&&((43===(s=Z.charCodeAt(++et))||45===s)&&++et,null===p(10)&&n(e,"Invalid number"),i=!0),Le(Z.charCodeAt(et))&&n(et,"Identifier directly after number");var o,l=Z.slice(e,et);return i?o=parseFloat(l):r&&1!==l.length?/[89]/.test(l)||mt?n(e,"Invalid number"):o=parseInt(l,8):o=parseInt(l,10),a(vt,o)}function m(t){var e=p(16,t);return null===e&&n(nt,"Bad character escape sequence"),e}function y(){be=!1;for(var t,e=!0,i=et;;){var r=Z.charCodeAt(et);if(Ne(r))be&&(t+=Z.charAt(et)),++et;else{if(92!==r)break;be||(t=Z.slice(i,et)),be=!0,117!=Z.charCodeAt(++et)&&n(et,"Expecting Unicode escape sequence \\uXXXX"),++et;var s=m(4),a=String.fromCharCode(s);a||n(et-1,"Invalid Unicode escape"),(e?Le(s):Ne(s))||n(et-4,"Invalid Unicode escape"),t+=a}e=!1}return be?t:Z.slice(i,et)}function v(){var t=y(),e=wt;return be||(Me(t)?e=Wt[t]:(Y.forbidReserved&&(3===Y.ecmaVersion?Se:Ce)(t)||mt&&Ee(t))&&n(nt,"The keyword '"+t+"' is reserved")),a(e,t)}function _(){ct=nt,dt=it,ft=st,c()}function x(t){if(mt=t,et=dt,Y.locations)for(;ht>et;)ht=Z.lastIndexOf("\n",ht-2)+1,--ut;u(),c()}function w(){this.type=null,this.start=nt,this.end=null}function b(){this.start=rt,this.end=null,null!==Q&&(this.source=Q)}function S(){var t=new w;return Y.locations&&(t.loc=new b),Y.ranges&&(t.range=[nt,0]),t}function C(t){var e=new w;return e.start=t.start,Y.locations&&(e.loc=new b,e.loc.start=t.loc.start),Y.ranges&&(e.range=[t.range[0],0]),e}function E(t,e){return t.type=e,t.end=dt,Y.locations&&(t.loc.end=ft),Y.ranges&&(t.range[1]=dt),t}function T(t){return Y.ecmaVersion>=5&&"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"use strict"===t.expression.value}function M(t){return at===t?(_(),!0):void 0}function k(){return!Y.strictSemicolons&&(at===bt||at===Qt||Ie.test(Z.slice(dt,nt)))}function O(){M(ne)||k()||P()}function A(t){at===t?_():P()}function P(){n(nt,"Unexpected token")}function I(t){"Identifier"!==t.type&&"MemberExpression"!==t.type&&n(t.start,"Assigning to rvalue"),mt&&"Identifier"===t.type&&Te(t.name)&&n(t.start,"Assigning to "+t.name+" in strict mode")}function D(){(at===ae||at===le&&"/="==ot)&&c(!0);var t=at,e=S();switch(t){case St:case Tt:_();var i=t===St;M(ne)||k()?e.label=null:at!==wt?P():(e.label=W(),O());for(var r=0;r<gt.length;++r){var s=gt[r];if(null==e.label||s.name===e.label.name){if(null!=s.kind&&(i||"loop"===s.kind))break;if(e.label&&i)break}}return r===gt.length&&n(e.start,"Unsyntactic "+t.keyword),E(e,i?"BreakStatement":"ContinueStatement");case Mt:return _(),O(),E(e,"DebuggerStatement");case Ot:return _(),gt.push(Re),e.body=D(),gt.pop(),A(Ft),e.test=L(),O(),E(e,"DoWhileStatement");case It:if(_(),gt.push(Re),A(Jt),at===ne)return R(e,null);if(at===jt){var a=S();return _(),U(a,!0),E(a,"VariableDeclaration"),1===a.declarations.length&&M(Vt)?z(e,a):R(e,a)}a=j(!1,!0);return M(Vt)?(I(a),z(e,a)):R(e,a);case Dt:return _(),q(e,!0);case Lt:return _(),e.test=L(),e.consequent=D(),e.alternate=M(At)?D():null,E(e,"IfStatement");case Nt:return pt||n(nt,"'return' outside of function"),_(),M(ne)||k()?e.argument=null:(e.argument=j(),O()),E(e,"ReturnStatement");case Rt:_(),e.discriminant=L(),e.cases=[],A(Kt),gt.push(ze);for(var o,l;at!=Qt;)if(at===Ct||at===kt){var u=at===Ct;o&&E(o,"SwitchCase"),e.cases.push(o=S()),o.consequent=[],_(),u?o.test=j():(l&&n(ct,"Multiple default clauses"),l=!0,o.test=null),A(ie)}else o||P(),o.consequent.push(D());return o&&E(o,"SwitchCase"),_(),gt.pop(),E(e,"SwitchStatement");case zt:return _(),Ie.test(Z.slice(dt,nt))&&n(dt,"Illegal newline after throw"),e.argument=j(),O(),E(e,"ThrowStatement");case Ut:if(_(),e.block=N(),e.handler=null,at===Et){var h=S();_(),A(Jt),h.param=W(),mt&&Te(h.param.name)&&n(h.param.start,"Binding "+h.param.name+" in strict mode"),A(te),h.guard=null,h.body=N(),e.handler=E(h,"CatchClause")}return e.guardedHandlers=yt,e.finalizer=M(Pt)?N():null,e.handler||e.finalizer||n(e.start,"Missing catch or finally clause"),E(e,"TryStatement");case jt:return _(),U(e),O(),E(e,"VariableDeclaration");case Ft:return _(),e.test=L(),gt.push(Re),e.body=D(),gt.pop(),E(e,"WhileStatement");case Bt:return mt&&n(nt,"'with' in strict mode"),_(),e.object=L(),e.body=D(),E(e,"WithStatement");case Kt:return N();case ne:return _(),E(e,"EmptyStatement");default:var d=ot,f=j();if(t===wt&&"Identifier"===f.type&&M(ie)){for(r=0;r<gt.length;++r)gt[r].name===d&&n(f.start,"Label '"+d+"' is already declared");var p=at.isLoop?"loop":at===Rt?"switch":null;return gt.push({name:d,kind:p}),e.body=D(),gt.pop(),e.label=f,E(e,"LabeledStatement")}return e.expression=f,O(),E(e,"ExpressionStatement")}}function L(){A(Jt);var t=j();return A(te),t}function N(t){var e,n=S(),i=!0,r=!1;for(n.body=[],A(Kt);!M(Qt);){var s=D();n.body.push(s),i&&t&&T(s)&&(e=r,x(r=!0)),i=!1}return r&&!e&&x(!1),E(n,"BlockStatement")}function R(t,e){return t.init=e,A(ne),t.test=at===ne?null:j(),A(ne),t.update=at===te?null:j(),A(te),t.body=D(),gt.pop(),E(t,"ForStatement")}function z(t,e){return t.left=e,t.right=j(),A(te),t.body=D(),gt.pop(),E(t,"ForInStatement")}function U(t,e){for(t.declarations=[],t.kind="var";;){var i=S();if(i.id=W(),mt&&Te(i.id.name)&&n(i.id.start,"Binding "+i.id.name+" in strict mode"),i.init=M(oe)?j(!0,e):null,t.declarations.push(E(i,"VariableDeclarator")),!M(ee))break}return t}function j(t,e){var n=F(e);if(!t&&at===ee){var i=C(n);for(i.expressions=[n];M(ee);)i.expressions.push(F(e));return E(i,"SequenceExpression")}return n}function F(t){var e=function(t){var e=function(t){return function t(e,n,i){var r=at.binop;if(null!=r&&(!i||at!==Vt)&&r>n){var s=C(e);s.left=e,s.operator=ot,_(),s.right=t(B(),r,i);var a=E(s,/&&|\|\|/.test(s.operator)?"LogicalExpression":"BinaryExpression");return t(a,n,i)}return e}(B(),-1,t)}(t);if(M(se)){var n=C(e);return n.test=e,n.consequent=j(!0),A(ie),n.alternate=j(!0,t),E(n,"ConditionalExpression")}return e}(t);if(at.isAssign){var n=C(e);return n.operator=ot,n.left=e,_(),n.right=F(t),I(e),E(n,"AssignmentExpression")}return e}function B(){if(at.prefix){var t=S(),e=at.isUpdate;return t.operator=ot,t.prefix=!0,lt=!0,_(),t.argument=B(),e?I(t.argument):mt&&"delete"===t.operator&&"Identifier"===t.argument.type&&n(t.start,"Deleting local variable in strict mode"),E(t,e?"UpdateExpression":"UnaryExpression")}for(var i=$(X());at.postfix&&!k();){(t=C(i)).operator=ot,t.prefix=!1,t.argument=i,I(i),_(),i=E(t,"UpdateExpression")}return i}function $(t,e){var n;return M(re)?((n=C(t)).object=t,n.property=W(!0),n.computed=!1,$(E(n,"MemberExpression"),e)):M(Yt)?((n=C(t)).object=t,n.property=j(),n.computed=!0,A(Zt),$(E(n,"MemberExpression"),e)):!e&&M(Jt)?((n=C(t)).callee=t,n.arguments=V(te,!1),$(E(n,"CallExpression"),e)):t}function X(){switch(at){case Xt:var t=S();return _(),E(t,"ThisExpression");case wt:return W();case vt:case xt:case _t:return(t=S()).value=ot,t.raw=Z.slice(nt,it),_(),E(t,"Literal");case Ht:case Gt:case qt:return(t=S()).value=at.atomValue,t.raw=at.keyword,_(),E(t,"Literal");case Jt:var e=rt,n=nt;_();var i=j();return i.start=n,i.end=it,Y.locations&&(i.loc.start=e,i.loc.end=st),Y.ranges&&(i.range=[n,it]),A(te),i;case Yt:t=S();return _(),t.elements=V(Zt,!0,!0),E(t,"ArrayExpression");case Kt:return H();case Dt:t=S();return _(),q(t,!1);case $t:return function(){var t=S();return _(),t.callee=$(X(),!0),t.arguments=M(Jt)?V(te,!1):yt,E(t,"NewExpression")}();default:P()}}function H(){var t=S(),e=!0,i=!1;for(t.properties=[],_();!M(Qt);){if(e)e=!1;else if(A(ee),Y.allowTrailingCommas&&M(Qt))break;var r,s={key:G()},a=!1;if(M(ie)?(s.value=j(!0),r=s.kind="init"):Y.ecmaVersion>=5&&"Identifier"===s.key.type&&("get"===s.key.name||"set"===s.key.name)?(a=i=!0,r=s.kind=s.key.name,s.key=G(),at!==Jt&&P(),s.value=q(S(),!1)):P(),"Identifier"===s.key.type&&(mt||i))for(var o=0;o<t.properties.length;++o){var l=t.properties[o];if(l.key.name===s.key.name){var u=r==l.kind||a&&"init"===l.kind||"init"===r&&("get"===l.kind||"set"===l.kind);u&&!mt&&"init"===r&&"init"===l.kind&&(u=!1),u&&n(s.key.start,"Redefinition of property")}}t.properties.push(s)}return E(t,"ObjectExpression")}function G(){return at===vt||at===xt?X():W(!0)}function q(t,e){at===wt?t.id=W():e?P():t.id=null,t.params=[];var i=!0;for(A(Jt);!M(te);)i?i=!1:A(ee),t.params.push(W());var r=pt,s=gt;if(pt=!0,gt=[],t.body=N(!0),pt=r,gt=s,mt||t.body.body.length&&T(t.body.body[0]))for(var a=t.id?-1:0;a<t.params.length;++a){var o=0>a?t.id:t.params[a];if((Ee(o.name)||Te(o.name))&&n(o.start,"Defining '"+o.name+"' in strict mode"),a>=0)for(var l=0;a>l;++l)o.name===t.params[l].name&&n(o.start,"Argument name clash in strict mode")}return E(t,e?"FunctionDeclaration":"FunctionExpression")}function V(t,e,n){for(var i=[],r=!0;!M(t);){if(r)r=!1;else if(A(ee),e&&Y.allowTrailingCommas&&M(t))break;n&&at===ee?i.push(null):i.push(j(!0))}return i}function W(t){var e=S();return e.name=at===wt?ot:t&&!Y.forbidReserved&&at.keyword||P(),lt=!1,_(),E(e,"Identifier")}var Y,Z,K,Q;t.version="0.4.0",t.parse=function(t,n){return Z=String(t),K=Z.length,e(n),s(),function(t){ct=dt=et,Y.locations&&(ft=new r),pt=mt=null,gt=[],c();var e=t||S(),n=!0;for(t||(e.body=[]);at!==bt;){var i=D();e.body.push(i),n&&T(i)&&x(!0),n=!1}return E(e,"Program")}(Y.program)};var J=t.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null},tt=t.getLineInfo=function(t,e){for(var n=1,i=0;;){De.lastIndex=i;var r=De.exec(t);if(!(r&&r.index<e))break;++n,i=r.index+r[0].length}return{line:n,column:e-i}};t.tokenize=function(t,n){function i(t){return c(t),r.start=nt,r.end=it,r.startLoc=rt,r.endLoc=st,r.type=at,r.value=ot,r}Z=String(t),K=Z.length,e(n),s();var r={};return i.jumpTo=function(t,e){if(et=t,Y.locations){ut=1,ht=De.lastIndex=0;for(var n;(n=De.exec(Z))&&n.index<t;)++ut,ht=n.index+n[0].length}lt=e,u()},i};var et,nt,it,rt,st,at,ot,lt,ut,ht,ct,dt,ft,pt,gt,mt,yt=[],vt={type:"num"},_t={type:"regexp"},xt={type:"string"},wt={type:"name"},bt={type:"eof"},St={keyword:"break"},Ct={keyword:"case",beforeExpr:!0},Et={keyword:"catch"},Tt={keyword:"continue"},Mt={keyword:"debugger"},kt={keyword:"default"},Ot={keyword:"do",isLoop:!0},At={keyword:"else",beforeExpr:!0},Pt={keyword:"finally"},It={keyword:"for",isLoop:!0},Dt={keyword:"function"},Lt={keyword:"if"},Nt={keyword:"return",beforeExpr:!0},Rt={keyword:"switch"},zt={keyword:"throw",beforeExpr:!0},Ut={keyword:"try"},jt={keyword:"var"},Ft={keyword:"while",isLoop:!0},Bt={keyword:"with"},$t={keyword:"new",beforeExpr:!0},Xt={keyword:"this"},Ht={keyword:"null",atomValue:null},Gt={keyword:"true",atomValue:!0},qt={keyword:"false",atomValue:!1},Vt={keyword:"in",binop:7,beforeExpr:!0},Wt={break:St,case:Ct,catch:Et,continue:Tt,debugger:Mt,default:kt,do:Ot,else:At,finally:Pt,for:It,function:Dt,if:Lt,return:Nt,switch:Rt,throw:zt,try:Ut,var:jt,while:Ft,with:Bt,null:Ht,true:Gt,false:qt,new:$t,in:Vt,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:Xt,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},Yt={type:"[",beforeExpr:!0},Zt={type:"]"},Kt={type:"{",beforeExpr:!0},Qt={type:"}"},Jt={type:"(",beforeExpr:!0},te={type:")"},ee={type:",",beforeExpr:!0},ne={type:";",beforeExpr:!0},ie={type:":",beforeExpr:!0},re={type:"."},se={type:"?",beforeExpr:!0},ae={binop:10,beforeExpr:!0},oe={isAssign:!0,beforeExpr:!0},le={isAssign:!0,beforeExpr:!0},ue={binop:9,prefix:!0,beforeExpr:!0},he={postfix:!0,prefix:!0,isUpdate:!0},ce={prefix:!0,beforeExpr:!0},de={binop:1,beforeExpr:!0},fe={binop:2,beforeExpr:!0},pe={binop:3,beforeExpr:!0},ge={binop:4,beforeExpr:!0},me={binop:5,beforeExpr:!0},ye={binop:6,beforeExpr:!0},ve={binop:7,beforeExpr:!0},_e={binop:8,beforeExpr:!0},xe={binop:10,beforeExpr:!0};for(var we in t.tokTypes={bracketL:Yt,bracketR:Zt,braceL:Kt,braceR:Qt,parenL:Jt,parenR:te,comma:ee,semi:ne,colon:ie,dot:re,question:se,slash:ae,eq:oe,name:wt,eof:bt,num:vt,regexp:_t,string:xt},Wt)t.tokTypes["_"+we]=Wt[we];var be,Se=i("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),Ce=i("class enum extends super const export import"),Ee=i("implements interface let package private protected public static yield"),Te=i("eval arguments"),Me=i("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),ke=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Oe="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",Ae=new RegExp("["+Oe+"]"),Pe=new RegExp("["+Oe+"̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿]"),Ie=/[\n\r\u2028\u2029]/,De=/\r\n|[\n\r\u2028\u2029]/g,Le=t.isIdentifierStart=function(t){return 65>t?36===t:91>t||(97>t?95===t:123>t||t>=170&&Ae.test(String.fromCharCode(t)))},Ne=t.isIdentifierChar=function(t){return 48>t?36===t:58>t||!(65>t)&&(91>t||(97>t?95===t:123>t||t>=170&&Pe.test(String.fromCharCode(t))))},Re={kind:"loop"},ze={kind:"switch"}}));var e={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"equals","!=":"equals"},n={"-":"__negate","+":null},i=o.each(["add","subtract","multiply","divide","modulo","negate"],(function(t){this["__"+t]="#"+t}),{});function r(t,n,i){var r=e[n];if(t&&t[r]){var s=t[r](i);return"!="===n?!s:s}switch(n){case"+":return t+i;case"-":return t-i;case"*":return t*i;case"/":return t/i;case"%":return t%i;case"==":return t==i;case"!=":return t!=i}}function a(t,e){var i=n[t];if(i&&e&&e[i])return e[i]();switch(t){case"+":return+e;case"-":return-e}}function l(e,n){return t.acorn.parse(e,n)}function h(t,i,r){if(!t)return"";r=r||{},i=i||"";var a=[];function o(t){for(var e=0,n=a.length;e<n;e++){var i=a[e];if(i[0]>=t)break;t+=i[1]}return t}function u(e){return t.substring(o(e.range[0]),o(e.range[1]))}function h(e,n){for(var i=o(e.range[0]),r=o(e.range[1]),s=0,l=a.length-1;l>=0;l--)if(i>a[l][0]){s=l+1;break}a.splice(s,0,[i,n.length-r+i]),t=t.substring(0,i)+n+t.substring(r)}var c=null,d=s.browser,f=d.versionNumber,p=/\r\n|\n|\r/gm;if(d.chrome&&f>=30||d.webkit&&f>=537.76||d.firefox&&f>=23){var g=0;if(0===window.location.href.indexOf(i)){var m=document.getElementsByTagName("html")[0].innerHTML;g=m.substr(0,m.indexOf(t)+1).match(p).length+1}var y=["AAAA"];y.length=(t.match(p)||[]).length+1+g,c={version:3,file:i,names:[],mappings:y.join(";AACA"),sourceRoot:"",sources:[i]};var v=r.source||!i&&t;v&&(c.sourcesContent=[v])}return function i(r,s){if(r){for(var a in r)if("range"!==a&&"loc"!==a){var l=r[a];if(Array.isArray(l))for(var c=0,d=l.length;c<d;c++)i(l[c],r);else l&&"object"==typeof l&&i(l,r)}switch(r.type){case"UnaryExpression":if(r.operator in n&&"Literal"!==r.argument.type){var f=u(r.argument);h(r,'$__("'+r.operator+'", '+f+")")}break;case"BinaryExpression":if(r.operator in e&&"Literal"!==r.left.type){var p=u(r.left),g=u(r.right),m=function(e,n){return t.substring(o(e.range[1]),o(n.range[0]))}(r.left,r.right),y=r.operator;h(r,"__$__("+p+","+m.replace(new RegExp("\\"+y),'"'+y+'"')+", "+g+")")}break;case"UpdateExpression":case"AssignmentExpression":var v=s&&s.type;if(!("ForStatement"===v||"BinaryExpression"===v&&/^[=!<>]/.test(s.operator)||"MemberExpression"===v&&s.computed))if("UpdateExpression"===r.type){var _="__$__("+(f=u(r.argument))+', "'+r.operator[0]+'", 1)',x=f+" = "+_;r.prefix||"AssignmentExpression"!==v&&"VariableDeclarator"!==v||(u(s.left||s.id)===f&&(x=_),x=f+"; "+x),h(r,x)}else if(/^.=$/.test(r.operator)&&"Literal"!==r.left.type){p=u(r.left),g=u(r.right);h(r,p+" = __$__("+p+', "'+r.operator[0]+'", '+g+")")}}}}(l(t,{ranges:!0})),c&&(t=new Array(g+1).join("\n")+t+"\n//# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(c))))+"\n//# sourceURL="+(i||"paperscript")),t}function c(t,e,n,i){s=e;var l,u=e.getView(),c=/\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(t)?new et:null,d=c?c._events:[],f=["onFrame","onResize"].concat(d),g=[],m=[];function y(e,n){for(var i in e)!n&&/^_/.test(i)||!new RegExp("([\\b\\s\\W]|^)"+i.replace(/\$/g,"\\$")+"\\b").test(t)||(g.push(i),m.push(e[i]))}t=h(t,n,i),y({__$__:r,$__:a,paper:e,view:u,tool:c},!0),y(e),(f=o.each(f,(function(e){new RegExp("\\s+"+e+"\\b").test(t)&&(g.push(e),this.push(e+": "+e))}),[]).join(", "))&&(t+="\nreturn { "+f+" };");var v=s.browser;if(v.chrome||v.firefox){var _=document.createElement("script"),x=document.head||document.getElementsByTagName("head")[0];v.firefox&&(t="\n"+t),_.appendChild(document.createTextNode("paper._execute = function("+g+") {"+t+"\n}")),x.appendChild(_),l=s._execute,delete s._execute,x.removeChild(_)}else l=Function(g,t);var w=l.apply(e,m)||{};o.each(d,(function(t){var e=w[t];e&&(c[t]=e)})),u&&(w.onResize&&u.setOnResize(w.onResize),u.emit("resize",{size:u.size,delta:new p}),w.onFrame&&u.setOnFrame(w.onFrame),u.update())}function d(t){if(/^text\/(?:x-|)paperscript$/.test(t.type)&&"true"!==u.getAttribute(t,"ignore")){var e=u.getAttribute(t,"canvas"),n=document.getElementById(e),i=t.src||t.getAttribute("data-src"),r=u.hasAttribute(t,"async");if(!n)throw new Error('Unable to find canvas with id "'+e+'"');var s=u.get(n.getAttribute("data-paper-scope"))||(new u).setup(n);return n.setAttribute("data-paper-scope",s._id),i?nt("get",i,(function(t){c(t,s,i)}),r):c(t.innerHTML,s,t.baseURI),t.setAttribute("data-paper-ignore","true"),s}}function f(){o.each(document.getElementsByTagName("script"),d)}return p.inject(i),m.inject(i),$.inject(i),"complete"===document.readyState?setTimeout(f):V.add(window,{load:f}),{compile:h,execute:c,load:function(t){return t?d(t):f()},parse:l}}.call(this),s=new(u.inject(o.exports,{enumerable:!0,Base:o,Numerical:d,Key:Q})),void 0===(r="function"==typeof(i=s)?i.call(e,n,e,t):i)||(t.exports=r),s};
/*!
 * Paper.js v0.9.25 - The Swiss Army Knife of Vector Graphics Scripting.
 * http://paperjs.org/
 *
 * Copyright (c) 2011 - 2014, Juerg Lehni & Jonathan Puckey
 * http://scratchdisk.com/ & http://jonathanpuckey.com/
 *
 * Distributed under the MIT license. See LICENSE file for details.
 *
 * All rights reserved.
 *
 * Date: Sun Oct 25 11:23:38 2015 +0100
 *
 ***
 *
 * Straps.js - Class inheritance library with support for bean-style accessors
 *
 * Copyright (c) 2006 - 2013 Juerg Lehni
 * http://scratchdisk.com/
 *
 * Distributed under the MIT license.
 *
 ***
 *
 * Acorn.js
 * http://marijnhaverbeke.nl/acorn/
 *
 * Acorn is a tiny, fast JavaScript parser written in JavaScript,
 * created by Marijn Haverbeke and released under an MIT license.
 *
 */},function(t,e,n){"use strict";const i=function(t){let e=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/e}(HTMLCanvasElement.prototype);e.a=i},function(t,e,n){"use strict";function i(t,e){return t.length?t.map(t=>function(t,e=2){if(!t.length)return"";const n=function(t){return+t.toFixed(e)},i=[];let r,s,a,o,l;for(let e=0,u=t.length;e<u;e++)if(r=t[e],s=0===e?t[u-1]:t[e-1],a=e===u-1?t[0]:t[e+1],0===e&&(r.onCurve?(o=r.x,l=r.y,i.push("M"+n(o)+" "+n(l))):s.onCurve?(o=s.x,l=s.y,i.push("M"+n(o)+" "+n(l))):(o=(s.x+r.x)/2,l=(s.y+r.y)/2,i.push("M"+n(o)+" "+n(l)))),r.onCurve&&a.onCurve)i.push("l"+n(a.x-o)+" "+n(a.y-l)),o=a.x,l=a.y;else if(!r.onCurve)if(a.onCurve)i.push("q"+n(r.x-o)+" "+n(r.y-l)+" "+n(a.x-o)+" "+n(a.y-l)),o=a.x,l=a.y;else{const t=(r.x+a.x)/2,e=(r.y+a.y)/2;i.push("q"+n(r.x-o)+" "+n(r.y-l)+" "+n(t-o)+" "+n(e-l)),o=t,l=e}return i.push("Z"),i.join(" ")}(t,e)).join(""):""}n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";var i=n(35);n.d(e,"a",(function(){return i.a}))},function(t,e,n){"use strict";function i(t){let e=t.x;return Math.abs(Math.round(e)-e)<2e-5?t.x=Math.round(e):t.x=Math.round(1e5*t.x)/1e5,e=t.y,Math.abs(Math.round(e)-e)<5e-5?t.y=Math.round(e):t.y=Math.round(1e5*t.y)/1e5,t}function r(t){return Math.abs(Math.round(t)-t)<2e-5?Math.round(t):Math.round(1e5*t)/1e5}function s(t,e,n){return n?r(e.x)<=r(t.x+t.width)&&r(e.x)>=r(t.x)&&r(e.y)<=r(t.y+t.height)&&r(e.y)>=r(t.y):e.x<=t.x+t.width&&e.x>=t.x&&e.y<=t.y+t.height&&e.y>=t.y}function a(t){return Math.floor(7*Math.floor(10*t.x)+131*Math.floor(100*t.y))}n.d(e,"a",(function(){return i})),n.d(e,"c",(function(){return s})),n.d(e,"b",(function(){return a}))},function(t,e,n){"use strict";function i(t,e){let n;for(let i=0,r=t.length;i<r;i++)n=t[i],e?(n.x=Number(n.x.toFixed(e)),n.y=Number(n.y.toFixed(e))):(n.x=Math.round(n.x),n.y=Math.round(n.y));return t}n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n(12),r=n(5);if("undefined"==typeof ArrayBuffer||"undefined"==typeof DataView)throw new Error("not support ArrayBuffer and DataView");const s={Int8:1,Int16:2,Int32:4,Uint8:1,Uint16:2,Uint32:4,Float32:4,Float64:8};class a{constructor(t,e,n,i){const r=t.byteLength||t.length;this.offset=e||0,this.length=n||r-this.offset,this.littleEndian=i||!1,this.view=new DataView(t,this.offset,this.length)}read(t,e,n){if(void 0===e&&(e=this.offset),void 0===n&&(n=this.littleEndian),void 0===s[t])return this["read"+t](e,n);const i=s[t];return this.offset=e+i,this.view["get"+t](e,n)}readBytes(t,e=null){null==e&&(e=t,t=this.offset),(e<0||t+e>this.length)&&r.a.raise(10001,this.length,t+e);const n=[];for(let i=0;i<e;++i)n.push(this.view.getUint8(t+i));return this.offset=t+e,n}readString(t,e=null){null==e&&(e=t,t=this.offset),(e<0||t+e>this.length)&&r.a.raise(10001,this.length,t+e);let n="";for(let i=0;i<e;++i){const e=this.readUint8(t+i);n+=String.fromCharCode(e)}return this.offset=t+e,n}readChar(t){return this.readString(t,1)}readUint24(t){const[e,n,i]=this.readBytes(t||this.offset,3);return(e<<16)+(n<<8)+i}readFixed(t){void 0===t&&(t=this.offset);const e=this.readInt32(t,!1)/65536;return Math.ceil(1e5*e)/1e5}readLongDateTime(t){void 0===t&&(t=this.offset);const e=this.readUint32(t+4,!1),n=new Date;return n.setTime(1e3*e-20775456e5),n}seek(t){return void 0===t&&(this.offset=0),(t<0||t>this.length)&&r.a.raise(10001,this.length,t),this.offset=t,this}dispose(){delete this.view}}Object.keys(s).forEach(t=>{a.prototype["read"+t]=Object(i.b)(a.prototype.read,t)})},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var i=n(24);const r=2*Math.PI;function s(t,e,n,i){const r=t*i-e*n<0?-1:1;let s=(t*n+e*i)/(Math.sqrt(t*t+e*e)*Math.sqrt(t*t+e*e));return(s>1||s<-1)&&(s=Math.max(s,-1),s=Math.min(s,1)),r*Math.acos(s)}function a(t,e){const n=4/3*Math.tan(e/4),i=Math.cos(t),r=Math.sin(t),s=Math.cos(t+e),a=Math.sin(t+e);return[i,r,i-r*n,r+i*n,s+a*n,a-s*n,s,a]}function o(t,e,n,i,o,l,u,h,c){const d=Math.sin(c*r/360),f=Math.cos(c*r/360),p=f*(t-n)/2+d*(e-i)/2,g=-d*(t-n)/2+f*(e-i)/2;if(0===p&&0===g)return[];if(0===u||0===h)return[];const m=function(t,e,n,i){const r=t*t/((n=Math.abs(n))*n)+e*e/((i=Math.abs(i))*i);return r>1&&(n*=Math.sqrt(r),i*=Math.sqrt(r)),[n,i]}(p,g,u,h);u=m[0],h=m[1];const y=function(t,e,n,i,a,o,l,u,h,c){const d=c*(t-n)/2+h*(e-i)/2,f=-h*(t-n)/2+c*(e-i)/2,p=l*l,g=u*u,m=d*d,y=f*f;let v=p*g-p*y-g*m;v<0&&(v=0),v/=p*y+g*m,v=Math.sqrt(v)*(a===o?-1:1);const _=v*l/u*f,x=v*-u/l*d,w=c*_-h*x+(t+n)/2,b=h*_+c*x+(e+i)/2,S=(d-_)/l,C=(f-x)/u,E=(-d-_)/l,T=(-f-x)/u,M=s(1,0,S,C);let k=s(S,C,E,T);return 0===o&&k>0&&(k-=r),1===o&&k<0&&(k+=r),[w,b,M,k]}(t,e,n,i,o,l,u,h,d,f),v=[];let _=y[2],x=y[3];const w=Math.max(Math.ceil(Math.abs(x)/(r/4)),1);x/=w;for(let t=0;t<w;t++)v.push(a(_,x)),_+=x;return v.map(t=>{for(let e=0;e<t.length;e+=2){let n=t[e+0],i=t[e+1];n*=u,i*=h;const r=f*n-d*i,s=d*n+f*i;t[e+0]=r+y[0],t[e+1]=s+y[1]}return t})}function l(t,e,n,r,s,a,l){const u=o(a.x,a.y,l.x,l.y,r,s,t,e,n),h=[];return u.length&&(h.push({x:u[0][0],y:u[0][1],onCurve:!0}),u.forEach(t=>{const e=Object(i.a)({x:t[0],y:t[1]},{x:t[2],y:t[3]},{x:t[4],y:t[5]},{x:t[6],y:t[7]});e[0][2].onCurve=!0,h.push(e[0][1]),h.push(e[0][2]),e[1]&&(e[1][2].onCurve=!0,h.push(e[1][1]),h.push(e[1][2]))})),h}var u=n(37);function h(t,e){let n,r;const s=[];let a,o;for(t.forEach(t=>{const e=Object(i.a)(t[0],t[1],t[2],t[3]);for(n=0,r=e.length;n<r;n++)s.push(e[n])}),n=0,r=s.length;n<r;n++)a=s[n],0===n?(e.push({x:a[1].x,y:a[1].y}),e.push({x:a[2].x,y:a[2].y,onCurve:!0})):(o=s[n-1],o[1].x+a[1].x===2*a[0].x&&o[1].y+a[1].y===2*a[0].y&&e.pop(),e.push({x:a[1].x,y:a[1].y}),e.push({x:a[2].x,y:a[2].y,onCurve:!0}));return e.push({x:a[2].x,y:a[2].y,onCurve:!0}),e}function c(t){if(!t||!t.length)return null;"M"!==(t=t.trim())[0]&&"m"!==t[0]&&(t="M 0 0"+t);const e=[];let n,i,r,s=!1;for(let a=0,o=(t=t.replace(/(\d+)\s*(m|$)/gi,"$1z$2")).length;a<o;a++){const o=t[a].toUpperCase(),l=o!==t[a];switch(o){case"M":if(0===a){n=o,i=1;break}case"Q":case"T":case"C":case"S":case"H":case"V":case"L":case"A":case"Z":"Z"===n?e.push({cmd:"Z"}):(r=t.slice(i,a),e.push({cmd:n,relative:s,args:Object(u.a)(r)})),n=o,s=l,i=a+1}}return e.push({cmd:"Z"}),function(t){const e=[];let n,i,r,s,a,o,u,c,d,f,p,g,m,y,v=[],_=0,x=0;for(let w=0,b=t.length;w<b;w++)if(n=t[w],r=n.cmd,s=n.relative,i=n.args,!i||i.length||"Z"===r){if("Z"===r)e.push(v),v=[];else if("M"===r||"L"===r){if(i.length%2)throw new Error("`M` command error:"+i.join(","));for(s?(u=_,c=x):(u=0,c=0),a=0,o=i.length;a<o;a+=2)s?(u+=i[a],c+=i[a+1]):(u=i[a],c=i[a+1]),v.push({x:u,y:c,onCurve:!0});_=u,x=c}else if("H"===r)s?_+=i[0]:_=i[0],v.push({x:_,y:x,onCurve:!0});else if("V"===r)s?x+=i[0]:x=i[0],v.push({x:_,y:x,onCurve:!0});else if("Q"===r){for(s?(u=_,c=x):(u=0,c=0),a=0,o=i.length;a<o;a+=4)v.push({x:u+i[a],y:c+i[a+1]}),v.push({x:u+i[a+2],y:c+i[a+3],onCurve:!0}),s?(u+=i[a+2],c+=i[a+3]):(u=0,c=0);s?(_=u,x=c):(_=i[o-2],x=i[o-1])}else if("T"===r){let t=v.pop(),e=v[v.length-1];for(e||(e=t),v.push(e={x:2*t.x-e.x,y:2*t.y-e.y}),u=_,c=x,a=0,o=i.length-2;a<o;a+=2)s?(u+=i[a],c+=i[a+1]):(u=i[a],c=i[a+1]),t={x:u,y:c},v.push(e={x:2*t.x-e.x,y:2*t.y-e.y});s?(_=u+i[o],x=c+i[o+1]):(_=i[o],x=i[o+1]),v.push({x:_,y:x,onCurve:!0})}else if("C"===r){if(i.length%6)throw new Error("`C` command params error:"+i.join(","));for(d=[],s?(u=_,c=x):(u=0,c=0),f={x:_,y:x},a=0,o=i.length;a<o;a+=6)g={x:u+i[a],y:c+i[a+1]},m={x:u+i[a+2],y:c+i[a+3]},p={x:u+i[a+4],y:c+i[a+5]},d.push([f,g,m,p]),f=p,s?(u+=i[a+4],c+=i[a+5]):(u=0,c=0);s?(_=u,x=c):(_=i[o-2],x=i[o-1]),h(d,v),y=d[d.length-1][2]}else if("S"===r){if(i.length%4)throw new Error("`S` command params error:"+i.join(","));for(d=[],s?(u=_,c=x):(u=0,c=0),f=v.pop(),y||(y=f),g={x:2*f.x-y.x,y:2*f.y-y.y},a=0,o=i.length;a<o;a+=4)m={x:u+i[a],y:c+i[a+1]},p={x:u+i[a+2],y:c+i[a+3]},d.push([f,g,m,p]),f=p,g={x:2*f.x-m.x,y:2*f.y-m.y},s?(u+=i[a+2],c+=i[a+3]):(u=0,c=0);s?(_=u,x=c):(_=i[o-2],x=i[o-1]),h(d,v),y=d[d.length-1][2]}else if("A"===r){if(i.length%7)throw new Error("arc command params error:"+i.join(","));for(a=0,o=i.length;a<o;a+=7){let t=i[a+5],e=i[a+6];s&&(t=_+t,e=x+e);const n=l(i[a],i[a+1],i[a+2],i[a+3],i[a+4],{x:_,y:x},{x:t,y:e});if(n&&n.length>1)for(let t=1,e=n.length;t<e;t++)v.push(n[t]);_=t,x=e}}}else console.warn("`"+r+"` command args empty!");return e}(e)}},function(t,e,n){"use strict";e.a={editor:{unitsPerEm:512,sorption:{enableGrid:!1,enableShape:!0,gridDelta:5,delta:5,sorptionColor:"#F0913A"},referenceline:{style:{strokeColor:"#746AFE",fillColor:"blue"}},tipText:{id:"tip-text",fillColor:"blue",x:30,y:36},coverLayer:{lineColor:"#4780FF",outlineColor:"#3372FF",strokeColor:"#4780FF",fillColor:"white"},fontLayer:{lineWidth:1,strokeColor:"#888",fill:!0,fillColor:"#999"},axis:{showGrid:!0,gapColor:"#DEDCFE",axisColor:"red",metricsColor:"#FF9592",emColor:"red",metrics:{ascent:480,descent:-33,xHeight:256,capHeight:358},graduation:{gap:100,thickness:20,markHeight:3,markBackgroundColor:"#C3CBD2",markColor:"#65737E",color:"#65737E"}},contextMenu:{}},render:{defaultRatio:1.2,minScale:.1,maxScale:200,enableScale:!0,enableResize:!0}}},function(t,e,n){"use strict";function i(t,e,n,i){return[t,{x:(3*n.x-i.x+3*e.x-t.x)/4,y:(3*n.y-i.y+3*e.y-t.y)/4},i]}function r(t,e,n,r){if(t.x===e.x&&t.y===e.y&&n.x===r.x&&n.y===r.y)return[[t,{x:(t.x+r.x)/2,y:(t.y+r.y)/2},r]];const s=r.x-3*n.x+3*e.x-t.x,a=r.y-3*n.y+3*e.y-t.y;if(s*s+a*a<=4)return[i(t,e,n,r)];const o={x:(r.x+3*n.x+3*e.x+t.x)/8,y:(r.y+3*n.y+3*e.y+t.y)/8};return[i(t,{x:(t.x+e.x)/2,y:(t.y+e.y)/2},{x:(t.x+2*e.x+n.x)/4,y:(t.y+2*e.y+n.y)/4},o),i(o,{x:(r.x+e.x+2*n.x)/4,y:(r.y+e.y+2*n.y)/4},{x:(r.x+n.x)/2,y:(r.y+n.y)/2},r)]}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var i=n(48),r=n(54),s=n(21),a=n(64),o=n(5),l=n(59);class u{constructor(t={}){t.subset=t.subset||[],t.hinting=t.hinting||!1,t.compound2simple=t.compound2simple||!1,this.options=t}readBuffer(t){const e=new s.a(t,0,t.byteLength,!1),n={};return n.version=e.readFixed(0),1!==n.version&&o.a.raise(10101),n.numTables=e.readUint16(),(n.numTables<=0||n.numTables>100)&&o.a.raise(10101),n.searchRange=e.readUint16(),n.entrySelector=e.readUint16(),n.rangeShift=e.readUint16(),n.tables=new i.a(e.offset).read(e,n),n.tables.glyf&&n.tables.head&&n.tables.cmap&&n.tables.hmtx||o.a.raise(10204),n.readOptions=this.options,Object.keys(r.a).forEach(t=>{if(n.tables[t]){const i=n.tables[t].offset;n[t]=new r.a[t](i).read(e,n)}}),n.glyf||o.a.raise(10201),e.dispose(),n}resolveGlyf(t){const e=t.cmap,n=t.glyf,i=t.readOptions.subset?t.subsetMap:null;if(Object.keys(e).forEach(t=>{const r=e[t];i&&!i[r]||(n[r].unicode||(n[r].unicode=[]),n[r].unicode.push(+t))}),t.hmtx.forEach((t,e)=>{i&&!i[e]||(n[e].advanceWidth=t.advanceWidth,n[e].leftSideBearing=t.leftSideBearing)}),t.post&&2===t.post.format){const e=t.post.nameIndex,r=t.post.names;e.forEach((t,e)=>{i&&!i[e]||(n[e].name=t<=257?a.a[t]:r[t-258]||"")})}if(i){const e=[];Object.keys(i).forEach(i=>{n[i=+i].compound&&Object(l.a)(i,t,!0),e.push(n[i])}),t.glyf=e,t.maxp.maxComponentElements=0,t.maxp.maxComponentDepth=0}}cleanTables(t){delete t.readOptions,delete t.tables,delete t.hmtx,delete t.loca,t.post&&(delete t.post.nameIndex,delete t.post.names),delete t.subsetMap,this.options.hinting||(delete t.fpgm,delete t.cvt,delete t.prep,delete t.GPOS,delete t.kern,t.glyf.forEach(t=>{delete t.instructions})),this.options.compound2simple&&t.maxp.maxComponentElements&&(t.glyf.forEach((e,n)=>{e.compound&&Object(l.a)(n,t,!0)}),t.maxp.maxComponentElements=0,t.maxp.maxComponentDepth=0)}read(t){return this.ttf=this.readBuffer(t),this.resolveGlyf(this.ttf),this.cleanTables(this.ttf),this.ttf}dispose(){delete this.ttf,delete this.options}}},function(t,e,n){"use strict";(function(t,i){n.d(e,"a",(function(){return M}));var r=n(85),s=n(52),a=n(38),o=n(66),l=n(83),u=n(75),h=n(81),c=n(25),d=n(47),f=n(49),p=n(50),g=n(84),m=n(76),y=n(77),v=n(78),_=n(79),x=n(90),w=n(91),b=n(58),S=n(34),C=n(92),E=n(65);const T="object"==typeof t&&"object"==typeof t.versions&&void 0!==t.versions.node&&"function"==typeof i;class M{constructor(t,e={type:"ttf"}){"object"==typeof t&&t.glyf?this.set(t):t?this.read(t,e):this.readEmpty()}readEmpty(){return this.data=Object(s.a)(),this}read(t,e){if(T&&t instanceof i&&(t=r.a.toArrayBuffer(t)),"ttf"===e.type)this.data=new c.a(e).read(t);else if("otf"===e.type)this.data=Object(l.a)(t,e);else if("eot"===e.type)t=Object(u.a)(t,e),this.data=new c.a(e).read(t);else if("woff"===e.type)t=Object(o.a)(t,e),this.data=new c.a(e).read(t);else if("woff2"===e.type)t=Object(v.a)(t,e),this.data=new c.a(e).read(t);else{if("svg"!==e.type)throw new Error("not support font type"+e.type);this.data=Object(h.a)(t,e)}return this.type=e.type,this}write(t={}){t.type||(t.type=this.type);let e=null;if("ttf"===t.type)e=new d.a(t).write(this.data);else if("eot"===t.type)e=new d.a(t).write(this.data),e=Object(f.a)(e,t);else if("woff"===t.type)e=new d.a(t).write(this.data),e=Object(p.a)(e,t);else if("woff2"===t.type)e=new d.a(t).write(this.data),e=Object(y.a)(e,t);else if("svg"===t.type)e=Object(g.a)(this.data,t);else{if("symbol"!==t.type)throw new Error("not support font type"+t.type);e=Object(m.a)(this.data,t)}return T&&!1!==t.toBuffer&&e instanceof ArrayBuffer&&(e=r.a.toBuffer(e)),e}toBase64(t,e){let n;if(t.type||(t.type=this.type),e?T&&e instanceof i&&(e=r.a.toArrayBuffer(e)):(t.toBuffer=!1,e=this.write(t)),"ttf"===t.type)n=Object(_.a)(e);else if("eot"===t.type)n=Object(x.a)(e);else if("woff"===t.type)n=Object(w.a)(e);else if("woff2"===t.type)n=Object(C.a)(e);else if("svg"===t.type)n=Object(b.a)(e);else{if("symbol"!==t.type)throw new Error("not support font type"+t.type);n=Object(b.a)(e,"image/svg+xml")}return n}set(t){return this.data=t,this}get(){return this.data}optimize(t){const e=Object(E.a)(this.data);return t&&(t.result=e),this}compound2simple(){const t=new a.a(this.data);return t.compound2simple(),this.data=t.get(),this}sort(){const t=new a.a(this.data);return t.sortGlyf(),this.data=t.get(),this}find(t){const e=new a.a(this.data),n=e.findGlyf(t);return n.length?e.getGlyf(n):n}merge(t,e){const n=new a.a(this.data);return n.mergeGlyf(t.get(),e),this.data=n.get(),this}}M.create=function(t,e){return new M(t,e)},M.toBase64=function(t){return"string"==typeof t?"undefined"==typeof btoa?i.from(t,"binary").toString("base64"):btoa(t):Object(S.a)(t)}}).call(this,n(86),n(55).Buffer)},function(t,e,n){(function(e){function i(t){const e=[];for(let n=0,i=t.size();n<i;n++)e.push(t.get(n));return new Uint8Array(e)}t.exports={woff2Module:null,isInited(){return this.woff2Module&&this.woff2Module.woff2Enc&&this.woff2Module.woff2Dec},init(t){return new Promise(i=>{if(this.woff2Module)return void i(this);const r=n(115);let s=null;s="undefined"!=typeof window?{locateFile:e=>e.endsWith(".wasm")?t:e}:{wasmBinaryFile:e+"/woff2.wasm"};const a=r(s);a.onRuntimeInitialized=()=>{this.woff2Module=a,i(this)}})},encode(t){const e=new Uint8Array(t);return i(this.woff2Module.woff2Enc(e,e.byteLength))},decode(t){const e=new Uint8Array(t);return i(this.woff2Module.woff2Dec(e,e.byteLength))}}}).call(this,"/")},function(t,e,n){"use strict";var i=n(12),r=n(5);if("undefined"==typeof ArrayBuffer||"undefined"==typeof DataView)throw new Error("not support ArrayBuffer and DataView");const s={Int8:1,Int16:2,Int32:4,Uint8:1,Uint16:2,Uint32:4,Float32:4,Float64:8};class a{constructor(t,e,n,i){const r=t.byteLength||t.length;this.offset=e||0,this.length=n||r-this.offset,this.littleEndian=i||!1,this.view=new DataView(t,this.offset,this.length)}write(t,e,n,i){if(void 0===n&&(n=this.offset),void 0===i&&(i=this.littleEndian),void 0===s[t])return this["write"+t](e,n,i);const r=s[t];return this.offset=n+r,this.view["set"+t](n,e,i),this}writeBytes(t,e,n){let i;if(!(e=e||t.byteLength||t.length))return this;void 0===n&&(n=this.offset),(e<0||n+e>this.length)&&r.a.raise(10002,this.length,n+e);const s=this.littleEndian;if(t instanceof ArrayBuffer){const r=new DataView(t,0,e);for(i=0;i<e;++i)this.view.setUint8(n+i,r.getUint8(i,s),s)}else for(i=0;i<e;++i)this.view.setUint8(n+i,t[i],s);return this.offset=n+e,this}writeEmpty(t,e){t<0&&r.a.raise(10002,this.length,t),void 0===e&&(e=this.offset);const n=this.littleEndian;for(let i=0;i<t;++i)this.view.setUint8(e+i,0,n);return this.offset=e+t,this}writeString(t="",e,n){void 0===n&&(n=this.offset),((e=e||t.replace(/[^\x00-\xff]/g,"11").length)<0||n+e>this.length)&&r.a.raise(10002,this.length,n+e),this.seek(n);for(let e,n=0,i=t.length;n<i;++n)e=t.charCodeAt(n)||0,e>127?this.writeUint16(e):this.writeUint8(e);return this.offset=n+e,this}writeChar(t,e){return this.writeString(t,e)}writeFixed(t,e){return void 0===e&&(e=this.offset),this.writeInt32(Math.round(65536*t),e),this}writeLongDateTime(t,e){void 0===e&&(e=this.offset);t=void 0===t?-20775456e5:"function"==typeof t.getTime?t.getTime():/^\d+$/.test(t)?+t:Date.parse(t);const n=Math.round((t- -20775456e5)/1e3);return this.writeUint32(0,e),this.writeUint32(n,e+4),this}seek(t){return void 0===t&&(this.offset=0),(t<0||t>this.length)&&r.a.raise(10002,this.length,t),this._offset=this.offset,this.offset=t,this}head(){return this.offset=this._offset||0,this}getBuffer(){return this.view.buffer}dispose(){delete this.view}}Object.keys(s).forEach(t=>{a.prototype["write"+t]=Object(i.b)(a.prototype.write,t)}),e.a=a},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n(9),r=n(20),s=n(10);function a(t,e=1,n=1,a=0,o=0,l=!0){t.contours&&t.contours.length&&(1===e&&1===n||t.contours.forEach(t=>{Object(i.a)(t,e,n)}),0===a&&0===o||t.contours.forEach(t=>{Object(i.a)(t,1,1,a,o)}),!1!==l&&t.contours.forEach(t=>{Object(r.a)(t)}));const u=t.advanceWidth;if(void 0===t.xMin||void 0===t.yMax||void 0===t.leftSideBearing||void 0===t.advanceWidth){let n;n=t.contours&&t.contours.length?s.c.apply(this,t.contours):{x:0,y:0,width:0,height:0},t.xMin=n.x,t.xMax=n.x+n.width,t.yMin=n.y,t.yMax=n.y+n.height,t.leftSideBearing=t.xMin,t.advanceWidth=void 0!==u?Math.round(u*e+a):t.xMax+Math.abs(t.xMin)}else t.xMin=Math.round(t.xMin*e+a),t.xMax=Math.round(t.xMax*e+a),t.yMin=Math.round(t.yMin*n+o),t.yMax=Math.round(t.yMax*n+o),t.leftSideBearing=Math.round(t.leftSideBearing*e+a),t.advanceWidth=Math.round(u*e+a);return t}},function(t,e,n){"use strict";const i=window.localStorage;e.a={set(t,e){i.setItem("clipboard.default",JSON.stringify({type:e||-9999,data:t}))},get(t){let e=i.getItem("clipboard.default");return null!==e&&(e=JSON.parse(e),e.type===t)?e.data:null},clear(){i.removeItem("clipboard.default")}}},function(t,e,n){"use strict";function i(t,e){let n,i,r,s;for(let a=0,o=t.length;a<o;a++)if(n=t[a],i=0===a?t[o-1]:t[a-1],r=a===o-1?t[0]:t[a+1],0===a&&(s=n.onCurve?n:i.onCurve?i:{x:(i.x+n.x)/2,y:(i.y+n.y)/2}),n.onCurve&&r.onCurve){if(!1===e("L",n,r,0,a))break;s=r}else if(!n.onCurve)if(r.onCurve){if(!1===e("Q",s,n,r,a))break;s=r}else{const t={x:(n.x+r.x)/2,y:(n.y+r.y)/2};if(!1===e("Q",s,n,t,a))break;s=t}}n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";function i(t,e){let n,i,r;for(let s=0,a=e.length;s<a;s++)n=e[s],i=0===s?e[a-1]:e[s-1],r=s===a-1?e[0]:e[s+1],0===s&&(n.onCurve?t.moveTo(n.x,n.y):i.onCurve?t.moveTo(i.x,i.y):t.moveTo((i.x+n.x)/2,(i.y+n.y)/2)),n.onCurve&&r.onCurve?t.lineTo(r.x,r.y):n.onCurve||(r.onCurve?t.quadraticCurveTo(n.x,n.y,r.x,r.y):t.quadraticCurveTo(n.x,n.y,(n.x+r.x)/2,(n.y+r.y)/2))}n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";e.a={fontId:"fonteditor",name:{fontFamily:"fonteditor",fontSubFamily:"Medium",uniqueSubFamily:"FontEditor 1.0 : fonteditor",version:"Version 1.0; FontEditor (v1.0)",postScriptName:"fonteditor"}}},function(t,e,n){"use strict";(function(t){function i(e){let n,i,r="";if(e instanceof ArrayBuffer){n=e.byteLength;const t=new DataView(e,0,n);for(i=0;i<n;i++)r+=String.fromCharCode(t.getUint8(i,!1))}else if(e.length)for(n=e.length,i=0;i<n;i++)r+=String.fromCharCode(e[i]);return r?"undefined"!=typeof btoa?btoa(r):t.from(r,"binary").toString("base64"):""}n.d(e,"a",(function(){return i}))}).call(this,n(55).Buffer)},function(t,e,n){"use strict";var i=n(10),r=n(9),s=n(36);function a(t,e,n){const{x:s,y:a,width:o,height:l}=Object(i.b)(...t);return-1===e&&t.forEach(t=>{Object(r.a)(t,-1,1,-s,0),Object(r.a)(t,1,1,s+o,0),t.reverse()}),-1===n&&t.forEach(t=>{Object(r.a)(t,1,-1,0,-a),Object(r.a)(t,1,1,0,a+l),t.reverse()}),t}e.a={rotate(t,e){if(!e)return t;const n=Object(i.b)(...t),r=n.x+n.width/2,a=n.y+n.height/2;return t.forEach(t=>{Object(s.a)(t,e,r,a)}),t},move(t,e,n){const s=Object(i.b)(...t);return t.forEach(t=>{Object(r.a)(t,1,1,e-s.x,n-s.y)}),t},mirror:t=>a(t,-1,1),flip:t=>a(t,1,-1)}},function(t,e,n){"use strict";function i(t,e,n,i){e=void 0===e?0:e;const r=n||0,s=i||0,a=Math.cos(e),o=Math.sin(e);let l,u,h;for(let e=0,n=t.length;e<n;e++)h=t[e],l=a*(h.x-r)-o*(h.y-s),u=a*(h.y-s)+o*(h.x-r),h.x=l+r,h.y=u+s;return t}n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";const i=/-?\d+(?:\.\d+)?(?:e[-+]?\d+)?\b/g;function r(t){return+t.trim()}e.a=function(t){if(!t)return[];const e=t.match(i);return e?e.map(r):[]}},function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var i=n(12),r=n(13),s=n(9),a=n(20),o=n(10),l=n(59),u=n(29),h=n(65),c=n(33);function d(t,e,n,i){return t.forEach(t=>{if(t.contours&&t.contours.length){const r=t.advanceWidth-t.xMax,l=Object(o.b)(...t.contours),u=(e-n-i)/l.height,h=(e+n)/2-(l.y+l.height/2)*u;t.contours.forEach(t=>{1!==u&&Object(s.a)(t,u,u),Object(s.a)(t,1,1,0,h),Object(a.a)(t)});const c=Object(o.c)(...t.contours);t.xMin=c.x,t.xMax=c.x+c.width,t.yMin=c.y,t.yMax=c.y+c.height,t.leftSideBearing=t.xMin,t.advanceWidth=t.xMax+r}}),t}function f(t,e,n,i){let r=!1;return null!=e&&(r=!0,t.forEach(t=>{t.leftSideBearing!==e&&Object(u.a)(t,1,1,e-t.leftSideBearing)})),null!=n&&(r=!0,t.forEach(t=>{t.advanceWidth=t.xMax+n})),null!=i&&(r=!0,t.forEach(t=>{if(t.contours&&t.contours.length){const e=Object(o.b)(...t.contours),n=i-e.y;Object(u.a)(t,1,1,0,n)}})),r?t:[]}class p{constructor(t){this.ttf=t}codes(){return Object.keys(this.ttf.cmap)}getGlyfIndexByCode(t){const e="number"==typeof t?t:t.codePointAt(0);return this.ttf.cmap[e]||-1}getGlyfByIndex(t){return this.ttf.glyf[t]}getGlyfByCode(t){const e=this.getGlyfIndexByCode(t);return this.getGlyfByIndex(e)}set(t){return this.ttf=t,this}get(){return this.ttf}addGlyf(t){return this.insertGlyf(t)}insertGlyf(t,e){return e>=0&&e<this.ttf.glyf.length?this.ttf.glyf.splice(e,0,t):this.ttf.glyf.push(t),[t]}mergeGlyf(t,e){return function(t,e,n={scale:!0}){const i=e.glyf.filter(t=>t.contours&&t.contours.length&&".notdef"!==t.name&&".null"!==t.name&&"nonmarkingreturn"!==t.name);if(n.adjustGlyf){const e=t.hhea.ascent,n=t.hhea.descent,r=16;f(i,16,16),d(i,e,n,r),i.forEach(e=>{t.glyf.push(e)})}else if(n.scale){let n=1;e.head.unitsPerEm&&e.head.unitsPerEm!==t.head.unitsPerEm&&(n=t.head.unitsPerEm/e.head.unitsPerEm),i.forEach(e=>{Object(u.a)(e,n,n),t.glyf.push(e)})}return i}(this.ttf,t,e)}removeGlyf(t){const e=this.ttf.glyf,n=[];for(let i=e.length-1;i>=0;i--)t.indexOf(i)>=0&&(n.push(e[i]),e.splice(i,1));return n}setUnicode(t,e,n){const i=this.ttf.glyf;let s=[];if(e&&e.length){const t=e.indexOf(0);t>=0&&e.splice(t,1),s=e.map(t=>i[t])}else s=i.slice(1);if(s.length>1){const t=function(t){return t<33};s=s.filter(e=>!e.unicode||!e.unicode.some(t))}return s.length&&(t=Number("0x"+t.slice(1)),s.forEach(e=>{160!==t&&12288!==t||t++,e.unicode=[t],n&&(e.name=r.a.getUnicodeName(t)),t++})),s}genGlyfName(t){const e=this.ttf.glyf;let n=[];if(n=t&&t.length?t.map(t=>e[t]):e,n.length){const t=this.ttf.glyf[0];n.forEach(e=>{e===t?e.name=".notdef":e.unicode&&e.unicode.length?e.name=r.a.getUnicodeName(e.unicode[0]):e.name=".notdef"})}return n}clearGlyfName(t){const e=this.ttf.glyf;let n=[];return n=t&&t.length?t.map(t=>e[t]):e,n.length&&n.forEach(t=>{delete t.name}),n}appendGlyf(t,e){const n=this.ttf.glyf,i=t.slice(0);if(e&&e.length){const i=Math.min(t.length,e.length);for(let r=0;r<i;r++)n[e[r]]=t[r];t=t.slice(i)}return t.length&&Array.prototype.splice.apply(n,[n.length,0,...t]),i}adjustGlyfPos(t,e){return f(this.getGlyf(t),e.leftSideBearing,e.rightSideBearing,e.verticalAlign)}adjustGlyf(t,e){const n=this.getGlyf(t);let i=!1;if((e.reverse||e.mirror)&&(i=!0,n.forEach(t=>{if(t.contours&&t.contours.length){const n=t.xMax+t.xMin,i=t.yMax+t.yMin;t.contours.forEach(t=>{Object(s.a)(t,e.mirror?-1:1,e.reverse?-1:1),Object(s.a)(t,1,1,e.mirror?n:0,e.reverse?i:0)})}})),e.scale&&1!==e.scale){i=!0;const t=e.scale;n.forEach(e=>{e.contours&&e.contours.length&&Object(u.a)(e,t,t)})}else if(e.ajdustToEmBox){i=!0;d(n,this.ttf.hhea.ascent,this.ttf.hhea.descent,2*(e.ajdustToEmPadding||0))}return i?n:[]}getGlyf(t){const e=this.ttf.glyf;return t&&t.length?t.map(t=>e[t]):e}findGlyf(t){if(!t)return[];const e=[];if(t.unicode){const n=Array.isArray(t.unicode)?t.unicode:[t.unicode],i={};n.forEach(t=>{"string"==typeof t&&(t=Number("0x"+t.slice(1))),i[t]=!0}),e.push(t=>{if(!t.unicode||!t.unicode.length)return!1;for(let e=0,n=t.unicode.length;e<n;e++)if(i[t.unicode[e]])return!0})}if(t.name){const n=t.name;e.push(t=>t.name&&0===t.name.indexOf(n))}"function"==typeof t.filter&&e.push(t.filter);const n=[];return this.ttf.glyf.forEach((t,i)=>{for(let r,s=0;r=e[s++];)if(!0===r(t)){n.push(i);break}}),n}replaceGlyf(t,e){return e>=0&&e<this.ttf.glyf.length?(this.ttf.glyf[e]=t,[t]):[]}setGlyf(t){return delete this.glyf,this.ttf.glyf=t||[],this.ttf.glyf}sortGlyf(){const t=this.ttf.glyf;if(t.length>1){if(t.some(t=>t.compound))return-2;const e=t.shift();return t.sort((t,e)=>t.unicode&&t.unicode.length||e.unicode&&e.unicode.length?t.unicode&&t.unicode.length||!e.unicode?!t.unicode||e.unicode&&e.unicode.length?Math.min.apply(null,t.unicode)-Math.min.apply(null,e.unicode):-1:1:0),t.unshift(e),t}return-1}setName(t){return t&&(this.ttf.name.fontFamily=this.ttf.name.fullName=t.fontFamily||c.a.name.fontFamily,this.ttf.name.fontSubFamily=t.fontSubFamily||c.a.name.fontSubFamily,this.ttf.name.uniqueSubFamily=t.uniqueSubFamily||"",this.ttf.name.postScriptName=t.postScriptName||""),this.ttf.name}setHead(t){return t&&(t.unitsPerEm&&t.unitsPerEm>=64&&t.unitsPerEm<=16384&&(this.ttf.head.unitsPerEm=t.unitsPerEm),t.lowestRecPPEM&&t.lowestRecPPEM>=8&&t.lowestRecPPEM<=16384&&(this.ttf.head.lowestRecPPEM=t.lowestRecPPEM),t.created&&(this.ttf.head.created=t.created),t.modified&&(this.ttf.head.modified=t.modified)),this.ttf.head}setHhea(t){return Object(i.f)(this.ttf.hhea,t,["ascent","descent","lineGap"]),this.ttf.hhea}setOS2(t){return Object(i.f)(this.ttf["OS/2"],t,["usWinAscent","usWinDescent","sTypoAscender","sTypoDescender","sTypoLineGap","sxHeight","bXHeight","usWeightClass","usWidthClass","yStrikeoutPosition","yStrikeoutSize","achVendID","bFamilyType","bSerifStyle","bWeight","bProportion","bContrast","bStrokeVariation","bArmStyle","bLetterform","bMidline","bXHeight"]),this.ttf["OS/2"]}setPost(t){return Object(i.f)(this.ttf.post,t,["underlinePosition","underlineThickness"]),this.ttf.post}calcMetrics(){let t=-16384,e=16384;let n,i;return this.ttf.glyf.forEach(r=>{r.yMax>t&&(t=r.yMax),r.yMin<e&&(e=r.yMin),r.unicode&&(r.unicode.indexOf(120)>=0&&(n=r.yMax),r.unicode.indexOf(72)>=0&&(i=r.yMax))}),t=Math.round(t),e=Math.round(e),{ascent:t,descent:e,sTypoAscender:t,sTypoDescender:e,usWinAscent:t,usWinDescent:-e,sxHeight:n||0,sCapHeight:i||0}}optimize(){return Object(h.a)(this.ttf)}compound2simple(t){const e=this.ttf;if(e.maxp&&!e.maxp.maxComponentElements)return[];let n,i;if(!t||!t.length)for(t=[],n=0,i=e.glyf.length;n<i;++n)e.glyf[n].compound&&t.push(n);const r=[];for(n=0,i=t.length;n<i;++n){const i=t[n];e.glyf[i]&&e.glyf[i].compound&&(Object(l.a)(i,e,!0),r.push(e.glyf[i]))}return r}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n(20),r=n(62),s=n(12);function a(t,e,n={},o){if(!t.glyfs)return t;const l=[];return t.glyfs.forEach(o=>{const u=e.glyf[o.glyphIndex];if(!u||u===t)return;u.compound&&!n[o.glyphIndex]&&a(u,e,n,o.glyphIndex);const h=Object(s.a)(u.compound?n[o.glyphIndex]||[]:u.contours),c=o.transform;for(let t=0,e=h.length;t<e;t++)Object(r.a)(h[t],c.a,c.b,c.c,c.d,c.e,c.f),l.push(Object(i.a)(h[t]))}),null!=o&&(n[o]=l),l}},function(t,e,n){"use strict";function i(t,e){return e.forEach(e=>{const n=e[0];t[n]=Object.assign(t[n]||{},e[1])}),t}n.d(e,"a",(function(){return r}));class r{constructor(t,e){this.store=i({},t),this.setLanguage(e||"undefined"!=typeof navigator&&navigator.language&&navigator.language.toLowerCase()||"en-us")}setLanguage(t){return this.store[t]||(t="en-us"),this.lang=this.store[this.language=t],this}addLanguage(t,e){return i(this.store,[[t,e]]),this}get(t){const e=t.split(".");let n,i=this.lang;for(;null!=i&&(n=e.shift());)i=i[n];return null!=i?i:""}}},function(t,e,n){"use strict";function i(t,e,n){return!!((e.onCurve&&n.onCurve||!e.onCurve&&!n.onCurve)&&Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2)<=1)||(!!(e.onCurve&&t.onCurve&&n.onCurve&&Math.abs((n.y-e.y)*(t.x-e.x)-(t.y-e.y)*(n.x-e.x))<=.001)||!!(!e.onCurve&&t.onCurve&&n.onCurve&&Math.abs((n.y-e.y)*(t.x-e.x)-(t.y-e.y)*(n.x-e.x))<=.001))}function r(t){if(!t.length)return t;let e,n,r;for(let s=t.length-1,a=s;s>=0;s--)r=t[s],n=s===a?t[0]:t[s+1],e=0===s?t[a]:t[s-1],i(e,r,n)&&(t.splice(s,1),a--);return t}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";var i=n(40);n.d(e,"a",(function(){return i.a}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));var i=n(7);function r(t){return t.offsetX||t.layerX||t.clientX}function s(t){return t.offsetY||t.layerY||t.clientY}function a(t){return{x:r(t),y:s(t),which:t.which,ctrlKey:t.ctrlKey||t.metaKey,metaKey:t.metaKey,altKey:t.altKey,shiftKey:t.shiftKey,originEvent:t}}function o(t){t.stopPropagation(),t.preventDefault?t.preventDefault():t.returnValue=!1}function l(t){if(!1===this.events.mousedown)return;o(t);let e=a(t);this.startX=e.x,this.startY=e.y,this.startTime=Date.now(),this.isDown=!0,this.fire("down",e),3===t.which&&this.fire("rightdown",e),document.addEventListener("mouseup",this.handlers.mouseup,!1)}function u(t){o(t),!1!==this.events.dblclick&&this.fire("dblclick",a(t))}function h(t){if(!1===this.events.mousemove)return;o(t);let e=a(t);this.fire("move",e),this.isDown&&!1!==this.events.drag&&(e.startX=this.startX,e.startY=this.startY,e.deltaX=e.x-this.startX,e.deltaY=e.y-this.startY,(Math.abs(e.deltaX)>=this.dragDelta||Math.abs(e.deltaY)>=this.dragDelta)&&(this.isDragging||(this.isDragging=!0,this.fire("dragstart",e))),this.isDragging&&this.fire("drag",e))}function c(t){if(!1===this.events.mouseup)return;o(t);let e=a(t);e.time=Date.now()-this.startTime,this.fire("up",e),3===t.which&&this.fire("rightup",e),this.isDown&&this.isDragging&&!1!==this.events.drag?(e.deltaX=e.x-this.startX,e.deltaY=e.y-this.startY,this.isDragging=!1,this.fire("dragend",e)):this.isDown&&!this.isDragging&&!1!==this.events.click&&(this.isDragging=!1,this.fire("click",e)),this.isDown=!1,document.removeEventListener("mouseup",this.handlers.mouseup)}function d(t){if(!1===this.events.mousewheel)return;o(t);let e=Date.now();if(this.lastWheel&&e-this.lastWheel<15)return;this.lastWheel=e;let n=0;t.wheelDelta?n=t.wheelDelta%120==0?t.wheelDelta/120:t.wheelDelta/3:t.detail&&(n=-t.detail/3);let i=a(t);i.delta=n,this.fire("wheel",i)}function f(t){!1!==this.events.mouseover&&(o(t),this.fire("over"))}function p(t){!1!==this.events.mouseout&&(o(t),this.fire("out"))}class g{constructor(t,e={}){this.main=t,this.events=e.events||{},this.dragDelta=2,this.handlers={mousewheel:d.bind(this),mousemove:h.bind(this),mousedown:l.bind(this),dblclick:u.bind(this),mouseover:f.bind(this),mouseout:p.bind(this),mouseup:c.bind(this)},this.start()}start(){if(!this.listening){this.listening=!0;let t=this.main;t.addEventListener("DOMMouseScroll",this.handlers.mousewheel,!1),t.addEventListener("mousewheel",this.handlers.mousewheel,!1),t.addEventListener("mousemove",this.handlers.mousemove,!1),t.addEventListener("mousedown",this.handlers.mousedown,!1),t.addEventListener("dblclick",this.handlers.dblclick,!1),t.addEventListener("mouseover",this.handlers.mouseover,!1),t.addEventListener("mouseout",this.handlers.mouseout,!1)}return this}stop(){if(this.listening){this.listening=!1;let t=this.main;t.removeEventListener("DOMMouseScroll",this.handlers.mousewheel),t.removeEventListener("mousewheel",this.handlers.mousewheel),t.removeEventListener("mousemove",this.handlers.mousemove),t.removeEventListener("mousedown",this.handlers.mousedown),t.removeEventListener("click",this.handlers.click),t.removeEventListener("dblclick",this.handlers.dblclick),t.removeEventListener("mouseover",this.handlers.mouseover),t.removeEventListener("mouseout",this.handlers.mouseout),document.removeEventListener("mouseup",this.handlers.mouseup)}return this}isListening(){return!!this.listening}dispose(){this.stop(),this.un(),this.main=this.events=null}}i.a.mixin(g.prototype)},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n(2);class r{constructor(t={}){this.maxRecord=t.maxRecord||200,this.queue=[],this.index=0}add(t){this.queue.splice(this.index+1,this.maxRecord),this.queue.push(t),this.queue.length>this.maxRecord&&this.queue.shift(),this.index=this.queue.length-1}get(t){return t=t||this.index,i.a.clone(this.queue[t])}forward(){return this.index<this.queue.length-1&&this.index++,i.a.clone(this.queue[this.index])}back(){return this.index>0&&this.index--,i.a.clone(this.queue[this.index])}atFirst(){return 0===this.index}atLast(){let t=this.queue.length;return 0===t||this.index===t-1}reset(){delete this.queue,this.queue=[],this.index=0}}},function(t,e,n){"use strict";function i(t,e){return t.contours=e,delete t.compound,delete t.glyfs,delete t.instructions,t}n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";(function(t){var i=n(26),r=n(38),s=n(25),a=n(47),o=n(49),l=n(75),u=n(50),h=n(66),c=n(84),d=n(81),f=n(21),p=n(28),g=n(80),m=n(83),y=n(79),v=n(94),_=n(77),x=n(78),w=n(27),b=n.n(w);const S={Font:i.a,TTF:r.a,TTFReader:s.a,TTFWriter:a.a,ttf2eot:o.a,eot2ttf:l.a,ttf2woff:u.a,woff2ttf:h.a,ttf2svg:c.a,svg2ttfobject:d.a,Reader:f.a,Writer:p.a,OTFReader:g.a,otf2ttfobject:m.a,ttf2base64:y.a,ttf2icon:v.a,ttftowoff2:_.a,woff2tottf:x.a,woff2:b()};e.a=S,"undefined"!=typeof exports&&(t.exports=S)}).call(this,n(116)(t))},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var i=n(28),r=n(48),s=n(54);function a(t,e,n){if(t instanceof ArrayBuffer)return function(t,e=0,n){if(e+(n=null==n?t.byteLength:n)>t.byteLength)throw new Error("check sum out of bound");const i=Math.floor(n/4),r=new DataView(t,e,n);let s=0,a=0;for(;a<i;)s+=r.getUint32(4*a++,!1);let o=n-4*i;if(o)for(e=4*i;o>0;)s+=r.getUint8(e,!1)<<8*o,e++,o--;return s%4294967296}(t,e,n);if(t instanceof Array)return function(t,e=0,n){if(e+(n=n||t.length)>t.length)throw new Error("check sum out of bound");const i=Math.floor(n/4);let r=0,s=0;for(;s<i;)r+=(t[s++]<<24)+(t[s++]<<16)+(t[s++]<<8)+t[s++];let a=n-4*i;if(a)for(e=4*i;a>0;)r+=t[e]<<8*a,e++,a--;return r%4294967296}(t,e,n);throw new Error("not support checksum buffer type")}var o=n(5);const l=["OS/2","cmap","glyf","head","hhea","hmtx","loca","maxp","name","post"];class u{constructor(t={}){this.options={hinting:t.hinting||!1,support:t.support}}resolveTTF(t){t.version=t.version||1,t.numTables=t.writeOptions.tables.length,t.entrySelector=Math.floor(Math.log(t.numTables)/Math.LN2),t.searchRange=16*Math.pow(2,t.entrySelector),t.rangeShift=16*t.numTables-t.searchRange,t.head.checkSumAdjustment=0,t.head.magickNumber=1594834165,"string"==typeof t.head.created&&(t.head.created=/^\d+$/.test(t.head.created)?+t.head.created:Date.parse(t.head.created)),"string"==typeof t.head.modified&&(t.head.modified=/^\d+$/.test(t.head.modified)?+t.head.modified:Date.parse(t.head.modified)),t.head.created||(t.head.created=Date.now()),t.head.modified||(t.head.modified=t.head.created);const e={};t.glyf.forEach((t,n)=>{t.unicode&&(t.unicode=t.unicode.sort(),t.unicode.forEach(t=>{e[t]?o.a.raise({number:10200,data:n},n):e[t]=!0}))})}dump(t){t.support=Object.assign({},this.options.support);let e=12+16*t.numTables,n=0;t.support.tables=[],t.writeOptions.tables.forEach(i=>{const r=e,a=(new(0,s.a[i])).size(t);let o=a;"head"===i&&(n=r),o%4&&(o+=4-o%4),t.support.tables.push({name:i,checkSum:0,offset:r,length:a,size:o}),e+=o});const o=new i.a(new ArrayBuffer(e));o.writeFixed(t.version),o.writeUint16(t.numTables),o.writeUint16(t.searchRange),o.writeUint16(t.entrySelector),o.writeUint16(t.rangeShift),(new r.a).write(o,t),t.support.tables.forEach(e=>{const n=o.offset;(new(0,s.a[e.name])).write(o,t),e.length%4&&o.writeEmpty(4-e.length%4),e.checkSum=a(o.getBuffer(),n,e.size)}),t.support.tables.forEach((t,e)=>{const n=12+16*e+4;o.writeUint32(t.checkSum,n)});const l=(2981146554-a(o.getBuffer())+4294967296)%4294967296;o.writeUint32(l,n+8),delete t.writeOptions,delete t.support;const u=o.getBuffer();return o.dispose(),u}prepareDump(t){t.glyf&&0!==t.glyf.length||o.a.raise(10201),t["OS/2"]&&t.head&&t.name||o.a.raise(10204);const e=l.slice(0);t.writeOptions={},this.options.hinting&&["cvt","fpgm","prep","gasp","GPOS","kern"].forEach(n=>{t[n]&&e.push(n)}),t.writeOptions.hinting=!!this.options.hinting,t.writeOptions.tables=e.sort()}write(t){this.prepareDump(t),this.resolveTTF(t);return this.dump(t)}dispose(){delete this.options}}},function(t,e,n){"use strict";var i=n(6);e.a=i.a.create("directory",[],{read(t,e){const n={},i=e.numTables;for(let e=this.offset,r=16*i;e<r;e+=16){const i=t.readString(e,4).trim();n[i]={name:i,checkSum:t.readUint32(e+4),offset:t.readUint32(e+8),length:t.readUint32(e+12)}}return n},write(t,e){const n=e.support.tables;for(let e=0,i=n.length;e<i;e++)t.writeString((n[e].name+"    ").slice(0,4)),t.writeUint32(n[e].checkSum),t.writeUint32(n[e].offset),t.writeUint32(n[e].length);return t},size:t=>16*t.numTables})},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var i=n(21),r=n(28),s=n(13),a=n(5),o=n(6),l=n(1),u=n(51);const h=o.a.create("head",[["EOTSize",l.a.Uint32],["FontDataSize",l.a.Uint32],["Version",l.a.Uint32],["Flags",l.a.Uint32],["PANOSE",l.a.Bytes,10],["Charset",l.a.Uint8],["Italic",l.a.Uint8],["Weight",l.a.Uint32],["fsType",l.a.Uint16],["MagicNumber",l.a.Uint16],["UnicodeRange",l.a.Bytes,16],["CodePageRange",l.a.Bytes,8],["CheckSumAdjustment",l.a.Uint32],["Reserved",l.a.Bytes,16],["Padding1",l.a.Uint16]]);function c(t,e={}){const n=new h,o=n.size(),l={};l.head=n.read(new i.a(new ArrayBuffer(o))),l.head.FontDataSize=t.byteLength||t.length,l.head.Version=131073,l.head.Flags=0,l.head.Charset=1,l.head.MagicNumber=20556,l.head.Padding1=0;const c=new i.a(t),d=c.readUint16(4);(d<=0||d>100)&&a.a.raise(10101),c.seek(12);let f=0;for(let t=0;t<d&&7!==f;++t){const t={tag:c.readString(c.offset,4),checkSum:c.readUint32(),offset:c.readUint32(),length:c.readUint32()},e=c.offset;if("head"===t.tag)l.head.CheckSumAdjustment=c.readUint32(t.offset+8),f+=1;else if("OS/2"===t.tag)l.head.PANOSE=c.readBytes(t.offset+32,10),l.head.Italic=c.readUint16(t.offset+62),l.head.Weight=c.readUint16(t.offset+4),l.head.fsType=c.readUint16(t.offset+8),l.head.UnicodeRange=c.readBytes(t.offset+42,16),l.head.CodePageRange=c.readBytes(t.offset+78,8),f+=2;else if("name"===t.tag){const e=new u.a(t.offset).read(c);l.FamilyName=s.a.toUCS2Bytes(e.fontFamily||""),l.FamilyNameSize=l.FamilyName.length,l.StyleName=s.a.toUCS2Bytes(e.fontStyle||""),l.StyleNameSize=l.StyleName.length,l.VersionName=s.a.toUCS2Bytes(e.version||""),l.VersionNameSize=l.VersionName.length,l.FullName=s.a.toUCS2Bytes(e.fullName||""),l.FullNameSize=l.FullName.length,f+=3}c.seek(e)}l.head.EOTSize=o+4+l.FamilyNameSize+4+l.StyleNameSize+4+l.VersionNameSize+4+l.FullNameSize+2+l.head.FontDataSize;const p=new r.a(new ArrayBuffer(l.head.EOTSize),0,l.head.EOTSize,!0);return n.write(p,l),p.writeUint16(l.FamilyNameSize),p.writeBytes(l.FamilyName,l.FamilyNameSize),p.writeUint16(0),p.writeUint16(l.StyleNameSize),p.writeBytes(l.StyleName,l.StyleNameSize),p.writeUint16(0),p.writeUint16(l.VersionNameSize),p.writeBytes(l.VersionName,l.VersionNameSize),p.writeUint16(0),p.writeUint16(l.FullNameSize),p.writeBytes(l.FullName,l.FullNameSize),p.writeUint16(0),p.writeUint16(0),p.writeBytes(t,l.head.FontDataSize),p.getBuffer()}},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var i=n(21),r=n(28),s=n(11),a=n(13),o=n(5),l=n(33);function u(t,e={}){const n={signature:2001684038,flavor:65536,length:0,numTables:0,reserved:0,totalSfntSize:0,majorVersion:0,minorVersion:0,metaOffset:0,metaLength:0,metaOrigLength:0,privOffset:0,privLength:0},u=new i.a(t);let h=[];const c=u.readUint16(4);let d,f,p,g;for((c<=0||c>100)&&o.a.raise(10101),u.seek(12),p=0;p<c;++p){d={tag:u.readString(u.offset,4),checkSum:u.readUint32(),offset:u.readUint32(),length:u.readUint32()};const t=u.offset;"head"===d.tag&&(n.majorVersion=u.readUint16(d.offset+4),n.minorVersion=u.readUint16(d.offset+6));const i=u.readBytes(d.offset,d.length);e.deflate?(f=e.deflate(i),f.length<i.length?(d.data=f,d.deflated=!0):d.data=i):d.data=i,d.compLength=d.data.length,h.push(d),u.seek(t)}h.length||o.a.raise(10204),h=h.sort((t,e)=>t.tag===e.tag?0:t.tag<e.tag?-1:1);let m=44+20*c,y=12+16*c;for(p=0,g=h.length;p<g;++p)d=h[p],d.offset=m,m+=d.compLength+(d.compLength%4?4-d.compLength%4:0),y+=d.length+(d.length%4?4-d.length%4:0);let v=null;if(e.metadata){const t=a.a.toUTF8Bytes(function(t){let e='<?xml version="1.0" encoding="UTF-8"?><metadata version="1.0">';if(t.uniqueid=t.uniqueid||l.a.fontId+"."+Date.now(),e+='<uniqueid id="'+s.a.encodeHTML(t.uniqueid)+'" />',t.vendor&&(e+='<vendor name="'+s.a.encodeHTML(t.vendor.name)+'" url="'+s.a.encodeHTML(t.vendor.url)+'" />'),t.credit){e+="<credits>";(t.credit instanceof Array?t.credit:[t.credit]).forEach(t=>{e+='<credit name="'+s.a.encodeHTML(t.name)+'" url="'+s.a.encodeHTML(t.url)+'" role="'+s.a.encodeHTML(t.role||"Contributor")+'" />'}),e+="</credits>"}return t.description&&(e+='<description><text xml:lang="en">'+s.a.encodeHTML(t.description)+"</text></description>"),t.license&&(e+='<license url="'+s.a.encodeHTML(t.license.url)+'" id="'+s.a.encodeHTML(t.license.id)+'"><text xml:lang="en">',e+=s.a.encodeHTML(t.license.text),e+="</text></license>"),t.copyright&&(e+='<copyright><text xml:lang="en">',e+=s.a.encodeHTML(t.copyright),e+="</text></copyright>"),t.trademark&&(e+='<trademark><text xml:lang="en">'+s.a.encodeHTML(t.trademark)+"</text></trademark>"),t.licensee&&(e+='<licensee name="'+s.a.encodeHTML(t.licensee)+'"/>'),e+="</metadata>",e}(e.metadata));e.deflate?(f=e.deflate(t),v=f.length<t.length?f:t):v=t,n.metaLength=v.length,n.metaOrigLength=t.length,n.metaOffset=m,m+=n.metaLength+(n.metaLength%4?4-n.metaLength%4:0)}n.numTables=h.length,n.length=m,n.totalSfntSize=y;const _=new r.a(new ArrayBuffer(m));for(_.writeUint32(n.signature),_.writeUint32(n.flavor),_.writeUint32(n.length),_.writeUint16(n.numTables),_.writeUint16(n.reserved),_.writeUint32(n.totalSfntSize),_.writeUint16(n.majorVersion),_.writeUint16(n.minorVersion),_.writeUint32(n.metaOffset),_.writeUint32(n.metaLength),_.writeUint32(n.metaOrigLength),_.writeUint32(n.privOffset),_.writeUint32(n.privLength),p=0,g=h.length;p<g;++p)d=h[p],_.writeString(d.tag),_.writeUint32(d.offset),_.writeUint32(d.compLength),_.writeUint32(d.length),_.writeUint32(d.checkSum);for(p=0,g=h.length;p<g;++p)d=h[p],_.writeBytes(d.data),d.compLength%4&&_.writeEmpty(4-d.compLength%4);return v&&(_.writeBytes(v),n.metaLength%4&&_.writeEmpty(4-n.metaLength%4)),_.getBuffer()}},function(t,e,n){"use strict";var i=n(6);const r={0:"copyright",1:"fontFamily",2:"fontSubFamily",3:"uniqueSubFamily",4:"fullName",5:"version",6:"postScriptName",7:"tradeMark",8:"manufacturer",9:"designer",10:"description",11:"urlOfFontVendor",12:"urlOfFontDesigner",13:"licence",14:"urlOfLicence",16:"preferredFamily",17:"preferredSubFamily",18:"compatibleFull",19:"sampleText"},s={};Object.keys(r).forEach(t=>{s[r[t]]=+t}),r.names=s;var a=r,o=n(13),l=1,u=3;const h=0,c=1;e.a=i.a.create("name",[],{read(t){let e=this.offset;t.seek(e);const n={};n.format=t.readUint16(),n.count=t.readUint16(),n.stringOffset=t.readUint16();const i=[],r=n.count;let s,d;for(s=0;s<r;++s)d={},d.platform=t.readUint16(),d.encoding=t.readUint16(),d.language=t.readUint16(),d.nameId=t.readUint16(),d.length=t.readUint16(),d.offset=t.readUint16(),i.push(d);for(e+=n.stringOffset,s=0;s<r;++s)d=i[s],d.name=t.readBytes(e+d.offset,d.length);const f={};let p=l,g=h,m=0;for(i.some(t=>t.platform===u&&t.encoding===c&&1033===t.language)&&(p=u,g=c,m=1033),s=0;s<r;++s)d=i[s],d.platform===p&&d.encoding===g&&d.language===m&&a[d.nameId]&&(f[a[d.nameId]]=0===m?o.a.getUTF8String(d.name):o.a.getUCS2String(d.name));return f},write(t,e){const n=e.support.name;t.writeUint16(0),t.writeUint16(n.length),t.writeUint16(6+12*n.length);let i=0;return n.forEach(e=>{t.writeUint16(e.platform),t.writeUint16(e.encoding),t.writeUint16(e.language),t.writeUint16(e.nameId),t.writeUint16(e.name.length),t.writeUint16(i),i+=e.name.length}),n.forEach(e=>{t.writeBytes(e.name)}),t},size(t){const e=t.name;let n=[],i=6;Object.keys(e).forEach(t=>{const r=a.names[t],s=o.a.toUTF8Bytes(e[t]),l=o.a.toUCS2Bytes(e[t]);void 0!==r&&(n.push({nameId:r,platform:1,encoding:0,language:0,name:s}),n.push({nameId:r,platform:3,encoding:1,language:1033,name:l}),i+=24+s.length+l.length)});const r=["platform","encoding","language","nameId"];return n=n.sort((t,e)=>{let n=0;return r.some(i=>{const r=t[i]-e[i];return!!r&&(n=r,!0)}),n}),t.support.name=n,i}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n(12),r={version:1,numTables:10,searchRange:128,entrySelector:3,rangeShift:64,head:{version:1,fontRevision:1,checkSumAdjustment:0,magickNumber:1594834165,flags:11,unitsPerEm:1024,created:14289408e5,modified:14289408e5,xMin:34,yMin:0,xMax:306,yMax:682,macStyle:0,lowestRecPPEM:8,fontDirectionHint:2,indexToLocFormat:0,glyphDataFormat:0},glyf:[{contours:[[{x:34,y:0,onCurve:!0},{x:34,y:682,onCurve:!0},{x:306,y:682,onCurve:!0},{x:306,y:0,onCurve:!0}],[{x:68,y:34,onCurve:!0},{x:272,y:34,onCurve:!0},{x:272,y:648,onCurve:!0},{x:68,y:648,onCurve:!0}]],xMin:34,yMin:0,xMax:306,yMax:682,advanceWidth:374,leftSideBearing:34,name:".notdef"}],cmap:{},name:{fontFamily:"fonteditor",fontSubFamily:"Medium",uniqueSubFamily:"FontEditor 1.0 : fonteditor",version:"Version 1.0 ; FontEditor (v0.0.1)",postScriptName:"fonteditor",fullName:"fonteditor"},hhea:{version:1,ascent:812,descent:-212,lineGap:92,advanceWidthMax:374,minLeftSideBearing:34,minRightSideBearing:68,xMaxExtent:306,caretSlopeRise:1,caretSlopeRun:0,caretOffset:0,reserved0:0,reserved1:0,reserved2:0,reserved3:0,metricDataFormat:0,numOfLongHorMetrics:1},post:{italicAngle:0,postoints:65411,underlinePosition:50,underlineThickness:0,isFixedPitch:0,minMemType42:0,maxMemType42:0,minMemType1:0,maxMemType1:1,format:2},maxp:{version:1,numGlyphs:0,maxPoints:0,maxContours:0,maxCompositePoints:0,maxCompositeContours:0,maxZones:0,maxTwilightPoints:0,maxStorage:0,maxFunctionDefs:0,maxStackElements:0,maxSizeOfInstructions:0,maxComponentElements:0,maxComponentDepth:0},"OS/2":{version:4,xAvgCharWidth:1031,usWeightClass:400,usWidthClass:5,fsType:0,ySubscriptXSize:665,ySubscriptYSize:716,ySubscriptXOffset:0,ySubscriptYOffset:143,ySuperscriptXSize:665,ySuperscriptYSize:716,ySuperscriptXOffset:0,ySuperscriptYOffset:491,yStrikeoutSize:51,yStrikeoutPosition:265,sFamilyClass:0,bFamilyType:2,bSerifStyle:0,bWeight:6,bProportion:3,bContrast:0,bStrokeVariation:0,bArmStyle:0,bLetterform:0,bMidline:0,bXHeight:0,ulUnicodeRange1:1,ulUnicodeRange2:268435456,ulUnicodeRange3:0,ulUnicodeRange4:0,achVendID:"PfEd",fsSelection:192,usFirstCharIndex:65535,usLastCharIndex:-1,sTypoAscender:812,sTypoDescender:-212,sTypoLineGap:92,usWinAscent:812,usWinDescent:212,ulCodePageRange1:1,ulCodePageRange2:0,sxHeight:792,sCapHeight:0,usDefaultChar:0,usBreakChar:32,usMaxContext:1}},s=n(33);function a(){const t=Object(i.a)(r);return Object.assign(t.name,s.a.name),t.head.created=t.head.modified=Date.now(),t}},function(t,e,n){var i;(function(){var r={},s=Array.prototype,a=s.slice,o=s.forEach,l=Object.keys,u=function(){},h=u.each=u.forEach=function(t,e,n){if(null!=t)if(o&&t.forEach===o)t.forEach(e,n);else if(t.length===+t.length){for(var i=0,s=t.length;s>i;i++)if(e.call(n,t[i],i,t)===r)return}else{var a=u.keys(t);for(i=0,s=a.length;s>i;i++)if(e.call(n,t[a[i]],a[i],t)===r)return}};u.keys=l||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var n in t)u.has(t,n)&&e.push(n);return e},u.defaults=function(t){return h(a.call(arguments,1),(function(e){if(e)for(var n in e)void 0===t[n]&&(t[n]=e[n])})),t};var c={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}},d={escape:new RegExp("["+u.keys(c.escape).join("")+"]","g")};u.each(["escape"],(function(t){u[t]=function(e){return null==e?"":(""+e).replace(d[t],(function(e){return c[t][e]}))}})),u.templateSettings={evaluate:/\{%([\s\S]+?)%\}/g,interpolate:/\{%=([\s\S]+?)%\}/g,escape:/\{%-([\s\S]+?)%\}/g,innerFn:!0};var f=/(.)^/,p={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},g=/\\|'|\r|\n|\t|\u2028|\u2029/g;u.template=function(t,e,n){var i;n=u.defaults({},n,u.templateSettings);var r=new RegExp([(n.escape||f).source,(n.interpolate||f).source,(n.evaluate||f).source].join("|")+"|$","g"),s=0,a="\n__p+='";t.replace(r,(function(e,n,i,r,o){return a+=t.slice(s,o).replace(g,(function(t){return"\\"+p[t]})),n&&(a+="'\n+((__t=("+n+"))==null?'':escape(__t))+'"),i&&(a+="'\n+((__t=("+i+"))==null?'':__t)+'"),r&&(a+="';"+r+"\n__p+='"),s=o+e.length,e})),a+="';",n.variable||(a="with(obj||{}){"+a+"}"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{i=new Function(n.variable||"obj","_",a)}catch(t){throw t.source=a,t}if(e)return i(e,u);var o=function(t){return i.call(this,t,u)},l=!1===n.innerFn?"":"function each(obj, iterator, bind) {var f = Array.prototype.forEach;if(f) {f.call(obj, iterator, bind);}else {for (var i = 0, l = obj.length; i < l; i++) {if (i in obj) {iterator.call(bind, obj[i], i, obj);}}}}function escape(source) {return String(source).replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;').replace(/'/g, '&#39;');}";return o.source="function("+(n.variable||"obj")+"){"+l+a+"}",o},t.exports&&(e=t.exports=u),e.utpl=u,void 0===(i=function(){return u}.call(e,n,e,t))||(t.exports=i)}).call(this)},function(t,e,n){"use strict";var i=n(67),r=n(68),s=n(6),a=n(1),o=s.a.create("loca",[],{read(t,e){let n=this.offset;const i=e.head.indexToLocFormat,r=a.a.names[0===i?a.a.Uint16:a.a.Uint32],s=0===i?2:4,o=0===i?2:1,l=[];t.seek(n);const u=e.maxp.numGlyphs;for(let e=0;e<u;++e)l.push(t.read(r,n,!1)*o),n+=s;return l},write(t,e){const n=e.support.glyf;let i=e.support.glyf.offset||0;const r=e.head.indexToLocFormat,s=0===r?.5:1,a=e.glyf.length;for(let e=0;e<a;++e)r?t.writeUint32(i):t.writeUint16(i),i+=n[e].size*s;return r?t.writeUint32(i):t.writeUint16(i),t},size(t){const e=t.glyf.length+1;return t.head.indexToLocFormat?4*e:2*e}}),l=n(82),u=1,h=2,c=4,d=8,f=16,p=32,g=1,m=2,y=4,v=8,_=32,x=64,w=128,b=256,S=512,C=1024;function E(t,e,n){null!=n&&t.seek(n);const i={};let r,s,a;const o=t.readInt16();if(i.xMin=t.readInt16(),i.yMin=t.readInt16(),i.xMax=t.readInt16(),i.yMax=t.readInt16(),o>=0){const e=[];if(o>=0){for(r=0;r<o;r++)e.push(t.readUint16());i.endPtsOfContours=e}if(s=t.readUint16(),s)if(s<5e3){for(a=[],r=0;r<s;++r)a.push(t.readUint8());i.instructions=a}else console.warn(s);!function(t,e){const n=t.offset,i=e.endPtsOfContours[e.endPtsOfContours.length-1]+1;if(i>2e4)return console.warn("error read glyf coordinates:"+n),e;let r,s;const a=[];let o;for(r=0;r<i;)if(o=t.readUint8(),a.push(o),r++,o&d&&r<i){const e=t.readUint8();for(let t=0;t<e;t++)a.push(o),r++}const l=[],g=[];let m,y=0;for(r=0,s=a.length;r<s;++r)m=0,o=a[r],o&h?(m=t.readUint8(),m=o&f?m:-1*m):m=o&f?0:t.readInt16(),y+=m,g[r]=y,l[r]={x:y,y:0},o&u&&(l[r].onCurve=!0);const v=[];let _,x=0;for(r=0,s=a.length;r<s;r++)_=0,o=a[r],o&c?(_=t.readUint8(),_=o&p?_:-1*_):_=o&p?0:t.readInt16(),x+=_,v[r]=x,l[r]&&(l[r].y=x);if(l.length){const t=e.endPtsOfContours,n=[];for(n.push(l.slice(0,t[0]+1)),r=1,s=t.length;r<s;r++)n.push(l.slice(t[r-1]+1,t[r]+1));e.contours=n}}(t,i),delete i.endPtsOfContours}else!function(t,e){let n,i;e.compound=!0,e.glyfs=[];do{n=t.readUint16(),i={},i.flags=n,i.glyphIndex=t.readUint16();let r=0,s=0,a=16384,o=16384,l=0,u=0;g&n?(r=t.readInt16(),s=t.readInt16()):(r=t.readInt8(),s=t.readInt8()),y&n&&(r=Math.round(r),s=Math.round(s)),v&n?(a=t.readInt16(),o=a):x&n?(a=t.readInt16(),o=t.readInt16()):w&n&&(a=t.readInt16(),l=t.readInt16(),u=t.readInt16(),o=t.readInt16()),m&n?(i.useMyMetrics=!!n&S,i.overlapCompound=!!n&C,i.transform={a:Math.round(1e4*a/16384)/1e4,b:Math.round(1e4*l/16384)/1e4,c:Math.round(1e4*u/16384)/1e4,d:Math.round(1e4*o/16384)/1e4,e:r,f:s}):(i.points=[r,s],i.transform={a:Math.round(1e4*a/16384)/1e4,b:Math.round(1e4*l/16384)/1e4,c:Math.round(1e4*u/16384)/1e4,d:Math.round(1e4*o/16384)/1e4,e:0,f:0}),e.glyfs.push(i)}while(_&n);if(b&n){const n=t.readUint16();if(n<5e3){const i=[];for(let e=0;e<n;++e)i.push(t.readUint8());e.instructions=i}else console.warn(n)}}(t,i);return i}var T=n(12),M=s.a.create("glyf",[],{read(t,e){const n=this.offset,i=e.loca,r=e.maxp.numGlyphs,s=[];t.seek(n);const a=e.readOptions.subset;if(a&&a.length>0){const r={0:!0};r[0]=!0;const o=e.cmap;Object.keys(o).forEach(t=>{if(a.indexOf(+t)>-1){const e=o[t];r[e]=!0}}),e.subsetMap=r;const l={};return function e(r){const a={};Object.keys(r).forEach(e=>{const r=+e;l[r]=!0,i[r]===i[r+1]?s[r]={contours:[]}:s[r]=E(t,0,n+i[r]),s[r].compound&&s[r].glyfs.forEach(t=>{l[t.glyphIndex]||(a[t.glyphIndex]=!0)})}),Object(T.e)(a)||e(a)}(r),s}let o,l;for(o=0,l=r-1;o<l;o++)i[o]===i[o+1]?s[o]={contours:[]}:s[o]=E(t,0,n+i[o]);return e.tables.glyf.length-i[o]<5?s[o]={contours:[]}:s[o]=E(t,0,n+i[o]),s},write:function(t,e){const n=!!e.writeOptions&&e.writeOptions.hinting;return e.glyf.forEach((i,r)=>{let s,a,o;if(t.writeInt16(i.compound?-1:(i.contours||[]).length),t.writeInt16(i.xMin),t.writeInt16(i.yMin),t.writeInt16(i.xMax),t.writeInt16(i.yMax),i.compound)for(s=0,a=i.glyfs.length;s<a;s++){const e=i.glyfs[s];o=e.points?0:m+y,s<a-1&&(o+=_),o+=e.useMyMetrics?S:0,o+=e.overlapCompound?C:0;const n=e.transform,r=n.a,l=n.b,u=n.c,h=n.d,c=e.points?e.points[0]:n.e,d=e.points?e.points[1]:n.f;(c<0||c>127||d<0||d>127)&&(o+=g),l||u?o+=w:1===r&&1===h||r!==h?1===r&&1===h||(o+=x):o+=v,t.writeUint16(o),t.writeUint16(e.glyphIndex),g&o?(t.writeInt16(c),t.writeInt16(d)):(t.writeUint8(c),t.writeUint8(d)),v&o?t.writeInt16(Math.round(16384*r)):x&o?(t.writeInt16(Math.round(16384*r)),t.writeInt16(Math.round(16384*h))):w&o&&(t.writeInt16(Math.round(16384*r)),t.writeInt16(Math.round(16384*l)),t.writeInt16(Math.round(16384*u)),t.writeInt16(Math.round(16384*h)))}else{let l=-1;if((i.contours||[]).forEach(e=>{l+=e.length,t.writeUint16(l)}),n&&i.instructions){const e=i.instructions;for(t.writeUint16(e.length),s=0,a=e.length;s<a;s++)t.writeUint8(e[s])}else t.writeUint16(0);for(o=e.support.glyf[r].flags||[],s=0,a=o.length;s<a;s++)t.writeUint8(o[s]);const u=e.support.glyf[r].xCoord||[];for(s=0,a=u.length;s<a;s++)0<=u[s]&&u[s]<=255?t.writeUint8(u[s]):t.writeInt16(u[s]);const h=e.support.glyf[r].yCoord||[];for(s=0,a=h.length;s<a;s++)0<=h[s]&&h[s]<=255?t.writeUint8(h[s]):t.writeInt16(h[s])}const l=e.support.glyf[r].glyfSize;l%4&&t.writeEmpty(4-l%4)}),t},size:function(t){t.support.glyf=[];let e=0;const n=!!t.writeOptions&&t.writeOptions.hinting;return t.glyf.forEach(i=>{let r={};r=i.compound?r:function(t,e){if(!t.contours||0===t.contours.length)return e;const n=[],i=[],r=[],s=t.contours;let a,o,l=!0;for(let t=0,e=s.length;t<e;t++){a=s[t];for(let t=0,e=a.length;t<e;t++){const e=a[t];l?(i.push(e.x),r.push(e.y),l=!1):(i.push(e.x-o.x),r.push(e.y-o.y)),n.push(e.onCurve?u:0),o=e}}const g=[],m=[],y=[];let v,_,x,w=-1;return n.forEach((t,e)=>{v=i[e],_=r[e],0===e?(-255<=v&&v<=255&&(t+=h,v>=0&&(t+=f),v=Math.abs(v)),-255<=_&&_<=255&&(t+=c,_>=0&&(t+=p),_=Math.abs(_)),g.push(x=t),m.push(v),y.push(_)):(0===v?t+=f:(-255<=v&&v<=255&&(t+=h,v>0&&(t+=f),v=Math.abs(v)),m.push(v)),0===_?t+=p:(-255<=_&&_<=255&&(t+=c,_>0&&(t+=p),_=Math.abs(_)),y.push(_)),t===x?-1===w?(w=g.length-1,g[w]|=d,g.push(1)):++g[w+1]:(w=-1,g.push(x=t)))}),e.flags=g,e.xCoord=m,e.yCoord=y,e}(i,r);const s=i.compound?function(t,e){let n,i=10;return t.glyfs.forEach(t=>{n=t.transform,i+=4,n.e<0||n.e>127||n.f<0||n.f>127?i+=4:i+=2,n.b||n.c?i+=8:1===n.a&&1===n.d||(i+=n.a===n.d?2:4)}),i}(i):function(t,e,n){let i=12+2*(t.contours||[]).length+(e.flags||[]).length;return(e.xCoord||[]).forEach(t=>{i+=0<=t&&t<=255?1:2}),(e.yCoord||[]).forEach(t=>{i+=0<=t&&t<=255?1:2}),i+(n&&t.instructions?t.instructions.length:0)}(i,r,n);let a=s;a%4&&(a+=4-a%4),r.glyfSize=s,r.size=a,t.support.glyf.push(r),e+=a}),t.support.glyf.tableSize=e,t.head.indexToLocFormat=e>65536?1:0,t.support.glyf.tableSize}}),k=n(51),O=n(69),A=n(70),P=n(71),I=n(72),D=s.a.create("fpgm",[],{read(t,e){const n=e.tables.fpgm.length;return t.readBytes(this.offset,n)},write(t,e){e.fpgm&&t.writeBytes(e.fpgm,e.fpgm.length)},size:t=>t.fpgm?t.fpgm.length:0}),L=s.a.create("cvt",[],{read(t,e){const n=e.tables.cvt.length;return t.readBytes(this.offset,n)},write(t,e){e.cvt&&t.writeBytes(e.cvt,e.cvt.length)},size:t=>t.cvt?t.cvt.length:0}),N=s.a.create("prep",[],{read(t,e){const n=e.tables.prep.length;return t.readBytes(this.offset,n)},write(t,e){e.prep&&t.writeBytes(e.prep,e.prep.length)},size:t=>t.prep?t.prep.length:0}),R=s.a.create("gasp",[],{read(t,e){const n=e.tables.gasp.length;return t.readBytes(this.offset,n)},write(t,e){e.gasp&&t.writeBytes(e.gasp,e.gasp.length)},size:t=>t.gasp?t.gasp.length:0}),z=n(73),U=n(74);e.a={head:i.a,maxp:r.a,loca:o,cmap:l.a,glyf:M,name:k.a,hhea:O.a,hmtx:A.a,post:P.a,"OS/2":I.a,fpgm:D,cvt:L,prep:N,gasp:R,GPOS:z.a,kern:U.a}},function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var i=n(107),r=n(108),s=n(109);function a(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=l.prototype:(null===t&&(t=new l(e)),t.length=e),t}function l(t,e,n){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return u(this,t,e,n)}function u(t,e,n,i){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,i){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,n):new Uint8Array(e,n,i);l.TYPED_ARRAY_SUPPORT?(t=e).__proto__=l.prototype:t=d(t,e);return t}(t,e,n,i):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|p(e,n),r=(t=o(t,i)).write(e,n);r!==i&&(t=t.slice(0,r));return t}(t,e,n):function(t,e){if(l.isBuffer(e)){var n=0|f(e.length);return 0===(t=o(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(i=e.length)!=i?o(t,0):d(t,e);if("Buffer"===e.type&&s(e.data))return d(t,e.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function c(t,e){if(h(e),t=o(t,e<0?0:0|f(e)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function d(t,e){var n=e.length<0?0:0|f(e.length);t=o(t,n);for(var i=0;i<n;i+=1)t[i]=255&e[i];return t}function f(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function p(t,e){if(l.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return F(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return B(t).length;default:if(i)return F(t).length;e=(""+e).toLowerCase(),i=!0}}function g(t,e,n){var i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return O(this,e,n);case"utf8":case"utf-8":return T(this,e,n);case"ascii":return M(this,e,n);case"latin1":case"binary":return k(this,e,n);case"base64":return E(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function m(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function y(t,e,n,i,r){if(0===t.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(r)return-1;n=t.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof e&&(e=l.from(e,i)),l.isBuffer(e))return 0===e.length?-1:v(t,e,n,i,r);if("number"==typeof e)return e&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):v(t,[e],n,i,r);throw new TypeError("val must be string, number or Buffer")}function v(t,e,n,i,r){var s,a=1,o=t.length,l=e.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;a=2,o/=2,l/=2,n/=2}function u(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(r){var h=-1;for(s=n;s<o;s++)if(u(t,s)===u(e,-1===h?0:s-h)){if(-1===h&&(h=s),s-h+1===l)return h*a}else-1!==h&&(s-=s-h),h=-1}else for(n+l>o&&(n=o-l),s=n;s>=0;s--){for(var c=!0,d=0;d<l;d++)if(u(t,s+d)!==u(e,d)){c=!1;break}if(c)return s}return-1}function _(t,e,n,i){n=Number(n)||0;var r=t.length-n;i?(i=Number(i))>r&&(i=r):i=r;var s=e.length;if(s%2!=0)throw new TypeError("Invalid hex string");i>s/2&&(i=s/2);for(var a=0;a<i;++a){var o=parseInt(e.substr(2*a,2),16);if(isNaN(o))return a;t[n+a]=o}return a}function x(t,e,n,i){return $(F(e,t.length-n),t,n,i)}function w(t,e,n,i){return $(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,i)}function b(t,e,n,i){return w(t,e,n,i)}function S(t,e,n,i){return $(B(e),t,n,i)}function C(t,e,n,i){return $(function(t,e){for(var n,i,r,s=[],a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),i=n>>8,r=n%256,s.push(r),s.push(i);return s}(e,t.length-n),t,n,i)}function E(t,e,n){return 0===e&&n===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(e,n))}function T(t,e,n){n=Math.min(t.length,n);for(var i=[],r=e;r<n;){var s,a,o,l,u=t[r],h=null,c=u>239?4:u>223?3:u>191?2:1;if(r+c<=n)switch(c){case 1:u<128&&(h=u);break;case 2:128==(192&(s=t[r+1]))&&(l=(31&u)<<6|63&s)>127&&(h=l);break;case 3:s=t[r+1],a=t[r+2],128==(192&s)&&128==(192&a)&&(l=(15&u)<<12|(63&s)<<6|63&a)>2047&&(l<55296||l>57343)&&(h=l);break;case 4:s=t[r+1],a=t[r+2],o=t[r+3],128==(192&s)&&128==(192&a)&&128==(192&o)&&(l=(15&u)<<18|(63&s)<<12|(63&a)<<6|63&o)>65535&&l<1114112&&(h=l)}null===h?(h=65533,c=1):h>65535&&(h-=65536,i.push(h>>>10&1023|55296),h=56320|1023&h),i.push(h),r+=c}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var n="",i=0;for(;i<e;)n+=String.fromCharCode.apply(String,t.slice(i,i+=4096));return n}(i)}e.Buffer=l,e.SlowBuffer=function(t){+t!=t&&(t=0);return l.alloc(+t)},e.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),l.poolSize=8192,l._augment=function(t){return t.__proto__=l.prototype,t},l.from=function(t,e,n){return u(null,t,e,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(t,e,n){return function(t,e,n,i){return h(e),e<=0?o(t,e):void 0!==n?"string"==typeof i?o(t,e).fill(n,i):o(t,e).fill(n):o(t,e)}(null,t,e,n)},l.allocUnsafe=function(t){return c(null,t)},l.allocUnsafeSlow=function(t){return c(null,t)},l.isBuffer=function(t){return!(null==t||!t._isBuffer)},l.compare=function(t,e){if(!l.isBuffer(t)||!l.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,i=e.length,r=0,s=Math.min(n,i);r<s;++r)if(t[r]!==e[r]){n=t[r],i=e[r];break}return n<i?-1:i<n?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!s(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var i=l.allocUnsafe(e),r=0;for(n=0;n<t.length;++n){var a=t[n];if(!l.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,r),r+=a.length}return i},l.byteLength=p,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},l.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},l.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},l.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?T(this,0,t):g.apply(this,arguments)},l.prototype.equals=function(t){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===l.compare(this,t)},l.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},l.prototype.compare=function(t,e,n,i,r){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),e<0||n>t.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&e>=n)return 0;if(i>=r)return-1;if(e>=n)return 1;if(this===t)return 0;for(var s=(r>>>=0)-(i>>>=0),a=(n>>>=0)-(e>>>=0),o=Math.min(s,a),u=this.slice(i,r),h=t.slice(e,n),c=0;c<o;++c)if(u[c]!==h[c]){s=u[c],a=h[c];break}return s<a?-1:a<s?1:0},l.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},l.prototype.indexOf=function(t,e,n){return y(this,t,e,n,!0)},l.prototype.lastIndexOf=function(t,e,n){return y(this,t,e,n,!1)},l.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)i=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-e;if((void 0===n||n>r)&&(n=r),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var s=!1;;)switch(i){case"hex":return _(this,t,e,n);case"utf8":case"utf-8":return x(this,t,e,n);case"ascii":return w(this,t,e,n);case"latin1":case"binary":return b(this,t,e,n);case"base64":return S(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,t,e,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function M(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(127&t[r]);return i}function k(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(t[r]);return i}function O(t,e,n){var i=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>i)&&(n=i);for(var r="",s=e;s<n;++s)r+=j(t[s]);return r}function A(t,e,n){for(var i=t.slice(e,n),r="",s=0;s<i.length;s+=2)r+=String.fromCharCode(i[s]+256*i[s+1]);return r}function P(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function I(t,e,n,i,r,s){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<s)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function D(t,e,n,i){e<0&&(e=65535+e+1);for(var r=0,s=Math.min(t.length-n,2);r<s;++r)t[n+r]=(e&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function L(t,e,n,i){e<0&&(e=4294967295+e+1);for(var r=0,s=Math.min(t.length-n,4);r<s;++r)t[n+r]=e>>>8*(i?r:3-r)&255}function N(t,e,n,i,r,s){if(n+i>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function R(t,e,n,i,s){return s||N(t,0,n,4),r.write(t,e,n,i,23,4),n+4}function z(t,e,n,i,s){return s||N(t,0,n,8),r.write(t,e,n,i,52,8),n+8}l.prototype.slice=function(t,e){var n,i=this.length;if((t=~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),(e=void 0===e?i:~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t),l.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=l.prototype;else{var r=e-t;n=new l(r,void 0);for(var s=0;s<r;++s)n[s]=this[s+t]}return n},l.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var i=this[t],r=1,s=0;++s<e&&(r*=256);)i+=this[t+s]*r;return i},l.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var i=this[t+--e],r=1;e>0&&(r*=256);)i+=this[t+--e]*r;return i},l.prototype.readUInt8=function(t,e){return e||P(t,1,this.length),this[t]},l.prototype.readUInt16LE=function(t,e){return e||P(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUInt16BE=function(t,e){return e||P(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUInt32LE=function(t,e){return e||P(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUInt32BE=function(t,e){return e||P(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var i=this[t],r=1,s=0;++s<e&&(r*=256);)i+=this[t+s]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*e)),i},l.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var i=e,r=1,s=this[t+--i];i>0&&(r*=256);)s+=this[t+--i]*r;return s>=(r*=128)&&(s-=Math.pow(2,8*e)),s},l.prototype.readInt8=function(t,e){return e||P(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){e||P(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(t,e){e||P(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(t,e){return e||P(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return e||P(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readFloatLE=function(t,e){return e||P(t,4,this.length),r.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return e||P(t,4,this.length),r.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return e||P(t,8,this.length),r.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return e||P(t,8,this.length),r.read(this,t,!1,52,8)},l.prototype.writeUIntLE=function(t,e,n,i){(t=+t,e|=0,n|=0,i)||I(this,t,e,n,Math.pow(2,8*n)-1,0);var r=1,s=0;for(this[e]=255&t;++s<n&&(r*=256);)this[e+s]=t/r&255;return e+n},l.prototype.writeUIntBE=function(t,e,n,i){(t=+t,e|=0,n|=0,i)||I(this,t,e,n,Math.pow(2,8*n)-1,0);var r=n-1,s=1;for(this[e+r]=255&t;--r>=0&&(s*=256);)this[e+r]=t/s&255;return e+n},l.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,1,255,0),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},l.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):D(this,t,e,!0),e+2},l.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):D(this,t,e,!1),e+2},l.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):L(this,t,e,!0),e+4},l.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},l.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);I(this,t,e,n,r-1,-r)}var s=0,a=1,o=0;for(this[e]=255&t;++s<n&&(a*=256);)t<0&&0===o&&0!==this[e+s-1]&&(o=1),this[e+s]=(t/a>>0)-o&255;return e+n},l.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);I(this,t,e,n,r-1,-r)}var s=n-1,a=1,o=0;for(this[e+s]=255&t;--s>=0&&(a*=256);)t<0&&0===o&&0!==this[e+s+1]&&(o=1),this[e+s]=(t/a>>0)-o&255;return e+n},l.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,1,127,-128),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):D(this,t,e,!0),e+2},l.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):D(this,t,e,!1),e+2},l.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):L(this,t,e,!0),e+4},l.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},l.prototype.writeFloatLE=function(t,e,n){return R(this,t,e,!0,n)},l.prototype.writeFloatBE=function(t,e,n){return R(this,t,e,!1,n)},l.prototype.writeDoubleLE=function(t,e,n){return z(this,t,e,!0,n)},l.prototype.writeDoubleBE=function(t,e,n){return z(this,t,e,!1,n)},l.prototype.copy=function(t,e,n,i){if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var r,s=i-n;if(this===t&&n<e&&e<i)for(r=s-1;r>=0;--r)t[r+e]=this[r+n];else if(s<1e3||!l.TYPED_ARRAY_SUPPORT)for(r=0;r<s;++r)t[r+e]=this[r+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+s),e);return s},l.prototype.fill=function(t,e,n,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!l.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var s;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(s=e;s<n;++s)this[s]=t;else{var a=l.isBuffer(t)?t:F(new l(t,i).toString()),o=a.length;for(s=0;s<n-e;++s)this[s+e]=a[s%o]}return this};var U=/[^+\/0-9A-Za-z-_]/g;function j(t){return t<16?"0"+t.toString(16):t.toString(16)}function F(t,e){var n;e=e||1/0;for(var i=t.length,r=null,s=[],a=0;a<i;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!r){if(n>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(a+1===i){(e-=3)>-1&&s.push(239,191,189);continue}r=n;continue}if(n<56320){(e-=3)>-1&&s.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(e-=3)>-1&&s.push(239,191,189);if(r=null,n<128){if((e-=1)<0)break;s.push(n)}else if(n<2048){if((e-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function B(t){return i.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(U,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function $(t,e,n,i){for(var r=0;r<i&&!(r+n>=e.length||r>=t.length);++r)e[r+n]=t[r];return r}}).call(this,n(106))},function(t,e,n){"use strict";e.a=[{x:582,y:0},{x:758,y:75},{x:890,y:208},{x:965,y:384},{x:965,y:583},{x:890,y:760},{x:758,y:891},{x:582,y:966},{x:383,y:966},{x:207,y:891},{x:75,y:760},{x:0,y:583},{x:0,y:384},{x:75,y:208},{x:207,y:75},{x:383,y:0}]},function(t,e,n){"use strict";let i=0;function r(t){return(t||"render")+"-"+i++}var s=n(3);function a(t){return(t=t||{}).id=t.id||r("shape"),t.type=t.type||"circle",t.layerId=this.id,t}function o(t,e){t.fillStyle=e.fillColor||"black",t.strokeStyle=e.strokeColor||"black",t.lineWidth=e.lineWidth||1,t.font=e.font||"normal 10px arial"}class l{constructor(t,e){this.context=t,this.options=Object.assign({stroke:!0,fill:!0,thin:!0},e),this.painter=this.options.painter,this.id=this.options.id||r("layer"),this.level=this.options.level,this.shapes=[],this.disabled=!1}refresh(){let t=this.painter.support,e=this.context,n=this.options,i=this.painter.camera;e.clearRect(0,0,this.painter.width,this.painter.height),o(e,n),!1!==n.thin&&e.translate(-.5,-.5),e.beginPath();let r,s,a=this.shapes;for(let l=0,u=a.length;l<u;l++)r=a[l],!0!==r.disabled&&(s=t[r.type])&&(1!==i.ratio&&s.adjust(r,i),r.style?(!1!==n.fill&&e.fill(),!1!==n.stroke&&e.stroke(),e.beginPath(),o(e,r.style),s.draw(e,r,i),(!1!==n.fill||r.style.fill)&&e.fill(),(!1!==n.stroke||r.style.stroke)&&e.stroke(),o(e,n),e.beginPath()):s.draw(e,r,i));return!1!==n.fill&&e.fill(),!1!==n.stroke&&e.stroke(),!1!==n.thin&&e.translate(.5,.5),this}getShape(t){return"string"==typeof t?this.shapes.filter((function(e){return e.id===t}))[0]:"number"==typeof t?this.shapes[t]:"object"==typeof t?t:void 0}addShape(t,e){if("string"==typeof t)return(e=e||{}).type=t,t=a.call(this,e),this.shapes.push(t),t;if("object"==typeof t)return this.shapes.push(t),t;throw"add shape faild"}removeShape(t){let e=-1;if("object"==typeof t)e=this.shapes.indexOf(t);else if("string"==typeof t){for(let n=0,i=this.shapes.length;n<i;n++)if(t===this.shapes[n].id){e=n;break}}else{if("number"!=typeof t)throw"need shape id to be removed";e=t}return e>=0&&e<this.shapes.length&&(this.shapes.splice(e,1),!0)}clearShapes(){return this.shapes.length=0,this.shapes=[],this}getShapeIn(t){let e=this.painter.support,n=this.shapes,i=[];for(let r=0,s=n.length;r<s;r++)!1!==n[r].selectable&&e[n[r].type].isIn(n[r],t.x,t.y)&&i.push(n[r]);return!!i.length&&i}adjust(t){let e=[];t?(t=this.getShape(t),e.push(t)):e=this.shapes;let n,i=this.painter.support,r=this.painter.camera;for(let s=0,a=e.length;s<a;s++)(n=i[(t=e[s]).type])&&1!==r.ratio&&n.adjust(t,r);return this}move(t,e,n){let i=[];n?(n=this.getShape(n),i.push(n)):i=this.shapes;let r,s=this.painter.support;for(let a=0,o=i.length;a<o;a++)(r=s[(n=i[a]).type])&&r.move(n,t,e);return this}moveTo(t,e,n){let i=[];n?(n=this.getShape(n),i.push(n)):i=this.shapes;let r,s=this.painter.support,a=this.getBound(i);if(a){let o=t-(a.x+a.width/2),l=e-(a.y+a.height/2);for(let t=0,e=i.length;t<e;t++)(r=s[(n=i[t]).type])&&r.move(n,o,l)}return this}getBound(t){if(0===(t=t||this.shapes).length)return!1;let e,n,i=[],r=this.painter.support;for(let s=0,a=t.length;s<a;s++)if(e=t[s],n=r[e.type])if(void 0!==e.x&&void 0!==e.y)i.push(e);else{let t=n.getRect(e);t&&(i.push(t),i.push({x:t.x+t.width,y:t.y+t.height}))}return s.a.computeBounding(i)}createShape(t){return a.call(this,t)}dispose(){this.main=this.painter=this.context=this.options=null,this.shapes.length=0,this.shapes=null}}var u=n(16),h=n(2);class c{constructor(t={}){this.options=t}adjust(t,e){let n=e.center,i=e.ratio;return"number"==typeof t.x&&(t.x=i*(t.x-n.x)+n.x),"number"==typeof t.y&&(t.y=i*(t.y-n.y)+n.y),"number"==typeof t.width&&(t.width=i*t.width),"number"==typeof t.width&&(t.height=i*t.height),"number"==typeof t.r&&(t.r=i*t.r),t}move(t,e,n){return"number"==typeof t.x&&(t.x+=e),"number"==typeof t.y&&(t.y+=n),t}getRect(t){return!1}isIn(t,e,n){return!1}draw(t,e,n){}dispose(){}}c.derive=function(t){class e extends c{}return Object.assign(e.prototype,t),e},c.clone=function(t){return h.a.clone(t)};var d=c.derive({type:"circle",getRect:t=>({x:t.x-t.r,y:t.y-t.r,width:2*t.r,height:2*t.r}),isIn:(t,e,n)=>Math.pow(t.x-e,2)+Math.pow(t.y-n,2)<=Math.pow(t.r,2),draw(t,e){t.moveTo(e.x+e.r,e.y),t.arc(e.x,e.y,e.r,0,2*Math.PI,!0)}});var f=c.derive({type:"cpoint",getRect(t){let e=t.size||2;return{x:t.x-e,y:t.y-e,width:2*e,height:2*e}},isIn(t,e,n){let i=t.size||2;return Math.pow(t.x-e,2)+Math.pow(t.y-n,2)<=Math.pow(2*i,2)},draw(t,e){let n=e.size||2,i=Math.round(e.x),r=Math.round(e.y);t.moveTo(i+n,r),t.arc(i,r,n,0,2*Math.PI,!0)}});var p=c.derive({type:"point",getRect(t){let e=t.size||6;return{x:t.x-e/2,y:t.y-e/2,width:e,height:e}},isIn(t,e,n){let i=t.size||6,r=i,s=i;return e<=t.x+r&&e>=t.x-r&&n<=t.y+s&&n>=t.y-s},draw(t,e){let n=Math.round(e.x),i=Math.round(e.y),r=e.size||6,s=r/2,a=r/2;t.moveTo(n-s,i-a),t.lineTo(n+s,i-a),t.lineTo(n+s,i+a),t.lineTo(n-s,i+a),t.lineTo(n-s,i-a)}});function g(t,e,n,i,r,s){s="number"!=typeof s?2:s;let a=i-e,o=r-n,l=Math.floor(Math.sqrt(a*a+o*o)/s);a/=l,o/=l;let u=!0;for(let i=0;i<l;++i)u?t.moveTo(e,n):t.lineTo(e,n),u=!u,e+=a,n+=o;t.lineTo(i,r)}var m=c.derive({type:"rect",getRect:t=>t,isIn(t,e,n){let i=t.width,r=t.height;return e<=t.x+i&&e>=t.x&&n<=t.y+r&&n>=t.y},draw(t,e){let n=Math.round(e.x),i=Math.round(e.y),r=Math.round(e.width),s=Math.round(e.height);e.dashed?(g(t,n,i,n+r,i),g(t,n+r,i,n+r,i+s),g(t,n+r,i+s,n,i+s),g(t,n,i+s,n,i)):(t.moveTo(n,i),t.lineTo(n+r,i),t.lineTo(n+r,i+s),t.lineTo(n,i+s),t.lineTo(n,i))}}),y=n(4),v=n(19);function _(t,e){let n=Object(v.c)(e,t,!0),i=Object(v.c)(e,{x:t.x+t.width,y:t.y},!0),r=Object(v.c)(e,{x:t.x,y:t.y+t.height},!0),s=Object(v.c)(e,{x:t.x+t.width,y:t.y+t.height},!0);if(n&&i&&r&&s)return 2;let a=Object(v.c)(t,e,!0),o=Object(v.c)(t,{x:e.x+e.width,y:e.y},!0),l=Object(v.c)(t,{x:e.x,y:e.y+e.height},!0),u=Object(v.c)(t,{x:e.x+e.width,y:e.y+e.height},!0);return a&&o&&l&&u?3:!1===(n||i||r||s||a||o||l||u)?(t.x>e.x&&t.x<e.x+e.width||t.y>e.y&&t.y<e.y+e.height)&&1:1}function x(t,e){return t.map((function(t){return t*e}))}function w(t,e){return t.map((function(t,n){return t-e[n]}))}function b(t,e){return t.map((function(t,n){return t+e[n]}))}function S(t,e,n,i,r){let s=[t,e,n,i].sort((function(t,e){return t[r]<e[r]?-1:1})),a=[];return s[0][r]===s[1][r]?(a.push(s[0]),a.push(s[2])):s[2][r]===s[3][r]?(a.push(s[1]),a.push(s[3])):(a.push(s[1]),s[1][r]!==s[2][r]&&a.push(s[2])),a}function C(t,e,n,i){let r,s,a;e.x<t.x&&(r=e,e=t,t=r),i.x<n.x&&(r=i,i=n,n=r);let o={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),width:Math.abs(t.x-e.x),height:Math.abs(t.y-e.y)},l={x:Math.min(n.x,i.x),y:Math.min(n.y,i.y),width:Math.abs(n.x-i.x),height:Math.abs(n.y-i.y)};if(_(o,l)){let u=[e.y-t.y,-(e.x-t.x),t.y*(e.x-t.x)-t.x*(e.y-t.y)],h=[i.y-n.y,-(i.x-n.x),n.y*(i.x-n.x)-n.x*(i.y-n.y)];if(u[0]===u[1]&&u[0]===u[2]&&0===u[0])return Math.abs((i.y-t.y)*(n.x-t.x)-(n.y-t.y)*(i.x-t.x))<=.001&&t.x>=n.x&&t.x<=i.x&&[t];if(h[0]===h[1]&&h[0]===h[2]&&0===h[0])return Math.abs((e.y-n.y)*(t.x-n.x)-(t.y-n.y)*(e.x-n.x))<=.001&&n.x>=t.x&&n.x<=e.x&&[n];if(u[1]===h[1]&&0===u[1])return e.x===i.x&&S(t,e,n,i,"y");if(u[0]===h[0]&&0===u[0])return e.y===i.y&&S(t,e,n,i,"x");if(u[0]*h[1]==u[1]*h[0])return u[1]*h[2]==u[2]*h[1]&&S(t,e,n,i,"x");let c=w(x(u,h[0]),x(h,u[0]));if(a=-c[2]/c[1],s=0!==u[0]?-(u[2]+u[1]*a)/u[0]:-(h[2]+h[1]*a)/h[0],r=Object(v.a)({x:s,y:a}),Object(v.c)(o,r,!0)&&Object(v.c)(l,r,!0))return[r]}return!1}function E(t,e,n){return C(t,e,n,{x:1e5,y:n.y})}var T=c.derive({type:"polygon",adjust(t,e){let n=e.ratio,i=e.center.x,r=e.center.y;Object(y.a)(t.points,n,n,-i,-r),Object(y.a)(t.points,1,1,i,r)},move:(t,e,n)=>(Object(y.a)(t.points,1,1,e,n),t),getRect:t=>s.a.computeBounding(t.points),isIn(t,e,n){let i=s.a.computeBounding(t.points);return e<=i.x+i.width&&e>=i.x&&n<=i.y+i.height&&n>=i.y&&function(t,e){let n,i,r,s=0;for(let a=0,o=t.length;a<o;a++)if(n=t[a],i=t[a===o-1?0:a+1],r=E(n,i,e)){if(r.y===e.y)return!0;s+=r.length}return!!(s%2)}(t.points,{x:e,y:n})},draw(t,e){let n=e.points;if(!n||n.length<2)return;let i=0,r=n.length;if(e.dashed){for(;i<r-1;i++)g(t,Math.round(n[i].x),Math.round(n[i].y),Math.round(n[i+1].x),Math.round(n[i+1].y));g(t,Math.round(n[r-1].x),Math.round(n[r-1].y),Math.round(n[0].x),Math.round(n[0].y))}else{for(t.moveTo(Math.round(n[0].x),Math.round(n[0].y)),i=1;i<r;i++)t.lineTo(Math.round(n[i].x),Math.round(n[i].y));t.lineTo(Math.round(n[0].x),Math.round(n[0].y))}}}),M=n(31);function k(t,e,n){if(0===t)return[-n/e];let i,r;if(0===e)return 0===n?[0]:(t>0&&n<0||t<0&&n>0)&&(r=Math.sqrt(-n/t),[r,-r]);if(0===n)return[0,-e/t];let s=Math.pow(e,2)-4*t*n;return s>=0&&(i=(-e+Math.sqrt(s,2))/t/2,r=(-e-Math.sqrt(s,2))/t/2,i===r?[i]:[i,r])}function O(t,e,n){let i=k(t,e,n);if(!i)return i;let r=i.filter((function(t){return t>=0&&t<=1}));return!!r.length&&r}function A(t,e,n,i,r){let s;if(i.y===r.y)s=O(t.y+n.y-2*e.y,2*(e.y-t.y),t.y-i.y);else if(i.x===r.x)s=O(t.x+n.x-2*e.x,2*(e.x-t.x),t.x-i.x);else{let a=(r.y-i.y)/(r.x-i.x),o=i.y-a*i.x,l=t.x+n.x-2*e.x,u=2*(e.x-t.x),h=t.x;s=O(a*l-(t.y+n.y-2*e.y),a*u-2*(e.y-t.y),a*h+o-t.y)}return!!s&&s.sort((function(t,e){return t-e})).map((function(i){return Object(v.a)({x:t.x*Math.pow(1-i,2)+2*e.x*i*(1-i)+n.x*Math.pow(i,2),y:t.y*Math.pow(1-i,2)+2*e.y*i*(1-i)+n.y*Math.pow(i,2)})}))}function P(t,e){let n,i=0;return Object(M.a)(t,(function(t,r,s,a){if("L"===t){if(n=E(r,s,e)){if(2===n.length)return e.x>=Math.min(n[0].x,n[1].x)&&e.x<=Math.max(n[0].x,n[1].x)?(i=1,!1):void 0;if(n[0].x===e.x)return i=1,!1;s.y>r.y?i--:i++}}else if("Q"===t){let t=null,o=null;if(n=function(t,e,n,i){if(0==((t.y>i.y)+(e.y>i.y)+(n.y>i.y))%3)return!1;let r=A(t,e,n,i,{x:1e5,y:i.y});if(r){let t=r.filter((function(t){return t.x>=i.x}));return!!t.length&&t}return!1}(r,s,a,e)){if(n[0].x===e.x||n[1]&&n[1].x===e.x)return i=1,!1;if(2===n.length)return;n=n[0],n.y>r.y&&n.y<s.y?(t=r,o=s):(t=s,o=a),o.y>t.y?i--:i++}}})),!!i}var I=n(32),D=c.derive({type:"font",adjust(t,e){let n=e.ratio,i=e.center.x,r=e.center.y,s=t.contours;for(let t=0,e=s.length;t<e;t++)Object(y.a)(s[t],n,n,-i,-r),Object(y.a)(s[t],1,1,i,r);return t},move(t,e,n){let i=t.contours;for(let t=0,r=i.length;t<r;t++)Object(y.a)(i[t],1,1,e,n);return t},getRect:t=>s.a.computePath.apply(null,t.contours),isIn(t,e,n){let i=s.a.computePath.apply(null,t.contours);if(e<=i.x+i.width&&e>=i.x&&n<=i.y+i.height&&n>=i.y){let i=t.contours;for(let t=0,r=i.length;t<r;t++)if(P(i[t],{x:e,y:n}))return!0}return!1},draw(t,e){let n=e.contours;for(let e=0,i=n.length;e<i;e++)Object(I.a)(t,n[e])}}),L=c.derive({type:"path",adjust(t,e){let n=e.ratio,i=e.center.x,r=e.center.y;Object(y.a)(t.points,n,n,-i,-r),Object(y.a)(t.points,1,1,i,r)},move:(t,e,n)=>(Object(y.a)(t.points,1,1,e,n),t),getRect:t=>s.a.computePath(t.points),isIn(t,e,n){let i=s.a.computePath(t.points);return e<=i.x+i.width&&e>=i.x&&n<=i.y+i.height&&n>=i.y&&P(t.points,{x:e,y:n})},draw(t,e){Object(I.a)(t,e.points)}});var N=c.derive({type:"axis",adjust(t,e){let n=e.center,i=e.ratio;t.unitsPerEm*=i;let r=t.metrics;return Object.keys(r).forEach((function(t){r[t]*=i})),t.x=i*(t.x-n.x)+n.x,t.y=i*(t.y-n.y)+n.y,t},isIn:(t,e,n)=>!1,getBound:t=>({x:t.x,y:t.y,width:0,height:0}),draw(t,e,n){e.scale=n.scale,t.save(),function(t,e){let n,i=Math.round(e.graduation.gap*e.scale),r=Math.round(t.canvas.width+i),s=Math.round(t.canvas.height+i),a=Math.round(e.x),o=Math.round(e.y);if(!1!==e.showGrid){for(t.beginPath(),t.strokeStyle=e.gapColor||"#A6A6FF",n=o;n<s;n+=i)t.moveTo(0,n),t.lineTo(r,n);for(n=o;n>0;n-=i)t.moveTo(0,n),t.lineTo(r,n);for(n=a;n<r;n+=i)t.moveTo(n,0),t.lineTo(n,s);for(n=a;n>0;n-=i)t.moveTo(n,0),t.lineTo(n,s);t.stroke()}t.beginPath(),t.strokeStyle=e.metricsColor||"#FF6E67";let l=e.metrics,u=e.graduation.thickness||22,h=Object.keys(l);h.forEach((function(e){let n=o-Math.round(l[e]);g(t,0,n,r,n,4)})),t.stroke(),t.beginPath(),t.strokeStyle=e.axisColor||"red",t.moveTo(0,o),t.lineTo(r,o),t.moveTo(a,0),t.lineTo(a,s),t.stroke(),t.save(),t.scale(.8,.8),h.forEach((function(e){t.fillText(e,1.25*u,1.25*(o-l[e])-2)})),t.fillText("Baseline",1.25*u,1.25*o-2),t.restore()}(t,e),t.restore(),t.beginPath()}});var R=c.derive({type:"graduation",adjust:(t,e)=>t,isIn:(t,e,n)=>!1,draw(t,e,n){e.scale=n.scale,t.save(),function(t,e){let n=Math.round(e.x),i=Math.round(e.y),r=t.canvas.width,s=t.canvas.height,a=e.graduation.thickness||20,o=e.graduation.markHeight||3;t.beginPath(),t.fillStyle=e.graduation.markBackgroundColor||"#EEE",t.fillRect(0,0,r,a),t.fillRect(0,0,a,s),t.fill(),t.strokeStyle=e.graduation.markColor||"#000",t.moveTo(a,0),t.lineTo(a,s),t.moveTo(0,a),t.lineTo(r,a),t.stroke();let l,u,h,c,d,f=e.graduation.gap,p=e.graduation.gap*e.scale;for(f>=p?(l=f/p,u=Math.floor(l)*f/20,h=f/20*Math.floor(l)/l):(l=p/f,u=Math.floor(f/20/l),u=u>=2?2*Math.floor(u/2):1,h=u*l),t.fillStyle=t.strokeStyle,c=n,d=0;c<r;d++,c+=h)t.moveTo(c,a-(d%5?o:2*o)),t.lineTo(c,a);for(c=n,d=0;c>a;d++,c-=h)t.moveTo(c,a-(d%5?o:2*o)),t.lineTo(c,a);let g=0;for(c=i,d=0;c>a;d++,c-=h)t.moveTo(a-(d%5?o:2*o),c),t.lineTo(a,c);for(c=i,d=0;c<s;d++,c+=h)t.moveTo(a-(d%5?o:2*o),c),t.lineTo(a,c);for(t.save(),t.fillStyle=e.graduation.color||"#000",t.scale(.8,.8),g=a-8,c=n,d=0;c<r;d++,c+=h)0==d%10&&t.fillText(Math.ceil(u*d),1.25*c-3,1.25*g);for(c=n,d=0;c>a;d++,c-=h)0==d%10&&t.fillText(Math.ceil(-u*d),1.25*c-3,1.25*g);for(g=0,c=i,d=0;c>a;d++,c-=h)0==d%10&&t.fillText(Math.ceil(u*d),1.25*g,1.25*c+3);for(c=i,d=0;c<s;d++,c+=h)0==d%10&&t.fillText(Math.ceil(-u*d),1.25*g,1.25*c+3);t.restore(),t.stroke()}(t,e.config),t.restore(),t.beginPath()}}),z=c.derive({type:"line",adjust(t,e){let n=e.center,i=e.ratio;return void 0!==t.p0.x?t.p0.x=i*(t.p0.x-n.x)+n.x:t.p0.y=i*(t.p0.y-n.y)+n.y,void 0!==t.p1&&(t.p1.x=i*(t.p1.x-n.x)+n.x,t.p1.y=i*(t.p1.y-n.y)+n.y),t},move:(t,e,n)=>(void 0!==t.p0.x?t.p0.x+=e:t.p0.y+=n,void 0!==t.p1&&(t.p1.x+=e,t.p1.y+=n),t),getRect:t=>void 0!==t.p1&&s.a.computeBounding([t.p0,t.p1]),isIn(t,e,n){if(void 0===t.p1)return void 0!==t.p0.x&&Math.abs(t.p0.x-e)<4||void 0!==t.p0.y&&Math.abs(t.p0.y-n)<4;let i=t.p0.x;return(n-t.p0.y)*(e-t.p1.x)==(n-t.p1.y)*(e-i)},draw(t,e){let n,i,r,s;void 0===e.p1?void 0!==e.p0.x?(n=Math.round(e.p0.x),t.moveTo(n,0),t.lineTo(n,t.canvas.height)):(i=Math.round(e.p0.y),t.moveTo(0,i),t.lineTo(t.canvas.width,i)):(n=Math.round(e.p0.x),i=Math.round(e.p0.y),r=Math.round(e.p1.x),s=Math.round(e.p1.y),e.dashed?g(t,n,i,r,s):(t.moveTo(n,i),t.lineTo(r,s)))}}),U=c.derive({type:"beziercurve",adjust(t,e){let n=e.ratio,i=e.center.x,r=e.center.y;Object(y.a)(t.points,n,n,-i,-r),Object(y.a)(t.points,1,1,i,r)},move:(t,e,n)=>(Object(y.a)(t.points,1,1,e,n),t),getRect:t=>s.a.computePath(t.points),isIn(t,e,n){let i=s.a.computePath(t.points);return e<=i.x+i.width&&e>=i.x&&n<=i.y+i.height&&n>=i.y&&P(t.points,{x:e,y:n})},draw(t,e){let n=e.points;3===n.length?(t.moveTo(n[0].x,n[0].y),t.quadraticCurveTo(n[1].x,n[1].y,n[2].x,n[2].y)):4===n.length&&(t.moveTo(n[0].x,n[0].y),t.bezierCurveTo(n[1].x,n[1].y,n[2].x,n[2].y,n[3].x,n[3].y))}});var j={circle:d,cpoint:f,point:p,rect:m,polygon:T,font:D,path:L,axis:N,graduation:R,line:z,beziercurve:U,gridarrow:c.derive({type:"gridarrow",adjust(t,e){let n=e.center,i=e.ratio;return void 0!==t.p0.x?t.p0.x=i*(t.p0.x-n.x)+n.x:t.p0.y=i*(t.p0.y-n.y)+n.y,t},move:(t,e,n)=>(void 0!==t.p0.x?t.p0.x+=e:t.p0.y+=n,t),getRec:t=>!1,isIn:(t,e,n)=>void 0!==t.p0.x&&Math.abs(t.p0.x-e)<4||void 0!==t.p0.y&&Math.abs(t.p0.y-n)<4,draw(t,e,n){if(void 0!==e.p0.x){let n=Math.round(e.p0.x);t.moveTo(n,0),t.lineTo(n,t.canvas.height),e.arrow&&(t.moveTo(n,e.arrow.y),t.lineTo(n-3,e.arrow.y+6),t.lineTo(n+3,e.arrow.y+6),t.lineTo(n,e.arrow.y))}else{let n=Math.round(e.p0.y);t.moveTo(0,n),t.lineTo(t.canvas.width,n),e.arrow&&(t.moveTo(e.arrow.x,n),t.lineTo(e.arrow.x+6,n-3),t.lineTo(e.arrow.x+6,n+3),t.lineTo(e.arrow.x,n))}if(e.axis&&e.drawAxisText){t.save(),t.scale(.8,.8);let i=(e.axis.graduation.thickness||22)+18;if(void 0!==e.p0.x){let r=Math.round((e.p0.x-e.axis.x)/n.scale);t.fillText(r,1.25*(e.p0.x+2),1.25*i)}else{let r=Math.round((e.axis.y-e.p0.y)/n.scale);t.fillText(r,1.25*i,1.25*(e.p0.y-2))}t.restore()}}}),text:c.derive({type:"text",getRect:t=>!1,isIn:(t,e,n)=>!1,draw(t,e){t.save();let n=Math.round(e.x),i=Math.round(e.y);e.fillColor&&(t.fillStyle=e.fillColor),t.fillText(e.text,n,i),t.restore()}})};class F{constructor(t,e,n){this.reset(t,e,n)}reset(t,e,n){this.center=t||{x:0,y:0},this.scale=e||1,this.ratio=n||1}dispose(){this.center=this.ratio=this.scale=null}}function B(t){(t=t||{}).id=t.id||r("layer"),t.width=this.width,t.height=this.height,t.level=t.level||1,t.painter=this;let e=function(t){let e=document.createElement("canvas"),n=t.level||1;return e.id=t.id,e.width=t.width,e.height=t.height,e.style.position="absolute",e.style.zIndex=n>1e4?1:n,t.background&&(e.style.background=t.background),e}(t);return this.main.appendChild(e),new l(e.getContext("2d"),t)}class ${constructor(t,e={}){this.main=t,this.options=e,this.layers=[],this.main.style.position="relative",this.resetSize(),this.camera=new F({x:this.width/2,y:this.height/2});let n={};Object.keys(j).forEach((function(t){n[t]=new j[t]})),this.support=n}addSupport(t){if(this.support[t.type])throw"exist the same shape type";return this.support[t.type]=t,this}refresh(){return this.layers.forEach((function(t){t.refresh()})),this}getLayer(t){return"string"==typeof t?this.layers.filter((function(e){return e.id===t}))[0]:"number"==typeof t?this.layers[t]:"object"==typeof t?t:void 0}addLayer(t,e){if(t instanceof l)return this.layers.push(t),t;if("string"==typeof t)return(e=e||{}).id=t,t=B.call(this,e),this.layers.push(t),t;throw"add layer faild"}removeLayer(t){let e=-1;if(t instanceof l)e=this.layers.indexOf(t);else if("string"==typeof t){for(let n=0,i=this.layers.length;n<i;n++)if(t===this.layers[n].id){e=n;break}}else{if("number"!=typeof e)throw"need layer id to be removed";e=e}return e>=0&&e<this.layers.length&&((t=this.layers[e]).dispose(),this.main.removeChild(document.getElementById(t.id)),this.layers.splice(e,1),!0)}getShapeIn(t){let e=this.layers.filter((function(t){return!t.disabled}));for(let n=0,i=e.length;n<i;n++){let i=e[n].getShapeIn(t);if(i)return i}}adjust(t){let e=[];if(t){let n=this.getLayer(t);e.push(n)}else e=this.layers;return e.forEach((function(t){t.adjust()})),this}move(t,e,n){let i=[];if(n){let t=this.getLayer(n);i.push(t)}else i=this.layers;return i.forEach((function(n){n.move(t,e)})),this}moveTo(t,e,n){let i=[];if(n){let t=this.getLayer(n);i.push(t)}else i=this.layers;let r=[];i.forEach((function(t){let e=t.getBound();e&&(r.push(e),r.push({x:e.x+e.width,y:e.y+e.height}))}));let a=s.a.computeBounding(r);if(a){let n=t-(a.x+a.width/2),r=e-(a.y+a.height/2);i.forEach((function(t){t.move(n,r)}))}return this}clearShapes(){let t=this.layers;for(let e=0,n=t.length;e<n;e++)t[e].clearShapes();return this}resetSize(){this.options.width&&(this.main.style.width=this.options.width+"px"),this.options.height&&(this.main.style.height=this.options.height+"px");let t=this.main.clientWidth,e=this.main.clientHeight;return this.layers.forEach((function(n){document.getElementById(n.id).style.width=t+"px",document.getElementById(n.id).style.height=e+"px",document.getElementById(n.id).width=t*u.a,document.getElementById(n.id).height=e*u.a})),this.width=t,this.height=e,this}getSize(){return{width:this.width,height:this.height}}reset(){return this.clearShapes(),this.resetSize(),this.camera.reset({x:this.width/2,y:this.height/2}),this}dispose(){let t=this.layers;for(let e=0,n=t.length;e<n;e++)t[e].dispose(),this.main.removeChild(document.getElementById(t[e].id));this.main=this.layers=this.options=null}createLayer(t){return B.call(this,t)}}var X=n(43),H=n(7);const G={37:"left",38:"up",39:"right",40:"down",13:"enter",27:"esc",8:"backspace",45:"insert",46:"delete",16:"shift",17:"ctrl",18:"alt",36:"home",47:"help",20:"caps",9:"tab"};function q(t,e){if(!1===this.events["key"+Event])return;let n=function(t){return{keyCode:t.keyCode,key:G[t.keyCode],ctrlKey:t.ctrlKey||t.metaKey,metaKey:t.metaKey,altKey:t.altKey,shiftKey:t.shiftKey,originEvent:t}}(e);this.fire("key"+t,n);let i=G[n.keyCode];i&&this.fire(i+":"+t,n)}class V{constructor(t,e={}){this.main=t,e=e||{},this.events=e.events||{},this.handlers={keydown:q.bind(this,"down"),keyup:q.bind(this,"up"),keypress:q.bind(this,"press")},this.start()}start(){if(!this.listening){this.listening=!0;let t=document.body;t.addEventListener("keydown",this.handlers.keydown,!1),t.addEventListener("keyup",this.handlers.keyup,!1),t.addEventListener("keypress",this.handlers.keypress,!1)}return this}stop(){if(this.listening){this.listening=!1;let t=document.body;t.removeEventListener("keydown",this.handlers.keydown),t.removeEventListener("keyup",this.handlers.keyup),t.removeEventListener("keypress",this.handlers.keypress)}return this}isListening(){return!!this.listening}dispose(){this.stop(),this.main=this.events=null,this.un()}}function W(t){if(!1===this.events.resize)return;let e=function(t){return{originEvent:t}}(t);this.fire("resize",e)}H.a.mixin(V.prototype);class Y{constructor(t,e={}){this.main=t,this.events=e.events||{},this.debounce=e.debounce||200,this.handlers={resize:h.a.debounce(W.bind(this),this.debounce)},this.start()}start(){return this.listening||(this.listening=!0,window.addEventListener("resize",this.handlers.resize,!1)),this}stop(){return this.listening&&(this.listening=!1,window.removeEventListener("resize",this.handlers.resize)),this}isListening(){return!!this.listening}dispose(){this.stop(),this.main=this.events=null,this.un()}}H.a.mixin(Y.prototype);class Z{constructor(t,e){if(this.main=t,this.options=Object.assign({defaultRatio:1.2,minScale:.2,maxScale:200,enableScale:!0,enableResize:!0},e),this.id=r(),!this.main)throw"require a main dom element";this.init()}init(){this.painter=new $(this.main,this.options.painter),this.capture=new X.a(this.main,this.options.mouse),this.keyCapture=new V(this.main,this.options.keyboard),this.camera=this.painter.camera;let t=this;this.options.enableScale&&this.capture.on("wheel",(function(e){if(e.altKey||e.ctrlKey){let n=t.options.defaultRatio||1.2,i=e.delta>0?n:1/n,r=t.camera.scale*i;if(r<t.options.minScale||r>t.options.maxScale)return;t.scale(i,e)}else{let n=e.delta>0?30:-30;t.move(e.shiftKey?n:0,e.shiftKey?0:n),t.refresh()}})),this.options.enableResize&&(this.resizeCapture=new Y(this.main),this.resizeCapture.on("resize",(function(e){if("none"===t.main.style.display)return void(t.hasResized=!0);let n=t.painter.getSize();t.painter.resetSize();let i=t.painter.getSize();t.fire("resize",{size:i,prevSize:n})})))}setCursor(t){return this.main.style.cursor=t||"default",this}refresh(){return this.hasResized&&(this.painter.resetSize(),this.hasResized=!1),this.painter.refresh(),this}reset(){this.painter.reset()}scale(t,e,n){let i=this.camera.scale*t;i<this.options.minScale||i>this.options.maxScale||(this.camera.ratio=t,this.camera.center.x=e.x,this.camera.center.y=e.y,this.camera.scale=i,!0!==n?this.painter.refresh():this.painter.adjust(),this.camera.ratio=1)}scaleTo(t,e,n){this.scale(t/this.camera.scale,this.camera.center,!0),this.painter.moveTo(e.x,e.y),this.camera.reset(e,t),!0!==n&&this.painter.refresh()}focus(){this.keyCapture.start()}blur(){this.keyCapture.stop()}dispose(){this.un(),this.painter.dispose(),this.capture.dispose(),this.keyCapture.dispose(),this.resizeCapture&&this.resizeCapture.dispose(),this.main=this.options=this.camera=null,this.painter=this.capture=this.keyCapture=null}}function K(t,e,n,i){if(0===t)return k(e,n,i);if(0===i)return k(t,e,n);let r,s,a,o,l,u,h,c,d,f,p;return 1!==t&&(e/=t,n/=t,i/=t),s=(3*n-e*e)/9,a=-27*i+e*(9*n-e*e*2),a/=54,r=s*s*s+a*a,h=e/3,r>0?(l=a+Math.sqrt(r),l=l<0?-Math.pow(-l,1/3):Math.pow(l,1/3),u=a-Math.sqrt(r),u=u<0?-Math.pow(-u,1/3):Math.pow(u,1/3),[-h+l+u]):0===r?(c=a<0?-Math.pow(-a,1/3):Math.pow(a,1/3),d=2*c-h,f=-(c+h),p=f,d===f?d:[d,f]):(s=-s,o=s*s*s,o=Math.acos(a/Math.sqrt(o)),c=2*Math.sqrt(s),d=-h+c*Math.cos(o/3),f=-h+c*Math.cos((o+2*Math.PI)/3),p=-h+c*Math.cos((o+4*Math.PI)/3),[d,f,p])}function Q(t,e,n,i,r){let s=function(t,e,n,i,r){if(0===t)return K(e,n,i,r);if(0===r)return K(t,e,n,i);let s,a,o,l,u,h,c,d,f,p,g,m,y,v,_,x,w,b,S,C,E,T;1!==t&&(e/=t,n/=t,i/=t,r/=t),s=-n,a=-4*r+i*e,o=4*n*r-(e*e*r+i*i),u=(3*a-s*s)/9,h=-27*o+s*(9*a-s*s*2),h/=54,l=u*u*u+h*h,x=s/3,l>0?(v=h+Math.sqrt(l),v=v<0?-Math.pow(-v,1/3):Math.pow(v,1/3),_=h-Math.sqrt(l),_=_<0?-Math.pow(-_,1/3):Math.pow(_,1/3),S=-x+v+_):0===l?(w=h<0?-Math.pow(-h,1/3):Math.pow(h,1/3),S=2*w-x):(u=-u,g=u*u*u,g=Math.acos(h/Math.sqrt(g)),w=2*Math.sqrt(u),S=-x+w*Math.cos(g/3)),x=e/4,b=x*e-n+S,c=d=f=p=m=y=C=E=T=0,b>=0?0===b?(g=-4*r+S*S,g<0?E=2*Math.sqrt(-g):(C=2*Math.sqrt(g),T=-C)):(c=Math.sqrt(b),C=-(8*i+e*e*e)/4+e*n,C/=c,T=-C):(d=Math.sqrt(-b),E=-(8*i+e*e*e)/4+e*n,E/=d,E=-E),C+=3*e*x-(2*n+b),T+=3*e*x-(2*n+b),0===E?(C>=0?f=Math.sqrt(C):p=Math.sqrt(-C),T>=0?m=Math.sqrt(T):y=Math.sqrt(-T)):(h=Math.sqrt(C*C+E*E),h=Math.sqrt(h),g=Math.atan2(E,C),g/=2,m=f=h*Math.cos(g),p=h*Math.sin(g),y=-p);let M=[];0===d+p&&M.push((c+f)/2-x),0===-p+d&&M.push(c/2-(x+f/2)),0===-d+y&&M.push(m/2-(x+c/2)),0===d+y&&M.push(-(x+(c+m)/2));let k={},O=[];for(let t=0,e=M.length;t<e;t++)k[M[t]]||(O.push(M[t]),k[M[t]]=!0);return!!O.length&&O}(t,e,n,i,r);if(!s)return s;let a=s.filter((function(t){return t>=0&&t<=1}));return!!a.length&&a}function J(t,e,n,i,r){let a=s.a.quadraticBezier(t,e,n),o={x:Math.min(i.x,r.x),y:Math.min(i.y,r.y),width:Math.abs(i.x-r.x),height:Math.abs(i.y-r.y)};if(_(a,o)){let s=A(t,e,n,i,r);if(s)return s.filter((function(t){return Object(v.c)(o,t,!0)}))}return!1}function tt(t){return 31*(31*t.x+t.y)}function et(t,e,n,i,r,a){let o,l=[];Object(M.a)(t,(function(t,u,h,c,d){"L"===t?"L"===e?o=C(n,i,u,h):"Q"===e&&(o=J(n,i,r,u,h)):"Q"===t&&("L"===e?o=J(u,h,c,n,i):"Q"===e&&(o=function(t,e,n,i,r,a){if(_(s.a.quadraticBezier(t,e,n),s.a.quadraticBezier(i,r,a))){let s,o,l,u,h=[t.x+n.x-2*e.x,2*(e.x-t.x),t.x-i.x,i.x+a.x-2*r.x,2*(r.x-i.x)],c=[t.y+n.y-2*e.y,2*(e.y-t.y),t.y-i.y,i.y+a.y-2*r.y,2*(r.y-i.y)],d=!1;if(0!==h[3]&&0!==c[3]?(s=w(x(h,c[3]),x(c,h[3])),0===s[4]?d=O.apply(this,s):(s=x(s,1/s[4]),l=x([Math.pow(s[0],2),2*s[0]*s[1],2*s[0]*s[2]+Math.pow(s[1],2),2*s[1]*s[2],Math.pow(s[2],2)],c[3]),o=x([0,0,s[0],s[1],s[2]],c[4]),u=b(l,o),u[2]=u[2]-c[0],u[3]=u[3]-c[1],u[4]=u[4]-c[2],d=Q.apply(this,u))):0===h[3]&&0===c[3]?0!==h[4]&&0!==c[4]?(s=w(x(h,c[4]),x(c,h[4])),d=O.apply(this,s)):0===h[4]?d=O.apply(this,h):0===c[4]&&(d=O.apply(this,c),s=h,h=c,c=s):(0===c[3]&&(s=h,h=c,c=s),0===h[4]?d=O.apply(this,h):(s=x(h,1/h[4]),l=x([Math.pow(s[0],2),2*s[0]*s[1],2*s[0]*s[2]+Math.pow(s[1],2),2*s[1]*s[2],Math.pow(s[2],2)],c[3]),o=x([0,0,s[0],s[1],s[2]],c[4]),u=b(l,o),u[2]=u[2]-c[0],u[3]=u[3]-c[1],u[4]=u[4]-c[2],d=Q.apply(this,u))),d){let s,o,l,u,f;for(let p=d.length-1;p>=0;p--)if(s=d[p],o=O(c[3]-h[3],c[4]-h[4],h[0]*Math.pow(s,2)+h[1]*s+h[2]-(c[0]*Math.pow(s,2)+c[1]*s+c[2])),o){for(let h=o.length-1;h>=0;h--)l=o[h],u=t.x*Math.pow(1-s,2)+2*e.x*s*(1-s)+n.x*Math.pow(s,2),f=i.x*Math.pow(1-l,2)+2*r.x*l*(1-l)+a.x*Math.pow(l,2),.001<Math.abs(u-f)&&o.splice(h,1);o.length||d.splice(p,1)}else d.splice(p,1);return!!d.length&&d.sort((function(t,e){return t-e})).map((function(i){return Object(v.a)({x:t.x*Math.pow(1-i,2)+2*e.x*i*(1-i)+n.x*Math.pow(i,2),y:t.y*Math.pow(1-i,2)+2*e.y*i*(1-i)+n.y*Math.pow(i,2)})}))}}return!1}(u,h,c,n,i,r))),o&&(l=l.concat(o.map((function(t){return t.index0=a,t.index1=d,t}))))}));let u={};for(let t=l.length-1;t>=0;t--){let e=l[t];u[tt(e)]?l.splice(t,1):u[tt(e)]=!0}return!!l.length&&l}["addSupport","move","getSize","getLayer","addLayer","removeLayer","getShapeIn","clearShapes"].forEach((function(t){Z.prototype[t]=function(...e){return this.painter[t].apply(this.painter,e)}})),H.a.mixin(Z.prototype);var nt=n(14);function it(t,e,n,i){if(_(n=n||s.a.computePath(t),i=i||s.a.computePath(e))){let n=function(t,e){let n,i=[];return Object(M.a)(t,(function(t,r,s,a,o){"L"===t?n=et(e,"L",r,s,0,o):"Q"===t&&(n=et(e,"Q",r,s,a,o)),n&&(i=i.concat(n))})),!!i.length&&i}(t,e);if(!n){if(P(t,e[0]))return 2;if(P(e,t[0]))return 3}return nt.a.removeOverlapPoints(n)}return!1}function rt(t,e){if(1===t.length)return t[0];let n=t.map((function(t){let e=s.a.computePath(t.points);return t._bound=e,t._size=e.width*e.height,t})).sort((function(t,e){return t._size-e._size})),i=n[0],r=n[n.length-1],a=it(i.points,r.points,i._bound,r._bound),o=i;if(2===a)o=r;else if(3===a)o=i;else if(e&&Math.abs(i._size-r._size)/i._size<.01){let t=i._bound.x+i._bound.width/2,n=i._bound.y+i._bound.height/2,s=r._bound.x+r._bound.width/2,a=r._bound.y+r._bound.height/2;Math.pow(e.x-s,2)+Math.pow(e.y-a,2)>Math.pow(e.x-t,2)+Math.pow(e.y-n,2)&&(o=r)}return t.forEach((function(t){delete t._bound,delete t._size})),o}class st{constructor(t={}){this.options=t}setRender(t){return this.render=t,t.capture.on("down",(function(e){let n=t.getLayer("cover").getShapeIn(e);n?t.selectedShape=n[0]:(n=t.getLayer("font").getShapeIn(e),n.length>1?t.selectedShape=rt(n,e):t.selectedShape=n[0]),t.camera.x=e.x,t.camera.y=e.y})),t.capture.on("drag",(function(e){let n=t.selectedShape;n?t.getLayer(n.layerId).move(e.x-t.camera.x,e.y-t.camera.y,n).refresh():t.move(e.x-t.camera.x,e.y-t.camera.y).refresh(),t.camera.x=e.x,t.camera.y=e.y})),t.capture.on("dragend",(function(e){let n=t.selectedShape;n?(t.getLayer(n.layerId).move(e.x-t.camera.x,e.y-t.camera.y,n).refresh(),t.selectedShape=null):t.painter.refresh()})),this}dispose(){this.render&&this.render.dispose(),this.options=this.render=null}}var at={create(t,e={}){let n=new Z(t,e),i=e.controller;return delete e.controller,i||(i=new st),i.setRender(n),n}},ot=n(8);const lt={left:[-1,0],right:[1,0],up:[0,-1],down:[0,1]};function ut(t){if(!this.curPoint)return;if(!1===t.returnValue)return;this.contextMenu.hide();let e=t.command,n=this.curShape,i=n.points,r=+this.curPoint.pointId;if("add"===e){let t=i[r],e=i[r===i.length-1?0:r+1],n={x:(t.x+e.x)/2,y:(t.y+e.y)/2,onCurve:!0};i.splice(r+1,0,n)}else if("remove"===e)i.splice(r,1);else if("onCurve"===e)i[r].onCurve=!0;else if("offCurve"===e)delete i[r].onCurve;else if("asStart"===e)n.points=i.slice(r).concat(i.slice(0,r));else if(this.supportCommand(e))return void this.execCommand(e);ht.call(this,n),delete this.curPoint,this.fontLayer.refresh(),this.fire("change")}function ht(t){let e=[],n=t.points.length-1,i=h.a.clone(t),r=this.options.coverLayer;i.id="cover-"+t.id,i.selectable=!1,i.style={strokeColor:r.outlineColor},i.points.forEach((function(t,i){let s={type:t.onCurve?"point":"cpoint",x:t.x,y:t.y,point:t,pointId:i,style:{fill:!0,stroke:!0,strokeColor:r.strokeColor,fillColor:r.fillColor}};0===i?(s.style.strokeColor="blue",s.style.fillColor="blue",s.style.strokeWidth=2):i===n&&(s.style.strokeColor="red",s.style.fillColor="red",s.style.strokeWidth=2),e.push(s)}));let s=this.coverLayer;s.clearShapes(),s.addShape(i),e.forEach((function(t){s.addShape(t)})),this.curShape=t,s.refresh()}var ct={down(t){this.curPoint&&this.curPoint._style&&(this.curPoint.style=h.a.clone(this.curPoint._style)),delete this.curPoint;let e=this.coverLayer.getShapeIn(t);if(e){if(this.curPoint=e[0],this.curPoint._style=h.a.clone(this.curPoint.style),this.curPoint.style.fillColor=this.options.coverLayer.outlineColor,this.sorption.isEnable()&&this.sorption.enableShape){let t=[],e=[];this.curShape.points.forEach((function(n){t.push(n.x),e.push(n.y)})),this.referenceLineLayer.shapes.forEach((function(n){void 0!==n.p0.x&&t.push(n.p0.x),void 0!==n.p0.y&&e.push(n.p0.y)})),this.sorption.clear(),t.length&&this.sorption.addXAxis(t),e.length&&this.sorption.addYAxis(e)}this.coverLayer.refresh()}},drag(t){let e=this.render.camera;if(this.curPoint){let n=this.curPoint,i=this.curShape.points[n.pointId];if(e.event.altKey?n.x=i.x:n.x=i.x+e.event.deltaX,e.event.shiftKey?n.y=i.y:n.y=i.y+e.event.deltaY,this.sorption.isEnable()){let t;(t=this.sorption.detectX(n.x))&&(n.x=t.axis),(t=this.sorption.detectY(n.y))&&(n.y=t.axis)}n.point.x=n.x,n.point.y=n.y;{this.tipTextPoint||(this.tipTextPoint=this.coverLayer.addShape("text",Object.assign({text:""},this.options.tipText)));let e=this.getPointCoordinate(n);this.tipTextPoint.text=e.x+","+e.y,this.tipTextPoint.x=t.x+16,this.tipTextPoint.y=t.y+16,this.coverLayer.refresh()}}},dragend(){if(this.tipTextPoint&&(this.coverLayer.removeShape(this.tipTextPoint),this.tipTextPoint=null,this.coverLayer.refresh()),this.curPoint){let t=this.curShape.points[this.curPoint.pointId];t.x=this.curPoint.x,t.y=this.curPoint.y,this.sorption.isEnable()&&this.sorption.clear(),this.fontLayer.refresh()}this.fire("change")},move(t){this.coverLayer.getShapeIn(t)?this.render.setCursor("pointer"):this.render.setCursor("default")},rightdown(t){this.curPoint&&(this.contextMenu.onClick=ut.bind(this),this.contextMenu.show(t,ot.a.point))},keyup(t){"delete"===t.key&&this.curPoint?ut.call(this,{command:"remove"}):lt[t.key]&&this.curPoint?this.fire("change"):"esc"===t.key&&this.setMode()},keydown(t){if(lt[t.key]&&this.curPoint){let e=lt[t.key],n=this.curPoint;e[0]&&(n.x+=e[0]),e[1]&&(n.y+=e[1]);let i=this.curShape.points[n.pointId];i.x=n.point.x=n.x,i.y=n.point.y=n.y,this.coverLayer.refresh(),this.fontLayer.refresh()}},begin(t){ht.call(this,t)},end(){delete this.curPoint,delete this.curShape,this.coverLayer.clearShapes(),this.coverLayer.refresh(),this.render.setCursor("default")}};function dt(t){let e=this.fontLayer.shapes,n=[];return e.forEach((function(e){let i=s.a.computePath(e.points);3===_(t,i)&&n.push(e)})),!!n.length&&n}const ft={down(t){1===t.which&&ft.begin.call(this,t)},drag(t){if(1===t.which&&this.selectionBox){let t=this.render.camera;this.selectionBox.width=t.x-this.selectionBox.x,this.selectionBox.height=t.y-this.selectionBox.y,this.coverLayer.refresh()}},up(t){if(1===t.which){if(this.selectionBox){let t={x:Math.min(this.selectionBox.x,this.selectionBox.x+this.selectionBox.width),y:Math.min(this.selectionBox.y,this.selectionBox.y+this.selectionBox.height),width:Math.abs(this.selectionBox.width),height:Math.abs(this.selectionBox.height)};if(t.width>=20&&t.height>=20){let e;if(e=dt.call(this,t))return void this.setMode("shapes",e,"range")}}this.setMode()}},begin(){let t=this.render.camera;this.selectionBox={type:"rect",dashed:!0,x:t.x,y:t.y},this.coverLayer.addShape(this.selectionBox)},end(){this.selectionBox=null,this.coverLayer.clearShapes(),this.coverLayer.refresh()}};var pt=ft,gt={drag(t){if(1===t.which){let t=this.render.camera;this.render.move(t.mx,t.my),this.render.refresh()}},keyup(t){32===t.keyCode&&this.setMode("bound")},begin(){this.render.setCursor("pointer")},end(){this.render.setCursor("default")}};const mt={newLine:1,dragLine:2,drag(t){if(1===t.which)if(this.currentLine){let t=this.render.camera,e=this.currentLine;void 0!==e.p0.x?e.p0.x+=t.mx:e.p0.y+=t.my,this.referenceLineLayer.refresh()}else this._dragMode===mt.newLine&&(t.startX<=20&&t.x>20?(this.currentLine=this.referenceLineLayer.addShape("gridarrow",{p0:{x:t.x},axis:this.axis,drawAxisText:!0,style:this.options.referenceline.style}),this._dragMode=mt.dragLine,this.render.setCursor("col-resize")):t.startY<=20&&t.y>20&&(this.currentLine=this.referenceLineLayer.addShape("gridarrow",{p0:{y:t.y},axis:this.axis,drawAxisText:!0,style:this.options.referenceline.style}),this._dragMode=mt.dragLine,this.render.setCursor("row-resize")))},up(t){if(1===t.which){if(this.currentLine){let t=this.currentLine;t===this.rightSideBearing&&t.p0.x<20?(t.p0.x=this.p0.x,this.referenceLineLayer.refresh()):(void 0!==t.p0.x&&t.p0.x<20||void 0!==t.p0.y&&t.p0.y<20)&&this.execCommand("removereferenceline",t)}this.setMode()}},begin(t,e){if(t===mt.dragLine){let t=e;void 0!==t.p0.x?this.render.setCursor("col-resize"):this.render.setCursor("row-resize"),this.currentLine=t,this.p0=h.a.clone(t.p0)}this._dragMode=t},end(){delete this._dragMode,delete this.currentLine,delete this.p0,this.render.setCursor("default")}};var yt=mt,vt={down(t){if(1===t.which){if(t.x<=20||t.y<=20)return void this.setMode("referenceline",yt.newLine,t.x,t.y);let e=this.fontLayer.getShapeIn(t);if(e){let n=rt(e,t);return void this.setMode("shapes",[n],"bound")}if(e=this.referenceLineLayer.getShapeIn(t),e){let n=e[0];return void this.setMode("referenceline",yt.dragLine,n,t)}this.setMode("range")}},keydown(t){32===t.keyCode?this.setMode("pan"):65===t.keyCode&&t.ctrlKey&&this.setMode("shapes",this.fontLayer.shapes.slice())}};function _t(t,e,n,i){let r=e?0:t.x-t.startX,s=n?0:t.y-t.startY,a=this.shapes,o=this.bound,l=this.editor.coverLayer,u=l.getShape("bound");if(i){let t,i,a=o.x+o.width/2,u=o.y+o.height/2,h=this.editor.options.sorption.sorptionColor;if(!e){let e=l.getShape("sorptionX");e||(e=l.addShape({type:"line",id:"sorptionX",style:{strokeColor:h},p0:{},p1:{}}));let n=[this.bound.x,a,this.bound.x+this.bound.width];for(t=0;t<3;t++)if(i=this.editor.sorption.detectX(n[t]+r),i){r=i.axis-n[t],e.p0.x=e.p1.x=i.axis,e.p0.y=u+s,e.p1.y=i.y,e.disabled=!1;break}3===t&&(e.disabled=!0)}if(!n){let e=l.getShape("sorptionY");e||(e=l.addShape({type:"line",id:"sorptionY",style:{strokeColor:h},p0:{},p1:{}}));let n=[this.bound.y,u,this.bound.y+this.bound.height];for(t=0;t<3;t++)if(i=this.editor.sorption.detectY(n[t]+s),i){s=i.axis-n[t],e.p0.x=a+r,e.p1.x=i.x,e.p0.y=e.p1.y=i.axis,e.disabled=!1;break}3===t&&(e.disabled=!0)}}this.coverShapes.forEach((function(t,e){let n=h.a.clone(a[e]);Object(y.a)(n.points,1,1,r,s),Object.assign(t,n)})),u.points=Object(y.a)([{x:o.x,y:o.y},{x:o.x+o.width,y:o.y},{x:o.x+o.width,y:o.y+o.height},{x:o.x,y:o.y+o.height}],1,1,r,s)}const xt=[1,2,3,4];function wt(t,e){let n=function(t,e,n){let i=[0,0,1,1];switch(t){case 1:i[0]=e.x+e.width,i[1]=e.y+e.height,i[2]=-(n.x-i[0])/e.width,i[3]=-(n.y-i[1])/e.height;break;case 2:i[0]=e.x,i[1]=e.y+e.height,i[2]=(n.x-i[0])/e.width,i[3]=-(n.y-i[1])/e.height;break;case 3:i[0]=e.x,i[1]=e.y,i[2]=(n.x-i[0])/e.width,i[3]=(n.y-i[1])/e.height;break;case 4:i[0]=e.x+e.width,i[1]=e.y,i[2]=-(n.x-i[0])/e.width,i[3]=(n.y-i[1])/e.height;break;case 5:i[1]=e.y+e.height,i[2]=1,i[3]=-(n.y-i[1])/e.height;break;case 7:i[1]=e.y,i[3]=(n.y-i[1])/e.height;break;case 6:i[0]=e.x,i[2]=(n.x-i[0])/e.width;break;case 8:i[0]=e.x+e.width,i[2]=-(n.x-i[0])/e.width}return i}(t.pos,this.bound,e);if(xt.indexOf(t.pos)>=0&&!e.event.shiftKey){let t=Math.max(Math.abs(n[2]),Math.abs(n[3]));n[2]=n[2]>=0?t:-t,n[3]=n[3]>=0?t:-t}let i=this.shapes;this.coverShapes.forEach((function(t,e){let r=h.a.clone(i[e]);Object(y.a)(r.points,n[2],n[3],-n[0],-n[1]),Object(y.a)(r.points,1,1,n[0],n[1]),n[2]<0&&n[3]>=0&&(r.points=r.points.reverse()),n[3]<0&&n[2]>=0&&(r.points=r.points.reverse()),Object.assign(t,r)}));let r=this.editor.coverLayer.getShape("bound"),s=this.bound,a=Object(y.a)([{x:s.x,y:s.y},{x:s.x+s.width,y:s.y},{x:s.x+s.width,y:s.y+s.height},{x:s.x,y:s.y+s.height}],n[2],n[3],-n[0],-n[1]);Object(y.a)(a,1,1,n[0],n[1]),r.points=a}function bt(t,e,n,i){let r=function(t,e,n,i){let r=Math.acos((t*n+e*i)/Math.sqrt(t*t+e*e)/Math.sqrt(n*n+i*i));return t*i-n*e<0&&(r=2*Math.PI-r),r}(t,e,n,i),s=(180*r/Math.PI+360)%45;return Math.min(s,45-s)<3&&(r=45*Math.round(180*r/Math.PI/45)*Math.PI/180),r}var St=n(36);function Ct(t,e,n,i){e=void 0===e?0:e;const r=n||0,s=Math.tan(e);let a,o,l;if(0===r)for(o=0,l=t.length;o<l;o++)a=t[o],a.x+=s*(a.y-i);else for(o=0,l=t.length;o<l;o++)a=t[o],a.y+=s*(a.x-n);return t}function Et(t,e){let n=function(t,e,n){let i=[e.x+e.width/2,e.y+e.height/2,0];switch(t){case 1:case 2:case 3:case 4:return i[2]=bt(n.startX-i[0],n.startY-i[1],n.x-i[0],n.y-i[1]),i;case 5:return i[0]=0,i[1]=e.y+e.height,i[2]=bt(0,e.height,n.x-n.startX,e.height),i;case 7:return i[0]=0,i[1]=e.y,i[2]=bt(0,-e.height,n.x-n.startX,-e.height),i;case 6:return i[0]=e.x,i[1]=0,i[2]=bt(e.width,0,e.width,n.y-n.startY),i;case 8:return i[0]=e.x+e.width,i[1]=0,i[2]=bt(-e.width,0,-e.width,n.y-n.startY),i}return i}(t.pos,this.bound,e),i=t.pos<=4?St.a:Ct,r=this.shapes;this.coverShapes.forEach((function(t,e){let s=h.a.clone(r[e]);i(s.points,n[2],n[0],n[1]),Object.assign(t,s)}));let s=this.editor.coverLayer,a=s.getShape("bound"),o=this.bound;a.points=i([{x:o.x,y:o.y},{x:o.x+o.width,y:o.y},{x:o.x+o.width,y:o.y+o.height},{x:o.x,y:o.y+o.height}],n[2],n[0],n[1]);let l=s.getShape("boundcenter");l||(l={type:"cpoint",id:"boundcenter",x:o.x+o.width/2,y:o.y+o.height/2},s.addShape(l)),l.x=(a.points[0].x+a.points[2].x)/2,l.y=(a.points[0].y+a.points[2].y)/2}class Tt{constructor(t){this.layer=t,this.controls=[{id:"bound-point",type:"polygon",dashed:!0,selectable:!1},{},{},{},{},{},{},{},{}]}refresh(t,e){let n=[{points:[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}]},{x:t.x,y:t.y,pos:1},{x:t.x+t.width,y:t.y,pos:2},{x:t.x+t.width,y:t.y+t.height,pos:3},{x:t.x,y:t.y+t.height,pos:4},{x:t.x+t.width/2,y:t.y,pos:5},{x:t.x+t.width,y:t.y+t.height/2,pos:6},{x:t.x+t.width/2,y:t.y+t.height,pos:7},{x:t.x,y:t.y+t.height/2,pos:8}],i=this.controls;n.forEach((function(t,n){n>0&&("rotate"===e&&n<=4?(t.type="cpoint",t.size=3):(t.type="point",t.size=6)),Object.assign(i[n],t)})),this.show()}show(){let t=this.layer;t.getShape("bound-point")||this.controls.forEach((function(e){t.addShape(e)})),t.refresh()}hide(){let t=this.layer;t.getShape("bound-point")&&this.controls.forEach((function(e){t.removeShape(e)})),t.refresh()}dispose(){this.hide(),this.layer.refresh(),this.controls.length=0,this.controls=this.layer=null}}function Mt(t){return s.a.computePath.apply(null,t.map((function(t){return t.points})))}class kt{constructor(t,e){this.editor=e,this.boundControl=new Tt(e.coverLayer),this.setShapes(t)}beginTransform(t,e){if(this.bound=Mt(this.shapes),this.editor.coverLayer.addShape({id:"bound",type:"polygon",dashed:!0,selectable:!1,points:[]}),this.boundControl.hide(),"move"===this.mode&&this.editor.sorption.isEnable()&&this.editor.sorption.enableShape){let t=[],e=this.shapes,n=this.bound;t.push({points:[{x:n.x,y:n.y,onCurve:!0},{x:n.x+n.width,y:n.y+n.height,onCurve:!0}]}),this.editor.fontLayer.shapes.forEach((function(n){e.indexOf(n)<0&&t.push(n)}));let i=this.editor.referenceLineLayer.shapes,r=[],s=[];i.forEach((function(t){void 0!==t.p0.x&&r.push(t.p0.x),void 0!==t.p0.y&&s.push(t.p0.y)})),this.editor.sorption.clear(),t.length&&this.editor.sorption.addShapes(t),r.length&&this.editor.sorption.addXAxis(r),s.length&&this.editor.sorption.addYAxis(s)}}transform(t,e,n){"move"===this.mode?_t.call(this,e,!n.ctrlKey&&n.altKey,!n.ctrlKey&&n.shiftKey,this.editor.sorption.isEnable()):"scale"===this.mode?wt.call(this,t,e):"rotate"===this.mode&&Et.call(this,t,e)}finishTransform(t,e,n){let i=this.coverShapes;this.coverShapes=this.shapes,this.transform(t,e,n),this.coverShapes=i,delete this.bound,this.editor.coverLayer.removeShape("bound"),this.editor.coverLayer.removeShape("boundcenter"),this.editor.fontLayer.refresh(),"move"===this.mode&&this.editor.sorption.isEnable()&&(this.editor.coverLayer.removeShape("sorptionX"),this.editor.coverLayer.removeShape("sorptionY"),this.editor.sorption.clear()),this.refresh()}setShapes(t){let e=this.editor.coverLayer;this.shapes&&(this.shapes=null),this.coverShapes&&(this.coverShapes.forEach((function(t){e.removeShape(t)})),this.coverShapes=null),this.shapes=t,this.coverShapes=h.a.clone(this.shapes);let n=this.editor.options.coverLayer.outlineColor;this.coverShapes.forEach((function(t){t.id="cover-"+t.id,t.selectable=!1,t.style={strokeColor:n},e.addShape(t)}))}getBound(){return!!this.shapes.length&&Mt(this.shapes)}setMode(t){this.mode=t}move(t,e){this.shapes.forEach((function(n){Object(y.a)(n.points,1,1,t,e)})),this.editor.fontLayer.refresh(),this.editor.coverLayer.move(t,e)}refresh(){this.boundControl.refresh(Mt(this.shapes),this.mode)}dispose(){this.editor.coverLayer.clearShapes(),this.boundControl.dispose(),this.shapes=this.coverShapes=this.boundControl=this.editor=null}}var Ot={scale:{1:"nw-resize",2:"ne-resize",3:"se-resize",4:"sw-resize",5:"s-resize",6:"e-resize",7:"n-resize",8:"w-resize"},rotate:{1:"pointer",2:"pointer",3:"pointer",4:"pointer",5:"e-resize",6:"s-resize",7:"w-resize",8:"n-resize"}};const At={left:[-1,0],right:[1,0],up:[0,-1],down:[0,1]};function Pt(t){if(!this.currentGroup.shapes.length)return;this.contextMenu.hide();let e=t.command,n=t.args,i=this.currentGroup.shapes;switch(e){case"topshape":case"bottomshape":case"upshape":case"downshape":this.execCommand(e,i[0]);break;case"joinshapes":case"intersectshapes":case"tangencyshapes":case"rotateleft":case"rotateright":case"flipshapes":case"mirrorshapes":case"cutshapes":case"copyshapes":case"removeshapes":case"reversepoints":this.execCommand(e,i);break;case"alignshapes":case"verticalalignshapes":case"horizontalalignshapes":this.execCommand(e,i,n.align);break;case"addreferenceline":let t=this.currentGroup.getBound();t&&(this.execCommand(e,t.x,t.y),this.execCommand(e,t.x+t.width,t.y+t.height));break;default:this.supportCommand(e)&&this.execCommand(e)}}var It={point:ct,range:pt,pan:gt,default:vt,shapes:{down(t){let e=this.render,n=e.getLayer("cover").getShapeIn(t);if(n)this.currentPoint=h.a.clone(n[0]);else{if(this.currentPoint=null,n=e.getLayer("font").getShapeIn(t),n){let e=n[0];n.length>1&&(e=rt(n,t));let i=this.currentGroup.shapes.indexOf(e);if(i>=0)return void(t.ctrlKey&&!t.altKey&&(this.currentGroup.shapes.splice(i,1),this.refreshSelected(this.currentGroup.shapes.slice(0)),this.clicked=!1));let r=[e];return t.ctrlKey&&(r=r.concat(this.currentGroup.shapes)),this.currentGroup.setMode("scale"),this.refreshSelected(r),void(this.clicked=!1)}this.setMode("range")}},dragstart(t){if(this.currentPoint)this.currentGroup.beginTransform(this.currentPoint,this.render.camera,t);else{if(t.ctrlKey&&t.altKey){let t=h.a.clone(this.currentGroup.shapes),e=this.fontLayer;t.forEach((function(t){t.id=r("shape"),e.addShape(t)})),this.currentGroup.setShapes(t)}this.currentGroup.setMode("move"),this.currentGroup.beginTransform(this.currentPoint,this.render.camera,t)}},drag(t){if(this.currentGroup){if(this.currentGroup.transform(this.currentPoint,this.render.camera,t),"scale"===this.currentGroup.mode||"rotate"===this.currentGroup.mode){this.tipTextPoint||(this.tipTextPoint=this.coverLayer.addShape("text",Object.assign({text:""},this.options.tipText)));let e=function(t,e){switch(t){case 1:return e[0];case 2:return e[1];case 3:return e[2];case 4:return e[3];case 5:return{x:(e[0].x+e[1].x)/2,y:(e[0].y+e[1].y)/2};case 6:return{x:(e[1].x+e[2].x)/2,y:(e[1].y+e[2].y)/2};case 7:return{x:(e[2].x+e[3].x)/2,y:(e[2].y+e[3].y)/2};case 8:return{x:(e[0].x+e[3].x)/2,y:(e[0].y+e[3].y)/2}}return e[3]}(this.currentPoint?this.currentPoint.pos:9,this.coverLayer.getShape("bound").points),n=this.getPointCoordinate(e);this.tipTextPoint.text=n.x+","+n.y,this.tipTextPoint.x=t.x+16,this.tipTextPoint.y=t.y+16}this.coverLayer.refresh()}},dragend(t){this.tipTextPoint&&(this.coverLayer.removeShape(this.tipTextPoint),this.tipTextPoint=null,this.coverLayer.refresh()),this.currentPoint?(this.currentGroup.finishTransform(this.currentPoint,this.render.camera,t),this.currentPoint=null,this.fire("change")):"move"===this.currentGroup.mode&&(this.currentGroup.finishTransform(this.currentPoint,this.render.camera,t),this.currentGroup.setMode("scale"),this.fire("change")),this.render.setCursor("default")},move(t){let e=this.coverLayer.getShapeIn(t),n=this.currentGroup.mode;e&&"move"!==n?this.render.setCursor(Ot[this.currentGroup.mode][e[0].pos]||"default"):this.render.setCursor("default")},rightdown(t){this.contextMenu.onClick=Pt.bind(this),this.contextMenu.show(t,this.currentGroup.shapes.length>1?ot.a.shapes:ot.a.shape)},click(t){if(this.clicked){let t=this.currentGroup.mode;this.currentGroup.setMode("scale"===t?"rotate":"scale"),this.currentGroup.refresh()}this.clicked=!0},keyup(t){"delete"===t.key?(this.execCommand("removeshapes",this.currentGroup.shapes),this.setMode()):65===t.keyCode&&t.ctrlKey?(this.currentGroup.setShapes(this.fontLayer.shapes.slice()),this.currentGroup.refresh()):At[t.key]?this.fire("change"):"esc"===t.key&&this.setMode()},keydown(t){88===t.keyCode&&t.ctrlKey?this.currentGroup.shapes.length&&this.execCommand("cutshapes",this.currentGroup.shapes):67===t.keyCode&&t.ctrlKey&&this.currentGroup.shapes.length&&this.execCommand("copyshapes",this.currentGroup.shapes),At[t.key]&&(this.currentGroup.move(At[t.key][0],At[t.key][1]),this.coverLayer.refresh())},begin(t,e){this.currentGroup=new kt(t,this),this.currentGroup.refresh(),this.currentGroup.setMode("scale"),this.clicked="bound"!==e&&"addpath"!==e,this.fire("selection:change",{shapes:t})},end(){this.currentPoint=null,this.currentGroup.dispose(),this.currentGroup=null,this.render.setCursor("default"),this.fire("selection:change")}},addshapes:{down(t){if(1===t.which){this.coverLayer.clearShapes();for(let t=0,e=this.curShapes.length;t<e;t++)this.coverLayer.addShape("path",{points:[]});this.curBound=s.a.computePath.apply(null,this.curShapes)}},drag(t){if(1===t.which&&this.curShapes){let e=t.startX,n=t.startY,i=t.x-t.startX,r=t.y-t.startY,s=i/this.curBound.width,a=r/this.curBound.height;if(t.shiftKey){let t=Math.min(Math.abs(s),Math.abs(a));s=s>0?t:-t,a=a>0?t:-t}let o=this.curShapes,l=this.coverLayer.shapes;for(let t=0,i=o.length;t<i;t++){let i=h.a.clone(o[t]);Object(y.a)(i,s,a),Object(y.a)(i,1,1,e,n),l[t].points=i}this.coverLayer.refresh()}},dragend(t){if(1===t.which){if(this.curShapes){let t=this.fontLayer,e=h.a.clone(this.coverLayer.shapes);for(let n=0,i=e.length;n<i;n++)t.addShape(e[n]);return t.refresh(),this.fire("change"),void this.setMode("shapes",e)}this.setMode()}},begin(t){this.render.setCursor("crosshair"),this.curShapes=t},end(){this.curShapes=this.curBound=null,this.coverLayer.clearShapes(),this.coverLayer.refresh(),this.render.setCursor("default")}},addpath:{down(t){let e=this.coverLayer,n=e.getShapeIn(t);if(n[0]&&this.points.length>1&&n[0]===this.points[0]){let t=this.points.map((function(t){let e={x:t.x,y:t.y};return t.onCurve&&(e.onCurve=!0),e})),e=this.fontLayer.addShape("path",{points:t});this.fontLayer.refresh(),this.fire("change"),this.setMode("shapes",[e],"addpath")}else{let n=t.x,i=t.y;if(this.points.length){let e=this.points[this.points.length-1];t.shiftKey&&(i=e.y),t.altKey&&(n=e.x)}let r=e.addShape({type:"point",x:n,y:i,onCurve:!0});if(this.points.push(r),1===this.points.length)r.style={strokeColor:"red"};else{let t=this.points[this.points.length-2];t.onCurve?e.addShape({type:"line",p0:{x:t.x,y:t.y},p1:{x:r.x,y:r.y}}):e.addShape({type:"beziercurve",points:this.points.slice(this.points.length-3)})}this.dashedLine.p0.x=r.x,this.dashedLine.p0.y=r.y,e.refresh()}this.downMouse=!0},up(t){this.downMouse=!1,this.curCurve&&(this.curCurve=null,this.points.push({x:t.x,y:t.y,onCurve:!1}))},move(t){let e=this.coverLayer.getShapeIn(t);e[0]&&e[0]===this.points[0]?this.render.setCursor("pointer"):this.render.setCursor("crosshair");let n=this.points,i=t.x,r=t.y,s=n[n.length-1];if((t.shiftKey||t.altKey)&&n.length&&(t.shiftKey&&(r=s.y),t.altKey&&(i=s.x)),this.downMouse&&n.length>=2){let t=n[n.length-2];!this.curCurve&&t.onCurve?(n.splice(n.length-1,0,{x:2*s.x-i,y:2*s.y-r,onCurve:!1}),this.coverLayer.shapes.splice(this.coverLayer.shapes.length-1,1),this.curCurve=this.coverLayer.addShape({type:"beziercurve",points:n.slice(n.length-3)})):(t.x=2*s.x-i,t.y=2*s.y-r),this.dashedLine.disabled=!0,this.coverLayer.refresh()}else n.length&&(this.dashedLine.p1.x=i,this.dashedLine.p1.y=r,this.dashedLine.disabled=!1,this.coverLayer.refresh())},undo(t){if(this.points.length){let t=this.points,e=this.coverLayer.shapes,n=t[t.length-1],i=t[t.length-2];if(n&&!n.onCurve?(t.splice(t.length-3,3),e.splice(e.length-2,2)):i&&!i.onCurve?(t.splice(t.length-2,2),e.splice(e.length-2,2)):(t.splice(t.length-1,1),e.splice(e.length-2,2)),t.length){let e=t[t.length-1];this.dashedLine.p0.x=e.x,this.dashedLine.p0.y=e.y}else this.dashedLine.disabled=!0;this.coverLayer.refresh()}},begin(){this.coverLayer.clearShapes(),this.points=[],this.dashedLine=this.coverLayer.addShape({type:"line",dashed:!0,disabled:!0,selectable:!1,p0:{},p1:{}}),this.render.setCursor("crosshair")},end(){this.points=this.dashedLine=this.downMouse=this.curCurve=null,this.coverLayer.clearShapes(),this.coverLayer.refresh(),this.render.setCursor("default")}},split:{down(t){1===t.which&&(this.coverLayer.clearShapes(),this.splitLine=this.coverLayer.addShape({type:"line",p0:{x:t.x,y:t.y},p1:{x:t.x,y:t.y}}))},move(t){1===t.which&&this.splitLine&&(this.splitLine.p1.x=t.x,this.splitLine.p1.y=t.y,t.shiftKey&&(this.splitLine.p1.y=this.splitLine.p0.y),t.altKey&&(this.splitLine.p1.x=this.splitLine.p0.x),this.coverLayer.refresh())},up(t){if(1===t.which){if(this.splitLine){let t=this.splitLine.p0,e=this.splitLine.p1;if((Math.abs(t.x-e.x)>=20||Math.abs(t.y-e.y)>=20)&&!1!==this.execCommand("splitshapes",t,e))return}this.setMode()}},begin(){},end(){delete this.splitLine,this.coverLayer.clearShapes(),this.coverLayer.refresh()}},referenceline:yt};class Dt{constructor(t,e){this.container=t||document.body,this.main=function(t,e){let n=document.createElement("ul");return n.className=e.className||"editor-contextmenu",n.style.position="absolute",n.style.zIndex=e.zIndex||1e3,n.style.display="none",t.appendChild(n),n}(this.container,e||{}),this.commands={};let n=this;n._commandClick=function(t){let e=t.target.getAttribute("data-id"),i=t.target.getAttribute("data-super");if(e){let t=(i?n.commands[i].items:n.commands)[e],r={command:t.name,args:t,pos:n.pos};n.onClick&&n.onClick(r)}},n.main.addEventListener("click",n._commandClick,!1),n._hideClick=function(){n.hide()}}setCommands(t){let e="";t.forEach((function(t,n){t.items?(e+='<li data-sub="'+n+'">',e+="<ul>",t.items.forEach((function(t,i){e+='<li data-super="'+n+'" data-id="'+i+'"'+(t.selected?' data-tag="selected"':"")+">"+t.title+"</li>"})),e+="</ul>",e+=t.title+"</li>"):e+='<li data-id="'+n+'"'+(t.selected?' data-tag="selected"':"")+">"+t.title+"</li>"})),this.commands=t,this.main.innerHTML=e}show(t,e){e&&this.setCommands(e),this._visible=!0,this.main.style.display="block";let n=this.container.clientWidth,i=this.container.clientHeight,r=this.main.offsetWidth,s=this.main.offsetHeight,a=t.x+r>n?n-r:t.x,o=t.y+s>i?i-s:t.y;this.main.style.left=a+"px",this.main.style.top=o+"px",this.pos=t,this.container.addEventListener("click",this._hideClick)}hide(){this._visible=!1,this.main.style.display="none",this.onClick=null,this.container.removeEventListener("click",this._hideClick)}visible(){return null==this._visible?this._visible="none"!==this.main.style.display:this._visible}dispose(){this.hide(),this.main.removeEventListener("click",this._commandClick),this.container.removeEventListener("click",this._hideClick),this._commandClick=this._hideClick=null,this.main.remove(),this.main=this.container=this.pos=null,this.onClick=null}}var Lt=n(18),Nt={removeshapes(t){let e=this.fontLayer;t.forEach((function(t){e.removeShape(t)})),e.refresh(),this.refreshSelected([]),this.setMode()},reversepoints(t){t.forEach((function(t){t.points=t.points.reverse()})),this.fontLayer.refresh()},topshape(t){let e=this.fontLayer.shapes.indexOf(t);this.fontLayer.shapes.splice(e,1),this.fontLayer.shapes.push(t)},bottomshape(t){let e=this.fontLayer.shapes.indexOf(t);this.fontLayer.shapes.splice(e,1),this.fontLayer.shapes.unshift(t)},upshape(t){let e=this.fontLayer.shapes.indexOf(t);this.fontLayer.shapes.splice(e,1),this.fontLayer.shapes.splice(e+1,0,t)},downshape(t){let e=this.fontLayer.shapes.indexOf(t);this.fontLayer.shapes.splice(e,1),this.fontLayer.shapes.splice(e-1,0,t)},cutshapes(t){let e=this.getShapes(t);this.setClipBoard(e);let n=this.fontLayer;t.forEach((function(t){n.removeShape(t)})),n.refresh(),this.refreshSelected([])},copyshapes(t){t=this.getShapes(t),this.setClipBoard(t)},pasteshapes(t,e){if(!t||!t.length)return!1;if(e){let n=t.map((function(t){return t.points})),i=this.axis,r=this.render.camera.scale,s=(e.x-i.x)/r,a=(i.y-e.y)/r;Lt.a.move(n,s,a)}this.addShapes(t),this.setMode("shapes",t)},addshapes(t,e){this.addShapes(t),e&&this.setSelected(t)},addcontours(t,e={}){e.flip&&Lt.a.flip(t),e.mirror&&Lt.a.mirror(t);let n=this.addContours(t,e.scale);e.selected&&this.setSelected(n)}};const Rt={rotate(t,e){if(!t||!t.length)return!1;let n=function(t,e){if(!e)return!1;let n=t.map((function(t){return t.points}));Lt.a.rotate(n,e)}(t,e);return!1!==n&&(this.fontLayer.refresh(),this.refreshSelected(t)),n},rotateleft(t){return t=t||this.currentGroup&&this.currentGroup.shapes,Rt.rotate.call(this,t,-Math.PI/2)},rotateright(t){return t=t||this.currentGroup&&this.currentGroup.shapes,Rt.rotate.call(this,t,Math.PI/2)},flipshapes(t){if(!(t=t||this.currentGroup&&this.currentGroup.shapes)||!t.length)return!1;Lt.a.flip(t.map((function(t){return t.points}))),this.fontLayer.refresh(),this.refreshSelected(t)},mirrorshapes(t){if(!(t=t||this.currentGroup&&this.currentGroup.shapes)||!t.length)return!1;Lt.a.mirror(t.map((function(t){return t.points}))),this.fontLayer.refresh(),this.refreshSelected(t)}};var zt=Rt,Ut={alignshapes(t,e){if(!(t=t||this.currentGroup&&this.currentGroup.shapes)||!t.length)return!1;let n,i,r=t.map((function(t){return t.points})),a=s.a.computePath.apply(null,r);a.x1=a.x+a.width,a.y1=a.y+a.height,a.xc=a.x+a.width/2,a.yc=a.y+a.height/2,r.forEach((function(t){let r=s.a.computePath(t);n=0,i=0,"left"===e?n=a.x-r.x:"center"===e?n=a.xc-r.x-r.width/2:"right"===e?n=a.x1-r.x-r.width:"top"===e?i=a.y-r.y:"middle"===e?i=a.yc-r.y-r.height/2:"bottom"===e&&(i=a.y1-r.y-r.height),Object(y.a)(t,1,1,n,i)})),this.fontLayer.refresh(),this.refreshSelected(t)},verticalalignshapes(t,e){if(!(t=t||this.currentGroup&&this.currentGroup.shapes)||!t.length)return!1;let n=t.map((function(t){return t.points})),i=this.axis.metrics,r=this.axis.y,a=r-i.ascent,o=r-i.descent,l=(a+o)/2,u=s.a.computePath.apply(null,n),h=0;"ascent"===e?h=a-u.y:"middle"===e?h=l-u.y-u.height/2:"descent"===e?h=o-u.y-u.height:"baseline"===e&&(h=r-u.y-u.height),n.forEach((function(t){Object(y.a)(t,1,1,0,h)})),this.fontLayer.refresh(),this.refreshSelected(t)},horizontalalignshapes(t,e){if(!(t=t||this.currentGroup&&this.currentGroup.shapes)||!t.length)return!1;let n=t.map((function(t){return t.points})),i=this.axis.x,r=this.rightSideBearing.p0.x,a=s.a.computePath.apply(null,n),o=0;"left"===e?o=i-a.x:"center"===e?o=(i+r)/2-a.x-a.width/2:"right"===e&&(o=r-a.x-a.width),n.forEach((function(t){Object(y.a)(t,1,1,o,0)})),this.fontLayer.refresh(),this.refreshSelected(t)}},jt=n(17),Ft=n(22),Bt=n(41),$t=n(15),Xt=n.n($t);const Ht={intersect:0,join:1,differ:2,tangency:3};function Gt(t){let e=Object(jt.a)(t);return new Xt.a.CompoundPath(e)}function qt(t,e){if(t.length<2)return t;Xt.a.project||Xt.a.setup(document.createElement("canvas"));let n,i=Gt(t.slice(0,t.length-1)),r=Gt(t.slice(t.length-1));e===Ht.intersect?n=i.intersect(r):e===Ht.join?n=i.unite(r):e===Ht.differ?n=i.subtract(r):e===Ht.tangency&&(n=i.exclude(r));let s=n?function(t){let e=t.getPathData();return Object(Ft.a)(e)}(n):t;Xt.a.clear();for(let t=0,e=s.length;t<e;t++)s[t]=nt.a.deInterpolate(s[t]),s[t]=Object(Bt.a)(s[t]);return s}function Vt(t,e,n){Xt.a.project||Xt.a.setup(document.createElement("canvas"));let i=function(t){let e=Object(jt.a)(t);return new Xt.a.CompoundPath(e)}(t),r=new Xt.a.Path({segments:[[e.x,e.y],[n.x,n.y]],closed:!1}),s=i.getIntersections(r);if(!s||!s.length)return t;s.forEach((function(t){t.split()})),i.children.forEach((function(t){t.segments[0].clearHandles(),t.segments[t.segments.length-1].clearHandles(),t.closePath()})),i.resolveCrossings().reorient();let a=function(t){let e=t.getPathData();return Object(Ft.a)(e)}(i);Xt.a.clear();for(let t=0,e=a.length;t<e;t++)a[t]=nt.a.deInterpolate(a[t]),a[t]=Object(Bt.a)(a[t]);return a}function Wt(t,e,n){return!(!Object(v.c)(t,e)&&!Object(v.c)(t,n))||!!(C(t,{x:t.x,y:t.y+t.height},e,n)||C(t,{x:t.x+t.width,y:t.y},e,n)||C({x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},e,n)||C({x:t.x,y:t.y+t.height},{x:t.x+t.width,y:t.y+t.height},e,n))}function Yt(t,e){let n,i,r=t.map((function(t){return t.points})),s=qt(r,e),a=!1;if(s.length===r.length){for(n=0,i=s.length;n<i;n++)if(s[n]!==r[n]){a=!0;break}}else a=!0;if(a){let e=this.fontLayer,i=s.length,r=t.length,a=Math.min(i,r);for(n=0;n<a;n++)t[n].points=h.a.clone(s[n]);if(r>a){for(n=a;n<r;n++)e.removeShape(t[n]);t.splice(a,r-a)}if(i>a)for(n=a;n<i;n++){let i=e.addShape("path",{points:s[n]});t.push(i)}e.refresh()}return t}qt.Relation=Ht;var Zt={joinshapes(t){Yt.call(this,t,qt.Relation.join),this.refreshSelected(t)},intersectshapes(t){Yt.call(this,t,qt.Relation.intersect),this.refreshSelected(t)},tangencyshapes(t){Yt.call(this,t,qt.Relation.tangency),this.refreshSelected(t)},splitshapes(t,e){let n,i,r=this.fontLayer.shapes,a=[];for(n=0,i=r.length;n<i;n++){Wt(s.a.computePath(r[n].points),t,e)&&a.push(r[n])}if(a.length){let r=Vt(a.map((function(t){return t.points})),t,e);if(r.length){let t=this.fontLayer;for(n=0,i=a.length;n<i;n++)a[n].points=h.a.clone(r[n]);if(r.length>a.length)for(n=a.length,i=r.length;n<i;n++){let e=t.addShape("path",{points:r[n]});a.push(e)}t.refresh(),this.setMode("shapes",a)}return!0}return!1}},Kt={addreferenceline(t,e){t>20&&this.referenceLineLayer.addShape("gridarrow",{p0:{x:t},axis:this.axis,drawAxisText:!0,style:this.options.referenceline.style}),e>20&&this.referenceLineLayer.addShape("gridarrow",{p0:{y:e},axis:this.axis,drawAxisText:!0,style:this.options.referenceline.style}),this.referenceLineLayer.refresh()},removereferenceline(t,e){let n=[];"object"==typeof t&&n.push(t);let i=this.referenceLineLayer,r=this.rightSideBearing;if(t>20||e>20){let i=this.referenceLineLayer.getShapeIn(t,e);n=n.concat(i)}n=n.filter((function(t){return t!==r})),n.forEach((function(t){i.removeShape(t)})),i.refresh()},clearreferenceline(){let t=this.referenceLineLayer,e=this.rightSideBearing;t.shapes.filter((function(t){return"gridarrow"===t.type&&t!==e})).forEach((function(e){t.removeShape(e)})),t.refresh()}},Qt={circle:[[{x:383,y:0},{x:207,y:75},{x:75,y:208},{x:0,y:384},{x:0,y:583},{x:75,y:760},{x:207,y:891},{x:383,y:966},{x:582,y:966},{x:758,y:891},{x:890,y:760},{x:965,y:583},{x:965,y:384},{x:890,y:208},{x:758,y:75},{x:582,y:0}]],rect:[[{x:0,y:0,onCurve:!0},{x:200,y:0,onCurve:!0},{x:200,y:200,onCurve:!0},{x:0,y:200,onCurve:!0}]],roundrect:[[{x:615,y:573,onCurve:!0},{x:615,y:591},{x:591,y:615},{x:573,y:615,onCurve:!0},{x:42,y:615,onCurve:!0},{x:24,y:615},{x:14,y:601,onCurve:!0},{x:0,y:591},{x:0,y:573,onCurve:!0},{x:0,y:42,onCurve:!0},{x:0,y:24},{x:14,y:14,onCurve:!0},{x:24,y:0},{x:42,y:0,onCurve:!0},{x:573,y:0,onCurve:!0},{x:591,y:0},{x:601,y:14,onCurve:!0},{x:615,y:24},{x:615,y:42,onCurve:!0},{x:615,y:573,onCurve:!0}]],arrow:[[{x:1,y:380,onCurve:!0},{x:1,y:423},{x:43,y:453},{x:88,y:453,onCurve:!0},{x:109,y:453},{x:197,y:452},{x:296,y:452},{x:390,y:451},{x:418,y:451,onCurve:!0},{x:457,y:450},{x:502,y:465},{x:502,y:493,onCurve:!0},{x:502,y:513},{x:505,y:570},{x:505,y:590,onCurve:!0},{x:506,y:626},{x:545,y:646},{x:575,y:621,onCurve:!0},{x:605,y:596},{x:687,y:529},{x:775,y:458},{x:859,y:390},{x:892,y:364,onCurve:!0},{x:922,y:339},{x:923,y:295},{x:894,y:272,onCurve:!0},{x:864,y:247},{x:783,y:184},{x:696,y:116},{x:612,y:50},{x:580,y:24,onCurve:!0},{x:544,y:-5},{x:498,y:10},{x:499,y:47,onCurve:!0},{x:499,y:71,onCurve:!0},{x:499,y:101,onCurve:!0},{x:499,y:116},{x:498,y:146},{x:498,y:158,onCurve:!0},{x:498,y:184},{x:467,y:197},{x:440,y:197,onCurve:!0},{x:411,y:197},{x:314,y:198},{x:210,y:198},{x:112,y:199},{x:81,y:199,onCurve:!0},{x:68,y:199},{x:39,y:204},{x:15,y:219},{x:1,y:246},{x:1,y:270,onCurve:!0},{x:1,y:297},{x:0,y:349}]],star:[[{x:756,y:610,onCurve:!0},{x:1009,y:364,onCurve:!0},{x:660,y:315,onCurve:!0},{x:504,y:0,onCurve:!0},{x:348,y:315,onCurve:!0},{x:0,y:364,onCurve:!0},{x:252,y:610,onCurve:!0},{x:193,y:958,onCurve:!0},{x:504,y:793,onCurve:!0},{x:815,y:958,onCurve:!0}]],triangle:[[{x:25,y:871,onCurve:!0},{x:431,y:465,onCurve:!0},{x:442,y:454},{x:442,y:425},{x:431,y:414,onCurve:!0},{x:25,y:8,onCurve:!0},{x:14,y:-3},{x:0,y:4},{x:0,y:19,onCurve:!0},{x:0,y:860,onCurve:!0},{x:0,y:875},{x:14,y:882}]],heart:[[{x:578,y:965},{x:546,y:965},{x:535,y:953,onCurve:!0},{x:143,y:576,onCurve:!0},{x:137,y:570},{x:116,y:549},{x:68,y:488},{x:29,y:425},{x:0,y:337},{x:0,y:295,onCurve:!0},{x:0,y:156},{x:159,y:0},{x:300,y:0,onCurve:!0},{x:340,y:0},{x:419,y:27},{x:490,y:74},{x:539,y:114},{x:562,y:137,onCurve:!0},{x:585,y:114},{x:634,y:74},{x:705,y:27},{x:786,y:0},{x:824,y:0,onCurve:!0},{x:965,y:0},{x:1124,y:156},{x:1124,y:295,onCurve:!0},{x:1124,y:433},{x:981,y:576,onCurve:!0},{x:589,y:953,onCurve:!0}]],tel:[[{x:91,y:42,onCurve:!0},{x:116,y:26},{x:154,y:14,onCurve:!0},{x:191,y:0},{x:200,y:0,onCurve:!0},{x:209,y:7},{x:225,y:56,onCurve:!0},{x:244,y:102},{x:258,y:139,onCurve:!0},{x:279,y:193},{x:323,y:269},{x:318,y:285},{x:297,y:309,onCurve:!0},{x:277,y:332},{x:232,y:362},{x:230,y:385,onCurve:!0},{x:223,y:413},{x:258,y:480,onCurve:!0},{x:293,y:545},{x:355,y:610,onCurve:!0},{x:423,y:668},{x:478,y:694,onCurve:!0},{x:536,y:717},{x:569,y:719,onCurve:!0},{x:580,y:719},{x:634,y:663},{x:655,y:636,onCurve:!0},{x:657,y:631},{x:692,y:647,onCurve:!0},{x:722,y:666},{x:782,y:701,onCurve:!0},{x:843,y:738},{x:887,y:768,onCurve:!0},{x:928,y:796},{x:933,y:803,onCurve:!0},{x:931,y:835},{x:882,y:877,onCurve:!0},{x:831,y:921},{x:780,y:942,onCurve:!0},{x:736,y:960},{x:634,y:949},{x:546,y:916,onCurve:!0},{x:441,y:882},{x:121,y:612},{x:45,y:422,onCurve:!0},{x:-11,y:258},{x:3,y:186,onCurve:!0},{x:14,y:111},{x:45,y:84,onCurve:!0},{x:56,y:67},{x:68,y:58,onCurve:!0},{x:77,y:46}]],du:[[{x:373,y:0,onCurve:!0},{x:439,y:0},{x:477,y:88,onCurve:!0},{x:485,y:107},{x:489,y:152,onCurve:!0},{x:489,y:245},{x:415,y:293,onCurve:!0},{x:392,y:304},{x:371,y:304,onCurve:!0},{x:283,y:304},{x:255,y:181,onCurve:!0},{x:253,y:162},{x:253,y:152,onCurve:!0},{x:253,y:51},{x:335,y:6,onCurve:!0},{x:354,y:0}],[{x:687,y:23,onCurve:!0},{x:732,y:23},{x:780,y:82,onCurve:!0},{x:807,y:122},{x:807,y:160,onCurve:!0},{x:807,y:223},{x:742,y:287,onCurve:!0},{x:706,y:316},{x:666,y:316,onCurve:!0},{x:662,y:316,onCurve:!0},{x:586,y:316},{x:557,y:242,onCurve:!0},{x:550,y:215},{x:550,y:190,onCurve:!0},{x:550,y:91},{x:654,y:30,onCurve:!0},{x:666,y:27}],[{x:120,y:224,onCurve:!0},{x:200,y:224},{x:249,y:325,onCurve:!0},{x:253,y:352},{x:255,y:380,onCurve:!0},{x:255,y:481},{x:173,y:512,onCurve:!0},{x:152,y:521},{x:120,y:521,onCurve:!0},{x:27,y:521},{x:0,y:396,onCurve:!0},{x:0,y:382,onCurve:!0},{x:0,y:325},{x:40,y:268,onCurve:!0},{x:74,y:224}],[{x:862,y:299,onCurve:!0},{x:866,y:299,onCurve:!0},{x:955,y:299},{x:987,y:386,onCurve:!0},{x:997,y:403},{x:997,y:428,onCurve:!0},{x:997,y:449,onCurve:!0},{x:997,y:586},{x:871,y:586,onCurve:!0},{x:784,y:586},{x:755,y:521,onCurve:!0},{x:746,y:485},{x:746,y:447,onCurve:!0},{x:746,y:299}],[{x:479,y:396,onCurve:!0},{x:491,y:396,onCurve:!0},{x:586,y:396},{x:662,y:508,onCurve:!0},{x:765,y:614},{x:867,y:689,onCurve:!0},{x:919,y:738},{x:919,y:797,onCurve:!0},{x:919,y:808,onCurve:!0},{x:919,y:888},{x:852,y:944,onCurve:!0},{x:803,y:974},{x:734,y:974,onCurve:!0},{x:725,y:974,onCurve:!0},{x:662,y:974},{x:555,y:949,onCurve:!0},{x:517,y:944},{x:489,y:944,onCurve:!0},{x:464,y:944},{x:318,y:963,onCurve:!0},{x:291,y:964},{x:259,y:964,onCurve:!0},{x:255,y:964,onCurve:!0},{x:143,y:964},{x:103,y:906,onCurve:!0},{x:61,y:856},{x:61,y:793,onCurve:!0},{x:61,y:694},{x:194,y:613,onCurve:!0},{x:302,y:525},{x:331,y:483,onCurve:!0},{x:360,y:428},{x:445,y:399,onCurve:!0},{x:472,y:396}],[{x:379,y:552,onCurve:!0},{x:379,y:639,onCurve:!0},{x:379,y:641},{x:375,y:641,onCurve:!0},{x:306,y:641,onCurve:!0},{x:240,y:641},{x:198,y:721,onCurve:!0},{x:192,y:738},{x:192,y:759,onCurve:!0},{x:192,y:776,onCurve:!0},{x:198,y:854},{x:213,y:854,onCurve:!0},{x:266,y:885},{x:304,y:885,onCurve:!0},{x:453,y:885,onCurve:!0},{x:453,y:555,onCurve:!0},{x:453,y:552},{x:449,y:552,onCurve:!0}],[{x:500,y:664,onCurve:!0},{x:500,y:822,onCurve:!0},{x:500,y:871},{x:573,y:885,onCurve:!0},{x:746,y:885,onCurve:!0},{x:746,y:664,onCurve:!0},{x:672,y:664,onCurve:!0},{x:672,y:837,onCurve:!0},{x:672,y:841},{x:666,y:841,onCurve:!0},{x:605,y:841,onCurve:!0},{x:578,y:841},{x:575,y:814,onCurve:!0},{x:575,y:662,onCurve:!0},{x:512,y:662,onCurve:!0}],[{x:316,y:702,onCurve:!0},{x:377,y:702,onCurve:!0},{x:380,y:702},{x:380,y:704,onCurve:!0},{x:380,y:837,onCurve:!0},{x:380,y:841},{x:377,y:841,onCurve:!0},{x:314,y:841,onCurve:!0},{x:270,y:841},{x:257,y:778,onCurve:!0},{x:257,y:727},{x:308,y:702,onCurve:!0},{x:312,y:702}]],drop:[[{x:731,y:526},{x:674,y:443,onCurve:!0},{x:669,y:437},{x:589,y:332},{x:525,y:242},{x:446,y:102},{x:426,y:41,onCurve:!0},{x:421,y:22},{x:384,y:0},{x:347,y:0},{x:311,y:22},{x:305,y:41,onCurve:!0},{x:285,y:102},{x:206,y:242},{x:142,y:332},{x:62,y:437},{x:57,y:443,onCurve:!0},{x:0,y:528},{x:0,y:621,onCurve:!0},{x:0,y:759},{x:214,y:953},{x:517,y:953},{x:731,y:759},{x:731,y:621,onCurve:!0}]]};function Jt(t,e,n){let i=e.split(".");for(let e=0,r=t.length;e<r;e++)if(t[e].name===i[0]){if(!t[e].items)return t[e].selected=!!n,!0;if(i[1]){let r=t[e].items;for(let t=0,e=r.length;t<e;t++)if(r[t].name===i[1])return r[t].selected=!!n,!0}}return!1}var te={rescale(t){this.coverLayer.clearShapes();let e=this.render.getSize();t=t||512/this.options.unitsPerEm,this.render.scaleTo(t,{x:e.width/2,y:e.height/2}),this.setMode()},enlargeview(){let t=this.render.getSize();this.render.scale(1.25,{x:t.width/2,y:t.height/2})},narrowview(){let t=this.render.getSize();this.render.scale(.8,{x:t.width/2,y:t.height/2})},undo(){let t=this.history.back();this.fontLayer.shapes.length=0,this.addShapes(t),this.setMode()},redo(){let t=this.history.forward();this.fontLayer.shapes.length=0,this.addShapes(t),this.setMode()},gridsorption(t){Jt(ot.a.editor,"setting.gridsorption",!!t),this.options.sorption.enableGrid=this.sorption.enableGrid=!!t},shapesorption(t){Jt(ot.a.editor,"setting.shapesorption",!!t),this.options.sorption.enableShape=this.sorption.enableShape=!!t},showgrid(t){Jt(ot.a.editor,"setting.showgrid",!!t),this.options.axis.showGrid=this.axis.showGrid=!!t,this.axisLayer.refresh()},moresetting(){this.fire("setting:editor",{setting:this.options})},addpath(){let t=this;setTimeout((function(){t.setMode("addpath")}),20)},addsupportshapes(t){Qt[t]&&this.setMode("addshapes",h.a.clone(Qt[t]))},fontsetting(){let t=s.a.computePathBox.apply(null,this.fontLayer.shapes.map((function(t){return t.points}))),e=0,n=0;if(t){let i=this.render.camera.scale;e=(t.x-this.axis.x)/i,n=(this.rightSideBearing.p0.x-t.x-t.width)/i}this.font&&this.fire("setting:font",{setting:{leftSideBearing:Math.round(e),rightSideBearing:Math.round(n||0),unicode:this.font.unicode,name:this.font.name}})}},ee={...Nt,...zt,...Ut,...Zt,...Kt,...Nt,...te},ne=n(30),ie=n(44);function re(t,e,n){let i,r,s=0,a=t.length-1;for(;s<=a;){if(i=s+a>>1,r=t[i].axis,Math.abs(e-r)<n)return t[i];e<r?a=i-1:s=i+1}return!1}class se{constructor(t){this.gridDelta=t.gridDelta||5,this.delta=t.delta||5,this.enableGrid=t.enableGrid||!1,this.enableShape=t.enableShape||!0,this.xAxis=[],this.yAxis=[]}setGrid(t){this.axis=t}addShapes(t){let e=this.xAxis,n=this.yAxis;for(let i=t.length-1;i>=0;i--){let r=s.a.computePath(t[i].points),a=r.x+r.width/2,o=r.y+r.height/2;e.push({axis:r.x,y:o}),e.push({axis:a,y:o}),e.push({axis:r.x+r.width,y:o}),n.push({axis:r.y,x:a}),n.push({axis:o,x:a}),n.push({axis:r.y+r.height,x:a})}e.sort((function(t,e){return t.axis-e.axis})),n.sort((function(t,e){return t.axis-e.axis}))}addXAxis(t){let e=this.xAxis;t.forEach((function(t){e.push({axis:t,y:0})})),e.sort((function(t,e){return t.axis-e.axis}))}addYAxis(t){let e=this.yAxis;t.forEach((function(t){e.push({axis:t,x:0})})),e.sort((function(t,e){return t.axis-e.axis}))}detectX(t){if(this.enableShape){let e=re(this.xAxis,t,this.delta);if(e)return e}if(this.enableGrid){let e=(t-this.axis.x)%this.axis.gap;if(Math.abs(e)<this.gridDelta)return{axis:t-e,y:0}}return!1}detectY(t){if(this.enableShape){let e=re(this.yAxis,t,this.delta);if(e)return e}if(this.enableGrid){let e=(t-this.axis.y)%this.axis.gap;if(Math.abs(e)<this.gridDelta)return{axis:t-e,x:0}}return!1}isEnable(){return this.enableShape||this.enableGrid}clear(){this.xAxis.length=0,this.yAxis.length=0}dispose(){this.clear(),this.axis=null,this.xAxis=this.yAxis=null}}function ae(t){let e=Array.prototype.splice,n=[t.advanceWidth||0];t.contours&&t.contours.length&&t.contours.forEach((function(t){t.forEach((function(t){n.push(t.x),n.push(t.y),n.push(t.onCurve?1:0)}))})),t.unicode&&t.unicode.length&&e.apply(n,[n.length,0].concat(t.unicode)),t.name&&t.name.length&&e.apply(n,[n.length,0].concat(t.name.split("").map((function(t){return t.charCodeAt(0)}))));let i=0;for(let t=0,e=n.length;t<e;t++)i=2147483647&131*i+n[t];return i}function oe(t){Jt(ot.a.editor,"setting.gridsorption",!!t.sorption.enableGrid),Jt(ot.a.editor,"setting.shapesorption",!!t.sorption.enableShape),Jt(ot.a.editor,"setting.showgrid",!!t.axis.showGrid)}function le(t){this.execCommand("gridsorption",t.sorption.enableGrid),this.execCommand("shapesorption",t.sorption.enableShape),this.execCommand("showgrid",t.axis.showGrid),this.fontLayer.options.fill=!!t.fontLayer.fill,this.fontLayer.options.fillColor=t.fontLayer.fillColor,this.fontLayer.options.strokeColor=t.fontLayer.strokeColor,this.fontLayer.refresh(),this.axis.gapColor=t.axis.gapColor,this.axis.metricsColor=t.axis.metricsColor,this.axis.emColor=t.axis.emColor,this.axis.graduation.gap=t.axis.graduation.gap||100,this.axisLayer.refresh(),this.graduationLayer.refresh(),h.a.overwrite(this.options,t)}var ue=n(20);function he(t){this.font=t,this.fontHash=ae(t);let e=this.axis.x,n=this.axis.y,i=this.fontLayer;i.clearShapes();let r=1;if(!t.compound){let a=t.contours||[];delete t.contours;let o=s.a.computePathBox.apply(null,a);t.rightSideBearing=o?t.advanceWidth-o.x-o.width:t.advanceWidth,a.forEach((function(t){i.addShape("path",{points:t})}));let l=i.shapes;this.history.reset(),this.history.add(h.a.clone(l)),r=this.render.camera.scale,l.forEach((function(t){Object(y.a)(t.points,r,-r),Object(y.a)(t.points,1,1,e,n)}))}i.refresh();let a=t.advanceWidth;return this.rightSideBearing.p0.x=e+(a||this.options.unitsPerEm)*r,this.referenceLineLayer.refresh(),this.setMode(),this}function ce(t,e){e=e||this.render.camera.scale;let n=this.axis,i=this.fontLayer,s={};return i.shapes.forEach((function(t){s[t.id]=!0})),t.forEach((function(t){Object(y.a)(t.points,e,-e),Object(y.a)(t.points,1,1,n.x,n.y),s[t.id]&&(t.id=r("shape")),i.addShape(t)})),i.refresh(),this}function de(t,e){if(!t||0===t.length)return this;let n=t.map((function(t){return{id:r("shape"),type:"path",points:t}}));return this.addShapes(n,e),this.fire("change"),n}function fe(t){let e=this.axis;t=t?h.a.clone(t):h.a.clone(this.fontLayer.shapes);let n=1/this.render.camera.scale;return t.forEach((function(t){Object(y.a)(t.points,n,-n,-e.x,-e.y)})),t}function pe(){let t=h.a.clone(this.font||{});t.unicode=t.unicode||[],t.name=t.name||"";let e=this.axis,n=Math.round((this.rightSideBearing.p0.x-e.x)/this.render.camera.scale),i=this.getShapes().map((function(t){return t.points}));i.forEach((function(t){Object(ue.a)(t)}));let r=s.a.computePathBox.apply(null,i)||{x:0,y:0,width:0,height:0};return t.xMin=r.x,t.yMin=r.y,t.xMax=r.x+r.width,t.yMax=r.y+r.height,t.leftSideBearing=t.xMin,0===r.width?t.advanceWidth=t.rightSideBearing:t.advanceWidth=n||t.xMax+t.rightSideBearing||t.xMax,delete t.rightSideBearing,t.contours=i,t}function ge(t){if(!this.font)return;let e=this.render.camera.scale,n=this.fontLayer.shapes,i=this.axis,r=s.a.computePathBox.apply(null,n.map((function(t){return t.points})));if(r){let s=0,a=r.x-i.x;void 0!==t.leftSideBearing&&Math.abs(t.leftSideBearing-a/e)>.01&&(s=t.leftSideBearing*e-a,n.forEach((function(t){Object(y.a)(t.points,1,1,s,0)})),this.fontLayer.refresh(),this.font.leftSideBearing=t.leftSideBearing,this.fire("change")),void 0!==t.rightSideBearing&&(this.font.rightSideBearing=t.rightSideBearing,this.rightSideBearing.p0.x=r.x+r.width+s+t.rightSideBearing*e,this.referenceLineLayer.refresh())}else this.font.rightSideBearing=t.rightSideBearing;return void 0!==t.unicode&&(this.font.unicode=t.unicode),void 0!==t.name&&(this.font.name=t.name),this.fire("change"),this}function me(t){switch(this.contextMenu.hide(),t.command){case"addreferenceline":this.execCommand("addreferenceline",t.pos.x,t.pos.y);break;case"split":this.setMode("split");break;case"paste":let e=this.getClipBoard();e&&this.execCommand("pasteshapes",e,t.pos);break;case"addsupportshapes":this.execCommand("addsupportshapes",t.args.type);break;case"gridsorption":this.execCommand("gridsorption",!t.args.selected);break;case"shapesorption":this.execCommand("shapesorption",!t.args.selected);break;case"showgrid":this.execCommand("showgrid",!t.args.selected);break;case"save":this.fire("save");break;default:this.execCommand(t.command)}}class ye{constructor(t,e){e=e||{};let n=document.createElement("div");n.className="marker-x";let i=document.createElement("div");i.className="marker-y",e.thickness&&(n.style.width=e.thickness+"px",i.style.height=e.thickness+"px"),t.appendChild(this.xAxis=n),t.appendChild(this.yAxis=i)}moveTo(t,e){this.xAxis.style.top=e+"px",this.yAxis.style.left=t+"px"}dispose(){this.xAxis.parentNode.removeChild(this.xAxis),this.yAxis.parentNode.removeChild(this.yAxis),this.xAxis=this.yAxis=null}}function ve(t){let e=this.options.unitsPerEm;this.options.unitsPerEm=t.unitsPerEm,h.a.overwrite(this.options.axis,t),t.graduation&&t.graduation.gap&&(this.options.axis.graduation.gap=t.graduation.gap);let n=h.a.clone(this.options.axis),i=this.render.camera.scale,r=n.metrics;Object.keys(r).forEach((function(t){n.metrics[t]=r[t]*i})),n.unitsPerEm=n.unitsPerEm*i,Object.assign(this.axis,n);let s=this.render.getSize();this.render.scale(e/this.options.unitsPerEm,{x:s.width/2,y:s.height/2})}function _e(t){let e=this.render.camera.scale;return{x:Math.floor((t.x-this.axis.x)/e),y:Math.floor(-(t.y-this.axis.y)/e)}}var xe={alignshapes:!0,verticalalignshapes:!0,horizontalalignshapes:!0,joinshapes:!0,intersectshapes:!0,tangencyshapes:!0,splitshapes:!0,removeshapes:!0,reversepoints:!0,topshape:!0,bottomshape:!0,upshape:!0,downshape:!0,cutshapes:!0,pasteshapes:!0,addshapes:!0,rotateleft:!0,rotateright:!0,flipshapes:!0,mirrorshapes:!0},we=[function(){oe.call(this,this.options),this.setOptions=le},function(){this.setFont=he,this.getFont=pe,this.adjustFont=ge,this.addShapes=ce,this.getShapes=fe,this.addContours=de},function(){let t=this,e=this.render,n=function(t){e.camera.x=t.x,e.camera.y=t.y,e.camera.event=t};e.capture.on("down",(function(i){t.contextMenu.visible()||(e.camera.startX=i.x,e.camera.startY=i.y,n(i),t.mode.down&&t.mode.down.call(t,i))})),e.capture.on("dragstart",(function(e){t.contextMenu.visible()||(n(e),t.mode.dragstart&&t.mode.dragstart.call(t,e))})),e.capture.on("drag",(function(i){t.contextMenu.visible()||(e.camera.mx=i.x-e.camera.x,e.camera.my=i.y-e.camera.y,n(i),t.mode.drag&&t.mode.drag.call(t,i))})),e.capture.on("dragend",(function(e){t.contextMenu.visible()||(n(e),t.mode.dragend&&t.mode.dragend.call(t,e))})),e.capture.on("move",(function(e){t.contextMenu.visible()||(t.graduationMarker.moveTo(e.x-1,e.y-1),t.mode.move&&t.mode.move.call(t,e))})),e.capture.on("up",(function(e){t.contextMenu.visible()||t.mode.up&&t.mode.up.call(t,e)})),e.capture.on("click",(function(e){t.contextMenu.visible()||t.mode.click&&t.mode.click.call(t,e)})),e.capture.on("dblclick",(function(n){if(t.contextMenu.visible())return;let i=e.getLayer("font").getShapeIn(n);if(i){let e=rt(i,n);t.setMode("point",e)}else t.mode===It.point&&t.setMode()})),e.capture.on("rightdown",(function(e){t.mode.rightdown?t.mode.rightdown.call(t,e):(t.contextMenu.onClick=me.bind(t),t.contextMenu.show(e,ot.a.editor))})),e.keyCapture.on("keyup",(function(e){t.contextMenu.visible()||("esc"!==e.key||t.mode.keyup?t.mode.keyup&&t.mode.keyup.call(t,e):t.setMode())})),e.keyCapture.on("keydown",(function(e){if(!t.contextMenu.visible())if(83===e.keyCode&&e.ctrlKey)t.fire("save");else if(86===e.keyCode&&e.ctrlKey){let e=t.getClipBoard();e&&t.execCommand("pasteshapes",e)}else 187===e.keyCode&&(e.ctrlKey||e.altKey)?(e.originEvent.stopPropagation(),e.originEvent.preventDefault(),t.execCommand("enlargeview")):189===e.keyCode&&(e.ctrlKey||e.altKey)?(e.originEvent.stopPropagation(),e.originEvent.preventDefault(),t.execCommand("narrowview")):90===e.keyCode&&e.ctrlKey?t.mode.undo?t.mode.undo.call(t,e):t.execCommand("undo"):89===e.keyCode&&e.ctrlKey?t.mode.redo?t.mode.redo.call(t,e):t.execCommand("redo"):t.mode.keydown&&t.mode.keydown.call(t,e)})),e.keyCapture.on("keydown",(function(e){t.contextMenu.visible()||t.mode.keydown&&t.mode.keydown.call(t,e)})),e.on("resize",(function(e){t.render.move((e.size.width-e.prevSize.width)/2,(e.size.height-e.prevSize.height)/2),t.render.refresh()}))},function(){this.axisLayer=this.render.addLayer("axis",{level:10,fill:!1}),this.fontLayer=this.render.addLayer("font",Object.assign({level:20,lineWidth:1,strokeColor:"#999",fillColor:"#555",strokeSeparate:!1},this.options.fontLayer)),this.coverLayer=this.render.addLayer("cover",Object.assign({level:30,fill:!1,strokeColor:this.options.coverLayer.strokeColor,fillColor:this.options.coverLayer.fillColor},this.options.coverLayer)),this.referenceLineLayer=this.render.addLayer("referenceline",{level:40,fill:!1,strokeColor:this.options.referenceline.style.strokeColor}),this.graduationLayer=this.render.addLayer("graduation",{level:50,fill:!1,disabled:!0})},function(){let t=this.render.painter.width,e=this.render.painter.height,n=this.options,i=(t-n.unitsPerEm)/2,r=(e+(n.unitsPerEm+n.axis.metrics.descent))/2;this.axis=this.axisLayer.addShape("axis",Object.assign(h.a.clone(n.axis),{id:"axis",x:i,y:r,unitsPerEm:n.unitsPerEm,selectable:!1})),this.rightSideBearing=this.referenceLineLayer.addShape("gridarrow",{id:"rightSideBearing",p0:{x:n.unitsPerEm/2},arrow:{y:22},axis:this.axis,drawAxisText:!0,style:{fill:!0,stroke:!0,fillColor:"blue",strokeColor:"blue"}}),this.graduation=this.graduationLayer.addShape("graduation",{config:this.axis}),this.graduationMarker=new ye(this.render.main,n.axis.graduation),this.sorption.setGrid(this.axis),this.getPointCoordinate=_e,this.setAxis=ve},function(){let t=this;t.on("change",(function(){t.history.add(t.getShapes())})),t.on("command",(function(e){!1!==e.result&&xe[e.command]&&t.fire("change")}))}];class be{constructor(t,e){this.options=e||{},this.contextMenu=new Dt(t,this.options.contextMenu),this.sorption=new se(this.options.sorption),this.history=new ie.a,this.initers=we.concat(e.initers||[])}setRender(t){this.render=t;for(let t=0,e=this.initers.length;t<e;t++)this.initers[t].call(this);return this.axisLayer.refresh(),this.graduationLayer.refresh(),this.setMode(),this}setMode(t,...e){return this.mode&&this.mode.end&&this.mode.end.call(this),this.mode=It[t]||It.default,this.mode.begin&&this.mode.begin.apply(this,e),this}reset(){return this.fontLayer.clearShapes(),this.coverLayer.clearShapes(),this.font=null,this.refresh(),this}refresh(){return this.render.refresh(),this}setSelected(t){this.setMode("shapes",t)}refreshSelected(t){if(this.currentGroup){let e=this.currentGroup.shapes;this.currentGroup.setShapes(t),this.currentGroup.refresh(),t!==e&&this.fire("selection:change",{shapes:t})}}getSelected(){return this.currentGroup?this.currentGroup.shapes:null}execCommand(t,...e){let n={command:t,args:e};if(this.fire("beforecommand",n),!1===n.returnValue)return!1;if(ee[t]){let i=ee[t].apply(this,e);return n.result=i,this.fire("command",n),i}return!1}supportCommand(t){return!!ee[t]}addCommand(t,e){return!ee[t]&&(ee[t]=e,!0)}isChanged(){let t=this.getFont();return this.fontHash!==ae(t)}setChanged(t){if(t)this.fontHash=0;else{let t=this.getFont();this.fontHash=ae(t)}}setClipBoard(t){return ne.a.set(t,"editor-shape"),this}getClipBoard(){return ne.a.get("editor-shape")}focus(){this.render.focus()}blur(){this.render.blur()}dispose(){this.un(),this.contextMenu.dispose(),this.render&&this.render.dispose(),this.graduationMarker.dispose(),this.options=this.contextMenu=this.render=null,this.fontLayer=this.coverLayer=this.axisLayer=this.referenceLineLayer=this.graduationLayer=null,this.axis=this.rightSideBearing=this.graduation=this.graduationMarker=this.font=null,this.sorption.dispose(),this.sorption=null,this.history.reset(),this.history=null,this.mode=null}}H.a.mixin(be.prototype);var Se=n(23);e.a={create(t,e){if(!t)throw"need main element";e=Object.assign({},Se.a,e);let n=new be(t,e.editor),i=e.render||{};return i.controller=n,at.create(t,i),n}}},function(t,e,n){"use strict";(function(t){function i(e,n="font/svg"){return"undefined"==typeof btoa?"data:"+n+";charset=utf-8;base64,"+t.from(e,"binary").toString("base64"):"data:"+n+";charset=utf-8;base64,"+btoa(e)}n.d(e,"a",(function(){return i}))}).call(this,n(55).Buffer)},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n(39),r=n(45);function s(t,e,n){let s;if("number"==typeof t)s=t,t=e.glyf[s];else if(s=e.glyf.indexOf(t),-1===s)return t;if(!t.compound||!t.glyfs)return t;const a={};return Object(i.a)(t,e,a,s),n?Object.keys(a).forEach(t=>{Object(r.a)(e.glyf[t],a[t])}):Object(r.a)(t,a[s]),t}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n(41);function r(t){const e=t.contours;let n;for(let t=e.length-1;t>=0;t--)n=Object(i.a)(e[t]),n.length<=2&&e.splice(t,1);return 0===t.contours.length&&delete t.contours,t}},function(t,e,n){"use strict";function i(t,e){return void 0===e&&(e=Object),e&&"function"==typeof e.freeze?e.freeze(t):t}var r=i({HTML:"text/html",isHTML:function(t){return t===r.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),s=i({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(t){return t===s.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});e.assign=function(t,e){if(null===t||"object"!=typeof t)throw new TypeError("target is not an object");for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},e.find=function(t,e,n){if(void 0===n&&(n=Array.prototype),t&&"function"==typeof n.find)return n.find.call(t,e);for(var i=0;i<t.length;i++)if(Object.prototype.hasOwnProperty.call(t,i)){var r=t[i];if(e.call(void 0,r,i,t))return r}},e.freeze=i,e.MIME_TYPE=r,e.NAMESPACE=s},function(t,e,n){"use strict";function i(t,e,n,i,r,s,a){let o,l,u;for(let h=0,c=t.length;h<c;h++)u=t[h],o=u.x,l=u.y,u.x=o*e+l*i+s,u.y=o*n+l*r+a;return t}n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";e.a={0:1,1:1,2:1,3:1,4:1,5:1,6:1,7:1,8:1,9:2,10:1,11:1,12:1,13:2,14:1,15:1,16:1,17:1,18:1,19:1,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:1,28:1,29:1,30:1,31:1,32:3,33:4,34:5,35:6,36:7,37:8,38:9,39:10,40:11,41:12,42:13,43:14,44:15,45:16,46:17,47:18,48:19,49:20,50:21,51:22,52:23,53:24,54:25,55:26,56:27,57:28,58:29,59:30,60:31,61:32,62:33,63:34,64:35,65:36,66:37,67:38,68:39,69:40,70:41,71:42,72:43,73:44,74:45,75:46,76:47,77:48,78:49,79:50,80:51,81:52,82:53,83:54,84:55,85:56,86:57,87:58,88:59,89:60,90:61,91:62,92:63,93:64,94:65,95:66,96:67,97:68,98:69,99:70,100:71,101:72,102:73,103:74,104:75,105:76,106:77,107:78,108:79,109:80,110:81,111:82,112:83,113:84,114:85,115:86,116:87,117:88,118:89,119:90,120:91,121:92,122:93,123:94,124:95,125:96,126:97,160:172,161:163,162:132,163:133,164:189,165:150,166:232,167:134,168:142,169:139,170:157,171:169,172:164,174:138,175:218,176:131,177:147,178:242,179:243,180:141,181:151,182:136,184:222,185:241,186:158,187:170,188:245,189:244,190:246,191:162,192:173,193:201,194:199,195:174,196:98,197:99,198:144,199:100,200:203,201:101,202:200,203:202,204:207,205:204,206:205,207:206,208:233,209:102,210:211,211:208,212:209,213:175,214:103,215:240,216:145,217:214,218:212,219:213,220:104,221:235,222:237,223:137,224:106,225:105,226:107,227:109,228:108,229:110,230:160,231:111,232:113,233:112,234:114,235:115,236:117,237:116,238:118,239:119,240:234,241:120,242:122,243:121,244:123,245:125,246:124,247:184,248:161,249:127,250:126,251:128,252:129,253:236,254:238,255:186,262:253,263:254,268:255,269:256,273:257,286:248,287:249,304:250,305:215,321:226,322:227,338:176,339:177,350:251,351:252,352:228,353:229,376:187,381:230,382:231,402:166,710:216,711:225,728:219,729:220,730:221,731:224,733:223,960:155,8211:178,8212:179,8216:182,8217:183,8218:196,8220:180,8221:181,8222:197,8224:130,8225:194,8226:135,8230:171,8240:198,8249:190,8250:191,8355:247,8482:140,8486:159,8706:152,8710:168,8719:154,8721:153,8722:239,8725:188,8729:195,8730:165,8734:146,8747:156,8776:167,8800:143,8804:148,8805:149,9674:185,61441:192,61442:193,64257:192,64258:193,65535:0}},function(t,e,n){"use strict";e.a={0:".notdef",1:".null",2:"nonmarkingreturn",3:"space",4:"exclam",5:"quotedbl",6:"numbersign",7:"dollar",8:"percent",9:"ampersand",10:"quotesingle",11:"parenleft",12:"parenright",13:"asterisk",14:"plus",15:"comma",16:"hyphen",17:"period",18:"slash",19:"zero",20:"one",21:"two",22:"three",23:"four",24:"five",25:"six",26:"seven",27:"eight",28:"nine",29:"colon",30:"semicolon",31:"less",32:"equal",33:"greater",34:"question",35:"at",36:"A",37:"B",38:"C",39:"D",40:"E",41:"F",42:"G",43:"H",44:"I",45:"J",46:"K",47:"L",48:"M",49:"N",50:"O",51:"P",52:"Q",53:"R",54:"S",55:"T",56:"U",57:"V",58:"W",59:"X",60:"Y",61:"Z",62:"bracketleft",63:"backslash",64:"bracketright",65:"asciicircum",66:"underscore",67:"grave",68:"a",69:"b",70:"c",71:"d",72:"e",73:"f",74:"g",75:"h",76:"i",77:"j",78:"k",79:"l",80:"m",81:"n",82:"o",83:"p",84:"q",85:"r",86:"s",87:"t",88:"u",89:"v",90:"w",91:"x",92:"y",93:"z",94:"braceleft",95:"bar",96:"braceright",97:"asciitilde",98:"Adieresis",99:"Aring",100:"Ccedilla",101:"Eacute",102:"Ntilde",103:"Odieresis",104:"Udieresis",105:"aacute",106:"agrave",107:"acircumflex",108:"adieresis",109:"atilde",110:"aring",111:"ccedilla",112:"eacute",113:"egrave",114:"ecircumflex",115:"edieresis",116:"iacute",117:"igrave",118:"icircumflex",119:"idieresis",120:"ntilde",121:"oacute",122:"ograve",123:"ocircumflex",124:"odieresis",125:"otilde",126:"uacute",127:"ugrave",128:"ucircumflex",129:"udieresis",130:"dagger",131:"degree",132:"cent",133:"sterling",134:"section",135:"bullet",136:"paragraph",137:"germandbls",138:"registered",139:"copyright",140:"trademark",141:"acute",142:"dieresis",143:"notequal",144:"AE",145:"Oslash",146:"infinity",147:"plusminus",148:"lessequal",149:"greaterequal",150:"yen",151:"mu",152:"partialdiff",153:"summation",154:"product",155:"pi",156:"integral",157:"ordfeminine",158:"ordmasculine",159:"Omega",160:"ae",161:"oslash",162:"questiondown",163:"exclamdown",164:"logicalnot",165:"radical",166:"florin",167:"approxequal",168:"Delta",169:"guillemotleft",170:"guillemotright",171:"ellipsis",172:"nonbreakingspace",173:"Agrave",174:"Atilde",175:"Otilde",176:"OE",177:"oe",178:"endash",179:"emdash",180:"quotedblleft",181:"quotedblright",182:"quoteleft",183:"quoteright",184:"divide",185:"lozenge",186:"ydieresis",187:"Ydieresis",188:"fraction",189:"currency",190:"guilsinglleft",191:"guilsinglright",192:"fi",193:"fl",194:"daggerdbl",195:"periodcentered",196:"quotesinglbase",197:"quotedblbase",198:"perthousand",199:"Acircumflex",200:"Ecircumflex",201:"Aacute",202:"Edieresis",203:"Egrave",204:"Iacute",205:"Icircumflex",206:"Idieresis",207:"Igrave",208:"Oacute",209:"Ocircumflex",210:"apple",211:"Ograve",212:"Uacute",213:"Ucircumflex",214:"Ugrave",215:"dotlessi",216:"circumflex",217:"tilde",218:"macron",219:"breve",220:"dotaccent",221:"ring",222:"cedilla",223:"hungarumlaut",224:"ogonek",225:"caron",226:"Lslash",227:"lslash",228:"Scaron",229:"scaron",230:"Zcaron",231:"zcaron",232:"brokenbar",233:"Eth",234:"eth",235:"Yacute",236:"yacute",237:"Thorn",238:"thorn",239:"minus",240:"multiply",241:"onesuperior",242:"twosuperior",243:"threesuperior",244:"onehalf",245:"onequarter",246:"threequarters",247:"franc",248:"Gbreve",249:"gbreve",250:"Idotaccent",251:"Scedilla",252:"scedilla",253:"Cacute",254:"cacute",255:"Ccaron",256:"ccaron",257:"dcroat"}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n(60),r=n(20);function s(t){const e={},n=[];return t.glyf.forEach((t,s)=>{t.unicode&&(t.unicode=t.unicode.sort(),t.unicode.sort((t,e)=>t-e).forEach(t=>{e[t]?n.push(s):e[t]=!0})),!t.compound&&t.contours&&(t.contours.forEach(t=>{Object(r.a)(t)}),Object(i.a)(t)),t.xMin=Math.round(t.xMin||0),t.xMax=Math.round(t.xMax||0),t.yMin=Math.round(t.yMin||0),t.yMax=Math.round(t.yMax||0),t.leftSideBearing=Math.round(t.leftSideBearing||0),t.advanceWidth=Math.round(t.advanceWidth||0)}),t.glyf.some(t=>t.compound)||(t.glyf=t.glyf.filter((t,e)=>0===e||t.contours&&t.contours.length)),!n.length||{repeat:n}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n(21),r=n(28),s=n(5);function a(t,e={}){const n=new i.a(t),a=n.readUint32(0),o=n.readUint32(4);(2001684038!==a||65536!==o&&1330926671!==o)&&(n.dispose(),s.a.raise(10102));const l=n.readUint16(12),u=n.readUint32(16),h=[];let c,d,f;for(d=0;d<l;++d){n.seek(44+20*d),c={tag:n.readString(n.offset,4),offset:n.readUint32(),compLength:n.readUint32(),length:n.readUint32(),checkSum:n.readUint32()};const t=n.readBytes(c.offset,c.compLength);t.length<c.length?(e.inflate||(n.dispose(),s.a.raise(10105)),c.data=e.inflate(t)):c.data=t,c.length=c.data.length,h.push(c)}const p=new r.a(new ArrayBuffer(u)),g=Math.floor(Math.log(l)/Math.LN2),m=16*Math.pow(2,g),y=16*l-m;p.writeUint32(o),p.writeUint16(l),p.writeUint16(m),p.writeUint16(g),p.writeUint16(y);let v=12+16*h.length;for(d=0,f=h.length;d<f;++d)c=h[d],p.writeString(c.tag),p.writeUint32(c.checkSum),p.writeUint32(v),p.writeUint32(c.length),v+=c.length+(c.length%4?4-c.length%4:0);for(d=0,f=h.length;d<f;++d)c=h[d],p.writeBytes(c.data),c.length%4&&p.writeEmpty(4-c.length%4);return p.getBuffer()}},function(t,e,n){"use strict";var i=n(6),r=n(1);e.a=i.a.create("head",[["version",r.a.Fixed],["fontRevision",r.a.Fixed],["checkSumAdjustment",r.a.Uint32],["magickNumber",r.a.Uint32],["flags",r.a.Uint16],["unitsPerEm",r.a.Uint16],["created",r.a.LongDateTime],["modified",r.a.LongDateTime],["xMin",r.a.Int16],["yMin",r.a.Int16],["xMax",r.a.Int16],["yMax",r.a.Int16],["macStyle",r.a.Uint16],["lowestRecPPEM",r.a.Uint16],["fontDirectionHint",r.a.Int16],["indexToLocFormat",r.a.Int16],["glyphDataFormat",r.a.Int16]])},function(t,e,n){"use strict";var i=n(6),r=n(1);e.a=i.a.create("maxp",[["version",r.a.Fixed],["numGlyphs",r.a.Uint16],["maxPoints",r.a.Uint16],["maxContours",r.a.Uint16],["maxCompositePoints",r.a.Uint16],["maxCompositeContours",r.a.Uint16],["maxZones",r.a.Uint16],["maxTwilightPoints",r.a.Uint16],["maxStorage",r.a.Uint16],["maxFunctionDefs",r.a.Uint16],["maxInstructionDefs",r.a.Uint16],["maxStackElements",r.a.Uint16],["maxSizeOfInstructions",r.a.Uint16],["maxComponentElements",r.a.Uint16],["maxComponentDepth",r.a.Int16]],{write(t,e){return i.a.write.call(this,t,e.support),t},size:()=>32})},function(t,e,n){"use strict";var i=n(6),r=n(1);e.a=i.a.create("hhea",[["version",r.a.Fixed],["ascent",r.a.Int16],["descent",r.a.Int16],["lineGap",r.a.Int16],["advanceWidthMax",r.a.Uint16],["minLeftSideBearing",r.a.Int16],["minRightSideBearing",r.a.Int16],["xMaxExtent",r.a.Int16],["caretSlopeRise",r.a.Int16],["caretSlopeRun",r.a.Int16],["caretOffset",r.a.Int16],["reserved0",r.a.Int16],["reserved1",r.a.Int16],["reserved2",r.a.Int16],["reserved3",r.a.Int16],["metricDataFormat",r.a.Int16],["numOfLongHorMetrics",r.a.Uint16]])},function(t,e,n){"use strict";var i=n(6);e.a=i.a.create("hmtx",[],{read(t,e){const n=this.offset;t.seek(n);const i=e.hhea.numOfLongHorMetrics,r=[];let s,a;for(s=0;s<i;++s)a={},a.advanceWidth=t.readUint16(),a.leftSideBearing=t.readInt16(),r.push(a);const o=r[i-1].advanceWidth,l=e.maxp.numGlyphs-i;for(s=0;s<l;++s)a={},a.advanceWidth=o,a.leftSideBearing=t.readInt16(),r.push(a);return r},write(t,e){let n;const i=e.hhea.numOfLongHorMetrics;for(n=0;n<i;++n)t.writeUint16(e.glyf[n].advanceWidth),t.writeInt16(e.glyf[n].leftSideBearing);const r=e.glyf.length-i;for(n=0;n<r;++n)t.writeInt16(e.glyf[i+n].leftSideBearing);return t},size(t){let e=0;const n=t.glyf[t.glyf.length-1].advanceWidth;for(let i=t.glyf.length-2;i>=0&&n===t.glyf[i].advanceWidth;i--)e++;return t.hhea.numOfLongHorMetrics=t.glyf.length-e,4*t.hhea.numOfLongHorMetrics+2*e}})},function(t,e,n){"use strict";var i=n(6),r=n(1),s=n(13),a=n(63);const o=i.a.create("posthead",[["format",r.a.Fixed],["italicAngle",r.a.Fixed],["underlinePosition",r.a.Int16],["underlineThickness",r.a.Int16],["isFixedPitch",r.a.Uint32],["minMemType42",r.a.Uint32],["maxMemType42",r.a.Uint32],["minMemType1",r.a.Uint32],["maxMemType1",r.a.Uint32]]);e.a=i.a.create("post",[],{read(t,e){const n=t.readFixed(this.offset),i=new o(this.offset).read(t,e);if(2===n){const n=t.readUint16(),r=[];for(let e=0;e<n;++e)r.push(t.readUint16());const a=t.offset,o=e.tables.post.length-(a-this.offset),l=t.readBytes(t.offset,o);i.nameIndex=r,i.names=s.a.getPascalString(l)}else 2.5===n&&(i.format=3);return i},write(t,e){const n=e.post||{format:3};if(t.writeFixed(n.format),t.writeFixed(n.italicAngle||0),t.writeInt16(n.underlinePosition||0),t.writeInt16(n.underlineThickness||0),t.writeUint32(n.isFixedPitch||0),t.writeUint32(n.minMemType42||0),t.writeUint32(n.maxMemType42||0),t.writeUint32(n.minMemType1||0),t.writeUint32(n.maxMemType1||0),2===n.format){const n=e.glyf.length;t.writeUint16(n);const i=e.support.post.nameIndex;for(let e=0,n=i.length;e<n;e++)t.writeUint16(i[e]);e.support.post.names.forEach(e=>{t.writeBytes(e)})}},size(t){const e=t.glyf.length;if(t.post=t.post||{},t.post.format=t.post.format||3,t.post.maxMemType1=e,3===t.post.format||1===t.post.format)return 32;let n=34+2*e;const i=[],r=[];let o=0;for(let l=0;l<e;l++)if(0===l)r.push(0);else{const e=t.glyf[l],u=e.unicode?e.unicode[0]:0,h=a.a[u];if(void 0!==h)r.push(h);else{const t=e.name;if(!t||t.charCodeAt(0)<32)r.push(258+o++),i.push([0]),n++;else{r.push(258+o++);const e=s.a.toPascalStringBytes(t);i.push(e),n+=e.length}}}return t.support.post={nameIndex:r,names:i},n}})},function(t,e,n){"use strict";var i=n(6),r=n(1);e.a=i.a.create("OS/2",[["version",r.a.Uint16],["xAvgCharWidth",r.a.Int16],["usWeightClass",r.a.Uint16],["usWidthClass",r.a.Uint16],["fsType",r.a.Uint16],["ySubscriptXSize",r.a.Uint16],["ySubscriptYSize",r.a.Uint16],["ySubscriptXOffset",r.a.Uint16],["ySubscriptYOffset",r.a.Uint16],["ySuperscriptXSize",r.a.Uint16],["ySuperscriptYSize",r.a.Uint16],["ySuperscriptXOffset",r.a.Uint16],["ySuperscriptYOffset",r.a.Uint16],["yStrikeoutSize",r.a.Uint16],["yStrikeoutPosition",r.a.Uint16],["sFamilyClass",r.a.Uint16],["bFamilyType",r.a.Uint8],["bSerifStyle",r.a.Uint8],["bWeight",r.a.Uint8],["bProportion",r.a.Uint8],["bContrast",r.a.Uint8],["bStrokeVariation",r.a.Uint8],["bArmStyle",r.a.Uint8],["bLetterform",r.a.Uint8],["bMidline",r.a.Uint8],["bXHeight",r.a.Uint8],["ulUnicodeRange1",r.a.Uint32],["ulUnicodeRange2",r.a.Uint32],["ulUnicodeRange3",r.a.Uint32],["ulUnicodeRange4",r.a.Uint32],["achVendID",r.a.String,4],["fsSelection",r.a.Uint16],["usFirstCharIndex",r.a.Uint16],["usLastCharIndex",r.a.Uint16],["sTypoAscender",r.a.Int16],["sTypoDescender",r.a.Int16],["sTypoLineGap",r.a.Int16],["usWinAscent",r.a.Uint16],["usWinDescent",r.a.Uint16],["ulCodePageRange1",r.a.Uint32],["ulCodePageRange2",r.a.Uint32],["sxHeight",r.a.Int16],["sCapHeight",r.a.Int16],["usDefaultChar",r.a.Uint16],["usBreakChar",r.a.Uint16],["usMaxContext",r.a.Uint16]],{read(t,e){const n=t.readUint16(this.offset);let r=this.struct;0===n?r=r.slice(0,39):1===n&&(r=r.slice(0,41));const s=new(i.a.create("os2head",r))(this.offset).read(t,e);return Object.assign({ulCodePageRange1:1,ulCodePageRange2:0,sxHeight:0,sCapHeight:0,usDefaultChar:0,usBreakChar:32,usMaxContext:0},s)},size(t){let e=16384,n=16384,r=-16384,s=-16384,a=-1,o=16384,l=16384,u=-16384,h=0,c=1114111,d=-1,f=0,p=0,g=0,m=0,y=0,v=0,_=0;const x=!!t.writeOptions&&t.writeOptions.hinting;if(x&&(t.cvt&&(y=Math.max(y,t.cvt.length)),t.prep&&(y=Math.max(y,t.prep.length)),t.fpgm&&(y=Math.max(y,t.fpgm.length))),t.glyf.forEach(i=>{if(i.compound){let e=0,n=0;i.glyfs.forEach(i=>{const r=t.glyf[i.glyphIndex];r&&(e+=r.contours?r.contours.length:0,r.contours&&r.contours.length&&r.contours.forEach(t=>{n+=t.length}))}),v++,g=Math.max(g,n),m=Math.max(m,e)}else if(i.contours&&i.contours.length){p=Math.max(p,i.contours.length);let t=0;i.contours.forEach(e=>{t+=e.length}),f=Math.max(f,t)}x&&i.instructions&&(y=Math.max(y,i.instructions.length)),i.xMin<e&&(e=i.xMin),i.yMin<n&&(n=i.yMin),i.xMax>r&&(r=i.xMax),i.yMax>s&&(s=i.yMax),a=Math.max(a,i.advanceWidth),o=Math.min(o,i.leftSideBearing),l=Math.min(l,i.advanceWidth-i.xMax),u=Math.max(u,i.xMax),h+=i.advanceWidth,_++;let w=i.unicode;"number"==typeof i.unicode&&(w=[i.unicode]),Array.isArray(w)&&w.forEach(t=>{65535!==t&&(c=Math.min(c,t),d=Math.max(d,t))})}),t["OS/2"].version=4,t["OS/2"].achVendID=(t["OS/2"].achVendID+"    ").slice(0,4),t["OS/2"].xAvgCharWidth=h/(_||1),t["OS/2"].ulUnicodeRange2=268435456,t["OS/2"].usFirstCharIndex=c,t["OS/2"].usLastCharIndex=d,t.hhea.version=t.hhea.version||1,t.hhea.advanceWidthMax=a,t.hhea.minLeftSideBearing=o,t.hhea.minRightSideBearing=l,t.hhea.xMaxExtent=u,t.head.version=t.head.version||1,t.head.lowestRecPPEM=t.head.lowestRecPPEM||8,t.head.xMin=e,t.head.yMin=n,t.head.xMax=r,t.head.yMax=s,t.support.head){const{xMin:e,yMin:n,xMax:i,yMax:r}=t.support.head;null!=e&&(t.head.xMin=e),null!=n&&(t.head.yMin=n),null!=i&&(t.head.xMax=i),null!=r&&(t.head.yMax=r)}if(t.support.hhea){const{advanceWidthMax:e,xMaxExtent:n,minLeftSideBearing:i,minRightSideBearing:r}=t.support.hhea;null!=e&&(t.hhea.advanceWidthMax=e),null!=n&&(t.hhea.xMaxExtent=n),null!=i&&(t.hhea.minLeftSideBearing=i),null!=r&&(t.hhea.minRightSideBearing=r)}return t.maxp=t.maxp||{},t.support.maxp={version:1,numGlyphs:t.glyf.length,maxPoints:f,maxContours:p,maxCompositePoints:g,maxCompositeContours:m,maxZones:t.maxp.maxZones||0,maxTwilightPoints:t.maxp.maxTwilightPoints||0,maxStorage:t.maxp.maxStorage||0,maxFunctionDefs:t.maxp.maxFunctionDefs||0,maxStackElements:t.maxp.maxStackElements||0,maxSizeOfInstructions:y,maxComponentElements:v,maxComponentDepth:v?1:0},i.a.size.call(this,t)}})},function(t,e,n){"use strict";var i=n(6);e.a=i.a.create("GPOS",[],{read(t,e){const n=e.tables.GPOS.length;return t.readBytes(this.offset,n)},write(t,e){e.GPOS&&t.writeBytes(e.GPOS,e.GPOS.length)},size:t=>t.GPOS?t.GPOS.length:0})},function(t,e,n){"use strict";var i=n(6);e.a=i.a.create("kern",[],{read(t,e){const n=e.tables.kern.length;return t.readBytes(this.offset,n)},write(t,e){e.kern&&t.writeBytes(e.kern,e.kern.length)},size:t=>t.kern?t.kern.length:0})},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n(21),r=n(28),s=n(5);function a(t,e={}){const n=new i.a(t,0,t.byteLength,!0);20556!==n.readUint16(34)&&s.a.raise(10110);const a=n.readUint32(8);131073!==a&&65536!==a&&131074!==a&&s.a.raise(10110);const o=t.byteLength||t.length,l=n.readUint32(4);let u=82;u+=4+n.readUint16(u);u+=4+n.readUint16(u);u+=4+n.readUint16(u);if(u+=2+n.readUint16(u),131073===a||131074===a){u+=4+n.readUint16(u+2)}if(131074===a){u+=10;u+=2+n.readUint16(u),u+=4;u+=4+n.readUint32(u)}if(u+l>o&&s.a.raise(10001),t.slice)return t.slice(u,u+l);const h=n.readBytes(u,l);return new r.a(new ArrayBuffer(l)).writeBytes(h).getBuffer()}},function(t,e,n){"use strict";n.d(e,"b",(function(){return l})),n.d(e,"a",(function(){return h}));var i=n(11),r=n(25),s=n(17),a=n(35),o=n(5);function l(t,e){return t.name?t.name:t.unicode&&t.unicode.length?"uni-"+t.unicode[0]:"symbol-"+e}function u(t,e={}){const n={},r=t.head.unitsPerEm,o=t.hhea.descent;let u="";for(let e=1,n=t.glyf.length;e<n;e++){const n=t.glyf[e];if(!n.compound&&n.contours){const t=a.a.flip(n.contours),h={descent:o,unitsPerEm:r,id:l(n,e),d:Object(s.a)(t)};u+=i.a.format('<symbol id="${id}" viewBox="0 ${descent} ${unitsPerEm} ${unitsPerEm}"><path d="${d}"></path></symbol>',h)}}return n.symbolList=u,i.a.format('<svg style="position: absolute; width: 0; height: 0;" width="0" height="0" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs>${symbolList}</defs></svg>',n)}function h(t,e={}){if(t instanceof ArrayBuffer){const n=new r.a,i=n.read(t);return n.dispose(),u(i,e)}if(t.version&&t.glyf)return u(t,e);o.a.raise(10112)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n(27),r=n.n(i);function s(t,e={}){if(!r.a.isInited())throw new Error("use woff2.init() to init woff2 module!");return r.a.encode(t).buffer}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n(27),r=n.n(i);function s(t,e={}){if(!r.a.isInited())throw new Error("use woff2.init() to init woff2 module!");return r.a.decode(t).buffer}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n(34);function r(t){return"data:font/ttf;charset=utf-8;base64,"+Object(i.a)(t)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return L}));var i=n(48),r=n(67),s=n(68),a=n(82),o=n(51),l=n(69),u=n(70),h=n(71),c=n(72),d=n(6),f=n(13);var p=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],g=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"];var m=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"];function y(t,e){return e=e<=390?m[e]:t[e-391]}const v=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]}],_=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function x(t,e){let n,i,r,s;if(28===e)return n=t.readUint8(),i=t.readUint8(),n<<8|i;if(29===e)return n=t.readUint8(),i=t.readUint8(),r=t.readUint8(),s=t.readUint8(),n<<24|i<<16|r<<8|s;if(30===e)return function(t){let e="";const n=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];for(;;){const i=t.readUint8(),r=i>>4,s=15&i;if(15===r)break;if(e+=n[r],15===s)break;e+=n[s]}return parseFloat(e)}(t);if(e>=32&&e<=246)return e-139;if(e>=247&&e<=250)return n=t.readUint8(),256*(e-247)+n+108;if(e>=251&&e<=254)return n=t.readUint8(),256*-(e-251)-n-108;throw new Error("invalid b0 "+e+",at:"+t.offset)}function w(t,e,n){const i={};for(let r=0,s=e.length;r<s;r++){const s=e[r];let a=t[s.op];void 0===a&&(a=void 0!==s.value?s.value:null),"SID"===s.type&&(a=y(n,a)),i[s.name]=a}return i}function b(t,e,n){null!=e&&t.seek(e);const i=[];let r=[];const s=t.offset+(null!=n?n:t.length);for(;t.offset<s;){let e=t.readUint8();e<=21?(12===e&&(e=1200+t.readUint8()),i.push([e,r]),r=[]):r.push(x(t,e))}return function(t){const e={};for(let n=0,i=t.length;n<i;n++){const i=t[n][0];if(void 0!==e[i]){console.warn("dict already has key:"+i);continue}const r=t[n][1];e[i]=1===r.length?r[0]:r}return e}(i)}var S={parseTopDict:function(t,e,n,i){return w(b(t,e||0,n||t.length),v,i)},parsePrivateDict:function(t,e,n,i){return w(b(t,e||0,n||t.length),_,i)}};function C(t,e,n){let i,r,s,a;const o=[];let l=[];const u=[],h=[];let c=0,d=!1,f=e.defaultWidthX,p=!1,g=0,m=0;function y(t,e){l.push({onCurve:!0,x:t,y:e})}function v(t,e,n,i,r,s){l.push({x:t,y:e}),l.push({x:n,y:i}),l.push({onCurve:!0,x:r,y:s})}function _(t,e){p&&o.push(l),l=[],y(t,e),p=!0}function x(){u.length%2!=0&&!d&&(f=u.shift()+e.nominalWidthX),c+=u.length>>1,u.length=0,d=!0}!function t(w){let b,S,C,E,T,M,k,O,A,P,I,D,L=0;for(;L<w.length;){let N=w[L];switch(L+=1,N){case 1:case 3:x();break;case 4:u.length>1&&!d&&(f=u.shift()+e.nominalWidthX,d=!0),m+=u.pop(),_(g,m);break;case 5:for(;u.length>0;)g+=u.shift(),m+=u.shift(),y(g,m);break;case 6:for(;u.length>0&&(g+=u.shift(),y(g,m),0!==u.length);)m+=u.shift(),y(g,m);break;case 7:for(;u.length>0&&(m+=u.shift(),y(g,m),0!==u.length);)g+=u.shift(),y(g,m);break;case 8:for(;u.length>0;)i=g+u.shift(),r=m+u.shift(),s=i+u.shift(),a=r+u.shift(),g=s+u.shift(),m=a+u.shift(),v(i,r,s,a,g,m);break;case 10:T=u.pop()+e.subrsBias,M=e.subrs[T],M&&t(M);break;case 11:return;case 12:switch(N=w[L],L+=1,N){case 35:i=g+u.shift(),r=m+u.shift(),s=i+u.shift(),a=r+u.shift(),k=s+u.shift(),O=a+u.shift(),A=k+u.shift(),P=O+u.shift(),I=A+u.shift(),D=P+u.shift(),g=I+u.shift(),m=D+u.shift(),u.shift(),v(i,r,s,a,k,O),v(A,P,I,D,g,m);break;case 34:i=g+u.shift(),r=m,s=i+u.shift(),a=r+u.shift(),k=s+u.shift(),O=a,A=k+u.shift(),P=a,I=A+u.shift(),D=m,g=I+u.shift(),v(i,r,s,a,k,O),v(A,P,I,D,g,m);break;case 36:i=g+u.shift(),r=m+u.shift(),s=i+u.shift(),a=r+u.shift(),k=s+u.shift(),O=a,A=k+u.shift(),P=a,I=A+u.shift(),D=P+u.shift(),g=I+u.shift(),v(i,r,s,a,k,O),v(A,P,I,D,g,m);break;case 37:i=g+u.shift(),r=m+u.shift(),s=i+u.shift(),a=r+u.shift(),k=s+u.shift(),O=a+u.shift(),A=k+u.shift(),P=O+u.shift(),I=A+u.shift(),D=P+u.shift(),Math.abs(I-g)>Math.abs(D-m)?g=I+u.shift():m=D+u.shift(),v(i,r,s,a,k,O),v(A,P,I,D,g,m);break;default:console.warn("Glyph "+n+": unknown operator "+(1200+N)),u.length=0}break;case 14:1!==u.length||d?4===u.length?(h[1]={glyphIndex:e.charset.indexOf(e.encoding[u.pop()]),transform:{a:1,b:0,c:0,d:1,e:0,f:0}},h[0]={glyphIndex:e.charset.indexOf(e.encoding[u.pop()]),transform:{a:1,b:0,c:0,d:1,e:0,f:0}},h[1].transform.f=u.pop(),h[1].transform.e=u.pop()):5===u.length&&(d||(f=u.shift()+e.nominalWidthX),d=!0,h[1]={glyphIndex:e.charset.indexOf(e.encoding[u.pop()]),transform:{a:1,b:0,c:0,d:1,e:0,f:0}},h[0]={glyphIndex:e.charset.indexOf(e.encoding[u.pop()]),transform:{a:1,b:0,c:0,d:1,e:0,f:0}},h[1].transform.f=u.pop(),h[1].transform.e=u.pop()):(f=u.shift()+e.nominalWidthX,d=!0),p&&(o.push(l),p=!1);break;case 18:x();break;case 19:case 20:x(),L+=c+7>>3;break;case 21:u.length>2&&!d&&(f=u.shift()+e.nominalWidthX,d=!0),m+=u.pop(),g+=u.pop(),_(g,m);break;case 22:u.length>1&&!d&&(f=u.shift()+e.nominalWidthX,d=!0),g+=u.pop(),_(g,m);break;case 23:x();break;case 24:for(;u.length>2;)i=g+u.shift(),r=m+u.shift(),s=i+u.shift(),a=r+u.shift(),g=s+u.shift(),m=a+u.shift(),v(i,r,s,a,g,m);g+=u.shift(),m+=u.shift(),y(g,m);break;case 25:for(;u.length>6;)g+=u.shift(),m+=u.shift(),y(g,m);i=g+u.shift(),r=m+u.shift(),s=i+u.shift(),a=r+u.shift(),g=s+u.shift(),m=a+u.shift(),v(i,r,s,a,g,m);break;case 26:for(u.length%2&&(g+=u.shift());u.length>0;)i=g,r=m+u.shift(),s=i+u.shift(),a=r+u.shift(),g=s,m=a+u.shift(),v(i,r,s,a,g,m);break;case 27:for(u.length%2&&(m+=u.shift());u.length>0;)i=g+u.shift(),r=m,s=i+u.shift(),a=r+u.shift(),g=s+u.shift(),m=a,v(i,r,s,a,g,m);break;case 28:b=w[L],S=w[L+1],u.push((b<<24|S<<16)>>16),L+=2;break;case 29:T=u.pop()+e.gsubrsBias,M=e.gsubrs[T],M&&t(M);break;case 30:for(;u.length>0&&(i=g,r=m+u.shift(),s=i+u.shift(),a=r+u.shift(),g=s+u.shift(),m=a+(1===u.length?u.shift():0),v(i,r,s,a,g,m),0!==u.length);)i=g+u.shift(),r=m,s=i+u.shift(),a=r+u.shift(),m=a+u.shift(),g=s+(1===u.length?u.shift():0),v(i,r,s,a,g,m);break;case 31:for(;u.length>0&&(i=g+u.shift(),r=m,s=i+u.shift(),a=r+u.shift(),m=a+u.shift(),g=s+(1===u.length?u.shift():0),v(i,r,s,a,g,m),0!==u.length);)i=g,r=m+u.shift(),s=i+u.shift(),a=r+u.shift(),g=s+u.shift(),m=a+(1===u.length?u.shift():0),v(i,r,s,a,g,m);break;default:N<32?console.warn("Glyph "+n+": unknown operator "+N):N<247?u.push(N-139):N<251?(b=w[L],L+=1,u.push(256*(N-247)+b+108)):N<255?(b=w[L],L+=1,u.push(256*-(N-251)-b-108)):(b=w[L],S=w[L+1],C=w[L+2],E=w[L+3],L+=4,u.push((b<<24|S<<16|C<<8|E)/65536))}}}(t);const w={contours:o.map(t=>{const e=t.length-1;return t[0].x===t[e].x&&t[0].y===t[e].y&&t.splice(e,1),t}),advanceWidth:f};return h.length&&(w.compound=!0,w.glyfs=h),w}var E=n(21);function T(t,e){let n=0;for(let i=0;i<e;i++)n<<=8,n+=t.readUint8();return n}function M(t,e,n){e&&t.seek(e);const i=t.offset,r=[],s=[],a=t.readUint16();let o,l;if(0!==a){const e=t.readUint8();for(o=0,l=a+1;o<l;o++)r.push(T(t,e));for(o=0,l=a;o<l;o++){let e=t.readBytes(r[o+1]-r[o]);n&&(e=n(e)),s.push(e)}}return{objects:s,startOffset:i,endOffset:t.offset}}function k(t){let e;return e=t.length<1240?107:t.length<33900?1131:32768,e}var O=d.a.create("cff",[],{read(t,e){const n=this.offset;t.seek(n);const i=function(t){const e={};return e.startOffset=t.offset,e.endOffset=e.startOffset+4,e.formatMajor=t.readUint8(),e.formatMinor=t.readUint8(),e.size=t.readUint8(),e.offsetSize=t.readUint8(),e}(t),r=M(t,i.endOffset,f.a.getString),s=M(t,r.endOffset),a=M(t,s.endOffset,f.a.getString),o=M(t,a.endOffset),l={head:i};l.gsubrs=o.objects,l.gsubrsBias=k(o.objects);const u=new E.a(new Uint8Array(s.objects[0]).buffer),h=S.parseTopDict(u,0,u.length,a.objects);l.topDict=h;const c=h.private[0];let d,v={};if(c?(d=n+h.private[1],v=S.parsePrivateDict(t,d,c,a.objects),l.defaultWidthX=v.defaultWidthX,l.nominalWidthX=v.nominalWidthX):(l.defaultWidthX=0,l.nominalWidthX=0),v.subrs){const e=M(t,d+v.subrs);l.subrs=e.objects,l.subrsBias=k(l.subrs)}else l.subrs=[],l.subrsBias=0;l.privateDict=v;const _=M(t,n+h.charStrings),x=_.objects.length;h.charset<3?l.charset=m:l.charset=function(t,e,n,i){let r,s,a;e&&t.seek(e),n-=1;const o=[".notdef"],l=t.readUint8();if(0===l)for(r=0;r<n;r+=1)s=t.readUint16(),o.push(y(i,s));else if(1===l)for(;o.length<=n;)for(s=t.readUint16(),a=t.readUint8(),r=0;r<=a;r+=1)o.push(y(i,s)),s+=1;else{if(2!==l)throw new Error("Unknown charset format "+l);for(;o.length<=n;)for(s=t.readUint16(),a=t.readUint16(),r=0;r<=a;r+=1)o.push(y(i,s)),s+=1}return o}(t,n+h.charset,x,a.objects),0===h.encoding?l.encoding=p:1===h.encoding?l.encoding=g:l.encoding=function(t,e){let n,i;null!=e&&t.seek(e);const r={},s=t.readUint8();if(0===s){const e=t.readUint8();for(n=0;n<e;n+=1)i=t.readUint8(),r[i]=n}else if(1===s){const e=t.readUint8();for(i=1,n=0;n<e;n+=1){const e=t.readUint8(),n=t.readUint8();for(let t=e;t<=e+n;t+=1)r[t]=i,i+=1}}else console.warn("unknown encoding format:"+s);return r}(t,n+h.encoding),l.glyf=[];const w=e.readOptions.subset;if(w&&w.length>0){const t={0:!0},n=e.cmap;Object.keys(n).forEach(e=>{if(w.indexOf(+e)>-1){const i=n[e];t[i]=!0}}),e.subsetMap=t,Object.keys(t).forEach(t=>{t=+t;const e=C(_.objects[t],l,t);e.name=l.charset[t],l.glyf[t]=e})}else for(let t=0,e=x;t<e;t++){const e=C(_.objects[t],l,t);e.name=l.charset[t],l.glyf.push(e)}return l},write(t,e){throw new Error("not support write cff table")},size(t){throw new Error("not support get cff table size")}}),A=n(73),P=n(74),I={head:r.a,maxp:s.a,cmap:a.a,name:o.a,hhea:l.a,hmtx:u.a,post:h.a,"OS/2":c.a,CFF:O,GPOS:A.a,kern:P.a},D=n(5);class L{constructor(t={}){t.subset=t.subset||[],this.options=t}readBuffer(t){const e=new E.a(t,0,t.byteLength,!1),n={};return n.version=e.readString(0,4),"OTTO"!==n.version&&D.a.raise(10301),n.numTables=e.readUint16(),(n.numTables<=0||n.numTables>100)&&D.a.raise(10302),n.searchRange=e.readUint16(),n.entrySelector=e.readUint16(),n.rangeShift=e.readUint16(),n.tables=new i.a(e.offset).read(e,n),n.tables.head&&n.tables.cmap&&n.tables.CFF||D.a.raise(10302),n.readOptions=this.options,Object.keys(I).forEach(t=>{if(n.tables[t]){const i=n.tables[t].offset;n[t]=new I[t](i).read(e,n)}}),n.CFF.glyf||D.a.raise(10303),e.dispose(),n}resolveGlyf(t){const e=t.cmap;let n=t.CFF.glyf;const i=t.readOptions.subset?t.subsetMap:null;if(Object.keys(e).forEach(t=>{const r=e[t];i&&!i[r]||(n[r].unicode||(n[r].unicode=[]),n[r].unicode.push(+t))}),t.hmtx.forEach((t,e)=>{i&&!i[e]||(n[e].advanceWidth=n[e].advanceWidth||t.advanceWidth||0,n[e].leftSideBearing=t.leftSideBearing)}),i){const t=[];Object.keys(i).forEach(e=>{t.push(n[+e])}),n=t}t.glyf=n}cleanTables(t){delete t.readOptions,delete t.tables,delete t.hmtx,delete t.post.glyphNameIndex,delete t.post.names,delete t.subsetMap;const e=t.CFF;delete e.glyf,delete e.charset,delete e.encoding,delete e.gsubrs,delete e.gsubrsBias,delete e.subrs,delete e.subrsBias}read(t){return this.font=this.readBuffer(t),this.resolveGlyf(this.font),this.cleanTables(this.font),this.font}dispose(){delete this.font,delete this.options}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return k}));var i=n(11),r="undefined"!=typeof window&&window.DOMParser?window.DOMParser:n(111).DOMParser,s=n(22),a=n(10),o=n(9),l=n(56),u=n(12);function h(t,e,n,i){void 0===i&&(i=n);const r=Object(a.b)(l.a),s=2*+n/r.width,h=2*+i/r.height,c=r.width*s/2,d=r.height*h/2,f=Object(u.a)(l.a);return Object(o.a)(f,s,h),Object(o.a)(f,1,1,+t-c,+e-d),f}var c=n(37);function d(t){if(!t||!t.length)return null;const e=[],n=Object(c.a)(t);for(let t=0,i=n.length;t<i;t+=2)e.push({x:n[t],y:n[t+1],onCurve:!0});return e}const f=/(\w+)\s*\(([\d-.,\s]*)\)/g;function p(t){if(!t)return!1;f.lastIndex=0;const e=[];let n;for(;n=f.exec(t);)e.push({name:n[1],params:Object(c.a)(n[2])});return e}function g(t=[1,0,0,1],e=[1,0,0,1]){return 4===t.length?[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3]]:[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}function m(...t){let e=t[0];for(let n,i=1;n=t[i];i++)e=g(e,n);return e}var y=n(62);function v(t,e){if(!(t&&t.length&&e&&e.length))return t;let n=[1,0,0,1,0,0];for(let t=0,i=e.length;t<i;t++){const i=e[t],r=i.params;let s=null;switch(i.name){case"translate":n=g(n,[1,0,0,1,r[0],r[1]]);break;case"scale":n=g(n,[r[0],0,0,r[1],0,0]);break;case"matrix":n=g(n,[r[0],r[1],r[2],r[3],r[4],r[5]]);break;case"rotate":s=r[0]*Math.PI/180,n=r.length>1?m(n,[1,0,0,1,-r[1],-r[2]],[Math.cos(s),Math.sin(s),-Math.sin(s),Math.cos(s),0,0],[1,0,0,1,r[1],r[2]]):g(n,[Math.cos(s),Math.sin(s),-Math.sin(s),Math.cos(s),0,0]);break;case"skewX":n=g(n,[1,0,Math.tan(r[0]*Math.PI/180),1,0,0]);break;case"skewY":n=g(n,[1,Math.tan(r[0]*Math.PI/180),0,1,0,0])}}return t.forEach(t=>{Object(y.a)(t,n[0],n[1],n[2],n[3],n[4],n[5])}),t}const _={path:{parse:s.a,params:["d"],contours:!0},circle:{parse:h,params:["cx","cy","r"]},ellipse:{parse:h,params:["cx","cy","rx","ry"]},rect:{parse:function(t,e,n,i){return[{x:t=+t,y:e=+e,onCurve:!0},{x:t+(n=+n),y:e,onCurve:!0},{x:t+n,y:e+(i=+i),onCurve:!0},{x:t,y:e+i,onCurve:!0}]},params:["x","y","width","height"]},polygon:{parse:d,params:["points"]},polyline:{parse:d,params:["points"]}};function x(t){let e,n,i,r,s;const a=[];if(t.length)for(e=0,n=t.length;e<n;e++){const n=t[e],o=n.tagName;if(_[o]){const t=_[o].params,e=[];for(i=0,r=t.length;i<r;i++)e.push(n.getAttribute(t[i]));if(s={name:o,params:e,transform:p(n.getAttribute("transform"))},n.parentNode){let t=n.parentNode;const e=s.transform||[];let i;const r=function(t){e.unshift(t)};for(;null!==t&&"svg"!==t.tagName;)i=t.getAttribute("transform"),i&&p(i).reverse().forEach(r),t=t.parentNode;s.transform=e.length?e:null}a.push(s)}}if(a.length){const t=[];for(e=0,n=a.length;e<n;e++){s=a[e];const n=_[s.name],o=n.parse.apply(null,s.params);if(o&&o.length){let e=n.contours?o:[o];for(s.transform&&(e=v(e,s.transform)),i=0,r=e.length;i<r;i++)t.push(e[i])}}return t}return!1}var w=n(35),b=n(29),S=n(5),C=n(52),E=n(60);function T(t){if("svgfont"===t.from&&t.head.unitsPerEm>128)t.glyf.forEach(t=>{t.contours&&(Object(b.a)(t),Object(E.a)(t))});else{let e=16384,n=-16384,i=16384,r=-16384;t.glyf.forEach(t=>{if(t.contours){const s=Object(a.c)(...t.contours);s&&(e=Math.min(e,s.x),n=Math.max(n,s.x+s.width),i=Math.min(i,s.y),r=Math.max(r,s.y+s.height))}});const s=1024/function(t,e,n,i){const r=Math.ceil(Math.min(i-n,e-t));if(!r)return 1024;if(r<=128)return r;let s=128;for(;s<16384;){if(r<=1.2*s)return s;s<<=1}return 1024}(e,n,i,r);t.glyf.forEach(t=>{Object(b.a)(t,s,s),Object(E.a)(t)}),t.head.unitsPerEm=1024}return t}function M(t,e){let n;if(t.getElementsByTagName("svg").length||S.a.raise(10106),t.getElementsByTagName("font")[0]?(n=function(){const t=Object(C.a)();return t.head.unitsPerEm=0,t.from="svgfont",t}(),function(t,e){const n=t.getElementsByTagName("metadata")[0],r=t.getElementsByTagName("font")[0],s=t.getElementsByTagName("font-face")[0];if(n&&n.textContent&&(e.metadata=i.a.decodeHTML(n.textContent.trim())),r&&(e.id=r.getAttribute("id")||"",e.hhea.advanceWidthMax=+(r.getAttribute("horiz-adv-x")||0),e.from="svgfont"),s){const t=e["OS/2"];e.name.fontFamily=s.getAttribute("font-family")||"",t.usWeightClass=+(s.getAttribute("font-weight")||0),e.head.unitsPerEm=+(s.getAttribute("units-per-em")||0);const n=(s.getAttribute("panose-1")||"").split(" ");["bFamilyType","bSerifStyle","bWeight","bProportion","bContrast","bStrokeVariation","bArmStyle","bLetterform","bMidline","bXHeight"].forEach((e,i)=>{t[e]=+(n[i]||0)}),e.hhea.ascent=+(s.getAttribute("ascent")||0),e.hhea.descent=+(s.getAttribute("descent")||0),t.bXHeight=+(s.getAttribute("x-height")||0);const i=(s.getAttribute("bbox")||"").split(" ");["xMin","yMin","xMax","yMax"].forEach((t,n)=>{e.head[t]=+(i[n]||"")}),e.post.underlineThickness=+(s.getAttribute("underline-thickness")||0),e.post.underlinePosition=+(s.getAttribute("underline-position")||0);const r=s.getAttribute("unicode-range");r&&r.replace(/u\+([0-9A-Z]+)(-[0-9A-Z]+)?/i,(e,n,i)=>{t.usFirstCharIndex=Number("0x"+n),t.usLastCharIndex=i?Number("0x"+i.slice(1)):4294967295})}}(t,n),function(t,e){const n=t.getElementsByTagName("missing-glyph")[0];let i,r;if(n){const t={name:".notdef"};n.getAttribute("horiz-adv-x")&&(t.advanceWidth=+n.getAttribute("horiz-adv-x")),(i=n.getAttribute("d"))&&(t.contours=Object(s.a)(i)),e.glyf[0]&&".notdef"===e.glyf[0].name&&e.glyf.splice(0,1),e.glyf.unshift(t)}const a=t.getElementsByTagName("glyph");if(a.length)for(let t=0,n=a.length;t<n;t++){const n=a[t],o={name:n.getAttribute("glyph-name")||n.getAttribute("name")||""};if(n.getAttribute("horiz-adv-x")&&(o.advanceWidth=+n.getAttribute("horiz-adv-x")),r=n.getAttribute("unicode")){const t=[];let a=0;for(let e=0;e<r.length;e++){const n=r.codePointAt(e);t.push(n),e=n>65535?e+1:e,a+=1}1===a&&(o.unicode=t,(i=n.getAttribute("d"))&&(o.contours=Object(s.a)(i)),e.glyf.push(o))}}}(t,n)):(n={from:"svg","OS/2":{},name:{},hhea:{},head:{},post:{},glyf:[]},function(t,e){let n,i,r;const s=t.getElementsByTagName("path");if(s.length)for(let t=0,a=s.length;t<a;t++)r=s[t],i={name:r.getAttribute("name")||""},n=x([r]),i.contours=n,e.glyf.push(i);n=x(Array.prototype.slice.call(t.getElementsByTagName("*")).filter(t=>"path"!==t.tagName)),n&&(i={name:""},i.contours=n,e.glyf.push(i))}(t,n)),n.glyf.length||S.a.raise(10201),"svg"===n.from){const t=n.glyf;let i,r;if(e.combinePath){const e=[];for(i=0,r=t.length;i<r;i++){const n=t[i].contours;for(let t=0,i=n.length;t<i;t++)e.push(n[t])}t[0].contours=e,t.splice(1)}for(i=0,r=t.length;i<r;i++)t[i].contours=w.a.flip(t[i].contours)}return n}function k(t,e={combinePath:!1}){let n=t;"string"==typeof t&&(n=function(t){if(r)try{const e=new r;return e.parseFromString(t,"text/xml")}catch(t){S.a.raise(10103)}S.a.raise(10004)}(t=function(t){return t=t.replace(/\s+xmlns(?::[\w-]+)?=("|')[^"']*\1/g," ").replace(/<defs[>\s][\s\S]+?\/defs>/g,t=>t.indexOf("</font>")>=0?t:"").replace(/<use[>\s][\s\S]+?\/use>/g,"")}(t)));return T(M(n,e))}},function(t,e,n){"use strict";var i=n(6);function r(t,e,n,i){let r,s,a;const o=i+n.offset;let l;if(n.format=t.readUint16(o),0===n.format){const e=n;for(e.length=t.readUint16(),e.language=t.readUint16(),a=[],r=0,s=e.length-6;r<s;r++)a.push(t.readUint8());e.glyphIdArray=a}else if(2===n.format){const e=n;e.length=t.readUint16(),e.language=t.readUint16();const i=[];let s=0,a=-1;for(let e=0,n=256;e<n;e++)i[e]=t.readUint16()/8,i[e]>s&&(s=i[e],a=e);const u=[];for(r=0;r<=s;r++)u[r]={firstCode:t.readUint16(),entryCount:t.readUint16(),idDelta:t.readUint16(),idRangeOffset:(t.readUint16()-8*(s-r)-2)/2};l=(o+e.length-t.offset)/2;const h=[];for(r=0;r<l;r++)h[r]=t.readUint16();e.subHeadKeys=i,e.maxPos=a,e.subHeads=u,e.glyphs=h}else if(4===n.format){const e=n;e.length=t.readUint16(),e.language=t.readUint16(),e.segCountX2=t.readUint16(),e.searchRange=t.readUint16(),e.entrySelector=t.readUint16(),e.rangeShift=t.readUint16();const i=e.segCountX2/2,s=[];for(r=0;r<i;++r)s.push(t.readUint16());e.endCode=s,e.reservedPad=t.readUint16();const u=[];for(r=0;r<i;++r)u.push(t.readUint16());e.startCode=u;const h=[];for(r=0;r<i;++r)h.push(t.readUint16());e.idDelta=h,e.idRangeOffsetOffset=t.offset;const c=[];for(r=0;r<i;++r)c.push(t.readUint16());for(e.idRangeOffset=c,l=(e.length-(t.offset-o))/2,e.glyphIdArrayOffset=t.offset,a=[],r=0;r<l;++r)a.push(t.readUint16());e.glyphIdArray=a}else if(6===n.format){const e=n;e.length=t.readUint16(),e.language=t.readUint16(),e.firstCode=t.readUint16(),e.entryCount=t.readUint16(),e.glyphIdArrayOffset=t.offset;const i=[],s=e.entryCount;for(r=0;r<s;++r)i.push(t.readUint16());e.glyphIdArray=i}else if(12===n.format){const e=n;e.reserved=t.readUint16(),e.length=t.readUint32(),e.language=t.readUint32(),e.nGroups=t.readUint32();const i=[],s=e.nGroups;for(r=0;r<s;++r){const e={};e.start=t.readUint32(),e.end=t.readUint32(),e.startId=t.readUint32(),i.push(e)}e.groups=i}else if(14===n.format){const e=n;e.length=t.readUint32();const i=t.readUint32(),r=[];let s=t.offset;for(let e=0;e<i;e++){const e=t.readUint24(s),n=t.readUint32(s+3),i=t.readUint32(s+7);if(s+=11,n){const i=t.readUint32(o+n);for(let n=0;n<i;n++){const n=t.readUint24(),i=t.readUint8();r.push({start:n,end:n+i,varSelector:e})}}if(i){const n=t.readUint32(o+i);for(let i=0;i<n;i++){const n=t.readUint24(),i=t.readUint16();r.push({unicode:n,glyphId:i,varSelector:e})}}}e.groups=r}else console.warn("not support cmap format:"+n.format)}function s(t,e,n,i){return t.writeUint16(e),t.writeUint16(n),t.writeUint32(i),t}function a(t){return t>32767?t-65536:t<-32767?t+65536:t}function o(t,e){let n=null;const i=[];let r={};return t.forEach(t=>{(void 0===e||t.unicode<=e)&&(null!==n&&t.unicode===n.unicode+1&&t.id===n.id+1||(null!==n?(r.end=n.unicode,i.push(r),r={start:t.unicode,startId:t.id,delta:a(t.id-t.unicode)}):(r.start=t.unicode,r.startId=t.id,r.delta=a(t.id-t.unicode))),n=t)}),null!==n&&(r.end=n.unicode,i.push(r)),i}e.a=i.a.create("cmap",[],{write:function(t,e){const n=e.support.cmap.hasGLyphsOver2Bytes;t.writeUint16(0),t.writeUint16(n?4:3);const i=4+(n?32:24),r=e.support.cmap.format4Size,a=e.support.cmap.format0Size;return s(t,0,3,i),s(t,1,0,i+r),s(t,3,1,i),n&&s(t,3,10,i+r+a),function(t,e){t.writeUint16(4),t.writeUint16(24+8*e.length),t.writeUint16(0);const n=e.length+1,i=Math.floor(Math.log(n)/Math.LN2),r=2*Math.pow(2,i);t.writeUint16(2*n),t.writeUint16(r),t.writeUint16(i),t.writeUint16(2*n-r),e.forEach(e=>{t.writeUint16(e.end)}),t.writeUint16(65535),t.writeUint16(0),e.forEach(e=>{t.writeUint16(e.start)}),t.writeUint16(65535),e.forEach(e=>{t.writeUint16(e.delta)}),t.writeUint16(1);for(let n=0,i=e.length;n<i;n++)t.writeUint16(0);t.writeUint16(0)}(t,e.support.cmap.format4Segments),function(t,e){t.writeUint16(0),t.writeUint16(262),t.writeUint16(0);let n,i=-1;for(;n=e.shift();){for(;++i<n[0];)t.writeUint8(0);t.writeUint8(n[1]),i=n[0]}for(;++i<256;)t.writeUint8(0)}(t,e.support.cmap.format0Segments),n&&function(t,e){t.writeUint16(12),t.writeUint16(0),t.writeUint32(16+12*e.length),t.writeUint32(0),t.writeUint32(e.length),e.forEach(e=>{t.writeUint32(e.start),t.writeUint32(e.end),t.writeUint32(e.startId)})}(t,e.support.cmap.format12Segments),t},read:function(t,e){const n={},i=this.offset;t.seek(i),n.version=t.readUint16();const s=n.numberSubtables=t.readUint16(),a=n.tables=[];let o=t.offset;for(let e=0,n=s;e<n;e++){const e={};e.platformID=t.readUint16(o),e.encodingID=t.readUint16(o+2),e.offset=t.readUint32(o+4),r(t,0,e,i),a.push(e),o+=8}return function(t,e){let n={},i=t.find((function(t){return 0===t.format})),r=t.find((function(t){return 3===t.platformID&&10===t.encodingID&&12===t.format})),s=t.find((function(t){return 3===t.platformID&&1===t.encodingID&&4===t.format})),a=t.find((function(t){return 3===t.platformID&&3===t.encodingID&&2===t.format})),o=t.find((function(t){return 0===t.platformID&&5===t.encodingID&&14===t.format}));if(i)for(let t=0,e=i.glyphIdArray.length;t<e;t++)i.glyphIdArray[t]&&(n[t]=i.glyphIdArray[t]);if(o)for(let t=0,e=o.groups.length;t<e;t++){let{unicode:e,glyphId:i}=o.groups[t];e&&(n[e]=i)}if(r)for(let t=0,e=r.nGroups;t<e;t++){let e=r.groups[t],i=e.startId,s=e.start,a=e.end;for(;s<=a;)n[s++]=i++}else if(s){let t=s.segCountX2/2,e=(s.glyphIdArrayOffset-s.idRangeOffsetOffset)/2;for(let i=0;i<t;++i)for(let t=s.startCode[i],r=s.endCode[i];t<=r;++t)if(0===s.idRangeOffset[i])n[t]=(t+s.idDelta[i])%65536;else{let r=i+s.idRangeOffset[i]/2+(t-s.startCode[i])-e,a=s.glyphIdArray[r];n[t]=0!==a?(a+s.idDelta[i])%65536:0}delete n[65535]}else if(a){let t=a.subHeadKeys,i=a.subHeads,r=a.glyphs,s=e.maxp.numGlyphs,o=0;for(let e=0;e<256;e++)if(0===t[e])e>=a.maxPos||e<i[0].firstCode||e>=i[0].firstCode+i[0].entryCount||i[0].idRangeOffset+(e-i[0].firstCode)>=r.length?o=0:0!==(o=r[i[0].idRangeOffset+(e-i[0].firstCode)])&&(o+=i[0].idDelta),0!==o&&o<s&&(n[e]=o);else{let a=t[e];for(let t=0,l=i[a].entryCount;t<l;t++)if(i[a].idRangeOffset+t>=r.length?o=0:0!==(o=r[i[a].idRangeOffset+t])&&(o+=i[a].idDelta),0!==o&&o<s){n[(e<<8|t+i[a].firstCode)%65535]=o}}}return n}(a,e)},size:function(t){t.support.cmap={};let e=[];t.glyf.forEach((t,n)=>{let i=t.unicode;"number"==typeof t.unicode&&(i=[t.unicode]),i&&i.length&&i.forEach(t=>{e.push({unicode:t,id:65535!==t?n:0})})}),e=e.sort((t,e)=>t.unicode-e.unicode),t.support.cmap.unicodes=e;const n=e;t.support.cmap.format4Segments=o(n,65535),t.support.cmap.format4Size=24+8*t.support.cmap.format4Segments.length,t.support.cmap.format0Segments=function(t){const e=[];return t.forEach(t=>{void 0!==t.unicode&&t.unicode<256&&e.push([t.unicode,t.id])}),e.sort((t,e)=>t[0]-e[0]),e}(e),t.support.cmap.format0Size=262;const i=n.some(t=>t.unicode>65535);if(i){t.support.cmap.hasGLyphsOver2Bytes=i;const n=e;t.support.cmap.format12Segments=o(n),t.support.cmap.format12Size=16+12*t.support.cmap.format12Segments.length}return 4+(i?32:24)+t.support.cmap.format0Size+t.support.cmap.format4Size+(i?t.support.cmap.format12Size:0)}})},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var i=n(5),r=n(80),s=n(24),a=n(20);function o(t){const e=[];let n,i,r,o;e.push(n=t[0]);for(let a=1,l=t.length;a<l;a++)if(i=t[a],i.onCurve)e.push(i),n=i;else{r=t[a+1],o=a===l-2?t[0]:t[a+2];const u=Object(s.a)(n,i,r,o);u[0][2].onCurve=!0,e.push(u[0][1]),e.push(u[0][2]),u[1]&&(u[1][2].onCurve=!0,e.push(u[1][1]),e.push(u[1][2])),n=o,a+=2}return Object(a.a)(e)}var l=n(10);function u(t,e){let n;if(t instanceof ArrayBuffer){const i=new r.a(e);n=i.read(t),i.dispose()}else t.head&&t.glyf&&t.cmap?n=t:i.a.raise(10111);return n.glyf.forEach(t=>{t.contours=function(t){if(!t||!t.length)return t;const e=[];for(let n=0,i=t.length;n<i;n++)t[n][0]&&e.push(o(t[n]));return e}(t.contours);const e=Object(l.c)(...t.contours);e?(t.xMin=e.x,t.xMax=e.x+e.width,t.yMin=e.y,t.yMax=e.y+e.height,t.leftSideBearing=t.xMin):(t.xMin=0,t.xMax=0,t.yMin=0,t.yMax=0,t.leftSideBearing=0)}),n.version=1,n.maxp.version=1,n.maxp.maxZones=n.maxp.maxTwilightPoints?2:1,delete n.CFF,delete n.VORG,n}},function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var i=n(11),r=n(13),s=n(25),a=n(17);var o=n(5);const l=n(33).a.fontId;function u(t,e){const n=t["OS/2"],s={id:t.name.uniqueSubFamily||l,metadata:i.a.encodeHTML(e.metadata||""),advanceWidth:t.hhea.advanceWidthMax,fontFamily:t.name.fontFamily,fontWeight:n.usWeightClass,unitsPerEm:t.head.unitsPerEm,panose:[n.bFamilyType,n.bSerifStyle,n.bWeight,n.bProportion,n.bContrast,n.bStrokeVariation,n.bArmStyle,n.bLetterform,n.bMidline,n.bXHeight].join(" "),ascent:t.hhea.ascent,descent:t.hhea.descent,xHeight:n.bXHeight,bbox:[t.head.xMin,t.head.yMin,t.head.xMax,t.head.yMax].join(" "),underlineThickness:t.post.underlineThickness,underlinePosition:t.post.underlinePosition,unicodeRange:"U+"+i.a.pad(n.usFirstCharIndex.toString(16),4)+"-"+i.a.pad(n.usLastCharIndex.toString(16),4),missing:{}};s.missing.advanceWidth=t.glyf[0].advanceWidth||0,s.missing.d=t.glyf[0].contours&&t.glyf[0].contours.length?'d="'+Object(a.a)(t.glyf[0].contours)+'"':"";let o="";for(let e=1,n=t.glyf.length;e<n;e++){const n=t.glyf[e];if(!n.compound&&n.contours&&n.unicode&&n.unicode.length){const t={name:r.a.escape(n.name),unicode:(u=n.unicode,"number"==typeof u&&(u=[u]),u.map(t=>t<32?"":t>=32&&t<=255?i.a.encodeHTML(String.fromCharCode(t)):"&#x"+t.toString(16)+";").join("")),d:Object(a.a)(n.contours)};o+=i.a.format('<glyph glyph-name="${name}" unicode="${unicode}" d="${d}" />',t)}}var u;return s.glyphList=o,i.a.format('<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd" ><svg xmlns="http://www.w3.org/2000/svg"><metadata>${metadata}</metadata><defs><font id="${id}" horiz-adv-x="${advanceWidth}"><font-face font-family="${fontFamily}" font-weight="${fontWeight}" font-stretch="normal" units-per-em="${unitsPerEm}" panose-1="${panose}" ascent="${ascent}" descent="${descent}" x-height="${xHeight}" bbox="${bbox}" underline-thickness="${underlineThickness}" underline-position="${underlinePosition}" unicode-range="${unicodeRange}" /><missing-glyph horiz-adv-x="${missing.advanceWidth}" ${missing.d} />${glyphList}</font></defs></svg>',s)}function h(t,e={}){if(t instanceof ArrayBuffer){const n=new s.a,i=n.read(t);return n.dispose(),u(i,e)}if(t.version&&t.glyf)return u(t,e);o.a.raise(10109)}},function(t,e,n){"use strict";(function(t){e.a={toArrayBuffer(t){const e=t.length,n=new DataView(new ArrayBuffer(e),0,e);for(let i=0,r=e;i<r;i++)n.setUint8(i,t[i],!1);return n.buffer},toBuffer(e){if(Array.isArray(e))return t.from(e);const n=e.byteLength,i=new DataView(e,0,n),r=t.alloc(n);for(let t=0,e=n;t<e;t++)r[t]=i.getUint8(t,!1);return r}}}).call(this,n(55).Buffer)},function(t,e){var n,i,r=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function o(t){if(n===setTimeout)return setTimeout(t,0);if((n===s||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:s}catch(t){n=s}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(t){i=a}}();var l,u=[],h=!1,c=-1;function d(){h&&l&&(h=!1,l.length?u=l.concat(u):c=-1,u.length&&f())}function f(){if(!h){var t=o(d);h=!0;for(var e=u.length;e;){for(l=u,u=[];++c<e;)l&&l[c].run();c=-1,e=u.length}l=null,h=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function g(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new p(t,e)),1!==u.length||h||o(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,n){var i=n(61),r=i.find,s=i.NAMESPACE;function a(t){return""!==t}function o(t,e){return t.hasOwnProperty(e)||(t[e]=!0),t}function l(t){if(!t)return[];var e=function(t){return t?t.split(/[\t\n\f\r ]+/).filter(a):[]}(t);return Object.keys(e.reduce(o,{}))}function u(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}function h(t,e){var n=t.prototype;if(!(n instanceof e)){function i(){}i.prototype=e.prototype,u(n,i=new i),t.prototype=n=i}n.constructor!=t&&("function"!=typeof t&&console.error("unknown Class:"+t),n.constructor=t)}var c={},d=c.ELEMENT_NODE=1,f=c.ATTRIBUTE_NODE=2,p=c.TEXT_NODE=3,g=c.CDATA_SECTION_NODE=4,m=c.ENTITY_REFERENCE_NODE=5,y=c.ENTITY_NODE=6,v=c.PROCESSING_INSTRUCTION_NODE=7,_=c.COMMENT_NODE=8,x=c.DOCUMENT_NODE=9,w=c.DOCUMENT_TYPE_NODE=10,b=c.DOCUMENT_FRAGMENT_NODE=11,S=c.NOTATION_NODE=12,C={},E={},T=(C.INDEX_SIZE_ERR=(E[1]="Index size error",1),C.DOMSTRING_SIZE_ERR=(E[2]="DOMString size error",2),C.HIERARCHY_REQUEST_ERR=(E[3]="Hierarchy request error",3)),M=(C.WRONG_DOCUMENT_ERR=(E[4]="Wrong document",4),C.INVALID_CHARACTER_ERR=(E[5]="Invalid character",5),C.NO_DATA_ALLOWED_ERR=(E[6]="No data allowed",6),C.NO_MODIFICATION_ALLOWED_ERR=(E[7]="No modification allowed",7),C.NOT_FOUND_ERR=(E[8]="Not found",8)),k=(C.NOT_SUPPORTED_ERR=(E[9]="Not supported",9),C.INUSE_ATTRIBUTE_ERR=(E[10]="Attribute in use",10));C.INVALID_STATE_ERR=(E[11]="Invalid state",11),C.SYNTAX_ERR=(E[12]="Syntax error",12),C.INVALID_MODIFICATION_ERR=(E[13]="Invalid modification",13),C.NAMESPACE_ERR=(E[14]="Invalid namespace",14),C.INVALID_ACCESS_ERR=(E[15]="Invalid access",15);function O(t,e){if(e instanceof Error)var n=e;else n=this,Error.call(this,E[t]),this.message=E[t],Error.captureStackTrace&&Error.captureStackTrace(this,O);return n.code=t,e&&(this.message=this.message+": "+e),n}function A(){}function P(t,e){this._node=t,this._refresh=e,I(this)}function I(t){var e=t._node._inc||t._node.ownerDocument._inc;if(t._inc!=e){var n=t._refresh(t._node);yt(t,"length",n.length),u(n,t),t._inc=e}}function D(){}function L(t,e){for(var n=t.length;n--;)if(t[n]===e)return n}function N(t,e,n,i){if(i?e[L(e,i)]=n:e[e.length++]=n,t){n.ownerElement=t;var r=t.ownerDocument;r&&(i&&$(r,t,i),function(t,e,n){t&&t._inc++,n.namespaceURI===s.XMLNS&&(e._nsMap[n.prefix?n.localName:""]=n.value)}(r,t,n))}}function R(t,e,n){var i=L(e,n);if(!(i>=0))throw new O(M,new Error(t.tagName+"@"+n));for(var r=e.length-1;i<r;)e[i]=e[++i];if(e.length=r,t){var s=t.ownerDocument;s&&($(s,t,n),n.ownerElement=null)}}function z(){}function U(){}function j(t){return("<"==t?"&lt;":">"==t&&"&gt;")||"&"==t&&"&amp;"||'"'==t&&"&quot;"||"&#"+t.charCodeAt()+";"}function F(t,e){if(e(t))return!0;if(t=t.firstChild)do{if(F(t,e))return!0}while(t=t.nextSibling)}function B(){this.ownerDocument=this}function $(t,e,n,i){t&&t._inc++,n.namespaceURI===s.XMLNS&&delete e._nsMap[n.prefix?n.localName:""]}function X(t,e,n){if(t&&t._inc){t._inc++;var i=e.childNodes;if(n)i[i.length++]=n;else{for(var r=e.firstChild,s=0;r;)i[s++]=r,r=r.nextSibling;i.length=s,delete i[i.length]}}}function H(t,e){var n=e.previousSibling,i=e.nextSibling;return n?n.nextSibling=i:t.firstChild=i,i?i.previousSibling=n:t.lastChild=n,e.parentNode=null,e.previousSibling=null,e.nextSibling=null,X(t.ownerDocument,t),e}function G(t){return t&&t.nodeType===U.DOCUMENT_TYPE_NODE}function q(t){return t&&t.nodeType===U.ELEMENT_NODE}function V(t){return t&&t.nodeType===U.TEXT_NODE}function W(t,e){var n=t.childNodes||[];if(r(n,q)||G(e))return!1;var i=r(n,G);return!(e&&i&&n.indexOf(i)>n.indexOf(e))}function Y(t,e){var n=t.childNodes||[];if(r(n,(function(t){return q(t)&&t!==e})))return!1;var i=r(n,G);return!(e&&i&&n.indexOf(i)>n.indexOf(e))}function Z(t,e,n){if(!function(t){return t&&(t.nodeType===U.DOCUMENT_NODE||t.nodeType===U.DOCUMENT_FRAGMENT_NODE||t.nodeType===U.ELEMENT_NODE)}(t))throw new O(T,"Unexpected parent node type "+t.nodeType);if(n&&n.parentNode!==t)throw new O(M,"child not in parent");if(!function(t){return t&&(q(t)||V(t)||G(t)||t.nodeType===U.DOCUMENT_FRAGMENT_NODE||t.nodeType===U.COMMENT_NODE||t.nodeType===U.PROCESSING_INSTRUCTION_NODE)}(e)||G(e)&&t.nodeType!==U.DOCUMENT_NODE)throw new O(T,"Unexpected node type "+e.nodeType+" for parent node type "+t.nodeType)}function K(t,e,n){var i=t.childNodes||[],s=e.childNodes||[];if(e.nodeType===U.DOCUMENT_FRAGMENT_NODE){var a=s.filter(q);if(a.length>1||r(s,V))throw new O(T,"More than one element or text in fragment");if(1===a.length&&!W(t,n))throw new O(T,"Element in fragment can not be inserted before doctype")}if(q(e)&&!W(t,n))throw new O(T,"Only one element can be added and only after doctype");if(G(e)){if(r(i,G))throw new O(T,"Only one doctype is allowed");var o=r(i,q);if(n&&i.indexOf(o)<i.indexOf(n))throw new O(T,"Doctype can only be inserted before an element");if(!n&&o)throw new O(T,"Doctype can not be appended since element is present")}}function Q(t,e,n){var i=t.childNodes||[],s=e.childNodes||[];if(e.nodeType===U.DOCUMENT_FRAGMENT_NODE){var a=s.filter(q);if(a.length>1||r(s,V))throw new O(T,"More than one element or text in fragment");if(1===a.length&&!Y(t,n))throw new O(T,"Element in fragment can not be inserted before doctype")}if(q(e)&&!Y(t,n))throw new O(T,"Only one element can be added and only after doctype");if(G(e)){if(r(i,(function(t){return G(t)&&t!==n})))throw new O(T,"Only one doctype is allowed");var o=r(i,q);if(n&&i.indexOf(o)<i.indexOf(n))throw new O(T,"Doctype can only be inserted before an element")}}function J(t,e,n,i){Z(t,e,n),t.nodeType===U.DOCUMENT_NODE&&(i||K)(t,e,n);var r=e.parentNode;if(r&&r.removeChild(e),e.nodeType===b){var s=e.firstChild;if(null==s)return e;var a=e.lastChild}else s=a=e;var o=n?n.previousSibling:t.lastChild;s.previousSibling=o,a.nextSibling=n,o?o.nextSibling=s:t.firstChild=s,null==n?t.lastChild=a:n.previousSibling=a;do{s.parentNode=t}while(s!==a&&(s=s.nextSibling));return X(t.ownerDocument||t,t),e.nodeType==b&&(e.firstChild=e.lastChild=null),e}function tt(){this._nsMap={}}function et(){}function nt(){}function it(){}function rt(){}function st(){}function at(){}function ot(){}function lt(){}function ut(){}function ht(){}function ct(){}function dt(){}function ft(t,e){var n=[],i=9==this.nodeType&&this.documentElement||this,r=i.prefix,s=i.namespaceURI;if(s&&null==r&&null==(r=i.lookupPrefix(s)))var a=[{namespace:s,prefix:null}];return mt(this,n,t,e,a),n.join("")}function pt(t,e,n){var i=t.prefix||"",r=t.namespaceURI;if(!r)return!1;if("xml"===i&&r===s.XML||r===s.XMLNS)return!1;for(var a=n.length;a--;){var o=n[a];if(o.prefix===i)return o.namespace!==r}return!0}function gt(t,e,n){t.push(" ",e,'="',n.replace(/[<>&"\t\n\r]/g,j),'"')}function mt(t,e,n,i,r){if(r||(r=[]),i){if(!(t=i(t)))return;if("string"==typeof t)return void e.push(t)}switch(t.nodeType){case d:var a=t.attributes,o=a.length,l=t.firstChild,u=t.tagName,h=u;if(!(n=s.isHTML(t.namespaceURI)||n)&&!t.prefix&&t.namespaceURI){for(var c,y=0;y<a.length;y++)if("xmlns"===a.item(y).name){c=a.item(y).value;break}if(!c)for(var S=r.length-1;S>=0;S--){if(""===(C=r[S]).prefix&&C.namespace===t.namespaceURI){c=C.namespace;break}}if(c!==t.namespaceURI)for(S=r.length-1;S>=0;S--){var C;if((C=r[S]).namespace===t.namespaceURI){C.prefix&&(h=C.prefix+":"+u);break}}}e.push("<",h);for(var E=0;E<o;E++){"xmlns"==(T=a.item(E)).prefix?r.push({prefix:T.localName,namespace:T.value}):"xmlns"==T.nodeName&&r.push({prefix:"",namespace:T.value})}for(E=0;E<o;E++){var T,M,k;if(pt(T=a.item(E),0,r))gt(e,(M=T.prefix||"")?"xmlns:"+M:"xmlns",k=T.namespaceURI),r.push({prefix:M,namespace:k});mt(T,e,n,i,r)}if(u===h&&pt(t,0,r))gt(e,(M=t.prefix||"")?"xmlns:"+M:"xmlns",k=t.namespaceURI),r.push({prefix:M,namespace:k});if(l||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(u)){if(e.push(">"),n&&/^script$/i.test(u))for(;l;)l.data?e.push(l.data):mt(l,e,n,i,r.slice()),l=l.nextSibling;else for(;l;)mt(l,e,n,i,r.slice()),l=l.nextSibling;e.push("</",h,">")}else e.push("/>");return;case x:case b:for(l=t.firstChild;l;)mt(l,e,n,i,r.slice()),l=l.nextSibling;return;case f:return gt(e,t.name,t.value);case p:return e.push(t.data.replace(/[<&>]/g,j));case g:return e.push("<![CDATA[",t.data,"]]>");case _:return e.push("\x3c!--",t.data,"--\x3e");case w:var O=t.publicId,A=t.systemId;if(e.push("<!DOCTYPE ",t.name),O)e.push(" PUBLIC ",O),A&&"."!=A&&e.push(" ",A),e.push(">");else if(A&&"."!=A)e.push(" SYSTEM ",A,">");else{var P=t.internalSubset;P&&e.push(" [",P,"]"),e.push(">")}return;case v:return e.push("<?",t.target," ",t.data,"?>");case m:return e.push("&",t.nodeName,";");default:e.push("??",t.nodeName)}}function yt(t,e,n){t[e]=n}O.prototype=Error.prototype,u(C,O),A.prototype={length:0,item:function(t){return this[t]||null},toString:function(t,e){for(var n=[],i=0;i<this.length;i++)mt(this[i],n,t,e);return n.join("")},filter:function(t){return Array.prototype.filter.call(this,t)},indexOf:function(t){return Array.prototype.indexOf.call(this,t)}},P.prototype.item=function(t){return I(this),this[t]},h(P,A),D.prototype={length:0,item:A.prototype.item,getNamedItem:function(t){for(var e=this.length;e--;){var n=this[e];if(n.nodeName==t)return n}},setNamedItem:function(t){var e=t.ownerElement;if(e&&e!=this._ownerElement)throw new O(k);var n=this.getNamedItem(t.nodeName);return N(this._ownerElement,this,t,n),n},setNamedItemNS:function(t){var e,n=t.ownerElement;if(n&&n!=this._ownerElement)throw new O(k);return e=this.getNamedItemNS(t.namespaceURI,t.localName),N(this._ownerElement,this,t,e),e},removeNamedItem:function(t){var e=this.getNamedItem(t);return R(this._ownerElement,this,e),e},removeNamedItemNS:function(t,e){var n=this.getNamedItemNS(t,e);return R(this._ownerElement,this,n),n},getNamedItemNS:function(t,e){for(var n=this.length;n--;){var i=this[n];if(i.localName==e&&i.namespaceURI==t)return i}return null}},z.prototype={hasFeature:function(t,e){return!0},createDocument:function(t,e,n){var i=new B;if(i.implementation=this,i.childNodes=new A,i.doctype=n||null,n&&i.appendChild(n),e){var r=i.createElementNS(t,e);i.appendChild(r)}return i},createDocumentType:function(t,e,n){var i=new at;return i.name=t,i.nodeName=t,i.publicId=e||"",i.systemId=n||"",i}},U.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(t,e){return J(this,t,e)},replaceChild:function(t,e){J(this,t,e,Q),e&&this.removeChild(e)},removeChild:function(t){return H(this,t)},appendChild:function(t){return this.insertBefore(t,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(t){return function t(e,n,i){var r=new n.constructor;for(var s in n)if(Object.prototype.hasOwnProperty.call(n,s)){var a=n[s];"object"!=typeof a&&a!=r[s]&&(r[s]=a)}n.childNodes&&(r.childNodes=new A);switch(r.ownerDocument=e,r.nodeType){case d:var o=n.attributes,l=r.attributes=new D,u=o.length;l._ownerElement=r;for(var h=0;h<u;h++)r.setAttributeNode(t(e,o.item(h),!0));break;case f:i=!0}if(i)for(var c=n.firstChild;c;)r.appendChild(t(e,c,i)),c=c.nextSibling;return r}(this.ownerDocument||this,this,t)},normalize:function(){for(var t=this.firstChild;t;){var e=t.nextSibling;e&&e.nodeType==p&&t.nodeType==p?(this.removeChild(e),t.appendData(e.data)):(t.normalize(),t=e)}},isSupported:function(t,e){return this.ownerDocument.implementation.hasFeature(t,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(t){for(var e=this;e;){var n=e._nsMap;if(n)for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)&&n[i]===t)return i;e=e.nodeType==f?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(t){for(var e=this;e;){var n=e._nsMap;if(n&&Object.prototype.hasOwnProperty.call(n,t))return n[t];e=e.nodeType==f?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(t){return null==this.lookupPrefix(t)}},u(c,U),u(c,U.prototype),B.prototype={nodeName:"#document",nodeType:x,doctype:null,documentElement:null,_inc:1,insertBefore:function(t,e){if(t.nodeType==b){for(var n=t.firstChild;n;){var i=n.nextSibling;this.insertBefore(n,e),n=i}return t}return J(this,t,e),t.ownerDocument=this,null===this.documentElement&&t.nodeType===d&&(this.documentElement=t),t},removeChild:function(t){return this.documentElement==t&&(this.documentElement=null),H(this,t)},replaceChild:function(t,e){J(this,t,e,Q),t.ownerDocument=this,e&&this.removeChild(e),q(t)&&(this.documentElement=t)},importNode:function(t,e){return function t(e,n,i){var r;switch(n.nodeType){case d:(r=n.cloneNode(!1)).ownerDocument=e;case b:break;case f:i=!0}r||(r=n.cloneNode(!1));if(r.ownerDocument=e,r.parentNode=null,i)for(var s=n.firstChild;s;)r.appendChild(t(e,s,i)),s=s.nextSibling;return r}(this,t,e)},getElementById:function(t){var e=null;return F(this.documentElement,(function(n){if(n.nodeType==d&&n.getAttribute("id")==t)return e=n,!0})),e},getElementsByClassName:function(t){var e=l(t);return new P(this,(function(n){var i=[];return e.length>0&&F(n.documentElement,(function(r){if(r!==n&&r.nodeType===d){var s=r.getAttribute("class");if(s){var a=t===s;if(!a){var o=l(s);a=e.every((u=o,function(t){return u&&-1!==u.indexOf(t)}))}a&&i.push(r)}}var u})),i}))},createElement:function(t){var e=new tt;return e.ownerDocument=this,e.nodeName=t,e.tagName=t,e.localName=t,e.childNodes=new A,(e.attributes=new D)._ownerElement=e,e},createDocumentFragment:function(){var t=new ht;return t.ownerDocument=this,t.childNodes=new A,t},createTextNode:function(t){var e=new it;return e.ownerDocument=this,e.appendData(t),e},createComment:function(t){var e=new rt;return e.ownerDocument=this,e.appendData(t),e},createCDATASection:function(t){var e=new st;return e.ownerDocument=this,e.appendData(t),e},createProcessingInstruction:function(t,e){var n=new ct;return n.ownerDocument=this,n.tagName=n.target=t,n.nodeValue=n.data=e,n},createAttribute:function(t){var e=new et;return e.ownerDocument=this,e.name=t,e.nodeName=t,e.localName=t,e.specified=!0,e},createEntityReference:function(t){var e=new ut;return e.ownerDocument=this,e.nodeName=t,e},createElementNS:function(t,e){var n=new tt,i=e.split(":"),r=n.attributes=new D;return n.childNodes=new A,n.ownerDocument=this,n.nodeName=e,n.tagName=e,n.namespaceURI=t,2==i.length?(n.prefix=i[0],n.localName=i[1]):n.localName=e,r._ownerElement=n,n},createAttributeNS:function(t,e){var n=new et,i=e.split(":");return n.ownerDocument=this,n.nodeName=e,n.name=e,n.namespaceURI=t,n.specified=!0,2==i.length?(n.prefix=i[0],n.localName=i[1]):n.localName=e,n}},h(B,U),tt.prototype={nodeType:d,hasAttribute:function(t){return null!=this.getAttributeNode(t)},getAttribute:function(t){var e=this.getAttributeNode(t);return e&&e.value||""},getAttributeNode:function(t){return this.attributes.getNamedItem(t)},setAttribute:function(t,e){var n=this.ownerDocument.createAttribute(t);n.value=n.nodeValue=""+e,this.setAttributeNode(n)},removeAttribute:function(t){var e=this.getAttributeNode(t);e&&this.removeAttributeNode(e)},appendChild:function(t){return t.nodeType===b?this.insertBefore(t,null):function(t,e){return e.parentNode&&e.parentNode.removeChild(e),e.parentNode=t,e.previousSibling=t.lastChild,e.nextSibling=null,e.previousSibling?e.previousSibling.nextSibling=e:t.firstChild=e,t.lastChild=e,X(t.ownerDocument,t,e),e}(this,t)},setAttributeNode:function(t){return this.attributes.setNamedItem(t)},setAttributeNodeNS:function(t){return this.attributes.setNamedItemNS(t)},removeAttributeNode:function(t){return this.attributes.removeNamedItem(t.nodeName)},removeAttributeNS:function(t,e){var n=this.getAttributeNodeNS(t,e);n&&this.removeAttributeNode(n)},hasAttributeNS:function(t,e){return null!=this.getAttributeNodeNS(t,e)},getAttributeNS:function(t,e){var n=this.getAttributeNodeNS(t,e);return n&&n.value||""},setAttributeNS:function(t,e,n){var i=this.ownerDocument.createAttributeNS(t,e);i.value=i.nodeValue=""+n,this.setAttributeNode(i)},getAttributeNodeNS:function(t,e){return this.attributes.getNamedItemNS(t,e)},getElementsByTagName:function(t){return new P(this,(function(e){var n=[];return F(e,(function(i){i===e||i.nodeType!=d||"*"!==t&&i.tagName!=t||n.push(i)})),n}))},getElementsByTagNameNS:function(t,e){return new P(this,(function(n){var i=[];return F(n,(function(r){r===n||r.nodeType!==d||"*"!==t&&r.namespaceURI!==t||"*"!==e&&r.localName!=e||i.push(r)})),i}))}},B.prototype.getElementsByTagName=tt.prototype.getElementsByTagName,B.prototype.getElementsByTagNameNS=tt.prototype.getElementsByTagNameNS,h(tt,U),et.prototype.nodeType=f,h(et,U),nt.prototype={data:"",substringData:function(t,e){return this.data.substring(t,t+e)},appendData:function(t){t=this.data+t,this.nodeValue=this.data=t,this.length=t.length},insertData:function(t,e){this.replaceData(t,0,e)},appendChild:function(t){throw new Error(E[T])},deleteData:function(t,e){this.replaceData(t,e,"")},replaceData:function(t,e,n){n=this.data.substring(0,t)+n+this.data.substring(t+e),this.nodeValue=this.data=n,this.length=n.length}},h(nt,U),it.prototype={nodeName:"#text",nodeType:p,splitText:function(t){var e=this.data,n=e.substring(t);e=e.substring(0,t),this.data=this.nodeValue=e,this.length=e.length;var i=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(i,this.nextSibling),i}},h(it,nt),rt.prototype={nodeName:"#comment",nodeType:_},h(rt,nt),st.prototype={nodeName:"#cdata-section",nodeType:g},h(st,nt),at.prototype.nodeType=w,h(at,U),ot.prototype.nodeType=S,h(ot,U),lt.prototype.nodeType=y,h(lt,U),ut.prototype.nodeType=m,h(ut,U),ht.prototype.nodeName="#document-fragment",ht.prototype.nodeType=b,h(ht,U),ct.prototype.nodeType=v,h(ct,U),dt.prototype.serializeToString=function(t,e,n){return ft.call(t,e,n)},U.prototype.toString=ft;try{if(Object.defineProperty){Object.defineProperty(P.prototype,"length",{get:function(){return I(this),this.$$length}}),Object.defineProperty(U.prototype,"textContent",{get:function(){return function t(e){switch(e.nodeType){case d:case b:var n=[];for(e=e.firstChild;e;)7!==e.nodeType&&8!==e.nodeType&&n.push(t(e)),e=e.nextSibling;return n.join("");default:return e.nodeValue}}(this)},set:function(t){switch(this.nodeType){case d:case b:for(;this.firstChild;)this.removeChild(this.firstChild);(t||String(t))&&this.appendChild(this.ownerDocument.createTextNode(t));break;default:this.data=t,this.value=t,this.nodeValue=t}}}),yt=function(t,e,n){t["$$"+e]=n}}}catch(t){}e.DocumentType=at,e.DOMException=O,e.DOMImplementation=z,e.Element=tt,e.Node=U,e.NodeList=A,e.XMLSerializer=dt},function(t,e){function n(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=88},function(t,e){t.exports='<div class="form-inline">\n    <div class="form-group">\n        <div class="input-group input-group-sm">\n            <span class="input-group-addon">${lang.dialog_combine_svg_single_glyph}</span>\n            <span class="form-control">\n                <input data-field="import.combinePath" type="checkbox">\n            </span>\n        </div>\n    </div>\n</div>\n\n<div class="form-inline">\n    <div class="form-group">\n        <div class="input-group input-group-sm">\n            <span class="input-group-addon">${lang.dialog_save_with_glyf_name}</span>\n            <span class="form-control">\n                <input data-field="export.saveWithGlyfName" type="checkbox">\n            </span>\n        </div>\n    </div>\n</div>\n\n<div class="form-inline">\n    <div class="input-group input-group-sm">\n        <span class="input-group-addon">${lang.dialog_savesetting}</span>\n        <span class="form-control"><input data-field="saveSetting" type="checkbox"></span>\n    </div>\n    <a href="#" id="setting-ie-default">${lang.dialog_resetsetting}</a>\n</div>\n'},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n(34);function r(t){return"data:font/eot;charset=utf-8;base64,"+Object(i.a)(t)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n(34);function r(t){return"data:font/woff;charset=utf-8;base64,"+Object(i.a)(t)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n(34);function r(t){return"data:font/woff2;charset=utf-8;base64,"+Object(i.a)(t)}},function(t,e,n){t.exports=function t(e,n,i){function r(a,o){if(!n[a]){if(!e[a]){if(s)return s(a,!0);throw new Error("Cannot find module '"+a+"'")}var l=n[a]={exports:{}};e[a][0].call(l.exports,(function(t){var n=e[a][1][t];return r(n||t)}),l,l.exports,t,e,n,i)}return n[a].exports}for(var s=!1,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(t,e,n){"use strict";function i(t,e){var n=new c(e);if(n.push(t,!0),n.err)throw n.msg;return n.result}var r=t("./zlib/inflate.js"),s=t("./utils/common"),a=t("./utils/strings"),o=t("./zlib/constants"),l=t("./zlib/messages"),u=t("./zlib/zstream"),h=t("./zlib/gzheader"),c=function(t){this.options=s.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,e.windowBits);if(n!==o.Z_OK)throw new Error(l[n]);this.header=new h,r.inflateGetHeader(this.strm,this.header)};c.prototype.push=function(t,e){var n,i,l,u,h,c=this.strm,d=this.options.chunkSize;if(this.ended)return!1;i=e===~~e?e:!0===e?o.Z_FINISH:o.Z_NO_FLUSH,c.input="string"==typeof t?a.binstring2buf(t):t,c.next_in=0,c.avail_in=c.input.length;do{if(0===c.avail_out&&(c.output=new s.Buf8(d),c.next_out=0,c.avail_out=d),(n=r.inflate(c,o.Z_NO_FLUSH))!==o.Z_STREAM_END&&n!==o.Z_OK)return this.onEnd(n),this.ended=!0,!1;c.next_out&&(0===c.avail_out||n===o.Z_STREAM_END||0===c.avail_in&&i===o.Z_FINISH)&&("string"===this.options.to?(l=a.utf8border(c.output,c.next_out),u=c.next_out-l,h=a.buf2string(c.output,l),c.next_out=u,c.avail_out=d-u,u&&s.arraySet(c.output,c.output,l,u,0),this.onData(h)):this.onData(s.shrinkBuf(c.output,c.next_out)))}while(c.avail_in>0&&n!==o.Z_STREAM_END);return n===o.Z_STREAM_END&&(i=o.Z_FINISH),i!==o.Z_FINISH||(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===o.Z_OK)},c.prototype.onData=function(t){this.chunks.push(t)},c.prototype.onEnd=function(t){t===o.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):s.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},n.Inflate=c,n.inflate=i,n.inflateRaw=function(t,e){return(e=e||{}).raw=!0,i(t,e)},n.ungzip=i},{"./utils/common":2,"./utils/strings":3,"./zlib/constants":5,"./zlib/gzheader":7,"./zlib/inflate.js":9,"./zlib/messages":11,"./zlib/zstream":12}],2:[function(t,e,n){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])}}return t},n.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var r={arraySet:function(t,e,n,i,r){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+i),r);else for(var s=0;i>s;s++)t[r+s]=e[n+s]},flattenChunks:function(t){var e,n,i,r,s,a;for(i=0,e=0,n=t.length;n>e;e++)i+=t[e].length;for(a=new Uint8Array(i),r=0,e=0,n=t.length;n>e;e++)s=t[e],a.set(s,r),r+=s.length;return a}},s={arraySet:function(t,e,n,i,r){for(var s=0;i>s;s++)t[r+s]=e[n+s]},flattenChunks:function(t){return[].concat.apply([],t)}};n.setTyped=function(t){t?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,r)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,s))},n.setTyped(i)},{}],3:[function(t,e,n){"use strict";function i(t,e){if(65537>e&&(t.subarray&&a||!t.subarray&&s))return String.fromCharCode.apply(null,r.shrinkBuf(t,e));for(var n="",i=0;e>i;i++)n+=String.fromCharCode(t[i]);return n}var r=t("./common"),s=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(t){s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){a=!1}for(var o=new r.Buf8(256),l=0;256>l;l++)o[l]=l>=252?6:l>=248?5:l>=240?4:l>=224?3:l>=192?2:1;o[254]=o[254]=1,n.string2buf=function(t){var e,n,i,s,a,o=t.length,l=0;for(s=0;o>s;s++)55296==(64512&(n=t.charCodeAt(s)))&&o>s+1&&56320==(64512&(i=t.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(i-56320),s++),l+=128>n?1:2048>n?2:65536>n?3:4;for(e=new r.Buf8(l),a=0,s=0;l>a;s++)55296==(64512&(n=t.charCodeAt(s)))&&o>s+1&&56320==(64512&(i=t.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(i-56320),s++),128>n?e[a++]=n:2048>n?(e[a++]=192|n>>>6,e[a++]=128|63&n):65536>n?(e[a++]=224|n>>>12,e[a++]=128|n>>>6&63,e[a++]=128|63&n):(e[a++]=240|n>>>18,e[a++]=128|n>>>12&63,e[a++]=128|n>>>6&63,e[a++]=128|63&n);return e},n.buf2binstring=function(t){return i(t,t.length)},n.binstring2buf=function(t){for(var e=new r.Buf8(t.length),n=0,i=e.length;i>n;n++)e[n]=t.charCodeAt(n);return e},n.buf2string=function(t,e){var n,r,s,a,l=e||t.length,u=new Array(2*l);for(r=0,n=0;l>n;)if(128>(s=t[n++]))u[r++]=s;else if((a=o[s])>4)u[r++]=65533,n+=a-1;else{for(s&=2===a?31:3===a?15:7;a>1&&l>n;)s=s<<6|63&t[n++],a--;a>1?u[r++]=65533:65536>s?u[r++]=s:(s-=65536,u[r++]=55296|s>>10&1023,u[r++]=56320|1023&s)}return i(u,r)},n.utf8border=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;n>=0&&128==(192&t[n]);)n--;return 0>n||0===n?e:n+o[t[n]]>e?n:e}},{"./common":2}],4:[function(t,e){"use strict";e.exports=function(t,e,n,i){for(var r=65535&t|0,s=t>>>16&65535|0,a=0;0!==n;){n-=a=n>2e3?2e3:n;do{s=s+(r=r+e[i++]|0)|0}while(--a);r%=65521,s%=65521}return r|s<<16|0}},{}],5:[function(t,e){e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],6:[function(t,e){"use strict";var n=function(){for(var t,e=[],n=0;256>n;n++){t=n;for(var i=0;8>i;i++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();e.exports=function(t,e,i,r){var s=n,a=r+i;t^=-1;for(var o=r;a>o;o++)t=t>>>8^s[255&(t^e[o])];return-1^t}},{}],7:[function(t,e){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],8:[function(t,e){"use strict";e.exports=function(t,e){var n,i,r,s,a,o,l,u,h,c,d,f,p,g,m,y,v,_,x,w,b,S,C,E,T;n=t.state,i=t.next_in,E=t.input,r=i+(t.avail_in-5),s=t.next_out,T=t.output,a=s-(e-t.avail_out),o=s+(t.avail_out-257),l=n.dmax,u=n.wsize,h=n.whave,c=n.wnext,d=n.window,f=n.hold,p=n.bits,g=n.lencode,m=n.distcode,y=(1<<n.lenbits)-1,v=(1<<n.distbits)-1;t:do{15>p&&(f+=E[i++]<<p,p+=8,f+=E[i++]<<p,p+=8),_=g[f&y];e:for(;;){if(f>>>=x=_>>>24,p-=x,0==(x=_>>>16&255))T[s++]=65535&_;else{if(!(16&x)){if(0==(64&x)){_=g[(65535&_)+(f&(1<<x)-1)];continue e}if(32&x){n.mode=12;break t}t.msg="invalid literal/length code",n.mode=30;break t}w=65535&_,(x&=15)&&(x>p&&(f+=E[i++]<<p,p+=8),w+=f&(1<<x)-1,f>>>=x,p-=x),15>p&&(f+=E[i++]<<p,p+=8,f+=E[i++]<<p,p+=8),_=m[f&v];n:for(;;){if(f>>>=x=_>>>24,p-=x,!(16&(x=_>>>16&255))){if(0==(64&x)){_=m[(65535&_)+(f&(1<<x)-1)];continue n}t.msg="invalid distance code",n.mode=30;break t}if(b=65535&_,(x&=15)>p&&(f+=E[i++]<<p,x>(p+=8)&&(f+=E[i++]<<p,p+=8)),(b+=f&(1<<x)-1)>l){t.msg="invalid distance too far back",n.mode=30;break t}if(f>>>=x,p-=x,b>(x=s-a)){if((x=b-x)>h&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(S=0,C=d,0===c){if(S+=u-x,w>x){w-=x;do{T[s++]=d[S++]}while(--x);S=s-b,C=T}}else if(x>c){if(S+=u+c-x,w>(x-=c)){w-=x;do{T[s++]=d[S++]}while(--x);if(S=0,w>c){w-=x=c;do{T[s++]=d[S++]}while(--x);S=s-b,C=T}}}else if(S+=c-x,w>x){w-=x;do{T[s++]=d[S++]}while(--x);S=s-b,C=T}for(;w>2;)T[s++]=C[S++],T[s++]=C[S++],T[s++]=C[S++],w-=3;w&&(T[s++]=C[S++],w>1&&(T[s++]=C[S++]))}else{S=s-b;do{T[s++]=T[S++],T[s++]=T[S++],T[s++]=T[S++],w-=3}while(w>2);w&&(T[s++]=T[S++],w>1&&(T[s++]=T[S++]))}break}}break}}while(r>i&&o>s);i-=w=p>>3,f&=(1<<(p-=w<<3))-1,t.next_in=i,t.next_out=s,t.avail_in=r>i?r-i+5:5-(i-r),t.avail_out=o>s?o-s+257:257-(s-o),n.hold=f,n.bits=p}},{}],9:[function(t,e,n){"use strict";function i(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function r(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new d.Buf16(320),this.work=new d.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function s(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=P,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new d.Buf32(ut),e.distcode=e.distdyn=new d.Buf32(ht),e.sane=1,e.back=-1,S):T}function a(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,s(t)):T}function o(t,e){var n,i;return t&&t.state?(i=t.state,0>e?(n=0,e=-e):(n=1+(e>>4),48>e&&(e&=15)),e&&(8>e||e>15)?T:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=n,i.wbits=e,a(t))):T}function l(t,e){var n,i;return t?(i=new r,t.state=i,i.window=null,(n=o(t,e))!==S&&(t.state=null),n):T}function u(t){if(dt){var e;for(h=new d.Buf32(512),c=new d.Buf32(32),e=0;144>e;)t.lens[e++]=8;for(;256>e;)t.lens[e++]=9;for(;280>e;)t.lens[e++]=7;for(;288>e;)t.lens[e++]=8;for(m(v,t.lens,0,288,h,0,t.work,{bits:9}),e=0;32>e;)t.lens[e++]=5;m(_,t.lens,0,32,c,0,t.work,{bits:5}),dt=!1}t.lencode=h,t.lenbits=9,t.distcode=c,t.distbits=5}var h,c,d=t("../utils/common"),f=t("./adler32"),p=t("./crc32"),g=t("./inffast"),m=t("./inftrees"),y=0,v=1,_=2,x=4,w=5,b=6,S=0,C=1,E=2,T=-2,M=-3,k=-4,O=-5,A=8,P=1,I=2,D=3,L=4,N=5,R=6,z=7,U=8,j=9,F=10,B=11,$=12,X=13,H=14,G=15,q=16,V=17,W=18,Y=19,Z=20,K=21,Q=22,J=23,tt=24,et=25,nt=26,it=27,rt=28,st=29,at=30,ot=31,lt=32,ut=852,ht=592,ct=15,dt=!0;n.inflateReset=a,n.inflateReset2=o,n.inflateResetKeep=s,n.inflateInit=function(t){return l(t,ct)},n.inflateInit2=l,n.inflate=function(t,e){var n,r,s,a,o,l,h,c,ut,ht,ct,dt,ft,pt,gt,mt,yt,vt,_t,xt,wt,bt,St,Ct,Et=0,Tt=new d.Buf8(4),Mt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return T;(n=t.state).mode===$&&(n.mode=X),o=t.next_out,s=t.output,h=t.avail_out,a=t.next_in,r=t.input,l=t.avail_in,c=n.hold,ut=n.bits,ht=l,ct=h,bt=S;t:for(;;)switch(n.mode){case P:if(0===n.wrap){n.mode=X;break}for(;16>ut;){if(0===l)break t;l--,c+=r[a++]<<ut,ut+=8}if(2&n.wrap&&35615===c){n.check=0,Tt[0]=255&c,Tt[1]=c>>>8&255,n.check=p(n.check,Tt,2,0),c=0,ut=0,n.mode=I;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&c)<<8)+(c>>8))%31){t.msg="incorrect header check",n.mode=at;break}if((15&c)!==A){t.msg="unknown compression method",n.mode=at;break}if(ut-=4,wt=8+(15&(c>>>=4)),0===n.wbits)n.wbits=wt;else if(wt>n.wbits){t.msg="invalid window size",n.mode=at;break}n.dmax=1<<wt,t.adler=n.check=1,n.mode=512&c?F:$,c=0,ut=0;break;case I:for(;16>ut;){if(0===l)break t;l--,c+=r[a++]<<ut,ut+=8}if(n.flags=c,(255&n.flags)!==A){t.msg="unknown compression method",n.mode=at;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=at;break}n.head&&(n.head.text=c>>8&1),512&n.flags&&(Tt[0]=255&c,Tt[1]=c>>>8&255,n.check=p(n.check,Tt,2,0)),c=0,ut=0,n.mode=D;case D:for(;32>ut;){if(0===l)break t;l--,c+=r[a++]<<ut,ut+=8}n.head&&(n.head.time=c),512&n.flags&&(Tt[0]=255&c,Tt[1]=c>>>8&255,Tt[2]=c>>>16&255,Tt[3]=c>>>24&255,n.check=p(n.check,Tt,4,0)),c=0,ut=0,n.mode=L;case L:for(;16>ut;){if(0===l)break t;l--,c+=r[a++]<<ut,ut+=8}n.head&&(n.head.xflags=255&c,n.head.os=c>>8),512&n.flags&&(Tt[0]=255&c,Tt[1]=c>>>8&255,n.check=p(n.check,Tt,2,0)),c=0,ut=0,n.mode=N;case N:if(1024&n.flags){for(;16>ut;){if(0===l)break t;l--,c+=r[a++]<<ut,ut+=8}n.length=c,n.head&&(n.head.extra_len=c),512&n.flags&&(Tt[0]=255&c,Tt[1]=c>>>8&255,n.check=p(n.check,Tt,2,0)),c=0,ut=0}else n.head&&(n.head.extra=null);n.mode=R;case R:if(1024&n.flags&&((dt=n.length)>l&&(dt=l),dt&&(n.head&&(wt=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),d.arraySet(n.head.extra,r,a,dt,wt)),512&n.flags&&(n.check=p(n.check,r,dt,a)),l-=dt,a+=dt,n.length-=dt),n.length))break t;n.length=0,n.mode=z;case z:if(2048&n.flags){if(0===l)break t;dt=0;do{wt=r[a+dt++],n.head&&wt&&n.length<65536&&(n.head.name+=String.fromCharCode(wt))}while(wt&&l>dt);if(512&n.flags&&(n.check=p(n.check,r,dt,a)),l-=dt,a+=dt,wt)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=U;case U:if(4096&n.flags){if(0===l)break t;dt=0;do{wt=r[a+dt++],n.head&&wt&&n.length<65536&&(n.head.comment+=String.fromCharCode(wt))}while(wt&&l>dt);if(512&n.flags&&(n.check=p(n.check,r,dt,a)),l-=dt,a+=dt,wt)break t}else n.head&&(n.head.comment=null);n.mode=j;case j:if(512&n.flags){for(;16>ut;){if(0===l)break t;l--,c+=r[a++]<<ut,ut+=8}if(c!==(65535&n.check)){t.msg="header crc mismatch",n.mode=at;break}c=0,ut=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=$;break;case F:for(;32>ut;){if(0===l)break t;l--,c+=r[a++]<<ut,ut+=8}t.adler=n.check=i(c),c=0,ut=0,n.mode=B;case B:if(0===n.havedict)return t.next_out=o,t.avail_out=h,t.next_in=a,t.avail_in=l,n.hold=c,n.bits=ut,E;t.adler=n.check=1,n.mode=$;case $:if(e===w||e===b)break t;case X:if(n.last){c>>>=7&ut,ut-=7&ut,n.mode=it;break}for(;3>ut;){if(0===l)break t;l--,c+=r[a++]<<ut,ut+=8}switch(n.last=1&c,ut-=1,3&(c>>>=1)){case 0:n.mode=H;break;case 1:if(u(n),n.mode=Z,e===b){c>>>=2,ut-=2;break t}break;case 2:n.mode=V;break;case 3:t.msg="invalid block type",n.mode=at}c>>>=2,ut-=2;break;case H:for(c>>>=7&ut,ut-=7&ut;32>ut;){if(0===l)break t;l--,c+=r[a++]<<ut,ut+=8}if((65535&c)!=(c>>>16^65535)){t.msg="invalid stored block lengths",n.mode=at;break}if(n.length=65535&c,c=0,ut=0,n.mode=G,e===b)break t;case G:n.mode=q;case q:if(dt=n.length){if(dt>l&&(dt=l),dt>h&&(dt=h),0===dt)break t;d.arraySet(s,r,a,dt,o),l-=dt,a+=dt,h-=dt,o+=dt,n.length-=dt;break}n.mode=$;break;case V:for(;14>ut;){if(0===l)break t;l--,c+=r[a++]<<ut,ut+=8}if(n.nlen=257+(31&c),c>>>=5,ut-=5,n.ndist=1+(31&c),c>>>=5,ut-=5,n.ncode=4+(15&c),c>>>=4,ut-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=at;break}n.have=0,n.mode=W;case W:for(;n.have<n.ncode;){for(;3>ut;){if(0===l)break t;l--,c+=r[a++]<<ut,ut+=8}n.lens[Mt[n.have++]]=7&c,c>>>=3,ut-=3}for(;n.have<19;)n.lens[Mt[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,St={bits:n.lenbits},bt=m(y,n.lens,0,19,n.lencode,0,n.work,St),n.lenbits=St.bits,bt){t.msg="invalid code lengths set",n.mode=at;break}n.have=0,n.mode=Y;case Y:for(;n.have<n.nlen+n.ndist;){for(;mt=(Et=n.lencode[c&(1<<n.lenbits)-1])>>>16&255,yt=65535&Et,!(ut>=(gt=Et>>>24));){if(0===l)break t;l--,c+=r[a++]<<ut,ut+=8}if(16>yt)c>>>=gt,ut-=gt,n.lens[n.have++]=yt;else{if(16===yt){for(Ct=gt+2;Ct>ut;){if(0===l)break t;l--,c+=r[a++]<<ut,ut+=8}if(c>>>=gt,ut-=gt,0===n.have){t.msg="invalid bit length repeat",n.mode=at;break}wt=n.lens[n.have-1],dt=3+(3&c),c>>>=2,ut-=2}else if(17===yt){for(Ct=gt+3;Ct>ut;){if(0===l)break t;l--,c+=r[a++]<<ut,ut+=8}ut-=gt,wt=0,dt=3+(7&(c>>>=gt)),c>>>=3,ut-=3}else{for(Ct=gt+7;Ct>ut;){if(0===l)break t;l--,c+=r[a++]<<ut,ut+=8}ut-=gt,wt=0,dt=11+(127&(c>>>=gt)),c>>>=7,ut-=7}if(n.have+dt>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=at;break}for(;dt--;)n.lens[n.have++]=wt}}if(n.mode===at)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=at;break}if(n.lenbits=9,St={bits:n.lenbits},bt=m(v,n.lens,0,n.nlen,n.lencode,0,n.work,St),n.lenbits=St.bits,bt){t.msg="invalid literal/lengths set",n.mode=at;break}if(n.distbits=6,n.distcode=n.distdyn,St={bits:n.distbits},bt=m(_,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,St),n.distbits=St.bits,bt){t.msg="invalid distances set",n.mode=at;break}if(n.mode=Z,e===b)break t;case Z:n.mode=K;case K:if(l>=6&&h>=258){t.next_out=o,t.avail_out=h,t.next_in=a,t.avail_in=l,n.hold=c,n.bits=ut,g(t,ct),o=t.next_out,s=t.output,h=t.avail_out,a=t.next_in,r=t.input,l=t.avail_in,c=n.hold,ut=n.bits,n.mode===$&&(n.back=-1);break}for(n.back=0;mt=(Et=n.lencode[c&(1<<n.lenbits)-1])>>>16&255,yt=65535&Et,!(ut>=(gt=Et>>>24));){if(0===l)break t;l--,c+=r[a++]<<ut,ut+=8}if(mt&&0==(240&mt)){for(vt=gt,_t=mt,xt=yt;mt=(Et=n.lencode[xt+((c&(1<<vt+_t)-1)>>vt)])>>>16&255,yt=65535&Et,!(ut>=vt+(gt=Et>>>24));){if(0===l)break t;l--,c+=r[a++]<<ut,ut+=8}c>>>=vt,ut-=vt,n.back+=vt}if(c>>>=gt,ut-=gt,n.back+=gt,n.length=yt,0===mt){n.mode=nt;break}if(32&mt){n.back=-1,n.mode=$;break}if(64&mt){t.msg="invalid literal/length code",n.mode=at;break}n.extra=15&mt,n.mode=Q;case Q:if(n.extra){for(Ct=n.extra;Ct>ut;){if(0===l)break t;l--,c+=r[a++]<<ut,ut+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,ut-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=J;case J:for(;mt=(Et=n.distcode[c&(1<<n.distbits)-1])>>>16&255,yt=65535&Et,!(ut>=(gt=Et>>>24));){if(0===l)break t;l--,c+=r[a++]<<ut,ut+=8}if(0==(240&mt)){for(vt=gt,_t=mt,xt=yt;mt=(Et=n.distcode[xt+((c&(1<<vt+_t)-1)>>vt)])>>>16&255,yt=65535&Et,!(ut>=vt+(gt=Et>>>24));){if(0===l)break t;l--,c+=r[a++]<<ut,ut+=8}c>>>=vt,ut-=vt,n.back+=vt}if(c>>>=gt,ut-=gt,n.back+=gt,64&mt){t.msg="invalid distance code",n.mode=at;break}n.offset=yt,n.extra=15&mt,n.mode=tt;case tt:if(n.extra){for(Ct=n.extra;Ct>ut;){if(0===l)break t;l--,c+=r[a++]<<ut,ut+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,ut-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=at;break}n.mode=et;case et:if(0===h)break t;if(dt=ct-h,n.offset>dt){if((dt=n.offset-dt)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=at;break}dt>n.wnext?(dt-=n.wnext,ft=n.wsize-dt):ft=n.wnext-dt,dt>n.length&&(dt=n.length),pt=n.window}else pt=s,ft=o-n.offset,dt=n.length;dt>h&&(dt=h),h-=dt,n.length-=dt;do{s[o++]=pt[ft++]}while(--dt);0===n.length&&(n.mode=K);break;case nt:if(0===h)break t;s[o++]=n.length,h--,n.mode=K;break;case it:if(n.wrap){for(;32>ut;){if(0===l)break t;l--,c|=r[a++]<<ut,ut+=8}if(ct-=h,t.total_out+=ct,n.total+=ct,ct&&(t.adler=n.check=n.flags?p(n.check,s,ct,o-ct):f(n.check,s,ct,o-ct)),ct=h,(n.flags?c:i(c))!==n.check){t.msg="incorrect data check",n.mode=at;break}c=0,ut=0}n.mode=rt;case rt:if(n.wrap&&n.flags){for(;32>ut;){if(0===l)break t;l--,c+=r[a++]<<ut,ut+=8}if(c!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=at;break}c=0,ut=0}n.mode=st;case st:bt=C;break t;case at:bt=M;break t;case ot:return k;case lt:default:return T}return t.next_out=o,t.avail_out=h,t.next_in=a,t.avail_in=l,n.hold=c,n.bits=ut,(n.wsize||ct!==t.avail_out&&n.mode<at&&(n.mode<it||e!==x))&&function(t,e,n,i){var r,s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new d.Buf8(s.wsize)),i>=s.wsize?(d.arraySet(s.window,e,n-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):((r=s.wsize-s.wnext)>i&&(r=i),d.arraySet(s.window,e,n-i,r,s.wnext),(i-=r)?(d.arraySet(s.window,e,n-i,i,0),s.wnext=i,s.whave=s.wsize):(s.wnext+=r,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=r))),0}(t,t.output,t.next_out,ct-t.avail_out)?(n.mode=ot,k):(ht-=t.avail_in,ct-=t.avail_out,t.total_in+=ht,t.total_out+=ct,n.total+=ct,n.wrap&&ct&&(t.adler=n.check=n.flags?p(n.check,s,ct,t.next_out-ct):f(n.check,s,ct,t.next_out-ct)),t.data_type=n.bits+(n.last?64:0)+(n.mode===$?128:0)+(n.mode===Z||n.mode===G?256:0),(0===ht&&0===ct||e===x)&&bt===S&&(bt=O),bt)},n.inflateEnd=function(t){if(!t||!t.state)return T;var e=t.state;return e.window&&(e.window=null),t.state=null,S},n.inflateGetHeader=function(t,e){var n;return t&&t.state?0==(2&(n=t.state).wrap)?T:(n.head=e,e.done=!1,S):T},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":2,"./adler32":4,"./crc32":6,"./inffast":8,"./inftrees":10}],10:[function(t,e){"use strict";var n=t("../utils/common"),i=15,r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],o=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,l,u,h,c,d,f){var p,g,m,y,v,_,x,w,b,S=f.bits,C=0,E=0,T=0,M=0,k=0,O=0,A=0,P=0,I=0,D=0,L=null,N=0,R=new n.Buf16(16),z=new n.Buf16(16),U=null,j=0;for(C=0;i>=C;C++)R[C]=0;for(E=0;u>E;E++)R[e[l+E]]++;for(k=S,M=i;M>=1&&0===R[M];M--);if(k>M&&(k=M),0===M)return h[c++]=20971520,h[c++]=20971520,f.bits=1,0;for(T=1;M>T&&0===R[T];T++);for(T>k&&(k=T),P=1,C=1;i>=C;C++)if(P<<=1,0>(P-=R[C]))return-1;if(P>0&&(0===t||1!==M))return-1;for(z[1]=0,C=1;i>C;C++)z[C+1]=z[C]+R[C];for(E=0;u>E;E++)0!==e[l+E]&&(d[z[e[l+E]]++]=E);if(0===t?(L=U=d,_=19):1===t?(L=r,N-=257,U=s,j-=257,_=256):(L=a,U=o,_=-1),D=0,E=0,C=T,v=c,O=k,A=0,m=-1,y=(I=1<<k)-1,1===t&&I>852||2===t&&I>592)return 1;for(;;){x=C-A,d[E]<_?(w=0,b=d[E]):d[E]>_?(w=U[j+d[E]],b=L[N+d[E]]):(w=96,b=0),p=1<<C-A,T=g=1<<O;do{h[v+(D>>A)+(g-=p)]=x<<24|w<<16|b|0}while(0!==g);for(p=1<<C-1;D&p;)p>>=1;if(0!==p?(D&=p-1,D+=p):D=0,E++,0==--R[C]){if(C===M)break;C=e[l+d[E]]}if(C>k&&(D&y)!==m){for(0===A&&(A=k),v+=T,P=1<<(O=C-A);M>O+A&&!(0>=(P-=R[O+A]));)O++,P<<=1;if(I+=1<<O,1===t&&I>852||2===t&&I>592)return 1;h[m=D&y]=k<<24|O<<16|v-c|0}}return 0!==D&&(h[v+D]=C-A<<24|64<<16|0),f.bits=k,0}},{"../utils/common":2}],11:[function(t,e){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],12:[function(t,e){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}]},{},[1])(1)},function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var i=n(25),r=n(5),s=n(33),a=n(76);function o(t,e={}){const n=[];return t.glyf.filter(t=>".notdef"!==t.name&&".null"!==t.name&&"nonmarkingreturn"!==t.name&&t.unicode&&t.unicode.length).forEach((t,e)=>{var i;n.push({code:"&#x"+t.unicode[0].toString(16)+";",codeName:(i=t.unicode,i.map(t=>"\\"+t.toString(16)).join(",")),name:t.name,id:Object(a.b)(t,e)})}),{fontFamily:t.name.fontFamily||s.a.name.fontFamily,iconPrefix:e.iconPrefix||"icon",glyfList:n}}function l(t,e={}){if(t instanceof ArrayBuffer){const n=new i.a,r=n.read(t);return n.dispose(),o(r,e)}if(t.version&&t.glyf)return o(t,e);r.a.raise(10101)}},function(t,e,n){(e=n(117)(!1)).push([t.i,"* {\n  margin: 0;\n  padding: 0;\n  list-style: none;\n}\nblockquote,\nbody,\nbutton,\ndd,\ndl,\ndt,\nfieldset,\nform,\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\nhr,\ninput,\nlegend,\nli,\nol,\np,\npre,\ntd,\ntextarea,\nth,\nul {\n  margin: 0;\n  padding: 0;\n}\nbody,\nbutton,\ninput,\nselect,\ntextarea {\n  font: 12px/1.5 tahoma, arial, sans-serif;\n}\nh1,\nh2,\nh3,\nh4,\nh5,\nh6 {\n  font-size: 100%;\n}\naddress,\ncite,\ndfn,\nem,\nvar {\n  font-style: normal;\n}\ncode,\nkbd,\npre,\nsamp {\n  font-family: courier new, courier, monospace;\n}\nsmall {\n  font-size: 12px;\n}\nol,\nul {\n  list-style: none;\n}\na {\n  text-decoration: none;\n}\na:hover {\n  text-decoration: underline;\n}\nlegend {\n  color: #000;\n}\nfieldset,\nimg {\n  border: 0;\n}\nbutton,\ninput,\nselect,\ntextarea {\n  font-size: 100%;\n}\ntable {\n  border-collapse: collapse;\n  border-spacing: 0;\n}\n.main {\n  padding: 30px 100px;\n}\n.main h1 {\n  font-size: 36px;\n  color: #333;\n  text-align: left;\n  margin-bottom: 30px;\n  border-bottom: 1px solid #eee;\n}\n.helps {\n  margin-top: 40px;\n}\n.helps pre {\n  padding: 20px;\n  margin: 10px 0;\n  border: solid 1px #e7e1cd;\n  background-color: #fffdef;\n  overflow: auto;\n}\n.iconfont-list {\n  overflow: hidden;\n}\n.iconfont-list li {\n  float: left;\n  width: 100px;\n  height: 150px;\n  text-align: center;\n}\n.iconfont-list .icon {\n  font-size: 42px;\n  line-height: 100px;\n  margin: 10px 0;\n  color: #333;\n  font-style: normal;\n  -webkit-transition: font-size 0.25s ease-out 0s;\n  -moz-transition: font-size 0.25s ease-out 0s;\n  transition: font-size 0.25s ease-out 0s;\n}\n.iconfont-list .icon:hover {\n  font-size: 100px;\n}\n.iconfont-list .code {\n  color: green;\n  font-weight: bold;\n}\n",""]),t.exports=e},function(t,e,n){(function(e){t.exports=function t(e,n,i){function r(a,o){if(!n[a]){if(!e[a]){if(s)return s(a,!0);throw new Error("Cannot find module '"+a+"'")}var l=n[a]={exports:{}};e[a][0].call(l.exports,(function(t){var n=e[a][1][t];return r(n||t)}),l,l.exports,t,e,n,i)}return n[a].exports}for(var s=!1,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(t,e,n){"use strict";var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(t){for(var e,n,r,s,a,o,l,u="",h=0;h<t.length;)s=(e=t.charCodeAt(h++))>>2,a=(3&e)<<4|(n=t.charCodeAt(h++))>>4,o=(15&n)<<2|(r=t.charCodeAt(h++))>>6,l=63&r,isNaN(n)?o=l=64:isNaN(r)&&(l=64),u=u+i.charAt(s)+i.charAt(a)+i.charAt(o)+i.charAt(l);return u},n.decode=function(t){var e,n,r,s,a,o,l="",u=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");u<t.length;)e=i.indexOf(t.charAt(u++))<<2|(s=i.indexOf(t.charAt(u++)))>>4,n=(15&s)<<4|(a=i.indexOf(t.charAt(u++)))>>2,r=(3&a)<<6|(o=i.indexOf(t.charAt(u++))),l+=String.fromCharCode(e),64!=a&&(l+=String.fromCharCode(n)),64!=o&&(l+=String.fromCharCode(r));return l}},{}],2:[function(t,e){"use strict";function n(){this.compressedSize=0,this.uncompressedSize=0,this.crc32=0,this.compressionMethod=null,this.compressedContent=null}n.prototype={getContent:function(){return null},getCompressedContent:function(){return null}},e.exports=n},{}],3:[function(t,e,n){"use strict";n.STORE={magic:"\0\0",compress:function(t){return t},uncompress:function(t){return t},compressInputType:null,uncompressInputType:null},n.DEFLATE=t("./flate")},{"./flate":8}],4:[function(t,e){"use strict";var n=t("./utils"),i=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];e.exports=function(t,e){if(void 0===t||!t.length)return 0;var r="string"!==n.getTypeOf(t);void 0===e&&(e=0);var s=0;e^=-1;for(var a=0,o=t.length;o>a;a++)s=r?t[a]:t.charCodeAt(a),e=e>>>8^i[255&(e^s)];return-1^e}},{"./utils":21}],5:[function(t,e){"use strict";function n(){this.data=null,this.length=0,this.index=0}var i=t("./utils");n.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<t||0>t)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(){},readInt:function(t){var e,n=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)n=(n<<8)+this.byteAt(e);return this.index+=t,n},readString:function(t){return i.transformTo("string",this.readData(t))},readData:function(){},lastIndexOfSignature:function(){},readDate:function(){var t=this.readInt(4);return new Date(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1)}},e.exports=n},{"./utils":21}],6:[function(t,e,n){"use strict";n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!1,n.date=null,n.compression=null,n.comment=null},{}],7:[function(t,e,n){"use strict";var i=t("./utils");n.string2binary=function(t){return i.string2binary(t)},n.string2Uint8Array=function(t){return i.transformTo("uint8array",t)},n.uint8Array2String=function(t){return i.transformTo("string",t)},n.string2Blob=function(t){var e=i.transformTo("arraybuffer",t);return i.arrayBuffer2Blob(e)},n.arrayBuffer2Blob=function(t){return i.arrayBuffer2Blob(t)},n.transformTo=function(t,e){return i.transformTo(t,e)},n.getTypeOf=function(t){return i.getTypeOf(t)},n.checkSupport=function(t){return i.checkSupport(t)},n.MAX_VALUE_16BITS=i.MAX_VALUE_16BITS,n.MAX_VALUE_32BITS=i.MAX_VALUE_32BITS,n.pretty=function(t){return i.pretty(t)},n.findCompression=function(t){return i.findCompression(t)},n.isRegExp=function(t){return i.isRegExp(t)}},{"./utils":21}],8:[function(t,e,n){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,r=t("pako");n.uncompressInputType=i?"uint8array":"array",n.compressInputType=i?"uint8array":"array",n.magic="\b\0",n.compress=function(t){return r.deflateRaw(t)},n.uncompress=function(t){return r.inflateRaw(t)}},{pako:24}],9:[function(t,e){"use strict";function n(t,e){return this instanceof n?(this.files={},this.comment=null,this.root="",t&&this.load(t,e),void(this.clone=function(){var t=new n;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t})):new n(t,e)}var i=t("./base64");n.prototype=t("./object"),n.prototype.load=t("./load"),n.support=t("./support"),n.defaults=t("./defaults"),n.utils=t("./deprecatedPublicUtils"),n.base64={encode:function(t){return i.encode(t)},decode:function(t){return i.decode(t)}},n.compressions=t("./compressions"),e.exports=n},{"./base64":1,"./compressions":3,"./defaults":6,"./deprecatedPublicUtils":7,"./load":10,"./object":13,"./support":17}],10:[function(t,e){"use strict";var n=t("./base64"),i=t("./zipEntries");e.exports=function(t,e){var r,s,a,o;for((e=e||{}).base64&&(t=n.decode(t)),r=(s=new i(t,e)).files,a=0;a<r.length;a++)o=r[a],this.file(o.fileName,o.decompressed,{binary:!0,optimizedBinaryString:!0,date:o.date,dir:o.dir,comment:o.fileComment.length?o.fileComment:null,createFolders:e.createFolders});return s.zipComment.length&&(this.comment=s.zipComment),this}},{"./base64":1,"./zipEntries":22}],11:[function(t,n){(function(t){"use strict";n.exports=function(e,n){return new t(e,n)},n.exports.test=function(e){return t.isBuffer(e)}}).call(this,void 0!==e?e:void 0)},{}],12:[function(t,e){"use strict";function n(t){this.data=t,this.length=this.data.length,this.index=0}var i=t("./uint8ArrayReader");n.prototype=new i,n.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.index,this.index+t);return this.index+=t,e},e.exports=n},{"./uint8ArrayReader":18}],13:[function(t,e){"use strict";var n=t("./support"),i=t("./utils"),r=t("./crc32"),s=t("./signature"),a=t("./defaults"),o=t("./base64"),l=t("./compressions"),u=t("./compressedObject"),h=t("./nodeBuffer"),c=t("./utf8"),d=t("./stringWriter"),f=t("./uint8ArrayWriter"),p=function(t){if(t._data instanceof u&&(t._data=t._data.getContent(),t.options.binary=!0,t.options.base64=!1,"uint8array"===i.getTypeOf(t._data))){var e=t._data;t._data=new Uint8Array(e.length),0!==e.length&&t._data.set(e,0)}return t._data},g=function(t){var e=p(t);return"string"===i.getTypeOf(e)?!t.options.binary&&n.nodebuffer?h(e,"utf-8"):t.asBinary():e},m=function(t){var e=p(this);return null==e?"":(this.options.base64&&(e=o.decode(e)),e=t&&this.options.binary?T.utf8decode(e):i.transformTo("string",e),t||this.options.binary||(e=i.transformTo("string",T.utf8encode(e))),e)},y=function(t,e,n){this.name=t,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this._data=e,this.options=n,this._initialMetadata={dir:n.dir,date:n.date}};y.prototype={asText:function(){return m.call(this,!0)},asBinary:function(){return m.call(this,!1)},asNodeBuffer:function(){var t=g(this);return i.transformTo("nodebuffer",t)},asUint8Array:function(){var t=g(this);return i.transformTo("uint8array",t)},asArrayBuffer:function(){return this.asUint8Array().buffer}};var v=function(t,e){var n,i="";for(n=0;e>n;n++)i+=String.fromCharCode(255&t),t>>>=8;return i},_=function(){var t,e,n={};for(t=0;t<arguments.length;t++)for(e in arguments[t])arguments[t].hasOwnProperty(e)&&void 0===n[e]&&(n[e]=arguments[t][e]);return n},x=function(t){return!0!==(t=t||{}).base64||null!==t.binary&&void 0!==t.binary||(t.binary=!0),(t=_(t,a)).date=t.date||new Date,null!==t.compression&&(t.compression=t.compression.toUpperCase()),t},w=function(t,e,n){var r,s=i.getTypeOf(e);if((n=x(n)).createFolders&&(r=b(t))&&S.call(this,r,!0),n.dir||null==e)n.base64=!1,n.binary=!1,e=null;else if("string"===s)n.binary&&!n.base64&&!0!==n.optimizedBinaryString&&(e=i.string2binary(e));else{if(n.base64=!1,n.binary=!0,!(s||e instanceof u))throw new Error("The data of '"+t+"' is in an unsupported format !");"arraybuffer"===s&&(e=i.transformTo("uint8array",e))}var a=new y(t,e,n);return this.files[t]=a,a},b=function(t){"/"==t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return e>0?t.substring(0,e):""},S=function(t,e){return"/"!=t.slice(-1)&&(t+="/"),e=void 0!==e&&e,this.files[t]||w.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]},C=function(t,e){var n,s=new u;return t._data instanceof u?(s.uncompressedSize=t._data.uncompressedSize,s.crc32=t._data.crc32,0===s.uncompressedSize||t.dir?(e=l.STORE,s.compressedContent="",s.crc32=0):t._data.compressionMethod===e.magic?s.compressedContent=t._data.getCompressedContent():(n=t._data.getContent(),s.compressedContent=e.compress(i.transformTo(e.compressInputType,n)))):((!(n=g(t))||0===n.length||t.dir)&&(e=l.STORE,n=""),s.uncompressedSize=n.length,s.crc32=r(n),s.compressedContent=e.compress(i.transformTo(e.compressInputType,n))),s.compressedSize=s.compressedContent.length,s.compressionMethod=e.magic,s},E=function(t,e,n,a){var o,l,u,h,d=(n.compressedContent,i.transformTo("string",c.utf8encode(e.name))),f=e.comment||"",p=i.transformTo("string",c.utf8encode(f)),g=d.length!==e.name.length,m=p.length!==f.length,y=e.options,_="",x="",w="";u=e._initialMetadata.dir!==e.dir?e.dir:y.dir,o=(h=e._initialMetadata.date!==e.date?e.date:y.date).getHours(),o<<=6,o|=h.getMinutes(),o<<=5,o|=h.getSeconds()/2,l=h.getFullYear()-1980,l<<=4,l|=h.getMonth()+1,l<<=5,l|=h.getDate(),g&&(x=v(1,1)+v(r(d),4)+d,_+="up"+v(x.length,2)+x),m&&(w=v(1,1)+v(this.crc32(p),4)+p,_+="uc"+v(w.length,2)+w);var b="";return b+="\n\0",b+=g||m?"\0\b":"\0\0",b+=n.compressionMethod,b+=v(o,2),b+=v(l,2),b+=v(n.crc32,4),b+=v(n.compressedSize,4),b+=v(n.uncompressedSize,4),b+=v(d.length,2),b+=v(_.length,2),{fileRecord:s.LOCAL_FILE_HEADER+b+d+_,dirRecord:s.CENTRAL_FILE_HEADER+"\0"+b+v(p.length,2)+"\0\0\0\0"+(!0===u?"\0\0\0":"\0\0\0\0")+v(a,4)+d+_+p,compressedObject:n}},T={load:function(){throw new Error("Load method is not defined. Is the file jszip-load.js included ?")},filter:function(t){var e,n,i,r,s=[];for(e in this.files)this.files.hasOwnProperty(e)&&(i=this.files[e],r=new y(i.name,i._data,_(i.options)),n=e.slice(this.root.length,e.length),e.slice(0,this.root.length)===this.root&&t(n,r)&&s.push(r));return s},file:function(t,e,n){if(1===arguments.length){if(i.isRegExp(t)){var r=t;return this.filter((function(t,e){return!e.dir&&r.test(t)}))}return this.filter((function(e,n){return!n.dir&&e===t}))[0]||null}return t=this.root+t,w.call(this,t,e,n),this},folder:function(t){if(!t)return this;if(i.isRegExp(t))return this.filter((function(e,n){return n.dir&&t.test(e)}));var e=this.root+t,n=S.call(this,e),r=this.clone();return r.root=n.name,r},remove:function(t){t=this.root+t;var e=this.files[t];if(e||("/"!=t.slice(-1)&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var n=this.filter((function(e,n){return n.name.slice(0,t.length)===t})),i=0;i<n.length;i++)delete this.files[n[i].name];return this},generate:function(t){t=_(t||{},{base64:!0,compression:"STORE",type:"base64",comment:null}),i.checkSupport(t.type);var e,n,r,a=[],u=0,h=0,c=i.transformTo("string",this.utf8encode(t.comment||this.comment||""));for(var p in this.files)if(this.files.hasOwnProperty(p)){var g=this.files[p],m=g.options.compression||t.compression.toUpperCase(),y=l[m];if(!y)throw new Error(m+" is not a valid compression method !");var x=C.call(this,g,y),w=E.call(this,p,g,x,u);u+=w.fileRecord.length+x.compressedSize,h+=w.dirRecord.length,a.push(w)}r=s.CENTRAL_DIRECTORY_END+"\0\0\0\0"+v(a.length,2)+v(a.length,2)+v(h,4)+v(u,4)+v(c.length,2)+c;var b=t.type.toLowerCase();for(e="uint8array"===b||"arraybuffer"===b||"blob"===b||"nodebuffer"===b?new f(u+h+r.length):new d(u+h+r.length),n=0;n<a.length;n++)e.append(a[n].fileRecord),e.append(a[n].compressedObject.compressedContent);for(n=0;n<a.length;n++)e.append(a[n].dirRecord);e.append(r);var S=e.finalize();switch(t.type.toLowerCase()){case"uint8array":case"arraybuffer":case"nodebuffer":return i.transformTo(t.type.toLowerCase(),S);case"blob":return i.arrayBuffer2Blob(i.transformTo("arraybuffer",S));case"base64":return t.base64?o.encode(S):S;default:return S}},crc32:function(t,e){return r(t,e)},utf8encode:function(t){return i.transformTo("string",c.utf8encode(t))},utf8decode:function(t){return c.utf8decode(t)}};e.exports=T},{"./base64":1,"./compressedObject":2,"./compressions":3,"./crc32":4,"./defaults":6,"./nodeBuffer":11,"./signature":14,"./stringWriter":16,"./support":17,"./uint8ArrayWriter":19,"./utf8":20,"./utils":21}],14:[function(t,e,n){"use strict";n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\b"},{}],15:[function(t,e){"use strict";function n(t,e){this.data=t,e||(this.data=r.string2binary(this.data)),this.length=this.data.length,this.index=0}var i=t("./dataReader"),r=t("./utils");n.prototype=new i,n.prototype.byteAt=function(t){return this.data.charCodeAt(t)},n.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)},n.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.index,this.index+t);return this.index+=t,e},e.exports=n},{"./dataReader":5,"./utils":21}],16:[function(t,e){"use strict";var n=t("./utils"),i=function(){this.data=[]};i.prototype={append:function(t){t=n.transformTo("string",t),this.data.push(t)},finalize:function(){return this.data.join("")}},e.exports=i},{"./utils":21}],17:[function(t,n,i){(function(t){"use strict";if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,i.nodebuffer=void 0!==t,i.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)i.blob=!1;else{var e=new ArrayBuffer(0);try{i.blob=0===new Blob([e],{type:"application/zip"}).size}catch(t){try{var n=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);n.append(e),i.blob=0===n.getBlob("application/zip").size}catch(t){i.blob=!1}}}}).call(this,void 0!==e?e:void 0)},{}],18:[function(t,e){"use strict";function n(t){t&&(this.data=t,this.length=this.data.length,this.index=0)}var i=t("./dataReader");n.prototype=new i,n.prototype.byteAt=function(t){return this.data[t]},n.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),n=t.charCodeAt(1),i=t.charCodeAt(2),r=t.charCodeAt(3),s=this.length-4;s>=0;--s)if(this.data[s]===e&&this.data[s+1]===n&&this.data[s+2]===i&&this.data[s+3]===r)return s;return-1},n.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.index,this.index+t);return this.index+=t,e},e.exports=n},{"./dataReader":5}],19:[function(t,e){"use strict";var n=t("./utils"),i=function(t){this.data=new Uint8Array(t),this.index=0};i.prototype={append:function(t){0!==t.length&&(t=n.transformTo("uint8array",t),this.data.set(t,this.index),this.index+=t.length)},finalize:function(){return this.data}},e.exports=i},{"./utils":21}],20:[function(t,e,n){"use strict";for(var i=t("./utils"),r=t("./support"),s=t("./nodeBuffer"),a=new Array(256),o=0;256>o;o++)a[o]=o>=252?6:o>=248?5:o>=240?4:o>=224?3:o>=192?2:1;a[254]=a[254]=1;var l=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;n>=0&&128==(192&t[n]);)n--;return 0>n||0===n?e:n+a[t[n]]>e?n:e},u=function(t){var e,n,r,s,o=t.length,l=new Array(2*o);for(n=0,e=0;o>e;)if(128>(r=t[e++]))l[n++]=r;else if((s=a[r])>4)l[n++]=65533,e+=s-1;else{for(r&=2===s?31:3===s?15:7;s>1&&o>e;)r=r<<6|63&t[e++],s--;s>1?l[n++]=65533:65536>r?l[n++]=r:(r-=65536,l[n++]=55296|r>>10&1023,l[n++]=56320|1023&r)}return l.length!==n&&(l.subarray?l=l.subarray(0,n):l.length=n),i.applyFromCharCode(l)};n.utf8encode=function(t){return r.nodebuffer?s(t,"utf-8"):function(t){var e,n,i,s,a,o=t.length,l=0;for(s=0;o>s;s++)55296==(64512&(n=t.charCodeAt(s)))&&o>s+1&&56320==(64512&(i=t.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(i-56320),s++),l+=128>n?1:2048>n?2:65536>n?3:4;for(e=r.uint8array?new Uint8Array(l):new Array(l),a=0,s=0;l>a;s++)55296==(64512&(n=t.charCodeAt(s)))&&o>s+1&&56320==(64512&(i=t.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(i-56320),s++),128>n?e[a++]=n:2048>n?(e[a++]=192|n>>>6,e[a++]=128|63&n):65536>n?(e[a++]=224|n>>>12,e[a++]=128|n>>>6&63,e[a++]=128|63&n):(e[a++]=240|n>>>18,e[a++]=128|n>>>12&63,e[a++]=128|n>>>6&63,e[a++]=128|63&n);return e}(t)},n.utf8decode=function(t){if(r.nodebuffer)return i.transformTo("nodebuffer",t).toString("utf-8");for(var e=[],n=0,s=(t=i.transformTo(r.uint8array?"uint8array":"array",t)).length;s>n;){var a=l(t,Math.min(n+65536,s));e.push(r.uint8array?u(t.subarray(n,a)):u(t.slice(n,a))),n=a}return e.join("")}},{"./nodeBuffer":11,"./support":17,"./utils":21}],21:[function(t,e,n){"use strict";function i(t){return t}function r(t,e){for(var n=0;n<t.length;++n)e[n]=255&t.charCodeAt(n);return e}function s(t){var e=65536,i=[],r=t.length,s=n.getTypeOf(t),a=0,o=!0;try{switch(s){case"uint8array":String.fromCharCode.apply(null,new Uint8Array(0));break;case"nodebuffer":String.fromCharCode.apply(null,u(0))}}catch(t){o=!1}if(!o){for(var l="",h=0;h<t.length;h++)l+=String.fromCharCode(t[h]);return l}for(;r>a&&e>1;)try{i.push("array"===s||"nodebuffer"===s?String.fromCharCode.apply(null,t.slice(a,Math.min(a+e,r))):String.fromCharCode.apply(null,t.subarray(a,Math.min(a+e,r)))),a+=e}catch(t){e=Math.floor(e/2)}return i.join("")}function a(t,e){for(var n=0;n<t.length;n++)e[n]=t[n];return e}var o=t("./support"),l=t("./compressions"),u=t("./nodeBuffer");n.string2binary=function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(255&t.charCodeAt(n));return e},n.arrayBuffer2Blob=function(t){n.checkSupport("blob");try{return new Blob([t],{type:"application/zip"})}catch(n){try{var e=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);return e.append(t),e.getBlob("application/zip")}catch(t){throw new Error("Bug : can't construct the Blob.")}}},n.applyFromCharCode=s;var h={};h.string={string:i,array:function(t){return r(t,new Array(t.length))},arraybuffer:function(t){return h.string.uint8array(t).buffer},uint8array:function(t){return r(t,new Uint8Array(t.length))},nodebuffer:function(t){return r(t,u(t.length))}},h.array={string:s,array:i,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return u(t)}},h.arraybuffer={string:function(t){return s(new Uint8Array(t))},array:function(t){return a(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:i,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return u(new Uint8Array(t))}},h.uint8array={string:s,array:function(t){return a(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:i,nodebuffer:function(t){return u(t)}},h.nodebuffer={string:s,array:function(t){return a(t,new Array(t.length))},arraybuffer:function(t){return h.nodebuffer.uint8array(t).buffer},uint8array:function(t){return a(t,new Uint8Array(t.length))},nodebuffer:i},n.transformTo=function(t,e){if(e||(e=""),!t)return e;n.checkSupport(t);var i=n.getTypeOf(e);return h[i][t](e)},n.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":o.nodebuffer&&u.test(t)?"nodebuffer":o.uint8array&&t instanceof Uint8Array?"uint8array":o.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(t){if(!o[t.toLowerCase()])throw new Error(t+" is not supported by this browser")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(t){var e,n,i="";for(n=0;n<(t||"").length;n++)i+="\\x"+(16>(e=t.charCodeAt(n))?"0":"")+e.toString(16).toUpperCase();return i},n.findCompression=function(t){for(var e in l)if(l.hasOwnProperty(e)&&l[e].magic===t)return l[e];return null},n.isRegExp=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)}},{"./compressions":3,"./nodeBuffer":11,"./support":17}],22:[function(t,e){"use strict";function n(t,e){this.files=[],this.loadOptions=e,t&&this.load(t)}var i=t("./stringReader"),r=t("./nodeBufferReader"),s=t("./uint8ArrayReader"),a=t("./utils"),o=t("./signature"),l=t("./zipEntry"),u=t("./support"),h=t("./object");n.prototype={checkSignature:function(t){var e=this.reader.readString(4);if(e!==t)throw new Error("Corrupted zip or bug : unexpected signature ("+a.pretty(e)+", expected "+a.pretty(t)+")")},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2),this.zipComment=this.reader.readString(this.zipCommentLength),this.zipComment=h.utf8decode(this.zipComment)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.versionMadeBy=this.reader.readString(2),this.versionNeeded=this.reader.readInt(2),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,n,i=this.zip64EndOfCentralSize-44;i>0;)t=this.reader.readInt(2),e=this.reader.readInt(4),n=this.reader.readString(e),this.zip64ExtensibleData[t]={id:t,length:e,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readString(4)===o.CENTRAL_FILE_HEADER;)(t=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(-1===t)throw new Error("Corrupted zip : can't find end of central directory");if(this.reader.setIndex(t),this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,-1===(t=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR)))throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");this.reader.setIndex(t),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}},prepareReader:function(t){var e=a.getTypeOf(t);this.reader="string"!==e||u.uint8array?"nodebuffer"===e?new r(t):new s(a.transformTo("uint8array",t)):new i(t,this.loadOptions.optimizedBinaryString)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=n},{"./nodeBufferReader":12,"./object":13,"./signature":14,"./stringReader":15,"./support":17,"./uint8ArrayReader":18,"./utils":21,"./zipEntry":23}],23:[function(t,e){"use strict";function n(t,e){this.options=t,this.loadOptions=e}var i=t("./stringReader"),r=t("./utils"),s=t("./compressedObject"),a=t("./object");n.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},prepareCompressedContent:function(t,e,n){return function(){var i=t.index;t.setIndex(e);var r=t.readData(n);return t.setIndex(i),r}},prepareContent:function(t,e,n,i,s){return function(){var t=r.transformTo(i.uncompressInputType,this.getCompressedContent()),e=i.uncompress(t);if(e.length!==s)throw new Error("Bug : uncompressed data size mismatch");return e}},readLocalPart:function(t){var e,n;if(t.skip(22),this.fileNameLength=t.readInt(2),n=t.readInt(2),this.fileName=t.readString(this.fileNameLength),t.skip(n),-1==this.compressedSize||-1==this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)");if(null===(e=r.findCompression(this.compressionMethod)))throw new Error("Corrupted zip : compression "+r.pretty(this.compressionMethod)+" unknown (inner file : "+this.fileName+")");if(this.decompressed=new s,this.decompressed.compressedSize=this.compressedSize,this.decompressed.uncompressedSize=this.uncompressedSize,this.decompressed.crc32=this.crc32,this.decompressed.compressionMethod=this.compressionMethod,this.decompressed.getCompressedContent=this.prepareCompressedContent(t,t.index,this.compressedSize,e),this.decompressed.getContent=this.prepareContent(t,t.index,this.compressedSize,e,this.uncompressedSize),this.loadOptions.checkCRC32&&(this.decompressed=r.transformTo("string",this.decompressed.getContent()),a.crc32(this.decompressed)!==this.crc32))throw new Error("Corrupted zip : CRC32 mismatch")},readCentralPart:function(t){if(this.versionMadeBy=t.readString(2),this.versionNeeded=t.readInt(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4),this.fileNameLength=t.readInt(2),this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");this.fileName=t.readString(this.fileNameLength),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readString(this.fileCommentLength),this.dir=!!(16&this.externalFileAttributes)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var t=new i(this.extraFields[1].value);this.uncompressedSize===r.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===r.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===r.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===r.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(t){var e,n,i,r=t.index;for(this.extraFields=this.extraFields||{};t.index<r+this.extraFieldsLength;)e=t.readInt(2),n=t.readInt(2),i=t.readString(n),this.extraFields[e]={id:e,length:n,value:i}},handleUTF8:function(){if(this.useUTF8())this.fileName=a.utf8decode(this.fileName),this.fileComment=a.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();null!==t&&(this.fileName=t);var e=this.findExtraFieldUnicodeComment();null!==e&&(this.fileComment=e)}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=new i(t.value);return 1!==e.readInt(1)||a.crc32(this.fileName)!==e.readInt(4)?null:a.utf8decode(e.readString(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=new i(t.value);return 1!==e.readInt(1)||a.crc32(this.fileComment)!==e.readInt(4)?null:a.utf8decode(e.readString(t.length-5))}return null}},e.exports=n},{"./compressedObject":2,"./object":13,"./stringReader":15,"./utils":21}],24:[function(t,e){"use strict";var n={};(0,t("./lib/utils/common").assign)(n,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),e.exports=n},{"./lib/deflate":25,"./lib/inflate":26,"./lib/utils/common":27,"./lib/zlib/constants":30}],25:[function(t,e,n){"use strict";function i(t,e){var n=new u(e);if(n.push(t,!0),n.err)throw n.msg;return n.result}var r=t("./zlib/deflate.js"),s=t("./utils/common"),a=t("./utils/strings"),o=t("./zlib/messages"),l=t("./zlib/zstream"),u=function(t){this.options=s.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(0!==n)throw new Error(o[n]);e.header&&r.deflateSetHeader(this.strm,e.header)};u.prototype.push=function(t,e){var n,i,o=this.strm,l=this.options.chunkSize;if(this.ended)return!1;i=e===~~e?e:!0===e?4:0,o.input="string"==typeof t?a.string2buf(t):t,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new s.Buf8(l),o.next_out=0,o.avail_out=l),1!==(n=r.deflate(o,i))&&0!==n)return this.onEnd(n),this.ended=!0,!1;(0===o.avail_out||0===o.avail_in&&4===i)&&this.onData("string"===this.options.to?a.buf2binstring(s.shrinkBuf(o.output,o.next_out)):s.shrinkBuf(o.output,o.next_out))}while((o.avail_in>0||0===o.avail_out)&&1!==n);return 4!==i||(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,0===n)},u.prototype.onData=function(t){this.chunks.push(t)},u.prototype.onEnd=function(t){0===t&&(this.result="string"===this.options.to?this.chunks.join(""):s.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},n.Deflate=u,n.deflate=i,n.deflateRaw=function(t,e){return(e=e||{}).raw=!0,i(t,e)},n.gzip=function(t,e){return(e=e||{}).gzip=!0,i(t,e)}},{"./utils/common":27,"./utils/strings":28,"./zlib/deflate.js":32,"./zlib/messages":37,"./zlib/zstream":39}],26:[function(t,e,n){"use strict";function i(t,e){var n=new c(e);if(n.push(t,!0),n.err)throw n.msg;return n.result}var r=t("./zlib/inflate.js"),s=t("./utils/common"),a=t("./utils/strings"),o=t("./zlib/constants"),l=t("./zlib/messages"),u=t("./zlib/zstream"),h=t("./zlib/gzheader"),c=function(t){this.options=s.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,e.windowBits);if(n!==o.Z_OK)throw new Error(l[n]);this.header=new h,r.inflateGetHeader(this.strm,this.header)};c.prototype.push=function(t,e){var n,i,l,u,h,c=this.strm,d=this.options.chunkSize;if(this.ended)return!1;i=e===~~e?e:!0===e?o.Z_FINISH:o.Z_NO_FLUSH,c.input="string"==typeof t?a.binstring2buf(t):t,c.next_in=0,c.avail_in=c.input.length;do{if(0===c.avail_out&&(c.output=new s.Buf8(d),c.next_out=0,c.avail_out=d),(n=r.inflate(c,o.Z_NO_FLUSH))!==o.Z_STREAM_END&&n!==o.Z_OK)return this.onEnd(n),this.ended=!0,!1;c.next_out&&(0===c.avail_out||n===o.Z_STREAM_END||0===c.avail_in&&i===o.Z_FINISH)&&("string"===this.options.to?(l=a.utf8border(c.output,c.next_out),u=c.next_out-l,h=a.buf2string(c.output,l),c.next_out=u,c.avail_out=d-u,u&&s.arraySet(c.output,c.output,l,u,0),this.onData(h)):this.onData(s.shrinkBuf(c.output,c.next_out)))}while(c.avail_in>0&&n!==o.Z_STREAM_END);return n===o.Z_STREAM_END&&(i=o.Z_FINISH),i!==o.Z_FINISH||(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===o.Z_OK)},c.prototype.onData=function(t){this.chunks.push(t)},c.prototype.onEnd=function(t){t===o.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):s.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},n.Inflate=c,n.inflate=i,n.inflateRaw=function(t,e){return(e=e||{}).raw=!0,i(t,e)},n.ungzip=i},{"./utils/common":27,"./utils/strings":28,"./zlib/constants":30,"./zlib/gzheader":33,"./zlib/inflate.js":35,"./zlib/messages":37,"./zlib/zstream":39}],27:[function(t,e,n){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])}}return t},n.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var r={arraySet:function(t,e,n,i,r){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+i),r);else for(var s=0;i>s;s++)t[r+s]=e[n+s]},flattenChunks:function(t){var e,n,i,r,s,a;for(i=0,e=0,n=t.length;n>e;e++)i+=t[e].length;for(a=new Uint8Array(i),r=0,e=0,n=t.length;n>e;e++)s=t[e],a.set(s,r),r+=s.length;return a}},s={arraySet:function(t,e,n,i,r){for(var s=0;i>s;s++)t[r+s]=e[n+s]},flattenChunks:function(t){return[].concat.apply([],t)}};n.setTyped=function(t){t?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,r)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,s))},n.setTyped(i)},{}],28:[function(t,e,n){"use strict";function i(t,e){if(65537>e&&(t.subarray&&a||!t.subarray&&s))return String.fromCharCode.apply(null,r.shrinkBuf(t,e));for(var n="",i=0;e>i;i++)n+=String.fromCharCode(t[i]);return n}var r=t("./common"),s=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(t){s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){a=!1}for(var o=new r.Buf8(256),l=0;256>l;l++)o[l]=l>=252?6:l>=248?5:l>=240?4:l>=224?3:l>=192?2:1;o[254]=o[254]=1,n.string2buf=function(t){var e,n,i,s,a,o=t.length,l=0;for(s=0;o>s;s++)55296==(64512&(n=t.charCodeAt(s)))&&o>s+1&&56320==(64512&(i=t.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(i-56320),s++),l+=128>n?1:2048>n?2:65536>n?3:4;for(e=new r.Buf8(l),a=0,s=0;l>a;s++)55296==(64512&(n=t.charCodeAt(s)))&&o>s+1&&56320==(64512&(i=t.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(i-56320),s++),128>n?e[a++]=n:2048>n?(e[a++]=192|n>>>6,e[a++]=128|63&n):65536>n?(e[a++]=224|n>>>12,e[a++]=128|n>>>6&63,e[a++]=128|63&n):(e[a++]=240|n>>>18,e[a++]=128|n>>>12&63,e[a++]=128|n>>>6&63,e[a++]=128|63&n);return e},n.buf2binstring=function(t){return i(t,t.length)},n.binstring2buf=function(t){for(var e=new r.Buf8(t.length),n=0,i=e.length;i>n;n++)e[n]=t.charCodeAt(n);return e},n.buf2string=function(t,e){var n,r,s,a,l=e||t.length,u=new Array(2*l);for(r=0,n=0;l>n;)if(128>(s=t[n++]))u[r++]=s;else if((a=o[s])>4)u[r++]=65533,n+=a-1;else{for(s&=2===a?31:3===a?15:7;a>1&&l>n;)s=s<<6|63&t[n++],a--;a>1?u[r++]=65533:65536>s?u[r++]=s:(s-=65536,u[r++]=55296|s>>10&1023,u[r++]=56320|1023&s)}return i(u,r)},n.utf8border=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;n>=0&&128==(192&t[n]);)n--;return 0>n||0===n?e:n+o[t[n]]>e?n:e}},{"./common":27}],29:[function(t,e){"use strict";e.exports=function(t,e,n,i){for(var r=65535&t|0,s=t>>>16&65535|0,a=0;0!==n;){n-=a=n>2e3?2e3:n;do{s=s+(r=r+e[i++]|0)|0}while(--a);r%=65521,s%=65521}return r|s<<16|0}},{}],30:[function(t,e){e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],31:[function(t,e){"use strict";var n=function(){for(var t,e=[],n=0;256>n;n++){t=n;for(var i=0;8>i;i++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();e.exports=function(t,e,i,r){var s=n,a=r+i;t^=-1;for(var o=r;a>o;o++)t=t>>>8^s[255&(t^e[o])];return-1^t}},{}],32:[function(t,e,n){"use strict";function i(t,e){return t.msg=T[e],e}function r(t){return(t<<1)-(t>4?9:0)}function s(t){for(var e=t.length;--e>=0;)t[e]=0}function a(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(b.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function o(t,e){S._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,a(t.strm)}function l(t,e){t.pending_buf[t.pending++]=e}function u(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function h(t,e,n,i){var r=t.avail_in;return r>i&&(r=i),0===r?0:(t.avail_in-=r,b.arraySet(e,t.input,t.next_in,r,n),1===t.state.wrap?t.adler=C(t.adler,e,r,n):2===t.state.wrap&&(t.adler=E(t.adler,e,r,n)),t.next_in+=r,t.total_in+=r,r)}function c(t,e){var n,i,r=t.max_chain_length,s=t.strstart,a=t.prev_length,o=t.nice_match,l=t.strstart>t.w_size-et?t.strstart-(t.w_size-et):0,u=t.window,h=t.w_mask,c=t.prev,d=t.strstart+tt,f=u[s+a-1],p=u[s+a];t.prev_length>=t.good_match&&(r>>=2),o>t.lookahead&&(o=t.lookahead);do{if(u[(n=e)+a]===p&&u[n+a-1]===f&&u[n]===u[s]&&u[++n]===u[s+1]){s+=2,n++;do{}while(u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&d>s);if(i=tt-(d-s),s=d-tt,i>a){if(t.match_start=e,a=i,i>=o)break;f=u[s+a-1],p=u[s+a]}}}while((e=c[e&h])>l&&0!=--r);return a<=t.lookahead?a:t.lookahead}function d(t){var e,n,i,r,s,a=t.w_size;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=a+(a-et)){b.arraySet(t.window,t.window,a,a,0),t.match_start-=a,t.strstart-=a,t.block_start-=a,e=n=t.hash_size;do{i=t.head[--e],t.head[e]=i>=a?i-a:0}while(--n);e=n=a;do{i=t.prev[--e],t.prev[e]=i>=a?i-a:0}while(--n);r+=a}if(0===t.strm.avail_in)break;if(n=h(t.strm,t.window,t.strstart+t.lookahead,r),t.lookahead+=n,t.lookahead+t.insert>=J)for(s=t.strstart-t.insert,t.ins_h=t.window[s],t.ins_h=(t.ins_h<<t.hash_shift^t.window[s+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[s+J-1])&t.hash_mask,t.prev[s&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=s,s++,t.insert--,!(t.lookahead+t.insert<J)););}while(t.lookahead<et&&0!==t.strm.avail_in)}function f(t,e){for(var n,i;;){if(t.lookahead<et){if(d(t),t.lookahead<et&&e===M)return ht;if(0===t.lookahead)break}if(n=0,t.lookahead>=J&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+J-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-et&&(t.match_length=c(t,n)),t.match_length>=J)if(i=S._tr_tally(t,t.strstart-t.match_start,t.match_length-J),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=J){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+J-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else i=S._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(o(t,!1),0===t.strm.avail_out))return ht}return t.insert=t.strstart<J-1?t.strstart:J-1,e===A?(o(t,!0),0===t.strm.avail_out?dt:ft):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?ht:ct}function p(t,e){for(var n,i,r;;){if(t.lookahead<et){if(d(t),t.lookahead<et&&e===M)return ht;if(0===t.lookahead)break}if(n=0,t.lookahead>=J&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+J-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=J-1,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-et&&(t.match_length=c(t,n),t.match_length<=5&&(t.strategy===U||t.match_length===J&&t.strstart-t.match_start>4096)&&(t.match_length=J-1)),t.prev_length>=J&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-J,i=S._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-J),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=r&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+J-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=J-1,t.strstart++,i&&(o(t,!1),0===t.strm.avail_out))return ht}else if(t.match_available){if((i=S._tr_tally(t,0,t.window[t.strstart-1]))&&o(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return ht}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=S._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<J-1?t.strstart:J-1,e===A?(o(t,!0),0===t.strm.avail_out?dt:ft):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?ht:ct}function g(t,e){for(var n,i,r,s,a=t.window;;){if(t.lookahead<=tt){if(d(t),t.lookahead<=tt&&e===M)return ht;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=J&&t.strstart>0&&(i=a[r=t.strstart-1])===a[++r]&&i===a[++r]&&i===a[++r]){s=t.strstart+tt;do{}while(i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&s>r);t.match_length=tt-(s-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=J?(n=S._tr_tally(t,1,t.match_length-J),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=S._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(o(t,!1),0===t.strm.avail_out))return ht}return t.insert=0,e===A?(o(t,!0),0===t.strm.avail_out?dt:ft):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?ht:ct}function m(t,e){for(var n;;){if(0===t.lookahead&&(d(t),0===t.lookahead)){if(e===M)return ht;break}if(t.match_length=0,n=S._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(o(t,!1),0===t.strm.avail_out))return ht}return t.insert=0,e===A?(o(t,!0),0===t.strm.avail_out?dt:ft):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?ht:ct}function y(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=H,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new b.Buf16(2*K),this.dyn_dtree=new b.Buf16(2*(2*Y+1)),this.bl_tree=new b.Buf16(2*(2*Z+1)),s(this.dyn_ltree),s(this.dyn_dtree),s(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new b.Buf16(Q+1),this.heap=new b.Buf16(2*W+1),s(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new b.Buf16(2*W+1),s(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function v(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=X,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?it:lt,t.adler=2===e.wrap?0:1,e.last_flush=M,S._tr_init(e),I):i(t,L)}function _(t){var e=v(t);return e===I&&function(t){t.window_size=2*t.w_size,s(t.head),t.max_lazy_match=w[t.level].max_lazy,t.good_match=w[t.level].good_length,t.nice_match=w[t.level].nice_length,t.max_chain_length=w[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=J-1,t.match_available=0,t.ins_h=0}(t.state),e}function x(t,e,n,r,s,a){if(!t)return L;var o=1;if(e===z&&(e=6),0>r?(o=0,r=-r):r>15&&(o=2,r-=16),1>s||s>G||n!==H||8>r||r>15||0>e||e>9||0>a||a>B)return i(t,L);8===r&&(r=9);var l=new y;return t.state=l,l.strm=t,l.wrap=o,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=s+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+J-1)/J),l.window=new b.Buf8(2*l.w_size),l.head=new b.Buf16(l.hash_size),l.prev=new b.Buf16(l.w_size),l.lit_bufsize=1<<s+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new b.Buf8(l.pending_buf_size),l.d_buf=l.lit_bufsize>>1,l.l_buf=3*l.lit_bufsize,l.level=e,l.strategy=a,l.method=n,_(t)}var w,b=t("../utils/common"),S=t("./trees"),C=t("./adler32"),E=t("./crc32"),T=t("./messages"),M=0,k=1,O=3,A=4,P=5,I=0,D=1,L=-2,N=-3,R=-5,z=-1,U=1,j=2,F=3,B=4,$=0,X=2,H=8,G=9,q=15,V=8,W=286,Y=30,Z=19,K=2*W+1,Q=15,J=3,tt=258,et=tt+J+1,nt=32,it=42,rt=69,st=73,at=91,ot=103,lt=113,ut=666,ht=1,ct=2,dt=3,ft=4,pt=3,gt=function(t,e,n,i,r){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=i,this.func=r};w=[new gt(0,0,0,0,(function(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(d(t),0===t.lookahead&&e===M)return ht;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var i=t.block_start+n;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,o(t,!1),0===t.strm.avail_out))return ht;if(t.strstart-t.block_start>=t.w_size-et&&(o(t,!1),0===t.strm.avail_out))return ht}return t.insert=0,e===A?(o(t,!0),0===t.strm.avail_out?dt:ft):(t.strstart>t.block_start&&(o(t,!1),t.strm.avail_out),ht)})),new gt(4,4,8,4,f),new gt(4,5,16,8,f),new gt(4,6,32,32,f),new gt(4,4,16,16,p),new gt(8,16,32,32,p),new gt(8,16,128,128,p),new gt(8,32,128,256,p),new gt(32,128,258,1024,p),new gt(32,258,258,4096,p)],n.deflateInit=function(t,e){return x(t,e,H,q,V,$)},n.deflateInit2=x,n.deflateReset=_,n.deflateResetKeep=v,n.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?L:(t.state.gzhead=e,I):L},n.deflate=function(t,e){var n,o,h,c;if(!t||!t.state||e>P||0>e)return t?i(t,L):L;if(o=t.state,!t.output||!t.input&&0!==t.avail_in||o.status===ut&&e!==A)return i(t,0===t.avail_out?R:L);if(o.strm=t,n=o.last_flush,o.last_flush=e,o.status===it)if(2===o.wrap)t.adler=0,l(o,31),l(o,139),l(o,8),o.gzhead?(l(o,(o.gzhead.text?1:0)+(o.gzhead.hcrc?2:0)+(o.gzhead.extra?4:0)+(o.gzhead.name?8:0)+(o.gzhead.comment?16:0)),l(o,255&o.gzhead.time),l(o,o.gzhead.time>>8&255),l(o,o.gzhead.time>>16&255),l(o,o.gzhead.time>>24&255),l(o,9===o.level?2:o.strategy>=j||o.level<2?4:0),l(o,255&o.gzhead.os),o.gzhead.extra&&o.gzhead.extra.length&&(l(o,255&o.gzhead.extra.length),l(o,o.gzhead.extra.length>>8&255)),o.gzhead.hcrc&&(t.adler=E(t.adler,o.pending_buf,o.pending,0)),o.gzindex=0,o.status=rt):(l(o,0),l(o,0),l(o,0),l(o,0),l(o,0),l(o,9===o.level?2:o.strategy>=j||o.level<2?4:0),l(o,pt),o.status=lt);else{var d=H+(o.w_bits-8<<4)<<8;d|=(o.strategy>=j||o.level<2?0:o.level<6?1:6===o.level?2:3)<<6,0!==o.strstart&&(d|=nt),d+=31-d%31,o.status=lt,u(o,d),0!==o.strstart&&(u(o,t.adler>>>16),u(o,65535&t.adler)),t.adler=1}if(o.status===rt)if(o.gzhead.extra){for(h=o.pending;o.gzindex<(65535&o.gzhead.extra.length)&&(o.pending!==o.pending_buf_size||(o.gzhead.hcrc&&o.pending>h&&(t.adler=E(t.adler,o.pending_buf,o.pending-h,h)),a(t),h=o.pending,o.pending!==o.pending_buf_size));)l(o,255&o.gzhead.extra[o.gzindex]),o.gzindex++;o.gzhead.hcrc&&o.pending>h&&(t.adler=E(t.adler,o.pending_buf,o.pending-h,h)),o.gzindex===o.gzhead.extra.length&&(o.gzindex=0,o.status=st)}else o.status=st;if(o.status===st)if(o.gzhead.name){h=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>h&&(t.adler=E(t.adler,o.pending_buf,o.pending-h,h)),a(t),h=o.pending,o.pending===o.pending_buf_size)){c=1;break}c=o.gzindex<o.gzhead.name.length?255&o.gzhead.name.charCodeAt(o.gzindex++):0,l(o,c)}while(0!==c);o.gzhead.hcrc&&o.pending>h&&(t.adler=E(t.adler,o.pending_buf,o.pending-h,h)),0===c&&(o.gzindex=0,o.status=at)}else o.status=at;if(o.status===at)if(o.gzhead.comment){h=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>h&&(t.adler=E(t.adler,o.pending_buf,o.pending-h,h)),a(t),h=o.pending,o.pending===o.pending_buf_size)){c=1;break}c=o.gzindex<o.gzhead.comment.length?255&o.gzhead.comment.charCodeAt(o.gzindex++):0,l(o,c)}while(0!==c);o.gzhead.hcrc&&o.pending>h&&(t.adler=E(t.adler,o.pending_buf,o.pending-h,h)),0===c&&(o.status=ot)}else o.status=ot;if(o.status===ot&&(o.gzhead.hcrc?(o.pending+2>o.pending_buf_size&&a(t),o.pending+2<=o.pending_buf_size&&(l(o,255&t.adler),l(o,t.adler>>8&255),t.adler=0,o.status=lt)):o.status=lt),0!==o.pending){if(a(t),0===t.avail_out)return o.last_flush=-1,I}else if(0===t.avail_in&&r(e)<=r(n)&&e!==A)return i(t,R);if(o.status===ut&&0!==t.avail_in)return i(t,R);if(0!==t.avail_in||0!==o.lookahead||e!==M&&o.status!==ut){var f=o.strategy===j?m(o,e):o.strategy===F?g(o,e):w[o.level].func(o,e);if((f===dt||f===ft)&&(o.status=ut),f===ht||f===dt)return 0===t.avail_out&&(o.last_flush=-1),I;if(f===ct&&(e===k?S._tr_align(o):e!==P&&(S._tr_stored_block(o,0,0,!1),e===O&&(s(o.head),0===o.lookahead&&(o.strstart=0,o.block_start=0,o.insert=0))),a(t),0===t.avail_out))return o.last_flush=-1,I}return e!==A?I:o.wrap<=0?D:(2===o.wrap?(l(o,255&t.adler),l(o,t.adler>>8&255),l(o,t.adler>>16&255),l(o,t.adler>>24&255),l(o,255&t.total_in),l(o,t.total_in>>8&255),l(o,t.total_in>>16&255),l(o,t.total_in>>24&255)):(u(o,t.adler>>>16),u(o,65535&t.adler)),a(t),o.wrap>0&&(o.wrap=-o.wrap),0!==o.pending?I:D)},n.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==it&&e!==rt&&e!==st&&e!==at&&e!==ot&&e!==lt&&e!==ut?i(t,L):(t.state=null,e===lt?i(t,N):I):L},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":27,"./adler32":29,"./crc32":31,"./messages":37,"./trees":38}],33:[function(t,e){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],34:[function(t,e){"use strict";e.exports=function(t,e){var n,i,r,s,a,o,l,u,h,c,d,f,p,g,m,y,v,_,x,w,b,S,C,E,T;n=t.state,i=t.next_in,E=t.input,r=i+(t.avail_in-5),s=t.next_out,T=t.output,a=s-(e-t.avail_out),o=s+(t.avail_out-257),l=n.dmax,u=n.wsize,h=n.whave,c=n.wnext,d=n.window,f=n.hold,p=n.bits,g=n.lencode,m=n.distcode,y=(1<<n.lenbits)-1,v=(1<<n.distbits)-1;t:do{15>p&&(f+=E[i++]<<p,p+=8,f+=E[i++]<<p,p+=8),_=g[f&y];e:for(;;){if(f>>>=x=_>>>24,p-=x,0==(x=_>>>16&255))T[s++]=65535&_;else{if(!(16&x)){if(0==(64&x)){_=g[(65535&_)+(f&(1<<x)-1)];continue e}if(32&x){n.mode=12;break t}t.msg="invalid literal/length code",n.mode=30;break t}w=65535&_,(x&=15)&&(x>p&&(f+=E[i++]<<p,p+=8),w+=f&(1<<x)-1,f>>>=x,p-=x),15>p&&(f+=E[i++]<<p,p+=8,f+=E[i++]<<p,p+=8),_=m[f&v];n:for(;;){if(f>>>=x=_>>>24,p-=x,!(16&(x=_>>>16&255))){if(0==(64&x)){_=m[(65535&_)+(f&(1<<x)-1)];continue n}t.msg="invalid distance code",n.mode=30;break t}if(b=65535&_,(x&=15)>p&&(f+=E[i++]<<p,x>(p+=8)&&(f+=E[i++]<<p,p+=8)),(b+=f&(1<<x)-1)>l){t.msg="invalid distance too far back",n.mode=30;break t}if(f>>>=x,p-=x,b>(x=s-a)){if((x=b-x)>h&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(S=0,C=d,0===c){if(S+=u-x,w>x){w-=x;do{T[s++]=d[S++]}while(--x);S=s-b,C=T}}else if(x>c){if(S+=u+c-x,w>(x-=c)){w-=x;do{T[s++]=d[S++]}while(--x);if(S=0,w>c){w-=x=c;do{T[s++]=d[S++]}while(--x);S=s-b,C=T}}}else if(S+=c-x,w>x){w-=x;do{T[s++]=d[S++]}while(--x);S=s-b,C=T}for(;w>2;)T[s++]=C[S++],T[s++]=C[S++],T[s++]=C[S++],w-=3;w&&(T[s++]=C[S++],w>1&&(T[s++]=C[S++]))}else{S=s-b;do{T[s++]=T[S++],T[s++]=T[S++],T[s++]=T[S++],w-=3}while(w>2);w&&(T[s++]=T[S++],w>1&&(T[s++]=T[S++]))}break}}break}}while(r>i&&o>s);i-=w=p>>3,f&=(1<<(p-=w<<3))-1,t.next_in=i,t.next_out=s,t.avail_in=r>i?r-i+5:5-(i-r),t.avail_out=o>s?o-s+257:257-(s-o),n.hold=f,n.bits=p}},{}],35:[function(t,e,n){"use strict";function i(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function r(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new d.Buf16(320),this.work=new d.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function s(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=P,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new d.Buf32(ut),e.distcode=e.distdyn=new d.Buf32(ht),e.sane=1,e.back=-1,S):T}function a(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,s(t)):T}function o(t,e){var n,i;return t&&t.state?(i=t.state,0>e?(n=0,e=-e):(n=1+(e>>4),48>e&&(e&=15)),e&&(8>e||e>15)?T:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=n,i.wbits=e,a(t))):T}function l(t,e){var n,i;return t?(i=new r,t.state=i,i.window=null,(n=o(t,e))!==S&&(t.state=null),n):T}function u(t){if(dt){var e;for(h=new d.Buf32(512),c=new d.Buf32(32),e=0;144>e;)t.lens[e++]=8;for(;256>e;)t.lens[e++]=9;for(;280>e;)t.lens[e++]=7;for(;288>e;)t.lens[e++]=8;for(m(v,t.lens,0,288,h,0,t.work,{bits:9}),e=0;32>e;)t.lens[e++]=5;m(_,t.lens,0,32,c,0,t.work,{bits:5}),dt=!1}t.lencode=h,t.lenbits=9,t.distcode=c,t.distbits=5}var h,c,d=t("../utils/common"),f=t("./adler32"),p=t("./crc32"),g=t("./inffast"),m=t("./inftrees"),y=0,v=1,_=2,x=4,w=5,b=6,S=0,C=1,E=2,T=-2,M=-3,k=-4,O=-5,A=8,P=1,I=2,D=3,L=4,N=5,R=6,z=7,U=8,j=9,F=10,B=11,$=12,X=13,H=14,G=15,q=16,V=17,W=18,Y=19,Z=20,K=21,Q=22,J=23,tt=24,et=25,nt=26,it=27,rt=28,st=29,at=30,ot=31,lt=32,ut=852,ht=592,ct=15,dt=!0;n.inflateReset=a,n.inflateReset2=o,n.inflateResetKeep=s,n.inflateInit=function(t){return l(t,ct)},n.inflateInit2=l,n.inflate=function(t,e){var n,r,s,a,o,l,h,c,ut,ht,ct,dt,ft,pt,gt,mt,yt,vt,_t,xt,wt,bt,St,Ct,Et=0,Tt=new d.Buf8(4),Mt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return T;(n=t.state).mode===$&&(n.mode=X),o=t.next_out,s=t.output,h=t.avail_out,a=t.next_in,r=t.input,l=t.avail_in,c=n.hold,ut=n.bits,ht=l,ct=h,bt=S;t:for(;;)switch(n.mode){case P:if(0===n.wrap){n.mode=X;break}for(;16>ut;){if(0===l)break t;l--,c+=r[a++]<<ut,ut+=8}if(2&n.wrap&&35615===c){n.check=0,Tt[0]=255&c,Tt[1]=c>>>8&255,n.check=p(n.check,Tt,2,0),c=0,ut=0,n.mode=I;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&c)<<8)+(c>>8))%31){t.msg="incorrect header check",n.mode=at;break}if((15&c)!==A){t.msg="unknown compression method",n.mode=at;break}if(ut-=4,wt=8+(15&(c>>>=4)),0===n.wbits)n.wbits=wt;else if(wt>n.wbits){t.msg="invalid window size",n.mode=at;break}n.dmax=1<<wt,t.adler=n.check=1,n.mode=512&c?F:$,c=0,ut=0;break;case I:for(;16>ut;){if(0===l)break t;l--,c+=r[a++]<<ut,ut+=8}if(n.flags=c,(255&n.flags)!==A){t.msg="unknown compression method",n.mode=at;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=at;break}n.head&&(n.head.text=c>>8&1),512&n.flags&&(Tt[0]=255&c,Tt[1]=c>>>8&255,n.check=p(n.check,Tt,2,0)),c=0,ut=0,n.mode=D;case D:for(;32>ut;){if(0===l)break t;l--,c+=r[a++]<<ut,ut+=8}n.head&&(n.head.time=c),512&n.flags&&(Tt[0]=255&c,Tt[1]=c>>>8&255,Tt[2]=c>>>16&255,Tt[3]=c>>>24&255,n.check=p(n.check,Tt,4,0)),c=0,ut=0,n.mode=L;case L:for(;16>ut;){if(0===l)break t;l--,c+=r[a++]<<ut,ut+=8}n.head&&(n.head.xflags=255&c,n.head.os=c>>8),512&n.flags&&(Tt[0]=255&c,Tt[1]=c>>>8&255,n.check=p(n.check,Tt,2,0)),c=0,ut=0,n.mode=N;case N:if(1024&n.flags){for(;16>ut;){if(0===l)break t;l--,c+=r[a++]<<ut,ut+=8}n.length=c,n.head&&(n.head.extra_len=c),512&n.flags&&(Tt[0]=255&c,Tt[1]=c>>>8&255,n.check=p(n.check,Tt,2,0)),c=0,ut=0}else n.head&&(n.head.extra=null);n.mode=R;case R:if(1024&n.flags&&((dt=n.length)>l&&(dt=l),dt&&(n.head&&(wt=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),d.arraySet(n.head.extra,r,a,dt,wt)),512&n.flags&&(n.check=p(n.check,r,dt,a)),l-=dt,a+=dt,n.length-=dt),n.length))break t;n.length=0,n.mode=z;case z:if(2048&n.flags){if(0===l)break t;dt=0;do{wt=r[a+dt++],n.head&&wt&&n.length<65536&&(n.head.name+=String.fromCharCode(wt))}while(wt&&l>dt);if(512&n.flags&&(n.check=p(n.check,r,dt,a)),l-=dt,a+=dt,wt)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=U;case U:if(4096&n.flags){if(0===l)break t;dt=0;do{wt=r[a+dt++],n.head&&wt&&n.length<65536&&(n.head.comment+=String.fromCharCode(wt))}while(wt&&l>dt);if(512&n.flags&&(n.check=p(n.check,r,dt,a)),l-=dt,a+=dt,wt)break t}else n.head&&(n.head.comment=null);n.mode=j;case j:if(512&n.flags){for(;16>ut;){if(0===l)break t;l--,c+=r[a++]<<ut,ut+=8}if(c!==(65535&n.check)){t.msg="header crc mismatch",n.mode=at;break}c=0,ut=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=$;break;case F:for(;32>ut;){if(0===l)break t;l--,c+=r[a++]<<ut,ut+=8}t.adler=n.check=i(c),c=0,ut=0,n.mode=B;case B:if(0===n.havedict)return t.next_out=o,t.avail_out=h,t.next_in=a,t.avail_in=l,n.hold=c,n.bits=ut,E;t.adler=n.check=1,n.mode=$;case $:if(e===w||e===b)break t;case X:if(n.last){c>>>=7&ut,ut-=7&ut,n.mode=it;break}for(;3>ut;){if(0===l)break t;l--,c+=r[a++]<<ut,ut+=8}switch(n.last=1&c,ut-=1,3&(c>>>=1)){case 0:n.mode=H;break;case 1:if(u(n),n.mode=Z,e===b){c>>>=2,ut-=2;break t}break;case 2:n.mode=V;break;case 3:t.msg="invalid block type",n.mode=at}c>>>=2,ut-=2;break;case H:for(c>>>=7&ut,ut-=7&ut;32>ut;){if(0===l)break t;l--,c+=r[a++]<<ut,ut+=8}if((65535&c)!=(c>>>16^65535)){t.msg="invalid stored block lengths",n.mode=at;break}if(n.length=65535&c,c=0,ut=0,n.mode=G,e===b)break t;case G:n.mode=q;case q:if(dt=n.length){if(dt>l&&(dt=l),dt>h&&(dt=h),0===dt)break t;d.arraySet(s,r,a,dt,o),l-=dt,a+=dt,h-=dt,o+=dt,n.length-=dt;break}n.mode=$;break;case V:for(;14>ut;){if(0===l)break t;l--,c+=r[a++]<<ut,ut+=8}if(n.nlen=257+(31&c),c>>>=5,ut-=5,n.ndist=1+(31&c),c>>>=5,ut-=5,n.ncode=4+(15&c),c>>>=4,ut-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=at;break}n.have=0,n.mode=W;case W:for(;n.have<n.ncode;){for(;3>ut;){if(0===l)break t;l--,c+=r[a++]<<ut,ut+=8}n.lens[Mt[n.have++]]=7&c,c>>>=3,ut-=3}for(;n.have<19;)n.lens[Mt[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,St={bits:n.lenbits},bt=m(y,n.lens,0,19,n.lencode,0,n.work,St),n.lenbits=St.bits,bt){t.msg="invalid code lengths set",n.mode=at;break}n.have=0,n.mode=Y;case Y:for(;n.have<n.nlen+n.ndist;){for(;mt=(Et=n.lencode[c&(1<<n.lenbits)-1])>>>16&255,yt=65535&Et,!(ut>=(gt=Et>>>24));){if(0===l)break t;l--,c+=r[a++]<<ut,ut+=8}if(16>yt)c>>>=gt,ut-=gt,n.lens[n.have++]=yt;else{if(16===yt){for(Ct=gt+2;Ct>ut;){if(0===l)break t;l--,c+=r[a++]<<ut,ut+=8}if(c>>>=gt,ut-=gt,0===n.have){t.msg="invalid bit length repeat",n.mode=at;break}wt=n.lens[n.have-1],dt=3+(3&c),c>>>=2,ut-=2}else if(17===yt){for(Ct=gt+3;Ct>ut;){if(0===l)break t;l--,c+=r[a++]<<ut,ut+=8}ut-=gt,wt=0,dt=3+(7&(c>>>=gt)),c>>>=3,ut-=3}else{for(Ct=gt+7;Ct>ut;){if(0===l)break t;l--,c+=r[a++]<<ut,ut+=8}ut-=gt,wt=0,dt=11+(127&(c>>>=gt)),c>>>=7,ut-=7}if(n.have+dt>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=at;break}for(;dt--;)n.lens[n.have++]=wt}}if(n.mode===at)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=at;break}if(n.lenbits=9,St={bits:n.lenbits},bt=m(v,n.lens,0,n.nlen,n.lencode,0,n.work,St),n.lenbits=St.bits,bt){t.msg="invalid literal/lengths set",n.mode=at;break}if(n.distbits=6,n.distcode=n.distdyn,St={bits:n.distbits},bt=m(_,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,St),n.distbits=St.bits,bt){t.msg="invalid distances set",n.mode=at;break}if(n.mode=Z,e===b)break t;case Z:n.mode=K;case K:if(l>=6&&h>=258){t.next_out=o,t.avail_out=h,t.next_in=a,t.avail_in=l,n.hold=c,n.bits=ut,g(t,ct),o=t.next_out,s=t.output,h=t.avail_out,a=t.next_in,r=t.input,l=t.avail_in,c=n.hold,ut=n.bits,n.mode===$&&(n.back=-1);break}for(n.back=0;mt=(Et=n.lencode[c&(1<<n.lenbits)-1])>>>16&255,yt=65535&Et,!(ut>=(gt=Et>>>24));){if(0===l)break t;l--,c+=r[a++]<<ut,ut+=8}if(mt&&0==(240&mt)){for(vt=gt,_t=mt,xt=yt;mt=(Et=n.lencode[xt+((c&(1<<vt+_t)-1)>>vt)])>>>16&255,yt=65535&Et,!(ut>=vt+(gt=Et>>>24));){if(0===l)break t;l--,c+=r[a++]<<ut,ut+=8}c>>>=vt,ut-=vt,n.back+=vt}if(c>>>=gt,ut-=gt,n.back+=gt,n.length=yt,0===mt){n.mode=nt;break}if(32&mt){n.back=-1,n.mode=$;break}if(64&mt){t.msg="invalid literal/length code",n.mode=at;break}n.extra=15&mt,n.mode=Q;case Q:if(n.extra){for(Ct=n.extra;Ct>ut;){if(0===l)break t;l--,c+=r[a++]<<ut,ut+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,ut-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=J;case J:for(;mt=(Et=n.distcode[c&(1<<n.distbits)-1])>>>16&255,yt=65535&Et,!(ut>=(gt=Et>>>24));){if(0===l)break t;l--,c+=r[a++]<<ut,ut+=8}if(0==(240&mt)){for(vt=gt,_t=mt,xt=yt;mt=(Et=n.distcode[xt+((c&(1<<vt+_t)-1)>>vt)])>>>16&255,yt=65535&Et,!(ut>=vt+(gt=Et>>>24));){if(0===l)break t;l--,c+=r[a++]<<ut,ut+=8}c>>>=vt,ut-=vt,n.back+=vt}if(c>>>=gt,ut-=gt,n.back+=gt,64&mt){t.msg="invalid distance code",n.mode=at;break}n.offset=yt,n.extra=15&mt,n.mode=tt;case tt:if(n.extra){for(Ct=n.extra;Ct>ut;){if(0===l)break t;l--,c+=r[a++]<<ut,ut+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,ut-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=at;break}n.mode=et;case et:if(0===h)break t;if(dt=ct-h,n.offset>dt){if((dt=n.offset-dt)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=at;break}dt>n.wnext?(dt-=n.wnext,ft=n.wsize-dt):ft=n.wnext-dt,dt>n.length&&(dt=n.length),pt=n.window}else pt=s,ft=o-n.offset,dt=n.length;dt>h&&(dt=h),h-=dt,n.length-=dt;do{s[o++]=pt[ft++]}while(--dt);0===n.length&&(n.mode=K);break;case nt:if(0===h)break t;s[o++]=n.length,h--,n.mode=K;break;case it:if(n.wrap){for(;32>ut;){if(0===l)break t;l--,c|=r[a++]<<ut,ut+=8}if(ct-=h,t.total_out+=ct,n.total+=ct,ct&&(t.adler=n.check=n.flags?p(n.check,s,ct,o-ct):f(n.check,s,ct,o-ct)),ct=h,(n.flags?c:i(c))!==n.check){t.msg="incorrect data check",n.mode=at;break}c=0,ut=0}n.mode=rt;case rt:if(n.wrap&&n.flags){for(;32>ut;){if(0===l)break t;l--,c+=r[a++]<<ut,ut+=8}if(c!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=at;break}c=0,ut=0}n.mode=st;case st:bt=C;break t;case at:bt=M;break t;case ot:return k;case lt:default:return T}return t.next_out=o,t.avail_out=h,t.next_in=a,t.avail_in=l,n.hold=c,n.bits=ut,(n.wsize||ct!==t.avail_out&&n.mode<at&&(n.mode<it||e!==x))&&function(t,e,n,i){var r,s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new d.Buf8(s.wsize)),i>=s.wsize?(d.arraySet(s.window,e,n-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):((r=s.wsize-s.wnext)>i&&(r=i),d.arraySet(s.window,e,n-i,r,s.wnext),(i-=r)?(d.arraySet(s.window,e,n-i,i,0),s.wnext=i,s.whave=s.wsize):(s.wnext+=r,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=r))),0}(t,t.output,t.next_out,ct-t.avail_out)?(n.mode=ot,k):(ht-=t.avail_in,ct-=t.avail_out,t.total_in+=ht,t.total_out+=ct,n.total+=ct,n.wrap&&ct&&(t.adler=n.check=n.flags?p(n.check,s,ct,t.next_out-ct):f(n.check,s,ct,t.next_out-ct)),t.data_type=n.bits+(n.last?64:0)+(n.mode===$?128:0)+(n.mode===Z||n.mode===G?256:0),(0===ht&&0===ct||e===x)&&bt===S&&(bt=O),bt)},n.inflateEnd=function(t){if(!t||!t.state)return T;var e=t.state;return e.window&&(e.window=null),t.state=null,S},n.inflateGetHeader=function(t,e){var n;return t&&t.state?0==(2&(n=t.state).wrap)?T:(n.head=e,e.done=!1,S):T},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":27,"./adler32":29,"./crc32":31,"./inffast":34,"./inftrees":36}],36:[function(t,e){"use strict";var n=t("../utils/common"),i=15,r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],o=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,l,u,h,c,d,f){var p,g,m,y,v,_,x,w,b,S=f.bits,C=0,E=0,T=0,M=0,k=0,O=0,A=0,P=0,I=0,D=0,L=null,N=0,R=new n.Buf16(16),z=new n.Buf16(16),U=null,j=0;for(C=0;i>=C;C++)R[C]=0;for(E=0;u>E;E++)R[e[l+E]]++;for(k=S,M=i;M>=1&&0===R[M];M--);if(k>M&&(k=M),0===M)return h[c++]=20971520,h[c++]=20971520,f.bits=1,0;for(T=1;M>T&&0===R[T];T++);for(T>k&&(k=T),P=1,C=1;i>=C;C++)if(P<<=1,0>(P-=R[C]))return-1;if(P>0&&(0===t||1!==M))return-1;for(z[1]=0,C=1;i>C;C++)z[C+1]=z[C]+R[C];for(E=0;u>E;E++)0!==e[l+E]&&(d[z[e[l+E]]++]=E);if(0===t?(L=U=d,_=19):1===t?(L=r,N-=257,U=s,j-=257,_=256):(L=a,U=o,_=-1),D=0,E=0,C=T,v=c,O=k,A=0,m=-1,y=(I=1<<k)-1,1===t&&I>852||2===t&&I>592)return 1;for(;;){x=C-A,d[E]<_?(w=0,b=d[E]):d[E]>_?(w=U[j+d[E]],b=L[N+d[E]]):(w=96,b=0),p=1<<C-A,T=g=1<<O;do{h[v+(D>>A)+(g-=p)]=x<<24|w<<16|b|0}while(0!==g);for(p=1<<C-1;D&p;)p>>=1;if(0!==p?(D&=p-1,D+=p):D=0,E++,0==--R[C]){if(C===M)break;C=e[l+d[E]]}if(C>k&&(D&y)!==m){for(0===A&&(A=k),v+=T,P=1<<(O=C-A);M>O+A&&!(0>=(P-=R[O+A]));)O++,P<<=1;if(I+=1<<O,1===t&&I>852||2===t&&I>592)return 1;h[m=D&y]=k<<24|O<<16|v-c|0}}return 0!==D&&(h[v+D]=C-A<<24|64<<16|0),f.bits=k,0}},{"../utils/common":27}],37:[function(t,e){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],38:[function(t,e,n){"use strict";function i(t){for(var e=t.length;--e>=0;)t[e]=0}function r(t){return 256>t?q[t]:q[256+(t>>>7)]}function s(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function a(t,e,n){t.bi_valid>L-n?(t.bi_buf|=e<<t.bi_valid&65535,s(t,t.bi_buf),t.bi_buf=e>>L-t.bi_valid,t.bi_valid+=n-L):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function o(t,e,n){a(t,n[2*e],n[2*e+1])}function l(t,e){var n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1}function u(t,e,n){var i,r,s=new Array(D+1),a=0;for(i=1;D>=i;i++)s[i]=a=a+n[i-1]<<1;for(r=0;e>=r;r++){var o=t[2*r+1];0!==o&&(t[2*r]=l(s[o]++,o))}}function h(t){var e;for(e=0;O>e;e++)t.dyn_ltree[2*e]=0;for(e=0;A>e;e++)t.dyn_dtree[2*e]=0;for(e=0;P>e;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*R]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function c(t){t.bi_valid>8?s(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function d(t,e,n,i){var r=2*e,s=2*n;return t[r]<t[s]||t[r]===t[s]&&i[e]<=i[n]}function f(t,e,n){for(var i=t.heap[n],r=n<<1;r<=t.heap_len&&(r<t.heap_len&&d(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!d(e,i,t.heap[r],t.depth));)t.heap[n]=t.heap[r],n=r,r<<=1;t.heap[n]=i}function p(t,e,n){var i,s,l,u,h=0;if(0!==t.last_lit)do{i=t.pending_buf[t.d_buf+2*h]<<8|t.pending_buf[t.d_buf+2*h+1],s=t.pending_buf[t.l_buf+h],h++,0===i?o(t,s,e):(o(t,(l=V[s])+k+1,e),0!==(u=F[l])&&a(t,s-=W[l],u),o(t,l=r(--i),n),0!==(u=B[l])&&a(t,i-=Y[l],u))}while(h<t.last_lit);o(t,R,e)}function g(t,e){var n,i,r,s=e.dyn_tree,a=e.stat_desc.static_tree,o=e.stat_desc.has_stree,l=e.stat_desc.elems,h=-1;for(t.heap_len=0,t.heap_max=I,n=0;l>n;n++)0!==s[2*n]?(t.heap[++t.heap_len]=h=n,t.depth[n]=0):s[2*n+1]=0;for(;t.heap_len<2;)s[2*(r=t.heap[++t.heap_len]=2>h?++h:0)]=1,t.depth[r]=0,t.opt_len--,o&&(t.static_len-=a[2*r+1]);for(e.max_code=h,n=t.heap_len>>1;n>=1;n--)f(t,s,n);r=l;do{n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],f(t,s,1),i=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=i,s[2*r]=s[2*n]+s[2*i],t.depth[r]=(t.depth[n]>=t.depth[i]?t.depth[n]:t.depth[i])+1,s[2*n+1]=s[2*i+1]=r,t.heap[1]=r++,f(t,s,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var n,i,r,s,a,o,l=e.dyn_tree,u=e.max_code,h=e.stat_desc.static_tree,c=e.stat_desc.has_stree,d=e.stat_desc.extra_bits,f=e.stat_desc.extra_base,p=e.stat_desc.max_length,g=0;for(s=0;D>=s;s++)t.bl_count[s]=0;for(l[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;I>n;n++)(s=l[2*l[2*(i=t.heap[n])+1]+1]+1)>p&&(s=p,g++),l[2*i+1]=s,i>u||(t.bl_count[s]++,a=0,i>=f&&(a=d[i-f]),o=l[2*i],t.opt_len+=o*(s+a),c&&(t.static_len+=o*(h[2*i+1]+a)));if(0!==g){do{for(s=p-1;0===t.bl_count[s];)s--;t.bl_count[s]--,t.bl_count[s+1]+=2,t.bl_count[p]--,g-=2}while(g>0);for(s=p;0!==s;s--)for(i=t.bl_count[s];0!==i;)(r=t.heap[--n])>u||(l[2*r+1]!==s&&(t.opt_len+=(s-l[2*r+1])*l[2*r],l[2*r+1]=s),i--)}}(t,e),u(s,h,t.bl_count)}function m(t,e,n){var i,r,s=-1,a=e[1],o=0,l=7,u=4;for(0===a&&(l=138,u=3),e[2*(n+1)+1]=65535,i=0;n>=i;i++)r=a,a=e[2*(i+1)+1],++o<l&&r===a||(u>o?t.bl_tree[2*r]+=o:0!==r?(r!==s&&t.bl_tree[2*r]++,t.bl_tree[2*z]++):10>=o?t.bl_tree[2*U]++:t.bl_tree[2*j]++,o=0,s=r,0===a?(l=138,u=3):r===a?(l=6,u=3):(l=7,u=4))}function y(t,e,n){var i,r,s=-1,l=e[1],u=0,h=7,c=4;for(0===l&&(h=138,c=3),i=0;n>=i;i++)if(r=l,l=e[2*(i+1)+1],!(++u<h&&r===l)){if(c>u)do{o(t,r,t.bl_tree)}while(0!=--u);else 0!==r?(r!==s&&(o(t,r,t.bl_tree),u--),o(t,z,t.bl_tree),a(t,u-3,2)):10>=u?(o(t,U,t.bl_tree),a(t,u-3,3)):(o(t,j,t.bl_tree),a(t,u-11,7));u=0,s=r,0===l?(h=138,c=3):r===l?(h=6,c=3):(h=7,c=4)}}function v(t,e,n,i){a(t,(C<<1)+(i?1:0),3),function(t,e,n,i){c(t),i&&(s(t,n),s(t,~n)),_.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}(t,e,n,!0)}var _=t("../utils/common"),x=4,w=0,b=1,S=2,C=0,E=1,T=2,M=29,k=256,O=k+1+M,A=30,P=19,I=2*O+1,D=15,L=16,N=7,R=256,z=16,U=17,j=18,F=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],B=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],$=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],X=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],H=new Array(2*(O+2));i(H);var G=new Array(2*A);i(G);var q=new Array(512);i(q);var V=new Array(256);i(V);var W=new Array(M);i(W);var Y=new Array(A);i(Y);var Z,K,Q,J=function(t,e,n,i,r){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=t&&t.length},tt=function(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e},et=!1;n._tr_init=function(t){et||(function(){var t,e,n,i,r,s=new Array(D+1);for(n=0,i=0;M-1>i;i++)for(W[i]=n,t=0;t<1<<F[i];t++)V[n++]=i;for(V[n-1]=i,r=0,i=0;16>i;i++)for(Y[i]=r,t=0;t<1<<B[i];t++)q[r++]=i;for(r>>=7;A>i;i++)for(Y[i]=r<<7,t=0;t<1<<B[i]-7;t++)q[256+r++]=i;for(e=0;D>=e;e++)s[e]=0;for(t=0;143>=t;)H[2*t+1]=8,t++,s[8]++;for(;255>=t;)H[2*t+1]=9,t++,s[9]++;for(;279>=t;)H[2*t+1]=7,t++,s[7]++;for(;287>=t;)H[2*t+1]=8,t++,s[8]++;for(u(H,O+1,s),t=0;A>t;t++)G[2*t+1]=5,G[2*t]=l(t,5);Z=new J(H,F,k+1,O,D),K=new J(G,B,0,A,D),Q=new J(new Array(0),$,0,P,N)}(),et=!0),t.l_desc=new tt(t.dyn_ltree,Z),t.d_desc=new tt(t.dyn_dtree,K),t.bl_desc=new tt(t.bl_tree,Q),t.bi_buf=0,t.bi_valid=0,h(t)},n._tr_stored_block=v,n._tr_flush_block=function(t,e,n,i){var r,s,o=0;t.level>0?(t.strm.data_type===S&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;31>=e;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return w;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return b;for(e=32;k>e;e++)if(0!==t.dyn_ltree[2*e])return b;return w}(t)),g(t,t.l_desc),g(t,t.d_desc),o=function(t){var e;for(m(t,t.dyn_ltree,t.l_desc.max_code),m(t,t.dyn_dtree,t.d_desc.max_code),g(t,t.bl_desc),e=P-1;e>=3&&0===t.bl_tree[2*X[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),(r=t.opt_len+3+7>>>3)>=(s=t.static_len+3+7>>>3)&&(r=s)):r=s=n+5,r>=n+4&&-1!==e?v(t,e,n,i):t.strategy===x||s===r?(a(t,(E<<1)+(i?1:0),3),p(t,H,G)):(a(t,(T<<1)+(i?1:0),3),function(t,e,n,i){var r;for(a(t,e-257,5),a(t,n-1,5),a(t,i-4,4),r=0;i>r;r++)a(t,t.bl_tree[2*X[r]+1],3);y(t,t.dyn_ltree,e-1),y(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),p(t,t.dyn_ltree,t.dyn_dtree)),h(t),i&&c(t)},n._tr_tally=function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(V[n]+k+1)]++,t.dyn_dtree[2*r(e)]++),t.last_lit===t.lit_bufsize-1},n._tr_align=function(t){a(t,E<<1,3),o(t,R,H),function(t){16===t.bi_valid?(s(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},{"../utils/common":27}],39:[function(t,e){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}]},{},[9])(9)}).call(this,n(55).Buffer)},function(t,e,n){},function(t,e){t.exports='<div class="input-group input-group-sm">\n      <span class="input-group-addon">${lang.fontFamily}</span>\n      <input data-field="fontFamily" type="text" class="form-control">\n</div>\n<div class="input-group input-group-sm">\n      <span class="input-group-addon">${lang.fontSubFamily}</span>\n      <input data-field="fontSubFamily" type="text" class="form-control">\n</div>\n<div class="input-group input-group-sm">\n      <span class="input-group-addon">${lang.fullName}</span>\n      <input data-field="fullName" type="text" class="form-control">\n</div>\n<div class="input-group input-group-sm">\n      <span class="input-group-addon">${lang.uniqueSubFamily}</span>\n      <input data-field="uniqueSubFamily" type="text" class="form-control">\n</div>\n<div class="input-group input-group-sm">\n      <span class="input-group-addon">${lang.version}</span>\n      <input data-field="version" type="text" class="form-control">\n</div>\n<div class="input-group input-group-sm">\n      <span class="input-group-addon">${lang.postScriptName}</span>\n      <input data-field="postScriptName" type="text" class="form-control">\n</div>\n<div class="input-group input-group-sm">\n      <span class="input-group-addon">${lang.unitsPerEm}</span>\n      <input data-field="unitsPerEm" type="number" min="64" max="16384" class="form-control" placeholder="1024~16384">\n</div>\n<div class="input-group input-group-sm">\n      <span class="input-group-addon">${lang.lowestRecPPEM}</span>\n      <input data-field="lowestRecPPEM" type="number" min="8" max="16384" class="form-control" placeholder="8~16384">\n</div>\n<div class="input-group input-group-sm">\n      <span class="input-group-addon">${lang.created}</span>\n      <input data-field="created" type="datetime-local" class="form-control">\n</div>\n<div class="input-group input-group-sm">\n      <span class="input-group-addon">${lang.modified}</span>\n      <input data-field="modified" type="datetime-local" class="form-control">\n</div>\n'},function(t,e){t.exports='<div class="form-inline">\n    <div class="input-group input-group-sm">\n        <span class="input-group-addon">${lang.left_side_bearing}</span>\n        <input data-field="leftSideBearing" type="number" min="-16384" max="16384" step="1" class="form-control">\n    </div>\n</div>\n<div class="form-inline">\n    <div class="input-group input-group-sm">\n        <span class="input-group-addon">${lang.right_side_bearing}</span>\n        <input data-field="rightSideBearing" type="number" min="-16384" max="16384" step="1" class="form-control">\n    </div>\n</div>\n<div class="form-inline">\n    <div class="input-group input-group-sm">\n        <span class="input-group-addon">${lang.baseline_offset}</span>\n        <input data-field="verticalAlign" type="number" min="-16384" max="16384" step="1" class="form-control">\n    </div>\n</div>\n'},function(t,e){t.exports='<div class="form-inline">\n  <div class="input-group input-group-sm">\n    <span class="input-group-addon">${lang.flip}</span>\n    <span class="form-control">\n      <input data-field="reverse" type="checkbox">\n    </span>\n  </div>\n</div>\n<div class="form-inline">\n  <div class="input-group input-group-sm">\n    <span class="input-group-addon">${lang.mirror}</span>\n    <span class="form-control">\n      <input data-field="mirror" type="checkbox">\n    </span>\n  </div>\n</div>\n<div class="form-inline">\n  <div class="input-group input-group-sm">\n    <span class="input-group-addon">${lang.scale}</span>\n    <input data-field="scale" type="number" min="0" max="1" step="0.1" class="form-control">\n  </div>\n</div>\n<div class="form-inline">\n  <div class="form-group">\n    <div class="input-group input-group-sm">\n      <span class="input-group-addon">${lang.dialog_scale_to_bound}</span>\n      <span class="form-control">\n        <input data-field="ajdustToEmBox" type="checkbox" onclick="$(\'#setting-ajdustToEmPadding\')[this.checked ? \'removeClass\' : \'addClass\'](\'hide\')">\n      </span>\n    </div>\n  </div>\n  <div id="setting-ajdustToEmPadding" class="form-group hide">\n    <div class="input-group input-group-sm">\n      <span class="input-group-addon">${lang.dialog_top_bottom_padding}</span>\n      <input data-field="ajdustToEmPadding" data-ceil="true" type="number" min="-16384" max="16384" step="1" class="form-control">\n    </div>\n  </div>\n</div>\n'},function(t,e){t.exports='<div class="form-inline column-3">\n  <div class="form-group">\n    <div class="input-group input-group-sm">\n      <span class="input-group-addon">${lang.ascent}</span>\n      <input data-field="ascent" type="number" class="form-control">\n    </div>\n  </div>\n  <div class="form-group">\n    <div class="input-group input-group-sm">\n      <span class="input-group-addon">${lang.descent}</span>\n      <input data-field="descent" type="number" class="form-control">\n    </div>\n  </div>\n  <div class="form-group">\n    <div class="input-group input-group-sm">\n      <span class="input-group-addon">${lang.linegap}</span>\n      <input data-field="lineGap" type="number" class="form-control">\n    </div>\n  </div>\n</div>\n\n\n<div class="form-inline column-3">\n  <div class="form-group">\n    <div class="input-group input-group-sm">\n      <span class="input-group-addon">${lang.usWinAscent}</span>\n      <input data-field="usWinAscent" type="number" class="form-control">\n    </div>\n  </div>\n  <div class="form-group">\n    <div class="input-group input-group-sm">\n      <span class="input-group-addon">${lang.usWinDescent}</span>\n      <input data-field="usWinDescent" type="number" class="form-control">\n    </div>\n  </div>\n  <a href="#" id="setting-calc-metrics" class="form-group">${lang.calc}</a>\n</div>\n<div class="form-inline">\n  <div class="form-group">\n    <div class="input-group input-group-sm">\n      <span class="input-group-addon">${lang.sTypoAscender}</span>\n      <input data-field="sTypoAscender" type="number" class="form-control">\n    </div>\n  </div>\n  <div class="form-group">\n    <div class="input-group input-group-sm">\n      <span class="input-group-addon">${lang.sTypoDescender}</span>\n      <input data-field="sTypoDescender" type="number" class="form-control">\n    </div>\n  </div>\n  <div class="form-group">\n    <div class="input-group input-group-sm">\n      <span class="input-group-addon">${lang.sTypoLineGap}</span>\n      <input data-field="sTypoLineGap" type="number" class="form-control">\n    </div>\n  </div>\n</div>\n\n\n\n<div class="form-inline column-3">\n  <div class="form-group">\n    <div class="input-group input-group-sm">\n      <span class="input-group-addon">${lang.sxHeight}</span>\n      <input data-field="sxHeight" type="number" class="form-control">\n    </div>\n  </div>\n  <div class="form-group">\n    <div class="input-group input-group-sm">\n      <span class="input-group-addon">${lang.sCapHeight}</span>\n      <input data-field="sCapHeight" type="number" class="form-control">\n    </div>\n  </div>\n  <div class="form-group">\n    <div class="input-group input-group-sm">\n      <span class="input-group-addon">${lang.yStrikeoutPosition}</span>\n      <input data-field="yStrikeoutPosition" type="number" class="form-control">\n    </div>\n  </div>\n  <div class="form-group">\n    <div class="input-group input-group-sm">\n      <span class="input-group-addon">${lang.yStrikeoutSize}</span>\n      <input data-field="yStrikeoutSize" type="number" class="form-control">\n    </div>\n  </div>\n  <div class="form-group">\n    <div class="input-group input-group-sm">\n      <span class="input-group-addon">${lang.underlinePosition}</span>\n      <input data-field="underlinePosition" type="number" class="form-control">\n    </div>\n  </div>\n  <div class="form-group">\n    <div class="input-group input-group-sm">\n      <span class="input-group-addon">${lang.underlineThickness}</span>\n      <input data-field="underlineThickness" type="number" class="form-control">\n    </div>\n  </div>\n</div>\n<hr>\n\n\n<div class="form-inline column-4">\n  <div class="form-group">\n    <div class="input-group input-group-sm">\n      <span class="input-group-addon">${lang.ySubscriptXSize}</span>\n      <input data-field="ySubscriptXSize" type="number" class="form-control">\n    </div>\n  </div>\n  <div class="form-group">\n    <div class="input-group input-group-sm">\n      <span class="input-group-addon">${lang.ySubscriptYSize}</span>\n      <input data-field="ySubscriptYSize" type="number" class="form-control">\n    </div>\n  </div>\n  <div class="form-group">\n    <div class="input-group input-group-sm">\n      <span class="input-group-addon">${lang.ySubscriptXOffset}</span>\n      <input data-field="ySubscriptXOffset" type="number" class="form-control">\n    </div>\n  </div>\n  <div class="form-group">\n    <div class="input-group input-group-sm">\n      <span class="input-group-addon">${lang.ySubscriptYOffset}</span>\n      <input data-field="ySubscriptYOffset" type="number" class="form-control">\n    </div>\n  </div>\n</div>\n\n\n<div class="form-inline column-4">\n  <div class="form-group">\n    <div class="input-group input-group-sm">\n      <span class="input-group-addon">${lang.ySuperscriptXSize}</span>\n      <input data-field="ySuperscriptXSize" type="number" class="form-control">\n    </div>\n  </div>\n  <div class="form-group">\n    <div class="input-group input-group-sm">\n      <span class="input-group-addon">${lang.ySuperscriptYSize}</span>\n      <input data-field="ySuperscriptYSize" type="number" class="form-control">\n    </div>\n  </div>\n  <div class="form-group">\n    <div class="input-group input-group-sm">\n      <span class="input-group-addon">${lang.ySuperscriptXOffset}</span>\n      <input data-field="ySuperscriptXOffset" type="number" class="form-control">\n    </div>\n  </div>\n  <div class="form-group">\n    <div class="input-group input-group-sm">\n      <span class="input-group-addon">${lang.ySuperscriptYOffset}</span>\n      <input data-field="ySuperscriptYOffset" type="number" class="form-control">\n    </div>\n  </div>\n</div>\n<hr>\n\n<div class="form-inline column-3">\n  <div class="form-group">\n    <div class="input-group input-group-sm">\n      <span class="input-group-addon">${lang.achVendID}</span>\n      <input data-field="achVendID" type="text" class="form-control">\n    </div>\n  </div>\n  <div class="form-group">\n    <div class="input-group input-group-sm">\n      <span class="input-group-addon">${lang.usWeightClass}</span>\n      <select id="setting-weight" data-field="usWeightClass" data-type="number" class="form-control">${weightOptions}</select>\n    </div>\n  </div>\n  <div class="form-group">\n    <div class="input-group input-group-sm">\n      <span class="input-group-addon">${lang.usWidthClass}</span>\n      <select id="setting-width" data-field="usWidthClass" data-type="number" class="form-control">${widthOptions}</select>\n    </div>\n  </div>\n</div>\n\n<label for="panose-bFamilyType">panose</label>\n<div class="form-inline  column-3 panose-inline">${panoseOptions}</div>\n'},function(t,e){t.exports='<div class="form-inline">\n  <div class="input-group input-group-sm">\n    <span class="input-group-addon">unicode</span>\n    <input data-field="unicode" data-type="unicode" id="setting-glyf-unicode" class="form-control">\n  </div>\n  <span>${lang.dialog_glyf_unicode_example}</span>\n</div>\n<div class="form-inline">\n  <div class="input-group input-group-sm">\n    <span class="input-group-addon">${lang.glyph_name}</span>\n    <input data-field="name" id="setting-glyf-name" class="form-control">\n  </div>\n</div>\n<div class="form-inline">\n  <div class="input-group input-group-sm">\n    <span class="input-group-addon">${lang.left_side_bearing}</span>\n    <input data-field="leftSideBearing" type="number" min="-16384" max="16384" step="1" class="form-control">\n  </div>\n</div>\n<div class="form-inline">\n  <div class="input-group input-group-sm">\n    <span class="input-group-addon">${lang.right_side_bearing}</span>\n    <input data-field="rightSideBearing" type="number" min="-16384" max="16384" step="1" class="form-control">\n  </div>\n</div>\n'},function(t,e){t.exports='<div class="form-inline column-3">\n  <div class="form-group">\n    <div class="input-group input-group-sm">\n      <span class="input-group-addon">${lang.dialog_editor_viewercolor}</span>\n      <input data-field="viewer.color" type="text" class="form-control">\n    </div>\n  </div>\n  <div class="form-group">\n    <div class="input-group input-group-sm">\n      <span class="input-group-addon">${lang.dialog_editor_fontsize}</span>\n      <select data-field="viewer.shapeSize" class="form-control">\n        <option value="xlarge">${lang.dialog_editor_fontsize_xlarge}</option>\n        <option value="large">${lang.dialog_editor_fontsize_large}</option>\n        <option value="normal">${lang.dialog_editor_fontsize_normal}</option>\n        <option value="small">${lang.dialog_editor_fontsize_small}</option>\n      </select>\n    </div>\n  </div>\n  <div class="form-group">\n    <div class="input-group input-group-sm">\n      <span class="input-group-addon">${lang.dialog_editor_pageSize}</span>\n      <input data-field="viewer.pageSize" type="number" class="form-control">\n    </div>\n  </div>\n</div>\n<hr>\n<div class="form-inline column-3">\n  <div class="form-group">\n    <div class="input-group input-group-sm">\n      <span class="input-group-addon">${lang.dialog_editor_gridsorption}</span>\n      <span class="form-control">\n        <input data-field="editor.sorption.enableGrid" type="checkbox">\n      </span>\n    </div>\n  </div>\n  <div class="form-group">\n    <div class="input-group input-group-sm">\n      <span class="input-group-addon">${lang.dialog_editor_shapesorption}</span>\n      <span class="form-control">\n        <input data-field="editor.sorption.enableShape" type="checkbox">\n      </span>\n    </div>\n  </div>\n</div>\n<div class="form-inline">\n  <div class="input-group input-group-sm">\n    <span class="input-group-addon">${lang.dialog_editor_showgrid}</span>\n    <span class="form-control"><input data-field="editor.axis.showGrid" type="checkbox"></span>\n  </div>\n</div>\n<div class="form-inline column-3">\n  <div class="form-group">\n    <div class="input-group input-group-sm">\n      <span class="input-group-addon">${lang.dialog_editor_fillcontour}</span>\n      <span class="form-control"><input data-field="editor.fontLayer.fill" type="checkbox"></span>\n    </div>\n  </div>\n  <div class="form-group">\n    <div class="input-group input-group-sm">\n      <span class="input-group-addon">${lang.dialog_editor_contourstrokecolor}</span>\n      <input data-field="editor.fontLayer.strokeColor" type="text" class="form-control">\n    </div>\n  </div>\n  <div class="form-group">\n    <div class="input-group input-group-sm">\n      <span class="input-group-addon">${lang.dialog_editor_contourfillcolor}</span>\n      <input data-field="editor.fontLayer.fillColor" type="text" class="form-control">\n    </div>\n  </div>\n</div>\n<div class="form-inline column-3">\n  <div class="form-group">\n    <div class="input-group input-group-sm">\n      <span class="input-group-addon">${lang.dialog_editor_gapcolor}</span>\n      <input data-field="editor.axis.gapColor" type="text" class="form-control">\n    </div>\n  </div>\n  <div class="form-group">\n    <div class="input-group input-group-sm">\n      <span class="input-group-addon">${lang.dialog_editor_gap}</span>\n      <input data-field="editor.axis.graduation.gap" type="number" class="form-control">\n    </div>\n  </div>\n</div>\n<div class="form-inline column-3">\n  <div class="form-group">\n    <div class="input-group input-group-sm">\n      <span class="input-group-addon">${lang.dialog_editor_metricscolor}</span>\n      <input data-field="editor.axis.metricsColor" type="text" class="form-control">\n    </div>\n  </div>\n</div>\n<div class="form-inline column-3">\n  <div class="input-group input-group-sm">\n    <span class="input-group-addon">${lang.dialog_savesetting}</span>\n    <span class="form-control"><input data-field="saveSetting" type="checkbox"></span>\n    </div>\n    <a href="#" id="setting-editor-default">${lang.dialog_resetsetting}</a>\n</div>'},function(t,e){t.exports='<div id="import-pic-dialog">\n    <div class="form-group">\n        <div class="input-group btn-right">\n            <div class="import-pic-url">\n                <div class="input-group input-group-sm">\n                    <span class="input-group-addon">${lang.dialog_picurl}</span>\n                    <input id="import-pic-url-text" value="" class="form-control">\n                </div>\n            </div>\n            <button type="button" data-action="import-url" class="btn btn-flat btn-new btn-sm" title="${lang.dialog_picurl_load_title}">${lang.dialog_picurl_load}</button>&nbsp;\n            <button type="button" data-action="fitwindow" class="btn btn-flat btn-new btn-sm">${lang.dialog_adjustwindow}</button>&nbsp;\n            <button type="button" data-action="fitwindow-left" class="btn btn-flat btn-new btn-sm">${lang.dialog_showorigin}</button>&nbsp;\n            <button type="button" data-action="fitwindow-right" class="btn btn-flat btn-new btn-sm">${lang.dialog_showcontour}</button>\n        </div>\n        <button data-action="openfile" type="button" class="btn btn-flat btn-new btn-sm">${lang.dialog_choosepic}</button>\n        <span>${lang.dialog_choosepic_tip}</span>\n        <form id="import-pic-form" style="width:0px;height:0px;overflow:hidden;"><input id="import-pic-file" type="file"></form>\n    </div>\n    <div class="preview-panel"><div class="canvas-left"><canvas id="import-pic-canvas-origin"></canvas></div><div class="canvas-right"><canvas id="import-pic-canvas-fit"></canvas></div></div>\n    <div class="form-inline">\n        <button type="button" data-filter="restore" class="btn btn-flat btn-sm btn-right">${lang.resume}</button>\n        <span class="form-title">${lang.dialog_preprocess}: </span>\n        <div class="form-group">\n            <div class="input-group input-group-sm">\n                <span class="input-group-addon">${lang.dialog_reverse}</span>\n                <span class="form-control"><input data-filter="reverse" type="checkbox"></span>\n            </div>\n        </div>\n        <div class="form-group">\n            <div class="input-group input-group-sm">\n                <span class="input-group-addon">${lang.dialog_gaussblur}</span>\n                <span class="form-control"><input data-filter="gaussBlur" type="range" min="0" max="20" value="0"\n                step="1"></span>\n            </div>\n        </div>\n        <div class="form-group">\n            <div class="input-group input-group-sm">\n                <span class="input-group-addon">${lang.dialog_contrast}</span>\n                <span class="form-control"><input data-filter="contrast" type="range" min="-50" max="50" value="0" step="1"></span>\n            </div>\n        </div>\n    </div>\n    <div class="form-inline">\n        <button type="button" data-filter="restore-binarize" class="btn btn-flat btn-sm btn-right">${lang.resume}</button>\n        <span class="form-title">${lang.dialog_contour}: </span>\n        <div class="form-group">\n            <div class="input-group input-group-sm">\n                <span class="input-group-addon">${lang.dialog_binarize_threshold}</span>\n                <span class="form-control"><input data-filter="threshold" type="range" min="0" max="255" value="200" step="1"></span>\n            </div>\n            <div class="input-group input-group-sm">\n                <select id="import-pic-threshold-pre" class="form-control">\n                    <option value="">${lang.dialog_threshold_default}</option>\n                    <option value="mean">${lang.dialog_threshold_mean}</option>\n                    <option value="minimum">${lang.dialog_threshold_minimum}</option>\n                    <option value="intermodes">${lang.dialog_threshold_intermodes}</option>\n                    <option value="ostu">${lang.dialog_threshold_ostu}</option>\n                    <option value="isoData">${lang.dialog_threshold_isodata}</option>\n                </select>\n            </div>\n        </div>\n        <div class="form-group">\n            <div class="input-group input-group-sm">\n                <span class="input-group-addon">${lang.dialog_pic_smooth}</span>\n                <span class="form-control"><input data-filter="smooth" type="checkbox" checked="checked"></span>\n            </div>\n        </div>\n        <div class="form-group">\n            <span class="input-group">\n                <button type="button" data-filter="open" class="btn btn-sm btn-flat btn-new">${lang.dialog_pic_open}</button>&nbsp;\n                <button type="button" data-filter="close" class="btn btn-sm btn-flat btn-new">${lang.dialog_pic_close}</button>&nbsp;\n                <button type="button" data-filter="dilate" class="btn btn-sm btn-flat btn-new">${lang.dialog_pic_dilate}</button>&nbsp;\n                <button type="button" data-filter="erode" class="btn btn-sm btn-flat btn-new">${lang.dialog_pic_enrode}</button>\n            </span>\n        </div>\n    </div>\n</div>\n'},function(t,e){t.exports='\n<div class="form-group">\n  <button id="setting-sync-cancel" type="button" class="btn btn-flat btn-sm btn-right">${lang.cancelsync}</button>\n  <div class="input-group input-group-sm">\n    <span class="input-group-addon">${lang.remoteurl}</span>\n    <input data-field="url" type="text" class="form-control">\n  </div>\n</div>\n\n<div class="form-group">\n  <span class="btn-right" style="width: 70px;line-height: 30px">\n    <a href="./doc/index.html#font-sync" target="_blank">帮助</a>\n  </span>\n  <div class="input-group input-group-sm">\n    <span class="input-group-addon">${lang.pushurl}</span>\n    <input data-field="pushUrl" type="text" class="form-control">\n  </div>\n</div>\n\n<div class="form-inline column-2">\n\n  <div class="form-group">\n    <div class="input-group input-group-sm">\n      <span class="input-group-addon">${lang.fontname}</span>\n      <input data-field="name" type="text" class="form-control">\n    </div>\n  </div>\n  <div class="form-group">\n    <div class="input-group input-group-sm">\n      <span class="input-group-addon">${lang.autosync}</span>\n      <span class="form-control">\n        <input data-field="autoSync" type="checkbox" checked="checked">\n      </span>\n    </div>\n  </div>\n</div>\n<div class="form-inline">\n  <span>${lang.fonttype}： </span>\n\n  <div class="form-group">\n    <div class="input-group input-group-sm">\n      <span class="input-group-addon">woff</span>\n      <span class="form-control">\n        <input data-field="woff" type="checkbox" checked="checked">\n      </span>\n    </div>\n  </div>\n\n  <div class="form-group">\n    <div class="input-group input-group-sm">\n      <span class="input-group-addon">ttf</span>\n      <span class="form-control">\n        <input data-field="ttf" type="checkbox" checked="checked">\n      </span>\n    </div>\n  </div>\n\n  <div class="form-group">\n    <div class="input-group input-group-sm">\n      <span class="input-group-addon">svg</span>\n      <span class="form-control">\n        <input data-field="svg" type="checkbox">\n      </span>\n    </div>\n  </div>\n\n  <div class="form-group">\n    <div class="input-group input-group-sm">\n      <span class="input-group-addon">eot</span>\n      <span class="form-control">\n        <input data-field="eot" type="checkbox">\n      </span>\n    </div>\n  </div>\n</div>\n'},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";e.byteLength=function(t){var e=u(t),n=e[0],i=e[1];return 3*(n+i)/4-i},e.toByteArray=function(t){var e,n,i=u(t),a=i[0],o=i[1],l=new s(function(t,e,n){return 3*(e+n)/4-n}(0,a,o)),h=0,c=o>0?a-4:a;for(n=0;n<c;n+=4)e=r[t.charCodeAt(n)]<<18|r[t.charCodeAt(n+1)]<<12|r[t.charCodeAt(n+2)]<<6|r[t.charCodeAt(n+3)],l[h++]=e>>16&255,l[h++]=e>>8&255,l[h++]=255&e;2===o&&(e=r[t.charCodeAt(n)]<<2|r[t.charCodeAt(n+1)]>>4,l[h++]=255&e);1===o&&(e=r[t.charCodeAt(n)]<<10|r[t.charCodeAt(n+1)]<<4|r[t.charCodeAt(n+2)]>>2,l[h++]=e>>8&255,l[h++]=255&e);return l},e.fromByteArray=function(t){for(var e,n=t.length,r=n%3,s=[],a=0,o=n-r;a<o;a+=16383)s.push(h(t,a,a+16383>o?o:a+16383));1===r?(e=t[n-1],s.push(i[e>>2]+i[e<<4&63]+"==")):2===r&&(e=(t[n-2]<<8)+t[n-1],s.push(i[e>>10]+i[e>>4&63]+i[e<<2&63]+"="));return s.join("")};for(var i=[],r=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,l=a.length;o<l;++o)i[o]=a[o],r[a.charCodeAt(o)]=o;function u(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function h(t,e,n){for(var r,s,a=[],o=e;o<n;o+=3)r=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),a.push(i[(s=r)>>18&63]+i[s>>12&63]+i[s>>6&63]+i[63&s]);return a.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},function(t,e){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
e.read=function(t,e,n,i,r){var s,a,o=8*r-i-1,l=(1<<o)-1,u=l>>1,h=-7,c=n?r-1:0,d=n?-1:1,f=t[e+c];for(c+=d,s=f&(1<<-h)-1,f>>=-h,h+=o;h>0;s=256*s+t[e+c],c+=d,h-=8);for(a=s&(1<<-h)-1,s>>=-h,h+=i;h>0;a=256*a+t[e+c],c+=d,h-=8);if(0===s)s=1-u;else{if(s===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,i),s-=u}return(f?-1:1)*a*Math.pow(2,s-i)},e.write=function(t,e,n,i,r,s){var a,o,l,u=8*s-r-1,h=(1<<u)-1,c=h>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:s-1,p=i?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=h):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+c>=1?d/l:d*Math.pow(2,1-c))*l>=2&&(a++,l/=2),a+c>=h?(o=0,a=h):a+c>=1?(o=(e*l-1)*Math.pow(2,r),a+=c):(o=e*Math.pow(2,c-1)*Math.pow(2,r),a=0));r>=8;t[n+f]=255&o,f+=p,o/=256,r-=8);for(a=a<<r|o,u+=r;u>0;t[n+f]=255&a,f+=p,a/=256,u-=8);t[n+f-p]|=128*g}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e){t.exports='<div class="glyf-download-dialog">\n    <div class="form-inline">\n        <span class="form-title">${lang.dialog_glyf_name}: <em id="glyf-download-name"></em></span>\n        <div class="form-group field-margin">\n            <div class="input-group input-group-sm">\n                <span class="input-group-addon">${lang.dialog_color}</span>\n                <input id="glyf-download-color" type="text" value="#666" class="form-control">\n            </div>\n        </div>\n\n        <div class="form-group field-margin">\n            <div class="input-group input-group-sm">\n                <span class="input-group-addon">${lang.dialog_size}</span>\n                <input id="glyf-download-size" type="number" value="128" min="10" max="10000" step="1" class="form-control"><span class="input-group-addon">px</span>\n            </div>\n        </div>\n    </div>\n    <div id="glyf-download-preview" class="preview-panel">\n\n    </div>\n    <div class="form-inline glyf-download-btn">\n        <div class="input-group input-group-sm">\n            <a id="glyf-download-svg" class="btn btn-flat btn-new">${lang.dialog_download_svg}</a>\n            <a id="glyf-download-png" class="btn btn-flat field-margin">${lang.dialog_download_png}</a>\n        </div>\n    </div>\n</div>\n'},function(t,e,n){var i=n(87);e.DOMImplementation=i.DOMImplementation,e.XMLSerializer=i.XMLSerializer,e.DOMParser=n(112).DOMParser},function(t,e,n){var i=n(61),r=n(87),s=n(113),a=n(114),o=r.DOMImplementation,l=i.NAMESPACE,u=a.ParseError,h=a.XMLReader;function c(t){return t.replace(/\r[\n\u0085]/g,"\n").replace(/[\r\u0085\u2028]/g,"\n")}function d(t){this.options=t||{locator:{}}}function f(){this.cdata=!1}function p(t,e){e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber}function g(t){if(t)return"\n@"+(t.systemId||"")+"#[line:"+t.lineNumber+",col:"+t.columnNumber+"]"}function m(t,e,n){return"string"==typeof t?t.substr(e,n):t.length>=e+n||e?new java.lang.String(t,e,n)+"":t}function y(t,e){t.currentElement?t.currentElement.appendChild(e):t.doc.appendChild(e)}d.prototype.parseFromString=function(t,e){var n=this.options,i=new h,r=n.domBuilder||new f,a=n.errorHandler,o=n.locator,u=n.xmlns||{},d=/\/x?html?$/.test(e),p=d?s.HTML_ENTITIES:s.XML_ENTITIES;o&&r.setDocumentLocator(o),i.errorHandler=function(t,e,n){if(!t){if(e instanceof f)return e;t=e}var i={},r=t instanceof Function;function s(e){var s=t[e];!s&&r&&(s=2==t.length?function(n){t(e,n)}:t),i[e]=s&&function(t){s("[xmldom "+e+"]\t"+t+g(n))}||function(){}}return n=n||{},s("warning"),s("error"),s("fatalError"),i}(a,r,o),i.domBuilder=n.domBuilder||r,d&&(u[""]=l.HTML),u.xml=u.xml||l.XML;var m=n.normalizeLineEndings||c;return t&&"string"==typeof t?i.parse(m(t),u,p):i.errorHandler.error("invalid doc source"),r.doc},f.prototype={startDocument:function(){this.doc=(new o).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(t,e,n,i){var r=this.doc,s=r.createElementNS(t,n||e),a=i.length;y(this,s),this.currentElement=s,this.locator&&p(this.locator,s);for(var o=0;o<a;o++){t=i.getURI(o);var l=i.getValue(o),u=(n=i.getQName(o),r.createAttributeNS(t,n));this.locator&&p(i.getLocator(o),u),u.value=u.nodeValue=l,s.setAttributeNode(u)}},endElement:function(t,e,n){var i=this.currentElement;i.tagName;this.currentElement=i.parentNode},startPrefixMapping:function(t,e){},endPrefixMapping:function(t){},processingInstruction:function(t,e){var n=this.doc.createProcessingInstruction(t,e);this.locator&&p(this.locator,n),y(this,n)},ignorableWhitespace:function(t,e,n){},characters:function(t,e,n){if(t=m.apply(this,arguments)){if(this.cdata)var i=this.doc.createCDATASection(t);else i=this.doc.createTextNode(t);this.currentElement?this.currentElement.appendChild(i):/^\s*$/.test(t)&&this.doc.appendChild(i),this.locator&&p(this.locator,i)}},skippedEntity:function(t){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(t){(this.locator=t)&&(t.lineNumber=0)},comment:function(t,e,n){t=m.apply(this,arguments);var i=this.doc.createComment(t);this.locator&&p(this.locator,i),y(this,i)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(t,e,n){var i=this.doc.implementation;if(i&&i.createDocumentType){var r=i.createDocumentType(t,e,n);this.locator&&p(this.locator,r),y(this,r),this.doc.doctype=r}},warning:function(t){console.warn("[xmldom warning]\t"+t,g(this.locator))},error:function(t){console.error("[xmldom error]\t"+t,g(this.locator))},fatalError:function(t){throw new u(t,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(t){f.prototype[t]=function(){return null}})),e.__DOMHandler=f,e.normalizeLineEndings=c,e.DOMParser=d},function(t,e,n){var i=n(61).freeze;e.XML_ENTITIES=i({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),e.HTML_ENTITIES=i({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",times:"×",divide:"÷",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",fnof:"ƒ",circ:"ˆ",tilde:"˜",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",bull:"•",hellip:"…",permil:"‰",prime:"′",Prime:"″",lsaquo:"‹",rsaquo:"›",oline:"‾",euro:"€",trade:"™",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦"}),e.entityMap=e.HTML_ENTITIES},function(t,e,n){var i=n(61).NAMESPACE,r=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,s=new RegExp("[\\-\\.0-9"+r.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),a=new RegExp("^"+r.source+s.source+"*(?::"+r.source+s.source+"*)?$");function o(t,e){this.message=t,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,o)}function l(){}function u(t,e){return e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber,e}function h(t,e,n,r,s,a){function o(t,e,i){n.attributeNames.hasOwnProperty(t)&&a.fatalError("Attribute "+t+" redefined"),n.addValue(t,e.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,s),i)}for(var l,u=++e,h=0;;){var c=t.charAt(u);switch(c){case"=":if(1===h)l=t.slice(e,u),h=3;else{if(2!==h)throw new Error("attribute equal must after attrName");h=3}break;case"'":case'"':if(3===h||1===h){if(1===h&&(a.warning('attribute value must after "="'),l=t.slice(e,u)),e=u+1,!((u=t.indexOf(c,e))>0))throw new Error("attribute value no end '"+c+"' match");o(l,d=t.slice(e,u),e-1),h=5}else{if(4!=h)throw new Error('attribute value must after "="');o(l,d=t.slice(e,u),e),a.warning('attribute "'+l+'" missed start quot('+c+")!!"),e=u+1,h=5}break;case"/":switch(h){case 0:n.setTagName(t.slice(e,u));case 5:case 6:case 7:h=7,n.closed=!0;case 4:case 1:case 2:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return a.error("unexpected end of input"),0==h&&n.setTagName(t.slice(e,u)),u;case">":switch(h){case 0:n.setTagName(t.slice(e,u));case 5:case 6:case 7:break;case 4:case 1:"/"===(d=t.slice(e,u)).slice(-1)&&(n.closed=!0,d=d.slice(0,-1));case 2:2===h&&(d=l),4==h?(a.warning('attribute "'+d+'" missed quot(")!'),o(l,d,e)):(i.isHTML(r[""])&&d.match(/^(?:disabled|checked|selected)$/i)||a.warning('attribute "'+d+'" missed value!! "'+d+'" instead!!'),o(d,d,e));break;case 3:throw new Error("attribute value missed!!")}return u;case"":c=" ";default:if(c<=" ")switch(h){case 0:n.setTagName(t.slice(e,u)),h=6;break;case 1:l=t.slice(e,u),h=2;break;case 4:var d=t.slice(e,u);a.warning('attribute "'+d+'" missed quot(")!!'),o(l,d,e);case 5:h=6}else switch(h){case 2:n.tagName;i.isHTML(r[""])&&l.match(/^(?:disabled|checked|selected)$/i)||a.warning('attribute "'+l+'" missed value!! "'+l+'" instead2!!'),o(l,l,e),e=u,h=1;break;case 5:a.warning('attribute space is required"'+l+'"!!');case 6:h=1,e=u;break;case 3:h=4,e=u;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}u++}}function c(t,e,n){for(var r=t.tagName,s=null,a=t.length;a--;){var o=t[a],l=o.qName,u=o.value;if((f=l.indexOf(":"))>0)var h=o.prefix=l.slice(0,f),c=l.slice(f+1),d="xmlns"===h&&c;else c=l,h=null,d="xmlns"===l&&"";o.localName=c,!1!==d&&(null==s&&(s={},p(n,n={})),n[d]=s[d]=u,o.uri=i.XMLNS,e.startPrefixMapping(d,u))}for(a=t.length;a--;){(h=(o=t[a]).prefix)&&("xml"===h&&(o.uri=i.XML),"xmlns"!==h&&(o.uri=n[h||""]))}var f;(f=r.indexOf(":"))>0?(h=t.prefix=r.slice(0,f),c=t.localName=r.slice(f+1)):(h=null,c=t.localName=r);var g=t.uri=n[h||""];if(e.startElement(g,c,r,t),!t.closed)return t.currentNSMap=n,t.localNSMap=s,!0;if(e.endElement(g,c,r),s)for(h in s)Object.prototype.hasOwnProperty.call(s,h)&&e.endPrefixMapping(h)}function d(t,e,n,i,r){if(/^(?:script|textarea)$/i.test(n)){var s=t.indexOf("</"+n+">",e),a=t.substring(e+1,s);if(/[&<]/.test(a))return/^script$/i.test(n)?(r.characters(a,0,a.length),s):(a=a.replace(/&#?\w+;/g,i),r.characters(a,0,a.length),s)}return e+1}function f(t,e,n,i){var r=i[n];return null==r&&((r=t.lastIndexOf("</"+n+">"))<e&&(r=t.lastIndexOf("</"+n)),i[n]=r),r<e}function p(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}function g(t,e,n,i){switch(t.charAt(e+2)){case"-":return"-"===t.charAt(e+3)?(r=t.indexOf("--\x3e",e+4))>e?(n.comment(t,e+4,r-e-4),r+3):(i.error("Unclosed comment"),-1):-1;default:if("CDATA["==t.substr(e+3,6)){var r=t.indexOf("]]>",e+9);return n.startCDATA(),n.characters(t,e+9,r-e-9),n.endCDATA(),r+3}var s=function(t,e){var n,i=[],r=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;r.lastIndex=e,r.exec(t);for(;n=r.exec(t);)if(i.push(n),n[1])return i}(t,e),a=s.length;if(a>1&&/!doctype/i.test(s[0][0])){var o=s[1][0],l=!1,u=!1;a>3&&(/^public$/i.test(s[2][0])?(l=s[3][0],u=a>4&&s[4][0]):/^system$/i.test(s[2][0])&&(u=s[3][0]));var h=s[a-1];return n.startDTD(o,l,u),n.endDTD(),h.index+h[0].length}}return-1}function m(t,e,n){var i=t.indexOf("?>",e);if(i){var r=t.substring(e,i).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(r){r[0].length;return n.processingInstruction(r[1],r[2]),i+2}return-1}return-1}function y(){this.attributeNames={}}o.prototype=new Error,o.prototype.name=o.name,l.prototype={parse:function(t,e,n){var r=this.domBuilder;r.startDocument(),p(e,e={}),function(t,e,n,r,s){function a(t){var e=t.slice(1,-1);return Object.hasOwnProperty.call(n,e)?n[e]:"#"===e.charAt(0)?function(t){if(t>65535){var e=55296+((t-=65536)>>10),n=56320+(1023&t);return String.fromCharCode(e,n)}return String.fromCharCode(t)}(parseInt(e.substr(1).replace("x","0x"))):(s.error("entity not found:"+t),t)}function l(e){if(e>C){var n=t.substring(C,e).replace(/&#?\w+;/g,a);w&&p(C),r.characters(n,0,e-C),C=e}}function p(e,n){for(;e>=_&&(n=x.exec(t));)v=n.index,_=v+n[0].length,w.lineNumber++;w.columnNumber=e-v+1}var v=0,_=0,x=/.*(?:\r\n?|\n)|.*$/g,w=r.locator,b=[{currentNSMap:e}],S={},C=0;for(;;){try{var E=t.indexOf("<",C);if(E<0){if(!t.substr(C).match(/^\s*$/)){var T=r.doc,M=T.createTextNode(t.substr(C));T.appendChild(M),r.currentElement=M}return}switch(E>C&&l(E),t.charAt(E+1)){case"/":var k=t.indexOf(">",E+3),O=t.substring(E+2,k).replace(/[ \t\n\r]+$/g,""),A=b.pop();k<0?(O=t.substring(E+2).replace(/[\s<].*/,""),s.error("end tag name: "+O+" is not complete:"+A.tagName),k=E+1+O.length):O.match(/\s</)&&(O=O.replace(/[\s<].*/,""),s.error("end tag name: "+O+" maybe not complete"),k=E+1+O.length);var P=A.localNSMap,I=A.tagName==O;if(I||A.tagName&&A.tagName.toLowerCase()==O.toLowerCase()){if(r.endElement(A.uri,A.localName,O),P)for(var D in P)Object.prototype.hasOwnProperty.call(P,D)&&r.endPrefixMapping(D);I||s.fatalError("end tag name: "+O+" is not match the current start tagName:"+A.tagName)}else b.push(A);k++;break;case"?":w&&p(E),k=m(t,E,r);break;case"!":w&&p(E),k=g(t,E,r,s);break;default:w&&p(E);var L=new y,N=b[b.length-1].currentNSMap,R=(k=h(t,E,L,N,a,s),L.length);if(!L.closed&&f(t,k,L.tagName,S)&&(L.closed=!0,n.nbsp||s.warning("unclosed xml attribute")),w&&R){for(var z=u(w,{}),U=0;U<R;U++){var j=L[U];p(j.offset),j.locator=u(w,{})}r.locator=z,c(L,r,N)&&b.push(L),r.locator=w}else c(L,r,N)&&b.push(L);i.isHTML(L.uri)&&!L.closed?k=d(t,k,L.tagName,a,r):k++}}catch(t){if(t instanceof o)throw t;s.error("element parse error: "+t),k=-1}k>C?C=k:l(Math.max(E,C)+1)}}(t,e,n,r,this.errorHandler),r.endDocument()}},y.prototype={setTagName:function(t){if(!a.test(t))throw new Error("invalid tagName:"+t);this.tagName=t},addValue:function(t,e,n){if(!a.test(t))throw new Error("invalid attribute:"+t);this.attributeNames[t]=this.length,this[this.length++]={qName:t,value:e,offset:n}},length:0,getLocalName:function(t){return this[t].localName},getLocator:function(t){return this[t].locator},getQName:function(t){return this[t].qName},getURI:function(t){return this[t].uri},getValue:function(t){return this[t].value}},e.XMLReader=l,e.ParseError=o},function(t,e,n){(function(e,i){var r,s=(r="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,function(t){t=void 0!==(t=t||{})?t:{};var s,a={};for(s in t)t.hasOwnProperty(s)&&(a[s]=t[s]);var o=[],l=function(t,e){throw e},u=!1,h=!1,c=!1,d=!1;if(u="object"==typeof window,h="function"==typeof importScripts,c="object"==typeof e&&"object"==typeof e.versions&&"string"==typeof e.versions.node&&!u&&!h,d=!u&&!c&&!h,t.ENVIRONMENT)throw new Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -s ENVIRONMENT=web or -s ENVIRONMENT=node)");var f,p,g,m,y="";function v(e){return t.locateFile?t.locateFile(e,y):y+e}if(c)y=i+"/",f=function(t,e){var i;return g||(g=n(88)(["fs"].join())),m||(m=n(88)(["path"].join())),t=m.normalize(t),i=g.readFileSync(t),e?i:i.toString()},p=function(t){var e=f(t,!0);return e.buffer||(e=new Uint8Array(e)),O(e.buffer),e},e.argv.length>1&&e.argv[1].replace(/\\/g,"/"),o=e.argv.slice(2),e.on("uncaughtException",(function(t){if(!(t instanceof bi))throw t})),e.on("unhandledRejection",kt),l=function(t){e.exit(t)},t.inspect=function(){return"[Emscripten Module object]"};else if(d)"undefined"!=typeof read&&(f=function(t){return read(t)}),p=function(t){var e;return"function"==typeof readbuffer?new Uint8Array(readbuffer(t)):(O("object"==typeof(e=read(t,"binary"))),e)},"undefined"!=typeof scriptArgs?o=scriptArgs:void 0!==arguments&&(o=arguments),"function"==typeof quit&&(l=function(t){quit(t)}),"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print);else{if(!u&&!h)throw new Error("environment detection error");h?y=self.location.href:document.currentScript&&(y=document.currentScript.src),r&&(y=r),y=0!==y.indexOf("blob:")?y.substr(0,y.lastIndexOf("/")+1):"",f=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},h&&(p=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)})}var _=t.print||function(){},x=t.printErr||function(){};for(s in a)a.hasOwnProperty(s)&&(t[s]=a[s]);function w(t){w.shown||(w.shown={}),w.shown[t]||(w.shown[t]=1,x(t))}a=null,t.arguments&&(o=t.arguments),Object.getOwnPropertyDescriptor(t,"arguments")||Object.defineProperty(t,"arguments",{configurable:!0,get:function(){kt("Module.arguments has been replaced with plain arguments_")}}),t.thisProgram&&t.thisProgram,Object.getOwnPropertyDescriptor(t,"thisProgram")||Object.defineProperty(t,"thisProgram",{configurable:!0,get:function(){kt("Module.thisProgram has been replaced with plain thisProgram")}}),t.quit&&(l=t.quit),Object.getOwnPropertyDescriptor(t,"quit")||Object.defineProperty(t,"quit",{configurable:!0,get:function(){kt("Module.quit has been replaced with plain quit_")}}),O(void 0===t.memoryInitializerPrefixURL,"Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),O(void 0===t.pthreadMainPrefixURL,"Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),O(void 0===t.cdInitializerPrefixURL,"Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),O(void 0===t.filePackagePrefixURL,"Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),O(void 0===t.read,"Module.read option was removed (modify read_ in JS)"),O(void 0===t.readAsync,"Module.readAsync option was removed (modify readAsync in JS)"),O(void 0===t.readBinary,"Module.readBinary option was removed (modify readBinary in JS)"),O(void 0===t.setWindowTitle,"Module.setWindowTitle option was removed (modify setWindowTitle in JS)"),Object.getOwnPropertyDescriptor(t,"read")||Object.defineProperty(t,"read",{configurable:!0,get:function(){kt("Module.read has been replaced with plain read_")}}),Object.getOwnPropertyDescriptor(t,"readAsync")||Object.defineProperty(t,"readAsync",{configurable:!0,get:function(){kt("Module.readAsync has been replaced with plain readAsync")}}),Object.getOwnPropertyDescriptor(t,"readBinary")||Object.defineProperty(t,"readBinary",{configurable:!0,get:function(){kt("Module.readBinary has been replaced with plain readBinary")}}),wi=xi=_i=function(){kt("cannot use the stack before compiled code is ready to run, and has provided stack access")};var b,S,C,E={"f64-rem":function(t,e){return t%e},debugger:function(){}},T=(new Array(0),function(t){});t.wasmBinary&&(b=t.wasmBinary),Object.getOwnPropertyDescriptor(t,"wasmBinary")||Object.defineProperty(t,"wasmBinary",{configurable:!0,get:function(){kt("Module.wasmBinary has been replaced with plain wasmBinary")}}),t.noExitRuntime&&(S=t.noExitRuntime),Object.getOwnPropertyDescriptor(t,"noExitRuntime")||Object.defineProperty(t,"noExitRuntime",{configurable:!0,get:function(){kt("Module.noExitRuntime has been replaced with plain noExitRuntime")}}),"object"!=typeof WebAssembly&&kt("No WebAssembly support found. Build with -s WASM=0 to target JavaScript instead.");var M=new WebAssembly.Table({initial:352,maximum:352,element:"anyfunc"}),k=!1;function O(t,e){t||kt("Assertion failed: "+e)}function A(e){var n=t["_"+e];return O(n,"Cannot call unknown function "+e+", make sure it is exported"),n}function P(t,e,n,i,r){var s={string:function(t){var e=0;if(null!=t&&0!==t){var n=1+(t.length<<2);z(t,e=_i(n),n)}return e},array:function(t){var e=_i(t.length);return j(t,e),e}},a=A(t),o=[],l=0;if(O("array"!==e,'Return type should not be "array".'),i)for(var u=0;u<i.length;u++){var h=s[n[u]];h?(0===l&&(l=wi()),o[u]=h(i[u])):o[u]=i[u]}var c=a.apply(null,o);return c=function(t){return"string"===e?N(t):"boolean"===e?Boolean(t):t}(c),0!==l&&xi(l),c}function I(t,e,n,i){return function(){return P(t,e,n,arguments)}}var D="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function L(t,e,n){for(var i=e+n,r=e;t[r]&&!(r>=i);)++r;if(r-e>16&&t.subarray&&D)return D.decode(t.subarray(e,r));for(var s="";e<r;){var a=t[e++];if(128&a){var o=63&t[e++];if(192!=(224&a)){var l=63&t[e++];if(224==(240&a)?a=(15&a)<<12|o<<6|l:(240!=(248&a)&&w("Invalid UTF-8 leading byte 0x"+a.toString(16)+" encountered when deserializing a UTF-8 string on the asm.js/wasm heap to a JS string!"),a=(7&a)<<18|o<<12|l<<6|63&t[e++]),a<65536)s+=String.fromCharCode(a);else{var u=a-65536;s+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else s+=String.fromCharCode((31&a)<<6|o)}else s+=String.fromCharCode(a)}return s}function N(t,e){return t?L($,t,e):""}function R(t,e,n,i){if(!(i>0))return 0;for(var r=n,s=n+i-1,a=0;a<t.length;++a){var o=t.charCodeAt(a);if(o>=55296&&o<=57343&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++a)),o<=127){if(n>=s)break;e[n++]=o}else if(o<=2047){if(n+1>=s)break;e[n++]=192|o>>6,e[n++]=128|63&o}else if(o<=65535){if(n+2>=s)break;e[n++]=224|o>>12,e[n++]=128|o>>6&63,e[n++]=128|63&o}else{if(n+3>=s)break;o>=2097152&&w("Invalid Unicode code point 0x"+o.toString(16)+" encountered when serializing a JS string to an UTF-8 string on the asm.js/wasm heap! (Valid unicode code points should be in range 0-0x1FFFFF)."),e[n++]=240|o>>18,e[n++]=128|o>>12&63,e[n++]=128|o>>6&63,e[n++]=128|63&o}}return e[n]=0,n-r}function z(t,e,n){return O("number"==typeof n,"stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),R(t,$,e,n)}function U(t){for(var e=0,n=0;n<t.length;++n){var i=t.charCodeAt(n);i>=55296&&i<=57343&&(i=65536+((1023&i)<<10)|1023&t.charCodeAt(++n)),i<=127?++e:e+=i<=2047?2:i<=65535?3:4}return e}function j(t,e){O(t.length>=0,"writeArrayToMemory array must have a length (should be an array or typed array)"),B.set(t,e)}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var F,B,$,X,H,G,q,V,W,Y=65536;function Z(t,e){return t%e>0&&(t+=e-t%e),t}function K(e){F=e,t.HEAP8=B=new Int8Array(e),t.HEAP16=X=new Int16Array(e),t.HEAP32=G=new Int32Array(e),t.HEAPU8=$=new Uint8Array(e),t.HEAPU16=H=new Uint16Array(e),t.HEAPU32=q=new Uint32Array(e),t.HEAPF32=V=new Float32Array(e),t.HEAPF64=W=new Float64Array(e)}var Q=434112,J=5676992,tt=5676992,et=433920;O(Q%16==0,"stack must start aligned"),O(tt%16==0,"heap must start aligned");var nt=5242880;t.TOTAL_STACK&&O(nt===t.TOTAL_STACK,"the stack size can no longer be determined at runtime");var it=t.TOTAL_MEMORY||16777216;function rt(){O(0==(3&J)),q[(J>>2)-1]=34821223,q[(J>>2)-2]=2310721022,G[0]=1668509029}function st(){var t=q[(J>>2)-1],e=q[(J>>2)-2];34821223==t&&2310721022==e||kt("Stack overflow! Stack cookie has been overwritten, expected hex dwords 0x89BACDFE and 0x02135467, but received 0x"+e.toString(16)+" "+t.toString(16)),1668509029!==G[0]&&kt("Runtime error: The application has corrupted its heap memory area (address zero)!")}function at(t){kt("Stack overflow! Attempted to allocate "+t+" bytes on the stack, but stack has only "+(J-wi()+t)+" bytes available!")}function ot(t,e){kt("Invalid function pointer "+t+" called with signature '"+e+"'. Perhaps this is an invalid value (e.g. caused by calling a virtual method on a NULL pointer)? Or calling a function with an incorrect type, which will fail? (it is worth building your source files with -Werror (warnings are errors), as warnings can indicate undefined behavior which can cause this). Build with ASSERTIONS=2 for more info.")}function lt(e){for(;e.length>0;){var n=e.shift();if("function"!=typeof n){var i=n.func;"number"==typeof i?void 0===n.arg?t.dynCall_v(i):t.dynCall_vi(i,n.arg):i(void 0===n.arg?null:n.arg)}else n()}}Object.getOwnPropertyDescriptor(t,"TOTAL_MEMORY")||Object.defineProperty(t,"TOTAL_MEMORY",{configurable:!0,get:function(){kt("Module.TOTAL_MEMORY has been replaced with plain INITIAL_TOTAL_MEMORY")}}),O(it>=nt,"TOTAL_MEMORY should be larger than TOTAL_STACK, was "+it+"! (TOTAL_STACK="+nt+")"),O("undefined"!=typeof Int32Array&&"undefined"!=typeof Float64Array&&void 0!==Int32Array.prototype.subarray&&void 0!==Int32Array.prototype.set,"JS engine does not provide full typed array support"),(C=t.wasmMemory?t.wasmMemory:new WebAssembly.Memory({initial:it/Y}))&&(F=C.buffer),O((it=F.byteLength)%Y==0),K(F),G[et>>2]=tt,function(){var t=new Int16Array(1),e=new Int8Array(t.buffer);if(t[0]=25459,115!==e[0]||99!==e[1])throw"Runtime error: expected the system to be little-endian!"}();var ut=[],ht=[],ct=[],dt=[],ft=!1,pt=!1;function gt(){if(t.preRun)for("function"==typeof t.preRun&&(t.preRun=[t.preRun]);t.preRun.length;)xt(t.preRun.shift());lt(ut)}function mt(){st(),O(!ft),ft=!0,lt(ht)}function yt(){st(),lt(ct)}function vt(){st(),pt=!0}function _t(){if(st(),t.postRun)for("function"==typeof t.postRun&&(t.postRun=[t.postRun]);t.postRun.length;)wt(t.postRun.shift());lt(dt)}function xt(t){ut.unshift(t)}function wt(t){dt.unshift(t)}O(Math.imul,"This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),O(Math.fround,"This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),O(Math.clz32,"This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),O(Math.trunc,"This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");var bt=0,St=null,Ct=null,Et={};function Tt(e){bt++,t.monitorRunDependencies&&t.monitorRunDependencies(bt),e?(O(!Et[e]),Et[e]=1,null===St&&"undefined"!=typeof setInterval&&(St=setInterval((function(){if(k)return clearInterval(St),void(St=null);var t=!1;for(var e in Et)t||(t=!0,x("still waiting on run dependencies:")),x("dependency: "+e);t&&x("(end of list)")}),1e4))):x("warning: run dependency added without ID")}function Mt(e){if(bt--,t.monitorRunDependencies&&t.monitorRunDependencies(bt),e?(O(Et[e]),delete Et[e]):x("warning: run dependency removed without ID"),0==bt&&(null!==St&&(clearInterval(St),St=null),Ct)){var n=Ct;Ct=null,n()}}function kt(e){throw t.onAbort&&t.onAbort(e),_(e+=""),x(e),k=!0,"abort("+e+") at "+Ft()}t.preloadedImages={},t.preloadedAudios={};var Ot={error:function(){kt("Filesystem support (FS) was not included. The problem is that you are using files from JS, but files were not used from C/C++, so filesystem support was not auto-included. You can force-include filesystem support with  -s FORCE_FILESYSTEM=1")},init:function(){Ot.error()},createDataFile:function(){Ot.error()},createPreloadedFile:function(){Ot.error()},createLazyFile:function(){Ot.error()},open:function(){Ot.error()},mkdev:function(){Ot.error()},registerDevice:function(){Ot.error()},analyzePath:function(){Ot.error()},loadFilesFromDB:function(){Ot.error()},ErrnoError:function(){Ot.error()}};t.FS_createDataFile=Ot.createDataFile,t.FS_createPreloadedFile=Ot.createPreloadedFile;var At="data:application/octet-stream;base64,";function Pt(t){return String.prototype.startsWith?t.startsWith(At):0===t.indexOf(At)}var It="woff2.wasm";function Dt(){try{if(b)return new Uint8Array(b);if(p)return p(It);throw"both async and sync fetching of the wasm failed"}catch(t){kt(t)}}function Lt(){return b||!u&&!h||"function"!=typeof fetch?new Promise((function(t,e){t(Dt())})):fetch(It,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at '"+It+"'";return t.arrayBuffer()})).catch((function(){return Dt()}))}function Nt(){var e={env:ci,wasi_unstable:ci,global:{NaN:NaN,Infinity:1/0},"global.Math":Math,asm2wasm:E};function n(e,n){var i=e.exports;t.asm=i,Mt("wasm-instantiate")}Tt("wasm-instantiate");var i=t;function r(e){O(t===i,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),i=null,n(e.instance)}function s(t){return Lt().then((function(t){return WebAssembly.instantiate(t,e)})).then(t,(function(t){x("failed to asynchronously prepare wasm: "+t),kt(t)}))}if(t.instantiateWasm)try{return t.instantiateWasm(e,n)}catch(t){return x("Module.instantiateWasm callback failed with error: "+t),!1}return function(){if(b||"function"!=typeof WebAssembly.instantiateStreaming||Pt(It)||"function"!=typeof fetch)return s(r);fetch(It,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(r,(function(t){x("wasm streaming compile failed: "+t),x("falling back to ArrayBuffer instantiation"),s(r)}))}))}(),{}}Pt(It)||(It=v(It)),t.asm=Nt,ht.push({func:function(){vi()}});var Rt=434096;function zt(e){var n=t.___cxa_demangle||t.__cxa_demangle;O(n);try{var i=e;i.startsWith("__Z")&&(i=i.substr(1));var r=U(i)+1,s=yi(r);z(i,s,r);var a=yi(4),o=n(s,0,0,a);if(0===G[a>>2]&&o)return N(o)}catch(t){}finally{s&&mi(s),a&&mi(a),o&&mi(o)}return e}function Ut(t){return t.replace(/\b__Z[\w\d_]+/g,(function(t){var e=zt(t);return t===e?t:e+" ["+t+"]"}))}function jt(){var t=new Error;if(!t.stack){try{throw new Error(0)}catch(e){t=e}if(!t.stack)return"(no stack trace available)"}return t.stack.toString()}function Ft(){var e=jt();return t.extraStackTrace&&(e+="\n"+t.extraStackTrace()),Ut(e)}function Bt(t,e,n,i){kt("Assertion failed: "+N(t)+", at: "+[e?N(e):"unknown filename",n,i?N(i):"unknown function"])}function $t(t){return yi(t)}O(Rt%8==0);var Xt={};function Ht(t,e,n){throw Xt[t]={ptr:t,adjusted:[t],type:e,destructor:n,refcount:0,caught:!1,rethrown:!1},"uncaught_exception"in pi?pi.uncaught_exceptions++:pi.uncaught_exceptions=1,t+" - Exception catching is disabled, this exception cannot be caught. Compile with -s DISABLE_EXCEPTION_CATCHING=0 or DISABLE_EXCEPTION_CATCHING=2 to catch."}function Gt(){}function qt(){}var Vt={buffers:[null,[],[]],printChar:function(t,e){var n=Vt.buffers[t];O(n),0===e||10===e?((1===t?_:x)(L(n,0)),n.length=0):n.push(e)},varargs:0,get:function(t){return Vt.varargs+=4,G[Vt.varargs-4>>2]},getStr:function(){return N(Vt.get())},get64:function(){var t=Vt.get(),e=Vt.get();return O(t>=0?0===e:-1===e),t},getZero:function(){O(0===Vt.get())}};function Wt(t){try{return kt("it should not be possible to operate on streams when !SYSCALLS_REQUIRE_FILESYSTEM"),0}catch(t){return void 0!==Ot&&t instanceof Ot.ErrnoError||kt(t),t.errno}}function Yt(){return Wt.apply(null,arguments)}function Zt(t,e,n,i,r){try{return kt("it should not be possible to operate on streams when !SYSCALLS_REQUIRE_FILESYSTEM"),0}catch(t){return void 0!==Ot&&t instanceof Ot.ErrnoError||kt(t),t.errno}}function Kt(){return Zt.apply(null,arguments)}function Qt(){var e=t._fflush;e&&e(0);var n=Vt.buffers;n[1].length&&Vt.printChar(1,10),n[2].length&&Vt.printChar(2,10)}function Jt(t,e,n,i){try{for(var r=0,s=0;s<n;s++){for(var a=G[e+8*s>>2],o=G[e+(8*s+4)>>2],l=0;l<o;l++)Vt.printChar(t,$[a+l]);r+=o}return G[i>>2]=r,0}catch(t){return void 0!==Ot&&t instanceof Ot.ErrnoError||kt(t),t.errno}}function te(){return Jt.apply(null,arguments)}function ee(t){switch(t){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+t)}}function ne(){for(var t=new Array(256),e=0;e<256;++e)t[e]=String.fromCharCode(e);ie=t}var ie=void 0;function re(t){for(var e="",n=t;$[n];)e+=ie[$[n++]];return e}var se={},ae={},oe={},le=48,ue=57;function he(t){if(void 0===t)return"_unknown";var e=(t=t.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return e>=le&&e<=ue?"_"+t:t}function ce(t,e){return t=he(t),new Function("body","return function "+t+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(e)}function de(t,e){var n=ce(e,(function(t){this.name=e,this.message=t;var n=new Error(t).stack;void 0!==n&&(this.stack=this.toString()+"\n"+n.replace(/^Error(:[^\n]*)?\n/,""))}));return n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},n}var fe=void 0;function pe(t){throw new fe(t)}var ge=void 0;function me(t){throw new ge(t)}function ye(t,e,n){function i(e){var i=n(e);i.length!==t.length&&me("Mismatched type converter count");for(var r=0;r<t.length;++r)ve(t[r],i[r])}t.forEach((function(t){oe[t]=e}));var r=new Array(e.length),s=[],a=0;e.forEach((function(t,e){ae.hasOwnProperty(t)?r[e]=ae[t]:(s.push(t),se.hasOwnProperty(t)||(se[t]=[]),se[t].push((function(){r[e]=ae[t],++a===s.length&&i(r)})))})),0===s.length&&i(r)}function ve(t,e,n){if(n=n||{},!("argPackAdvance"in e))throw new TypeError("registerType registeredInstance requires argPackAdvance");var i=e.name;if(t||pe('type "'+i+'" must have a positive integer typeid pointer'),ae.hasOwnProperty(t)){if(n.ignoreDuplicateRegistrations)return;pe("Cannot register type '"+i+"' twice")}if(ae[t]=e,delete oe[t],se.hasOwnProperty(t)){var r=se[t];delete se[t],r.forEach((function(t){t()}))}}function _e(t,e,n,i,r){var s=ee(n);ve(t,{name:e=re(e),fromWireType:function(t){return!!t},toWireType:function(t,e){return e?i:r},argPackAdvance:8,readValueFromPointer:function(t){var i;if(1===n)i=B;else if(2===n)i=X;else{if(4!==n)throw new TypeError("Unknown boolean type size: "+e);i=G}return this.fromWireType(i[t>>s])},destructorFunction:null})}function xe(t){if(!(this instanceof Re))return!1;if(!(t instanceof Re))return!1;for(var e=this.$$.ptrType.registeredClass,n=this.$$.ptr,i=t.$$.ptrType.registeredClass,r=t.$$.ptr;e.baseClass;)n=e.upcast(n),e=e.baseClass;for(;i.baseClass;)r=i.upcast(r),i=i.baseClass;return e===i&&n===r}function we(t){return{count:t.count,deleteScheduled:t.deleteScheduled,preservePointerOnDelete:t.preservePointerOnDelete,ptr:t.ptr,ptrType:t.ptrType,smartPtr:t.smartPtr,smartPtrType:t.smartPtrType}}function be(t){pe(t.$$.ptrType.registeredClass.name+" instance already deleted")}var Se=!1;function Ce(t){}function Ee(t){t.smartPtr?t.smartPtrType.rawDestructor(t.smartPtr):t.ptrType.registeredClass.rawDestructor(t.ptr)}function Te(t){t.count.value-=1,0===t.count.value&&Ee(t)}function Me(t){return"undefined"==typeof FinalizationGroup?(Me=function(t){return t},t):(Se=new FinalizationGroup((function(t){for(var e=t.next();!e.done;e=t.next()){var n=e.value;n.ptr?Te(n):console.warn("object already deleted: "+n.ptr)}})),Ce=function(t){Se.unregister(t.$$)},(Me=function(t){return Se.register(t,t.$$,t.$$),t})(t))}function ke(){if(this.$$.ptr||be(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var t=Me(Object.create(Object.getPrototypeOf(this),{$$:{value:we(this.$$)}}));return t.$$.count.value+=1,t.$$.deleteScheduled=!1,t}function Oe(){this.$$.ptr||be(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&pe("Object already scheduled for deletion"),Ce(this),Te(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function Ae(){return!this.$$.ptr}var Pe=void 0,Ie=[];function De(){for(;Ie.length;){var t=Ie.pop();t.$$.deleteScheduled=!1,t.delete()}}function Le(){return this.$$.ptr||be(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&pe("Object already scheduled for deletion"),Ie.push(this),1===Ie.length&&Pe&&Pe(De),this.$$.deleteScheduled=!0,this}function Ne(){Re.prototype.isAliasOf=xe,Re.prototype.clone=ke,Re.prototype.delete=Oe,Re.prototype.isDeleted=Ae,Re.prototype.deleteLater=Le}function Re(){}var ze={};function Ue(t,e,n){if(void 0===t[e].overloadTable){var i=t[e];t[e]=function(){return t[e].overloadTable.hasOwnProperty(arguments.length)||pe("Function '"+n+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+t[e].overloadTable+")!"),t[e].overloadTable[arguments.length].apply(this,arguments)},t[e].overloadTable=[],t[e].overloadTable[i.argCount]=i}}function je(e,n,i){t.hasOwnProperty(e)?((void 0===i||void 0!==t[e].overloadTable&&void 0!==t[e].overloadTable[i])&&pe("Cannot register public name '"+e+"' twice"),Ue(t,e,e),t.hasOwnProperty(i)&&pe("Cannot register multiple overloads of a function with the same number of arguments ("+i+")!"),t[e].overloadTable[i]=n):(t[e]=n,void 0!==i&&(t[e].numArguments=i))}function Fe(t,e,n,i,r,s,a,o){this.name=t,this.constructor=e,this.instancePrototype=n,this.rawDestructor=i,this.baseClass=r,this.getActualType=s,this.upcast=a,this.downcast=o,this.pureVirtualFunctions=[]}function Be(t,e,n){for(;e!==n;)e.upcast||pe("Expected null or instance of "+n.name+", got an instance of "+e.name),t=e.upcast(t),e=e.baseClass;return t}function $e(t,e){if(null===e)return this.isReference&&pe("null is not a valid "+this.name),0;e.$$||pe('Cannot pass "'+kn(e)+'" as a '+this.name),e.$$.ptr||pe("Cannot pass deleted object as a pointer of type "+this.name);var n=e.$$.ptrType.registeredClass;return Be(e.$$.ptr,n,this.registeredClass)}function Xe(t,e){var n;if(null===e)return this.isReference&&pe("null is not a valid "+this.name),this.isSmartPointer?(n=this.rawConstructor(),null!==t&&t.push(this.rawDestructor,n),n):0;e.$$||pe('Cannot pass "'+kn(e)+'" as a '+this.name),e.$$.ptr||pe("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&e.$$.ptrType.isConst&&pe("Cannot convert argument of type "+(e.$$.smartPtrType?e.$$.smartPtrType.name:e.$$.ptrType.name)+" to parameter type "+this.name);var i=e.$$.ptrType.registeredClass;if(n=Be(e.$$.ptr,i,this.registeredClass),this.isSmartPointer)switch(void 0===e.$$.smartPtr&&pe("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:e.$$.smartPtrType===this?n=e.$$.smartPtr:pe("Cannot convert argument of type "+(e.$$.smartPtrType?e.$$.smartPtrType.name:e.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:n=e.$$.smartPtr;break;case 2:if(e.$$.smartPtrType===this)n=e.$$.smartPtr;else{var r=e.clone();n=this.rawShare(n,Tn((function(){r.delete()}))),null!==t&&t.push(this.rawDestructor,n)}break;default:pe("Unsupporting sharing policy")}return n}function He(t,e){if(null===e)return this.isReference&&pe("null is not a valid "+this.name),0;e.$$||pe('Cannot pass "'+kn(e)+'" as a '+this.name),e.$$.ptr||pe("Cannot pass deleted object as a pointer of type "+this.name),e.$$.ptrType.isConst&&pe("Cannot convert argument of type "+e.$$.ptrType.name+" to parameter type "+this.name);var n=e.$$.ptrType.registeredClass;return Be(e.$$.ptr,n,this.registeredClass)}function Ge(t){return this.fromWireType(q[t>>2])}function qe(t){return this.rawGetPointee&&(t=this.rawGetPointee(t)),t}function Ve(t){this.rawDestructor&&this.rawDestructor(t)}function We(t){null!==t&&t.delete()}function Ye(t,e,n){if(e===n)return t;if(void 0===n.baseClass)return null;var i=Ye(t,e,n.baseClass);return null===i?null:n.downcast(i)}function Ze(){return Object.keys(tn).length}function Ke(){var t=[];for(var e in tn)tn.hasOwnProperty(e)&&t.push(tn[e]);return t}function Qe(t){Pe=t,Ie.length&&Pe&&Pe(De)}function Je(){t.getInheritedInstanceCount=Ze,t.getLiveInheritedInstances=Ke,t.flushPendingDeletes=De,t.setDelayFunction=Qe}var tn={};function en(t,e){for(void 0===e&&pe("ptr should not be undefined");t.baseClass;)e=t.upcast(e),t=t.baseClass;return e}function nn(t,e){return e=en(t,e),tn[e]}function rn(t,e){return e.ptrType&&e.ptr||me("makeClassHandle requires ptr and ptrType"),!!e.smartPtrType!=!!e.smartPtr&&me("Both smartPtrType and smartPtr must be specified"),e.count={value:1},Me(Object.create(t,{$$:{value:e}}))}function sn(t){var e=this.getPointee(t);if(!e)return this.destructor(t),null;var n=nn(this.registeredClass,e);if(void 0!==n){if(0===n.$$.count.value)return n.$$.ptr=e,n.$$.smartPtr=t,n.clone();var i=n.clone();return this.destructor(t),i}function r(){return this.isSmartPointer?rn(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:e,smartPtrType:this,smartPtr:t}):rn(this.registeredClass.instancePrototype,{ptrType:this,ptr:t})}var s,a=this.registeredClass.getActualType(e),o=ze[a];if(!o)return r.call(this);s=this.isConst?o.constPointerType:o.pointerType;var l=Ye(e,this.registeredClass,s.registeredClass);return null===l?r.call(this):this.isSmartPointer?rn(s.registeredClass.instancePrototype,{ptrType:s,ptr:l,smartPtrType:this,smartPtr:t}):rn(s.registeredClass.instancePrototype,{ptrType:s,ptr:l})}function an(){on.prototype.getPointee=qe,on.prototype.destructor=Ve,on.prototype.argPackAdvance=8,on.prototype.readValueFromPointer=Ge,on.prototype.deleteObject=We,on.prototype.fromWireType=sn}function on(t,e,n,i,r,s,a,o,l,u,h){this.name=t,this.registeredClass=e,this.isReference=n,this.isConst=i,this.isSmartPointer=r,this.pointeeType=s,this.sharingPolicy=a,this.rawGetPointee=o,this.rawConstructor=l,this.rawShare=u,this.rawDestructor=h,r||void 0!==e.baseClass?this.toWireType=Xe:i?(this.toWireType=$e,this.destructorFunction=null):(this.toWireType=He,this.destructorFunction=null)}function ln(e,n,i){t.hasOwnProperty(e)||me("Replacing nonexistant public symbol"),void 0!==t[e].overloadTable&&void 0!==i?t[e].overloadTable[i]=n:(t[e]=n,t[e].argCount=i)}function un(e,n){var i;if(e=re(e),void 0!==t["FUNCTION_TABLE_"+e])i=t["FUNCTION_TABLE_"+e][n];else if("undefined"!=typeof FUNCTION_TABLE)i=FUNCTION_TABLE[n];else{var r=t["dynCall_"+e];void 0===r&&void 0===(r=t["dynCall_"+e.replace(/f/g,"d")])&&pe("No dynCall invoker for signature: "+e),i=function(t){for(var i=[],r=1;r<e.length;++r)i.push("a"+r);var s="return function dynCall_"+e+"_"+n+"("+i.join(", ")+") {\n";return s+="    return dynCall(rawFunction"+(i.length?", ":"")+i.join(", ")+");\n",s+="};\n",new Function("dynCall","rawFunction",s)(t,n)}(r)}return"function"!=typeof i&&pe("unknown function pointer with signature "+e+": "+n),i}var hn=void 0;function cn(t){var e=gi(t),n=re(e);return mi(e),n}function dn(t,e){var n=[],i={};throw e.forEach((function t(e){i[e]||ae[e]||(oe[e]?oe[e].forEach(t):(n.push(e),i[e]=!0))})),new hn(t+": "+n.map(cn).join([", "]))}function fn(t,e,n,i,r,s,a,o,l,u,h,c,d){h=re(h),s=un(r,s),o&&(o=un(a,o)),u&&(u=un(l,u)),d=un(c,d);var f=he(h);je(f,(function(){dn("Cannot construct "+h+" due to unbound types",[i])})),ye([t,e,n],i?[i]:[],(function(e){var n,r;e=e[0],r=i?(n=e.registeredClass).instancePrototype:Re.prototype;var a=ce(f,(function(){if(Object.getPrototypeOf(this)!==l)throw new fe("Use 'new' to construct "+h);if(void 0===c.constructor_body)throw new fe(h+" has no accessible constructor");var t=c.constructor_body[arguments.length];if(void 0===t)throw new fe("Tried to invoke ctor of "+h+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(c.constructor_body).toString()+") parameters instead!");return t.apply(this,arguments)})),l=Object.create(r,{constructor:{value:a}});a.prototype=l;var c=new Fe(h,a,l,d,n,s,o,u),p=new on(h,c,!0,!1,!1),g=new on(h+"*",c,!1,!1,!1),m=new on(h+" const*",c,!1,!0,!1);return ze[t]={pointerType:g,constPointerType:m},ln(f,a),[p,g,m]}))}function pn(t,e){for(var n=[],i=0;i<t;i++)n.push(G[(e>>2)+i]);return n}function gn(t){for(;t.length;){var e=t.pop();t.pop()(e)}}function mn(t,e,n,i,r,s){var a=pn(e,n);r=un(i,r),ye([],[t],(function(t){var n="constructor "+(t=t[0]).name;if(void 0===t.registeredClass.constructor_body&&(t.registeredClass.constructor_body=[]),void 0!==t.registeredClass.constructor_body[e-1])throw new fe("Cannot register multiple constructors with identical number of parameters ("+(e-1)+") for class '"+t.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return t.registeredClass.constructor_body[e-1]=function(){dn("Cannot construct "+t.name+" due to unbound types",a)},ye([],a,(function(i){return t.registeredClass.constructor_body[e-1]=function(){arguments.length!==e-1&&pe(n+" called with "+arguments.length+" arguments, expected "+(e-1));var t=[],a=new Array(e);a[0]=s;for(var o=1;o<e;++o)a[o]=i[o].toWireType(t,arguments[o-1]);var l=r.apply(null,a);return gn(t),i[0].fromWireType(l)},[]})),[]}))}function yn(t,e){if(!(t instanceof Function))throw new TypeError("new_ called with constructor type "+typeof t+" which is not a function");var n=ce(t.name||"unknownFunctionName",(function(){}));n.prototype=t.prototype;var i=new n,r=t.apply(i,e);return r instanceof Object?r:i}function vn(t,e,n,i,r){var s=e.length;s<2&&pe("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var a=null!==e[1]&&null!==n,o=!1,l=1;l<e.length;++l)if(null!==e[l]&&void 0===e[l].destructorFunction){o=!0;break}var u="void"!==e[0].name,h="",c="";for(l=0;l<s-2;++l)h+=(0!==l?", ":"")+"arg"+l,c+=(0!==l?", ":"")+"arg"+l+"Wired";var d="return function "+he(t)+"("+h+") {\nif (arguments.length !== "+(s-2)+") {\nthrowBindingError('function "+t+" called with ' + arguments.length + ' arguments, expected "+(s-2)+" args!');\n}\n";o&&(d+="var destructors = [];\n");var f=o?"destructors":"null",p=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],g=[pe,i,r,gn,e[0],e[1]];for(a&&(d+="var thisWired = classParam.toWireType("+f+", this);\n"),l=0;l<s-2;++l)d+="var arg"+l+"Wired = argType"+l+".toWireType("+f+", arg"+l+"); // "+e[l+2].name+"\n",p.push("argType"+l),g.push(e[l+2]);if(a&&(c="thisWired"+(c.length>0?", ":"")+c),d+=(u?"var rv = ":"")+"invoker(fn"+(c.length>0?", ":"")+c+");\n",o)d+="runDestructors(destructors);\n";else for(l=a?1:2;l<e.length;++l){var m=1===l?"thisWired":"arg"+(l-2)+"Wired";null!==e[l].destructorFunction&&(d+=m+"_dtor("+m+"); // "+e[l].name+"\n",p.push(m+"_dtor"),g.push(e[l].destructorFunction))}return u&&(d+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),d+="}\n",p.push(d),yn(Function,p).apply(null,g)}function _n(t,e,n,i,r,s,a,o){var l=pn(n,i);e=re(e),s=un(r,s),ye([],[t],(function(t){var i=(t=t[0]).name+"."+e;function r(){dn("Cannot call "+i+" due to unbound types",l)}o&&t.registeredClass.pureVirtualFunctions.push(e);var u=t.registeredClass.instancePrototype,h=u[e];return void 0===h||void 0===h.overloadTable&&h.className!==t.name&&h.argCount===n-2?(r.argCount=n-2,r.className=t.name,u[e]=r):(Ue(u,e,i),u[e].overloadTable[n-2]=r),ye([],l,(function(r){var o=vn(i,r,t,s,a);return void 0===u[e].overloadTable?(o.argCount=n-2,u[e]=o):u[e].overloadTable[n-2]=o,[]})),[]}))}var xn=[],wn=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function bn(t){t>4&&0==--wn[t].refcount&&(wn[t]=void 0,xn.push(t))}function Sn(){for(var t=0,e=5;e<wn.length;++e)void 0!==wn[e]&&++t;return t}function Cn(){for(var t=5;t<wn.length;++t)if(void 0!==wn[t])return wn[t];return null}function En(){t.count_emval_handles=Sn,t.get_first_emval=Cn}function Tn(t){switch(t){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var e=xn.length?xn.pop():wn.length;return wn[e]={refcount:1,value:t},e}}function Mn(t,e){ve(t,{name:e=re(e),fromWireType:function(t){var e=wn[t].value;return bn(t),e},toWireType:function(t,e){return Tn(e)},argPackAdvance:8,readValueFromPointer:Ge,destructorFunction:null})}function kn(t){if(null===t)return"null";var e=typeof t;return"object"===e||"array"===e||"function"===e?t.toString():""+t}function On(t,e){switch(e){case 2:return function(t){return this.fromWireType(V[t>>2])};case 3:return function(t){return this.fromWireType(W[t>>3])};default:throw new TypeError("Unknown float type: "+t)}}function An(t,e,n){var i=ee(n);ve(t,{name:e=re(e),fromWireType:function(t){return t},toWireType:function(t,e){if("number"!=typeof e&&"boolean"!=typeof e)throw new TypeError('Cannot convert "'+kn(e)+'" to '+this.name);return e},argPackAdvance:8,readValueFromPointer:On(e,i),destructorFunction:null})}function Pn(t,e,n,i,r,s){var a=pn(e,n);t=re(t),r=un(i,r),je(t,(function(){dn("Cannot call "+t+" due to unbound types",a)}),e-1),ye([],a,(function(n){var i=[n[0],null].concat(n.slice(1));return ln(t,vn(t,i,null,r,s),e-1),[]}))}function In(t,e,n){switch(e){case 0:return n?function(t){return B[t]}:function(t){return $[t]};case 1:return n?function(t){return X[t>>1]}:function(t){return H[t>>1]};case 2:return n?function(t){return G[t>>2]}:function(t){return q[t>>2]};default:throw new TypeError("Unknown integer type: "+t)}}function Dn(t,e,n,i,r){e=re(e),-1===r&&(r=4294967295);var s=ee(n),a=function(t){return t};if(0===i){var o=32-8*n;a=function(t){return t<<o>>>o}}var l=-1!=e.indexOf("unsigned");ve(t,{name:e,fromWireType:a,toWireType:function(t,n){if("number"!=typeof n&&"boolean"!=typeof n)throw new TypeError('Cannot convert "'+kn(n)+'" to '+this.name);if(n<i||n>r)throw new TypeError('Passing a number "'+kn(n)+'" from JS side to C/C++ side to an argument of type "'+e+'", which is outside the valid range ['+i+", "+r+"]!");return l?n>>>0:0|n},argPackAdvance:8,readValueFromPointer:In(e,s,0!==i),destructorFunction:null})}function Ln(t,e,n){var i=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][e];function r(t){var e=q,n=e[t>>=2],r=e[t+1];return new i(e.buffer,r,n)}ve(t,{name:n=re(n),fromWireType:r,argPackAdvance:8,readValueFromPointer:r},{ignoreDuplicateRegistrations:!0})}function Nn(t,e){var n="std::string"===(e=re(e));ve(t,{name:e,fromWireType:function(t){var e,i=q[t>>2];if(n){var r=$[t+4+i],s=0;0!=r&&(s=r,$[t+4+i]=0);for(var a=t+4,o=0;o<=i;++o){var l=t+4+o;if(0==$[l]){var u=N(a);void 0===e?e=u:(e+=String.fromCharCode(0),e+=u),a=l+1}}0!=s&&($[t+4+i]=s)}else{var h=new Array(i);for(o=0;o<i;++o)h[o]=String.fromCharCode($[t+4+o]);e=h.join("")}return mi(t),e},toWireType:function(t,e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));var i="string"==typeof e;i||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int8Array||pe("Cannot pass non-string to std::string");var r=(n&&i?function(){return U(e)}:function(){return e.length})(),s=yi(4+r+1);if(q[s>>2]=r,n&&i)z(e,s+4,r+1);else if(i)for(var a=0;a<r;++a){var o=e.charCodeAt(a);o>255&&(mi(s),pe("String has UTF-16 code units that do not fit in 8 bits")),$[s+4+a]=o}else for(a=0;a<r;++a)$[s+4+a]=e[a];return null!==t&&t.push(mi,s),s},argPackAdvance:8,readValueFromPointer:Ge,destructorFunction:function(t){mi(t)}})}function Rn(t,e,n){var i,r;n=re(n),2===e?(i=function(){return H},r=1):4===e&&(i=function(){return q},r=2),ve(t,{name:n,fromWireType:function(t){for(var e=i(),n=q[t>>2],s=new Array(n),a=t+4>>r,o=0;o<n;++o)s[o]=String.fromCharCode(e[a+o]);return mi(t),s.join("")},toWireType:function(t,n){var s=n.length,a=yi(4+s*e),o=i();q[a>>2]=s;for(var l=a+4>>r,u=0;u<s;++u)o[l+u]=n.charCodeAt(u);return null!==t&&t.push(mi,a),a},argPackAdvance:8,readValueFromPointer:Ge,destructorFunction:function(t){mi(t)}})}function zn(t,e){ve(t,{isVoid:!0,name:e=re(e),argPackAdvance:0,fromWireType:function(){},toWireType:function(t,e){}})}function Un(t){t>4&&(wn[t].refcount+=1)}function jn(t,e){var n=ae[t];return void 0===n&&pe(e+" has unknown type "+cn(t)),n}function Fn(t,e){return Tn((t=jn(t,"_emval_take_value")).readValueFromPointer(e))}function Bn(){kt()}function $n(){return B.length}function Xn(t){try{return C.grow(t-F.byteLength+65535>>16),K(C.buffer),1}catch(e){console.error("emscripten_realloc_buffer: Attempted to grow heap from "+F.byteLength+" bytes to "+t+" bytes, but got error: "+e)}}function Hn(t){var e=$n();if(O(t>e),t>2147418112)return x("Cannot enlarge memory, asked to go up to "+t+" bytes, but the limit is 2147418112 bytes!"),!1;for(var n=Math.max(e,16777216);n<t;)(n=n<=536870912?Z(2*n,65536):Math.min(Z((3*n+2147483648)/4,65536),2147418112))===e&&w("Cannot ask for more memory since we reached the practical limit in browsers (which is just below 2GB), so the request would have failed. Requesting only "+B.length);return!!Xn(n)||(x("Failed to grow the heap from "+e+" bytes to "+n+" bytes, not enough memory!"),!1)}function Gn(t){Ei(t)}function qn(t){return Math.log(t)/Math.LN2}function Vn(t){return qn(t)}function Wn(){kt("trap!")}function Yn(t,e,n){$.set($.subarray(e,e+n),t)}function Zn(t){ot(t,"i")}function Kn(t){ot(t,"ii")}function Qn(t){ot(t,"iidiiii")}function Jn(t){ot(t,"iii")}function ti(t){ot(t,"iiii")}function ei(t){ot(t,"iiiii")}function ni(t){ot(t,"jiji")}function ii(t){ot(t,"v")}function ri(t){ot(t,"vi")}function si(t){ot(t,"vii")}function ai(t){ot(t,"viii")}function oi(t){ot(t,"viiii")}function li(t){ot(t,"viiiii")}function ui(t){ot(t,"viiiiii")}ne(),fe=t.BindingError=de(Error,"BindingError"),ge=t.InternalError=de(Error,"InternalError"),Ne(),an(),Je(),hn=t.UnboundTypeError=de(Error,"UnboundTypeError"),En();var hi={},ci={___assert_fail:Bt,___cxa_allocate_exception:$t,___cxa_throw:Ht,___lock:Gt,___unlock:qt,___wasi_fd_close:Yt,___wasi_fd_seek:Kt,___wasi_fd_write:te,__embind_register_bool:_e,__embind_register_class:fn,__embind_register_class_constructor:mn,__embind_register_class_function:_n,__embind_register_emval:Mn,__embind_register_float:An,__embind_register_function:Pn,__embind_register_integer:Dn,__embind_register_memory_view:Ln,__embind_register_std_string:Nn,__embind_register_std_wstring:Rn,__embind_register_void:zn,__emval_decref:bn,__emval_incref:Un,__emval_take_value:Fn,__memory_base:1024,__table_base:0,_abort:Bn,_emscripten_get_heap_size:$n,_emscripten_memcpy_big:Yn,_emscripten_resize_heap:Hn,_exit:Gn,_llvm_log2_f64:Vn,_llvm_trap:Wn,abortStackOverflow:at,memory:C,nullFunc_i:Zn,nullFunc_ii:Kn,nullFunc_iidiiii:Qn,nullFunc_iii:Jn,nullFunc_iiii:ti,nullFunc_iiiii:ei,nullFunc_jiji:ni,nullFunc_v:ii,nullFunc_vi:ri,nullFunc_vii:si,nullFunc_viii:ai,nullFunc_viiii:oi,nullFunc_viiiii:li,nullFunc_viiiiii:ui,setTempRet0:T,table:M},di=t.asm(hi,ci,F);t.asm=di;var fi,pi=t.__ZSt18uncaught_exceptionv=function(){return O(ft,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),O(!pt,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),t.asm.__ZSt18uncaught_exceptionv.apply(null,arguments)},gi=(t.___cxa_demangle=function(){return O(ft,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),O(!pt,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),t.asm.___cxa_demangle.apply(null,arguments)},t.___embind_register_native_and_builtin_types=function(){return O(ft,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),O(!pt,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),t.asm.___embind_register_native_and_builtin_types.apply(null,arguments)},t.___getTypeName=function(){return O(ft,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),O(!pt,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),t.asm.___getTypeName.apply(null,arguments)}),mi=(t._fflush=function(){return O(ft,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),O(!pt,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),t.asm._fflush.apply(null,arguments)},t._free=function(){return O(ft,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),O(!pt,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),t.asm._free.apply(null,arguments)}),yi=t._malloc=function(){return O(ft,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),O(!pt,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),t.asm._malloc.apply(null,arguments)},vi=(t.establishStackSpace=function(){return O(ft,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),O(!pt,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),t.asm.establishStackSpace.apply(null,arguments)},t.globalCtors=function(){return O(ft,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),O(!pt,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),t.asm.globalCtors.apply(null,arguments)}),_i=t.stackAlloc=function(){return O(ft,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),O(!pt,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),t.asm.stackAlloc.apply(null,arguments)},xi=t.stackRestore=function(){return O(ft,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),O(!pt,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),t.asm.stackRestore.apply(null,arguments)},wi=t.stackSave=function(){return O(ft,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),O(!pt,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),t.asm.stackSave.apply(null,arguments)};function bi(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function Si(e){function n(){fi||(fi=!0,k||(mt(),yt(),t.onRuntimeInitialized&&t.onRuntimeInitialized(),O(!t._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),_t()))}e=e||o,bt>0||(rt(),gt(),bt>0||(t.setStatus?(t.setStatus("Running..."),setTimeout((function(){setTimeout((function(){t.setStatus("")}),1),n()}),1)):n(),st()))}function Ci(){var t=_,e=x,n=!1;_=x=function(t){n=!0};try{Qt&&Qt()}catch(t){}_=t,x=e,n&&(w("stdio streams had content in them that was not flushed. you should set EXIT_RUNTIME to 1 (see the FAQ), or make sure to emit a newline when you printf etc."),w("(this may also be due to not including full filesystem support - try building with -s FORCE_FILESYSTEM=1)"))}function Ei(e,n){Ci(),n&&S&&0===e||(S?n||x("program exited (with status: "+e+"), but EXIT_RUNTIME is not set, so halting execution but not exiting the runtime or preventing further async execution (build with EXIT_RUNTIME=1, if you want a true shutdown)"):(k=!0,vt(),t.onExit&&t.onExit(e)),l(e,new bi(e)))}if(t.dynCall_i=function(){return O(ft,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),O(!pt,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),t.asm.dynCall_i.apply(null,arguments)},t.dynCall_ii=function(){return O(ft,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),O(!pt,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),t.asm.dynCall_ii.apply(null,arguments)},t.dynCall_iidiiii=function(){return O(ft,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),O(!pt,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),t.asm.dynCall_iidiiii.apply(null,arguments)},t.dynCall_iii=function(){return O(ft,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),O(!pt,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),t.asm.dynCall_iii.apply(null,arguments)},t.dynCall_iiii=function(){return O(ft,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),O(!pt,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),t.asm.dynCall_iiii.apply(null,arguments)},t.dynCall_iiiii=function(){return O(ft,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),O(!pt,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),t.asm.dynCall_iiiii.apply(null,arguments)},t.dynCall_jiji=function(){return O(ft,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),O(!pt,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),t.asm.dynCall_jiji.apply(null,arguments)},t.dynCall_v=function(){return O(ft,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),O(!pt,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),t.asm.dynCall_v.apply(null,arguments)},t.dynCall_vi=function(){return O(ft,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),O(!pt,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),t.asm.dynCall_vi.apply(null,arguments)},t.dynCall_vii=function(){return O(ft,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),O(!pt,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),t.asm.dynCall_vii.apply(null,arguments)},t.dynCall_viii=function(){return O(ft,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),O(!pt,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),t.asm.dynCall_viii.apply(null,arguments)},t.dynCall_viiii=function(){return O(ft,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),O(!pt,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),t.asm.dynCall_viiii.apply(null,arguments)},t.dynCall_viiiii=function(){return O(ft,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),O(!pt,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),t.asm.dynCall_viiiii.apply(null,arguments)},t.dynCall_viiiiii=function(){return O(ft,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),O(!pt,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),t.asm.dynCall_viiiiii.apply(null,arguments)},t.asm=di,Object.getOwnPropertyDescriptor(t,"intArrayFromString")||(t.intArrayFromString=function(){kt("'intArrayFromString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"intArrayToString")||(t.intArrayToString=function(){kt("'intArrayToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),t.ccall=P,t.cwrap=I,Object.getOwnPropertyDescriptor(t,"setValue")||(t.setValue=function(){kt("'setValue' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getValue")||(t.getValue=function(){kt("'getValue' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"allocate")||(t.allocate=function(){kt("'allocate' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getMemory")||(t.getMemory=function(){kt("'getMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"AsciiToString")||(t.AsciiToString=function(){kt("'AsciiToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stringToAscii")||(t.stringToAscii=function(){kt("'stringToAscii' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"UTF8ArrayToString")||(t.UTF8ArrayToString=function(){kt("'UTF8ArrayToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"UTF8ToString")||(t.UTF8ToString=function(){kt("'UTF8ToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stringToUTF8Array")||(t.stringToUTF8Array=function(){kt("'stringToUTF8Array' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),t.stringToUTF8=z,Object.getOwnPropertyDescriptor(t,"lengthBytesUTF8")||(t.lengthBytesUTF8=function(){kt("'lengthBytesUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"UTF16ToString")||(t.UTF16ToString=function(){kt("'UTF16ToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stringToUTF16")||(t.stringToUTF16=function(){kt("'stringToUTF16' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"lengthBytesUTF16")||(t.lengthBytesUTF16=function(){kt("'lengthBytesUTF16' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"UTF32ToString")||(t.UTF32ToString=function(){kt("'UTF32ToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stringToUTF32")||(t.stringToUTF32=function(){kt("'stringToUTF32' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"lengthBytesUTF32")||(t.lengthBytesUTF32=function(){kt("'lengthBytesUTF32' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"allocateUTF8")||(t.allocateUTF8=function(){kt("'allocateUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stackTrace")||(t.stackTrace=function(){kt("'stackTrace' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"addOnPreRun")||(t.addOnPreRun=function(){kt("'addOnPreRun' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"addOnInit")||(t.addOnInit=function(){kt("'addOnInit' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"addOnPreMain")||(t.addOnPreMain=function(){kt("'addOnPreMain' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"addOnExit")||(t.addOnExit=function(){kt("'addOnExit' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"addOnPostRun")||(t.addOnPostRun=function(){kt("'addOnPostRun' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"writeStringToMemory")||(t.writeStringToMemory=function(){kt("'writeStringToMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"writeArrayToMemory")||(t.writeArrayToMemory=function(){kt("'writeArrayToMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"writeAsciiToMemory")||(t.writeAsciiToMemory=function(){kt("'writeAsciiToMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"addRunDependency")||(t.addRunDependency=function(){kt("'addRunDependency' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"removeRunDependency")||(t.removeRunDependency=function(){kt("'removeRunDependency' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"ENV")||(t.ENV=function(){kt("'ENV' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"FS")||(t.FS=function(){kt("'FS' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"FS_createFolder")||(t.FS_createFolder=function(){kt("'FS_createFolder' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"FS_createPath")||(t.FS_createPath=function(){kt("'FS_createPath' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"FS_createDataFile")||(t.FS_createDataFile=function(){kt("'FS_createDataFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"FS_createPreloadedFile")||(t.FS_createPreloadedFile=function(){kt("'FS_createPreloadedFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"FS_createLazyFile")||(t.FS_createLazyFile=function(){kt("'FS_createLazyFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"FS_createLink")||(t.FS_createLink=function(){kt("'FS_createLink' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"FS_createDevice")||(t.FS_createDevice=function(){kt("'FS_createDevice' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"FS_unlink")||(t.FS_unlink=function(){kt("'FS_unlink' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),Object.getOwnPropertyDescriptor(t,"GL")||(t.GL=function(){kt("'GL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"dynamicAlloc")||(t.dynamicAlloc=function(){kt("'dynamicAlloc' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"loadDynamicLibrary")||(t.loadDynamicLibrary=function(){kt("'loadDynamicLibrary' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"loadWebAssemblyModule")||(t.loadWebAssemblyModule=function(){kt("'loadWebAssemblyModule' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getLEB")||(t.getLEB=function(){kt("'getLEB' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getFunctionTables")||(t.getFunctionTables=function(){kt("'getFunctionTables' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"alignFunctionTables")||(t.alignFunctionTables=function(){kt("'alignFunctionTables' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"registerFunctions")||(t.registerFunctions=function(){kt("'registerFunctions' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"addFunction")||(t.addFunction=function(){kt("'addFunction' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"removeFunction")||(t.removeFunction=function(){kt("'removeFunction' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getFuncWrapper")||(t.getFuncWrapper=function(){kt("'getFuncWrapper' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"prettyPrint")||(t.prettyPrint=function(){kt("'prettyPrint' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"makeBigInt")||(t.makeBigInt=function(){kt("'makeBigInt' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"dynCall")||(t.dynCall=function(){kt("'dynCall' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getCompilerSetting")||(t.getCompilerSetting=function(){kt("'getCompilerSetting' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stackSave")||(t.stackSave=function(){kt("'stackSave' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stackRestore")||(t.stackRestore=function(){kt("'stackRestore' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"stackAlloc")||(t.stackAlloc=function(){kt("'stackAlloc' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"establishStackSpace")||(t.establishStackSpace=function(){kt("'establishStackSpace' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"print")||(t.print=function(){kt("'print' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"printErr")||(t.printErr=function(){kt("'printErr' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"getTempRet0")||(t.getTempRet0=function(){kt("'getTempRet0' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"setTempRet0")||(t.setTempRet0=function(){kt("'setTempRet0' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"callMain")||(t.callMain=function(){kt("'callMain' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"abort")||(t.abort=function(){kt("'abort' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"Pointer_stringify")||(t.Pointer_stringify=function(){kt("'Pointer_stringify' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),Object.getOwnPropertyDescriptor(t,"warnOnce")||(t.warnOnce=function(){kt("'warnOnce' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),t.writeStackCookie=rt,t.checkStackCookie=st,t.abortStackOverflow=at,Object.getOwnPropertyDescriptor(t,"ALLOC_NORMAL")||Object.defineProperty(t,"ALLOC_NORMAL",{configurable:!0,get:function(){kt("'ALLOC_NORMAL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),Object.getOwnPropertyDescriptor(t,"ALLOC_STACK")||Object.defineProperty(t,"ALLOC_STACK",{configurable:!0,get:function(){kt("'ALLOC_STACK' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),Object.getOwnPropertyDescriptor(t,"ALLOC_DYNAMIC")||Object.defineProperty(t,"ALLOC_DYNAMIC",{configurable:!0,get:function(){kt("'ALLOC_DYNAMIC' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),Object.getOwnPropertyDescriptor(t,"ALLOC_NONE")||Object.defineProperty(t,"ALLOC_NONE",{configurable:!0,get:function(){kt("'ALLOC_NONE' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),Object.getOwnPropertyDescriptor(t,"calledRun")||Object.defineProperty(t,"calledRun",{configurable:!0,get:function(){kt("'calledRun' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}}),t.then=function(e){if(fi)e(t);else{var n=t.onRuntimeInitialized;t.onRuntimeInitialized=function(){n&&n(),e(t)}}return t},Ct=function t(){fi||Si(),fi||(Ct=t)},t.run=Si,t.preInit)for("function"==typeof t.preInit&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();return S=!0,Si(),t});t.exports=s}).call(this,n(86),"/")},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||"",i=t[3];if(!i)return n;if(e&&"function"==typeof btoa){var r=(a=i,o=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),"/*# ".concat(l," */")),s=i.sources.map((function(t){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(t," */")}));return[n].concat(s).concat([r]).join("\n")}var a,o,l;return[n].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,i){"string"==typeof t&&(t=[[null,t,""]]);var r={};if(i)for(var s=0;s<this.length;s++){var a=this[s][0];null!=a&&(r[a]=!0)}for(var o=0;o<t.length;o++){var l=[].concat(t[o]);i&&r[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),e.push(l))}},e}},function(t,e){t.exports='<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <title>icon example</title>\n    <link rel="stylesheet" href="./page.css">\n    <link rel="stylesheet" href="./icon.css">\n</head>\n<body>\n    <div class="main">\n        <h1>{%=fontFamily%} example</h1>\n        <ul class="iconfont-list">\n            {%_.each(glyfList, function(glyf) {%}\n            <li>\n            <i class="icon icon-{%=glyf.name%}"></i>\n                <div class="code">{%=glyf.codeName%}</div>\n                <div class="name">{%=glyf.name%}</div>\n            </li>\n            {%});%}\n        </ul>\n    </div>\n\n</body>\n</html>\n'},function(t,e){t.exports='<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <title>symbol example</title>\n    <link rel="stylesheet" href="./page.css">\n    <style>\n        .iconfont-list .icon {\n            width: 42px;\n            height: 42px;\n            transform: scale(1);\n            -webkit-transition: transform .25s ease-out 0s;\n            transition: transform .25s ease-out 0s;\n        }\n        .iconfont-list .icon:hover {\n            transform: scale(1.5);\n        }\n    </style>\n</head>\n<body>\n\n{%=symbolText%}\n    <div class="main">\n        <h1>{%=fontFamily%} symbol example</h1>\n        <ul class="iconfont-list">\n            {%_.each(glyfList, function(glyf) {%}\n            <li>\n                <svg class="icon"><use xlink:href="#{%=glyf.id%}"/></svg>\n                <div class="code">symbol</div>\n                <div class="name">{%=glyf.id%}</div>\n            </li>\n            {%});%}\n        </ul>\n    </div>\n</body>\n</html>\n'},function(t,e){t.exports='/**\n * @file icon.css\n */\n\n@font-face {\n    font-family: "{%=fontFamily%}";\n    src: url("{%=fontFamily%}.eot"); /* IE9 */\n    src: url("{%=fontFamily%}.eot?#iefix") format("embedded-opentype"), /* IE6-IE8 */\n    url("{%=fontFamily%}.woff2") format("woff2"), /* chrome、firefox、opera、Safari, Android, iOS */\n    url("{%=fontFamily%}.woff") format("woff"), /* chrome、firefox */\n    url("{%=fontFamily%}.ttf") format("truetype"), /* chrome、firefox、opera、Safari, Android, iOS 4.2+ */\n    url("{%=fontFamily%}.svg#uxfonteditor") format("svg"); /* iOS 4.1- */\n}\n\n\n.{%=iconPrefix%} {\n    font-family: "{%=fontFamily%}" !important;\n    speak: none;\n    font-style: normal;\n    font-weight: normal;\n    font-variant: normal;\n    text-transform: none;\n    line-height: 1;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n}\n\n{% _.each(glyfList, function(glyf) { %}\n.icon-{%=glyf.name%}:before {\n  content: "{%=glyf.codeName%}";\n}\n{% }); %}\n\n\n'},function(t,e){t.exports="<style>{%=previewCss%}</style>\n<style>\n    @font-face {\n        font-family: '{%=fontFamily%}';\n        {%if(fontFormat=='eot'){%}\n        src: url({%=fontData%});\n        {%} else if(fontFormat=='ttf') {%}\n        src: url({%=fontData%}) format('truetype');\n        {%} else {%}\n        src: url({%=fontData%}) format('{%=fontFormat%}');\n        {%}%}\n    }\n    .icon {\n        font-family: '{%=fontFamily%}';\n    }\n</style>\n<div class=\"main\">\n    <h1>${lang.preview_title}</h1>\n    <ul class=\"iconfont-list\">\n        {%glyfList.forEach(function(glyf) {%}\n        <li>\n            <i class=\"icon\">{%=glyf.code%}</i>\n            <div class=\"code\">{%=glyf.codeName%}</div>\n            <div class=\"name\">{%=glyf.name%}</div>\n        </li>\n        {%});%}\n    </ul>\n    <div class=\"helps\">${lang.preview_first_step}\n<pre>\n@font-face {\n    font-family: '{%=fontFamily%}';\n    src: url('{%=fontFamily%}.eot'); /* IE9*/\n    src: url('{%=fontFamily%}.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */\n    url('{%=fontFamily%}.woff2') format('woff2'), /* chrome、firefox、opera、Safari, Android, iOS */\n    url('{%=fontFamily%}.woff') format('woff'), /* chrome、firefox */\n    url('{%=fontFamily%}.ttf') format('truetype'), /* chrome、firefox、opera、Safari, Android, iOS 4.2+*/\n    url('{%=fontFamily%}.svg#ux{%=fontFamily%}') format('svg'); /* iOS 4.1- */\n}\n</pre>\n${lang.preview_second_step}\n<pre>\n.{%=fontFamily%} {\n    font-family: \"{%=fontFamily%}\" !important;\n    speak: none;\n    font-style: normal;\n    font-weight: normal;\n    font-variant: normal;\n    text-transform: none;\n    line-height: 1;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n}\n\n.icon-tree:after {content: '\\33';}\n</pre>\n${lang.preview_third_step}\n<pre>\n    &lt;i class=\"{%=fontFamily%}\"&gt;&amp;#x33&lt;/i&gt;\n\nor\n\n    &lt;i class=\"{%=fontFamily%} icon-three\"&gt;&lt;/i&gt;\n</pre>\n</div>\n</div>\n"},,,function(t,e,n){"use strict";n.r(e);n(97);var i=new(n(42).a)([["zh-cn",{glyph_name:"命名",left_side_bearing:"左边距",right_side_bearing:"右边距",baseline_offset:"基线偏移",flip:"翻转",mirror:"镜像",scale:"按比例缩放",findglyf:"查找字形",downloadglyf:"导出字形",setunicode:"设置代码点",del:"删除",edit:"编辑",resume:"恢复",prevpage:"上一页",nextpage:"下一页",gotopage:"转到",saveas:"另存为",sync:"同步",syncfont:"同步字体",cancelsync:"取消同步",autosync:"自动同步",fonttype:"字体类型",remoteurl:"远程地址",fontname:"字体名称",fontinfo:"字体信息",ascent:"上升",descent:"下降",linegap:"行间距",usWinAscent:"win上升",usWinDescent:"win下降",calc:"计算",sTypoAscender:"typo上升",sTypoDescender:"typo下降",sTypoLineGap:"typo间距",sxHeight:"x高度",sCapHeight:"大写H高度",yStrikeoutPosition:"删除线位置",yStrikeoutSize:"删除线厚度",underlinePosition:"下划线位置",underlineThickness:"下划线厚度",ySubscriptXSize:"下标水平",ySubscriptYSize:"下标垂直",ySubscriptXOffset:"下标X偏移",ySubscriptYOffset:"下标Y偏移",ySuperscriptXSize:"上标水平",ySuperscriptYSize:"上标垂直",ySuperscriptXOffset:"上标X偏移",ySuperscriptYOffset:"上标Y偏移",achVendID:"供应商ID",usWeightClass:"粗细",usWidthClass:"宽度",panose:"panose",fontFamily:"字体家族",fontSubFamily:"子字体家族",fullName:"完整字体名",uniqueSubFamily:"唯一字体识别名",version:"版本",postScriptName:"PostScript名称",unitsPerEm:"em框大小",lowestRecPPEM:"最小可读尺寸",created:"创建日期",modified:"修改日期",setting:"设置",help:"帮助",confirm:"确定",cancel:"取消",pushurl:"推送地址"}],["en-us",{glyph_name:"Glyph Name",left_side_bearing:"Left Side Bearing",right_side_bearing:"Right Side Bearing",baseline_offset:"Baseline Offset",flip:"Flip",mirror:"Mirror",scale:"Scale By Percent",findglyf:"Find Glyph",downloadglyf:"Download Glyf",setunicode:"Set Unicode",del:"Delete",edit:"Edit",resume:"Resume",prevpage:"Prev Page",nextpage:"Next Page",gotopage:"Go To",saveas:"Save As",sync:"Sync",syncfont:"Sync Font",cancelsync:"Cancel Sync",autosync:"Auto Sync",fonttype:"Font Type",remoteurl:"Remote Url",fontname:"Font Name",fontinfo:"Font Info",ascent:"Ascent",descent:"Descent",linegap:"Linegap",usWinAscent:"win Ascent",usWinDescent:"win Descent",calc:"Calc",sTypoAscender:"typo Ascender",sTypoDescender:"typo Descender",sTypoLineGap:"typo LineGap",sxHeight:"`x` Height",sCapHeight:"`H` Height",yStrikeoutPosition:"Strikeout Position",yStrikeoutSize:"Strikeout Size",underlinePosition:"Underline Position",underlineThickness:"Underline Thickness",ySubscriptXSize:"Subscript x Size",ySubscriptYSize:"Subscript y Size",ySubscriptXOffset:"Subscript x Offset",ySubscriptYOffset:"Subscript y Offset",ySuperscriptXSize:"Superscript x Size",ySuperscriptYSize:"Superscript y Size",ySuperscriptXOffset:"Superscript x Offset",ySuperscriptYOffset:"Superscript y Offset",achVendID:"Vendor ID",usWeightClass:"Weight Class",usWidthClass:"Width Class",panose:"Panose",fontFamily:"Font Family",fontSubFamily:"Font Sub Family",fullName:"Full Name",uniqueSubFamily:"Unique Sub Family",version:"Version",postScriptName:"PostScript Name",unitsPerEm:"EM Size",lowestRecPPEM:"Lowest Recognized PPEM",created:"Created Time",modified:"Modified Time",setting:"Setting",help:"Help",confirm:"Confirm",cancel:"Cancel",pushurl:"Push Url"}],["zh-cn",{msg_not_support_file_type:"不支持的文件类型！",msg_loading_pic:"正在加载图片...",msg_read_pic_error:"读取图片失败...",msg_processing:"正在处理...",msg_input_pic_url:"请输入图片URL!",msg_no_glyph_to_import:"没有找到可导入的字形！",msg_error_read_file:"读取文件出错!",msg_loading:"正在加载...",msg_confirm_del_proj:"是否删除项目?",msg_not_set_sync_info:"没有设置同步信息!",msg_no_sync_font:"没有要同步的字体!",msg_repeat_unicode:"重复的unicode代码点，字形序号：",msg_confirm_del_glyph:"确定删除字形么？",msg_read_file_error:"加载文件错误!",msg_syncing:"正在同步...",msg_sync_success:"同步成功...",msg_sync_failed:"同步失败：",msg_confirm_save_proj:"是否放弃保存当前编辑的项目?",msg_save_success:"保存成功...",msg_save_failed:"保存失败...",msg_input_proj_name:"请输入项目名称：",msg_confirm_gen_names:"生成的字形名称会覆盖原来的名称，确定生成？",msg_not_support_compound_glyf:"暂不支持复合字形!",msg_transform_compound_glyf:"是否转换复合字形为简单字形？",msg_confirm_save_glyph:"是否放弃保存当前编辑的字形?",msg_no_related_glhph:"未找到相关字形!",msg_error_open_proj:"打开项目失败，是否删除项目?",msg_error_del_proj:"删除项目失败，请刷新页面后删除!",msg_no_sort_glyf:"没有要排序的字形!",msg_has_compound_glyf_sort:"包含复合字形,无法进行排序",preview_title:"预览{%=fontFormat%}格式字体",preview_first_step:"第一步：使用font-face声明字体",preview_second_step:"第二步：定义使用{%=fontFamily%}的样式",preview_third_step:"第三步：挑选相应图标并获取字体编码，应用于页面",msg_error_sync_font:"无法获取同步字体！",msg_error_sync_font_address:"字体同步地址不可用！",msg_has_new_font_version:"字体`${fontName}`有新版本，是否同步新版本？",msg_error_sync_font_version:"同步新版本出错！"}],["en-us",{msg_not_support_file_type:"Not support this file type!",msg_loading_pic:"Loading pic...",msg_read_pic_error:"Error reading pic...",msg_processing:"Processing...",msg_input_pic_url:"Please input pic url!",msg_no_glyph_to_import:"No glyph to import",msg_error_read_file:"Read error  file",msg_loading:"Loading...",msg_confirm_del_proj:"Do you want to delete project?",msg_not_set_sync_info:"Not set sync config!",msg_no_sync_font:"No sync font!",msg_repeat_unicode:"Repeat unicode, glyph index are:",msg_confirm_del_glyph:"Do you want to delete glyph？",msg_read_file_error:"Error read file!",msg_syncing:"Synchronizing...",msg_sync_success:"Sync success...",msg_sync_failed:"Sync failed：",msg_confirm_save_proj:"Do you want to save current project before leave?",msg_save_success:"Save success...",msg_save_failed:"Save failed...",msg_input_proj_name:"Please input project name：",msg_confirm_gen_names:"Glyph name will be rewrite by generated name, do you really want to regenerate?",msg_not_support_compound_glyf:"Not support compound glyph currently!",msg_transform_compound_glyf:"Do you want to transform compound glyf to simple glyf?",msg_confirm_save_glyph:"Do you want to cancel save current editing glyph?",msg_no_related_glhph:"Find no related glyph!",msg_error_open_proj:"Open project error, do you want to delete this project?",msg_error_del_proj:"Delete project error, please refresh this page and try delete again!",msg_no_sort_glyf:"No glyph to sort!",msg_has_compound_glyf_sort:"Can't sort glyphs while contains compound glyph.",preview_title:"Preview {%=fontFormat%} Format Font",preview_first_step:"Step 1: Use `{%=fontFamily%}` as font-face.",preview_second_step:"Step 2：Define css styles with `{%=fontFamily%}`.",preview_third_step:"Step 3：Set font unicode to icons on web page.",msg_error_sync_font:"Get sync font error!",msg_error_sync_font_address:"Font sync address not available!",msg_has_new_font_version:"Font `${fontName}` has new version, update now?",msg_error_sync_font_version:"Sync new font version error!"}],["zh-cn",{dialog_savesetting:"保存设置",dialog_resetsetting:"重置为默认设置",dialog_no_input:"没有设置项目!",dialog_adjust_glyph:"调整字形",dialog_glyph_info:"字形信息",dialog_adjust_pos:"调整字形位置",dialog_scale_to_bound:"缩放字形到上下边界",dialog_set_unicode:"请设置查找内容!",dialog_top_bottom_padding:"顶部和底部留白",dialog_find_glyf_by_unicode:"按代码点查找字形",dialog_find_glyf_by_name:"按名字查找字形",dialog_find_glyf_by_index:"按字形序号查找字形",dialog_find_glyf_example:'<b>查找内容：</b> （代码点："$21"，名字： "uniE001"，序号："5"）',dialog_editor_setting:"编辑器设置",dialog_editor_viewercolor:"字体列表颜色",dialog_editor_fontsize:"字体列表大小",dialog_editor_fontsize_xlarge:"特大",dialog_editor_fontsize_large:"大",dialog_editor_fontsize_normal:"中",dialog_editor_fontsize_small:"小",dialog_editor_pageSize:"分页个数",dialog_editor_gridsorption:"吸附到网格线",dialog_editor_shapesorption:"吸附到轮廓",dialog_editor_showgrid:"显示网格",dialog_editor_fillcontour:"填充轮廓",dialog_editor_contourstrokecolor:"轮廓颜色",dialog_editor_contourfillcolor:"轮廓填充颜色",dialog_editor_gapcolor:"网格线颜色",dialog_editor_gap:"网格线间距",dialog_editor_metricscolor:"度量线颜色",dialog_glyf_unicode_example:' &nbsp;&nbsp;可以设置多个unicode，例如："$21,$22,$23"',dialog_unicode_set:"设置代码点",dialog_unicode_start:"起始代码点",dialog_generage_name:"是否生成字形名称",dialog_metrics:"字体度量",dialog_import_and_export:"导入和导出",dialog_combine_svg_single_glyph:"导入svg文件时合并成单个字形",dialog_save_with_glyf_name:"保存字体时同时保存字形命名",dialog_onlinefont:"在线字体",dialog_import_pic:"导入字形图片",dialog_fonturl:"字体URL",dialog_picurl:"图片URL",dialog_picurl_load_title:"指定图片URL加载图片",dialog_picurl_load:"从URL导入图片",dialog_adjustwindow:"适应窗口",dialog_showorigin:"查看原图",dialog_showcontour:"查看轮廓",dialog_choosepic:"选择图片",dialog_choosepic_tip:"请选择字形图片，支持jpg、gif、png、bmp、svg。",dialog_preprocess:"预处理",dialog_reverse:"反转",dialog_gaussblur:"高斯模糊",dialog_contrast:"对比度",dialog_contour:"轮　廓",dialog_binarize_threshold:"二值化阈值",dialog_threshold_default:"预设",dialog_threshold_mean:"均值",dialog_threshold_minimum:"谷底最小值",dialog_threshold_intermodes:"双峰平均",dialog_threshold_ostu:"大津法",dialog_threshold_isodata:"ISODATA法",dialog_pic_smooth:"平滑",dialog_pic_open:"消除杂点",dialog_pic_close:"消除孔洞",dialog_pic_dilate:"膨胀",dialog_pic_enrode:"腐蚀",dialog_export_glyf:"导出字形",dialog_glyf_name:"图标名称",dialog_color:"颜色",dialog_size:"大小",dialog_download_svg:"下载SVG",dialog_download_png:"下载PNG",dialog_alert_set_sync_name:"请设置同步文件名称!",dialog_alert_set_url_or_syncurl:"需要设置远程地址或者推送地址至少一项!",dialog_alert_set_sync_url:"需要设置远程同步地址!",dialog_alert_set_filetype:"请设置文件类型!"}],["en-us",{dialog_savesetting:"Save Setting",dialog_resetsetting:"Reset to Default Setting",dialog_no_input:"No Input!",dialog_adjust_glyph:"Adjust Glyph",dialog_glyph_info:"Glyph Info",dialog_adjust_pos:"Adjust Glyph Position",dialog_scale_to_bound:"Scale to Ascent and Descent",dialog_set_unicode:"Please Input Unicode!",dialog_top_bottom_padding:"Top and Bottom Padding",dialog_find_glyf_by_unicode:"Find Glyph by Unicode",dialog_find_glyf_by_name:"Find Glyph by Name",dialog_find_glyf_by_index:"Find Glyph by Index",dialog_find_glyf_example:'example: Unicode："$21", Glyph Name： "uniE001", Index："5"',dialog_editor_setting:"Editor Setting",dialog_editor_viewercolor:"Glhph Viewer Color",dialog_editor_fontsize:"Font Size",dialog_editor_fontsize_xlarge:"xLarge",dialog_editor_fontsize_large:"Large",dialog_editor_fontsize_normal:"Normal",dialog_editor_fontsize_small:"Small",dialog_editor_pageSize:"Page Size",dialog_editor_gridsorption:"Adsorb to Grid",dialog_editor_shapesorption:"Adsorb to Contour",dialog_editor_showgrid:"Show Grid",dialog_editor_fillcontour:"Fill Contour",dialog_editor_contourstrokecolor:"Contour Stroke Color",dialog_editor_contourfillcolor:"Contour Fill Color",dialog_editor_gapcolor:"Gap Color",dialog_editor_gap:"Gap Size",dialog_editor_metricscolor:"Metrics Color",dialog_glyf_unicode_example:' &nbsp;&nbsp; Support Multi Unicodes, Example："$21,$22,$23"',dialog_unicode_set:"Set Unicode",dialog_unicode_start:"Start Unicode Code",dialog_generage_name:"Generate Glyph Name",dialog_metrics:"Metrics",dialog_import_and_export:"Import and Export",dialog_combine_svg_single_glyph:"Combine svg to Single Glyph",dialog_save_with_glyf_name:"save glyph name when exporting font",dialog_onlinefont:"Online Font",dialog_import_pic:"Import Pic",dialog_fonturl:"Font URL",dialog_picurl:"Pic URL",dialog_picurl_load_title:"Set Pic Url to Load from",dialog_picurl_load:"Imort Pic From Url",dialog_adjustwindow:"Adjust To Window",dialog_showorigin:"Show Origin",dialog_showcontour:"Show Contour",dialog_choosepic:"Choose Pic",dialog_choosepic_tip:"Please Choose A Pic,eg. jpg,gif,png,bmp,svg.",dialog_preprocess:"Pre Process",dialog_reverse:"Reverse",dialog_gaussblur:"Gauss Blur",dialog_contrast:"Contrast",dialog_contour:"Contour",dialog_binarize_threshold:"Binarize Threshold",dialog_threshold_default:"Default",dialog_threshold_mean:"Mean",dialog_threshold_minimum:"Minimum",dialog_threshold_intermodes:"Intermodes",dialog_threshold_ostu:"Ostu",dialog_threshold_isodata:"ISODATA",dialog_pic_smooth:"Smooth",dialog_pic_open:"Open",dialog_pic_close:"Close",dialog_pic_dilate:"Dilate",dialog_pic_enrode:"Enrode",dialog_export_glyf:"Export Glyf",dialog_glyf_name:"Glyf Name",dialog_color:"Color",dialog_size:"Size",dialog_download_svg:"Download SVG",dialog_download_png:"Download PNG",dialog_alert_set_sync_name:"Please set sync name!",dialog_alert_set_url_or_syncurl:"Please set sync url or pushurl!",dialog_alert_set_sync_url:"Please set sync url!",dialog_alert_set_filetype:"Please set at lease one fonttype!"}]],window.language),r=n(7);var s={show(t,e,n){clearTimeout(this.showtimer);let r=$("#loading");return r.attr("data-status",n||"").find("span").html(t||i.lang.msg_loading),r.show(),e&&(this.showtimer=setTimeout(this.hide,e)),this},error(t,e){return this.show(t,e,"error"),this},warn(t,e){return this.show(t,e,"warn"),this},hide(){$("#loading").hide()}};function a(t){let e=this;document.body.addEventListener("click",(function(n){e.listening&&(t.viewer===n.target||t.viewer.contains(n.target)?e.viewer.focus():e.viewer.blur(),t.editor&&(t.editor===n.target||t.editor.contains(n.target)?e.editor.focus():e.editor.blur()))}))}function o(){let t=this;document.body.addEventListener("keydown",(function(e){t.listening&&(e.ctrl=e.ctrlKey||e.metaKey,65===e.keyCode&&e.ctrl&&(e.preventDefault(),e.stopPropagation()),e.keyCode>=112&&e.keyCode<=119&&116!==e.keyCode?(e.preventDefault(),e.stopPropagation(),t.fire("function",{keyCode:e.keyCode})):83===e.keyCode&&e.ctrl?(e.preventDefault(),e.stopPropagation(),e.shiftKey?t.fire("save",{saveType:"force"}):t.fire("save")):86===e.keyCode&&e.ctrl&&(e.preventDefault(),e.stopPropagation(),t.fire("paste")))}))}const l={init(t){a.call(this,t),o.call(this,t)},data:{},setting:{},listening:!0,loading:s};r.a.mixin(l);var u=l,h=n(39),c=n(45),d=n(29),f=n(2),p=n(11);class g{constructor(t){this.options=t||{};let e=$("#model-dialog");e.find(".modal-title").html(this.title||"");let n=p.a.format(this.getTpl(),i);e.find(".modal-body").html(n),this.nofooter?e.find(".modal-footer").hide():e.find(".modal-footer").show(),e.on("hidden.bs.modal",function(t){u.listening=!0,e&&(this.onDispose&&this.onDispose(),this.style&&e.removeClass(this.style),e.off("hidden.bs.modal"),e.find(".btn-confirm").off("click"),e.find(".modal-body").html(""),delete this.options,delete this.setting,delete this.oldSetting,e=null)}.bind(this)),e.find(".btn-confirm").on("click",function(){let t=this.validate();!1!==t&&(f.a.equals(t,this.oldSetting)||this.options.onChange&&this.options.onChange.call(this,t),e.modal("hide"))}.bind(this))}getTpl(){return""}getDialog(){return $("#model-dialog")}validate(){return!0}setFields(t){return this.getDialog().find("[data-field]").each((function(e,n){let i=n.getAttribute("data-field"),r=n.getAttribute("data-type")||n.type,s=function(t,e){let n=e.split(".");if(1===n.length)return t[e];let i,r=t;for(;null!=r&&(i=n.shift());)r=r[i];return r}(t,i);if(void 0!==s)if("checkbox"===r)n.checked=s?"checked":"";else if("unicode"===r)n.value=(s||[]).map((function(t){return"$"+t.toString(16).toUpperCase()})).join(",");else if("datetime-local"===r){let t;t="string"==typeof s?new Date(Date.parse(s)):/^\d+$/.test(s)?new Date(+s):s,n.value=t.getFullYear()+"-"+p.a.pad(t.getMonth()+1,2)+"-"+p.a.pad(t.getDate(),2)+"T"+p.a.pad(t.getHours(),2)+":"+p.a.pad(t.getMinutes(),2)}else(n=$(n)).val(s)})),this.oldSetting=t,this}getFields(t={}){let e=/^(?:\$[A-F0-9]+)(?:\,\$[A-F0-9]+)*$/gi;return this.getDialog().find("[data-field]").each((function(n,i){let r,s=i.getAttribute("data-field"),a=i.getAttribute("data-type")||i.type,o=i.value.trim();"checkbox"===a?r=!!i.checked:"unicode"===a?r=o?e.test(o)?o.split(",").map((function(t){return Number("0x"+t.slice(1))})):o.split("").map((function(t){return t.charCodeAt(0)})):[]:"datetime-local"===a?r=o?Date.parse(o.replace("T"," ")):0:"number"===a?o?(o=+o,i.getAttribute("data-ceil")&&(o=Math.floor(o)),r=o):r=null:r=o,void 0!==r&&function(t,e,n){let i=e.split(".");if(1===i.length)t[e]=n;else{let e,r=i.pop(),s=t;for(;null!=s&&(e=i.shift());)s=s[e];null!=s&&(s[r]=n)}}(t,s,r)})),t}show(t){u.listening=!1;let e=$("#model-dialog");return this.style&&e.addClass(this.style),e.modal("show"),this.set(t),this}hide(t){void 0!==t&&this.options.onChange&&this.options.onChange.call(this,t),$("#model-dialog").modal("hide")}set(t){return this.setting=t,this}get(){return this.setting}dispose(){$("#model-dialog").modal("hide")}}g.derive=function(t){class e extends g{}return Object.assign(e.prototype,t),e};const m='<div class="input-group"><div class="input-group-btn"><button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">'+i.lang.dialog_unicode_start+' <span class="caret"></span></button><ul class="dropdown-menu" role="menu"><li><a href="javascript:$(\'#setting-text-unicode\').val(\'$21\')">ascii</a></li><li><a href="javascript:$(\'#setting-text-unicode\').val(\'$E001\')">unicode private data</a></li></ul></div><input id="setting-text-unicode" type="text" class="form-control" value="$E001"></div><div class="form-inline"><div class="input-group input-group-sm"><span class="input-group-addon">${lang.dialog_generage_name}</span><span class="form-control"><input id="setting-text-unicode-name" type="checkbox" checked="checked"></span></div></div>';var y=g.derive({title:i.lang.dialog_unicode_set,getTpl:()=>m,validate(){let t=$("#setting-text-unicode").val();return t.match(/^\$[A-F0-9]+$/i)?this.setting={unicode:t,isGenerateName:$("#setting-text-unicode-name").is(":checked")}:(alert("代码点设置不正确"),!1)}}),v=g.derive({title:i.lang.fontinfo,getTpl:()=>n(98),set(t){this.setFields(t)},validate(){return this.getFields()}}),_=g.derive({title:i.lang.dialog_adjust_pos,getTpl:()=>n(99),set(t){this.setFields(t||{})},validate(){let t=this.getFields();return void 0===t.leftSideBearing&&void 0===t.rightSideBearing&&void 0===t.verticalAlign?(alert(i.lang.dialog_no_input),!1):t}}),x=g.derive({title:i.lang.dialog_adjust_glyph,getTpl:()=>n(100),set(t){this.setFields(t||{})},validate(){let t=this.getFields();return void 0===t.reverse&&void 0===t.mirror&&void 0===t.scale&&void 0===t.ajdustToEmBox?(alert(i.lang.dialog_no_input),!1):t}}),w={100:"Ultra-light",200:"Extra-light",300:"Light",400:"Semi-light",500:"Medium (normal)",600:"Semi-bold",700:"Bold",800:"Extra-Bold",900:"Ultra-bold"},b={1:"Ultra-condensed",2:"Extra-condensed",3:"Condensed",4:"Semi-condensed",5:"Medium (normal)",6:"Semi-expanded",7:"Expanded",8:"Extra-expanded",9:"Ultra-expanded"},S={bFamilyType:["Any","No Fit","Text and Display","Script","Decorative","Pictorial"],bSerifStyle:["Any","No Fit","Cove","Obtuse Cove","Square Cove","Obtuse Square Cove","Square","Thin","Bone","Exaggerated","Triangle","Normal Sans","Obtuse Sans","Perp Sans","Flared","Rounded"],bWeight:["Any","No Fit","Very Light","Light","Thin","Book","Medium","Demi","Bold","Heavy","Black","Nord"],bProportion:["Any","No Fit","Old Style","Modern","Even Width","Expanded","Condensed","Very Expanded","Very Condensed","Monospaced"],bContrast:["Any","No Fit","None","Very Low","Low","Medium Low","Medium","Medium High","High","Very High"],bStrokeVariation:["Any","No Fit","Gradual/Diagonal","Gradual/Transitional","Gradual/Vertical","Gradual/Horizontal","Rapid/Vertical","Rapid/Horizontal","Instant/Vertical"],bArmStyle:["Any","No Fit","Straight Arms/Horizontal","Straight Arms/Wedge","Straight Arms/Vertical","Straight Arms/Single Serif","Straight Arms/Double Serif","Non-Straight Arms/Horizontal","Non-Straight Arms/Wedge","Non-Straight Arms/Vertical","Non-Straight Arms/Single Serif","Non-Straight Arms/Double Serif"],bLetterform:["Any","No Fit","Normal/Contact","Normal/Weighted","Normal/Boxed","Normal/Flattened","Normal/Rounded","Normal/Off Center","Normal/Square","Oblique/Contact","Oblique/Weighted","Oblique/Boxed","Oblique/Flattened","Oblique/Rounded","Oblique/Off Center","Oblique/Square"],bMidline:["Any","No Fit","Standard/Trimmed","Standard/Pointed","Standard/Serifed","High/Trimmed","High/Pointed","High/Serifed","Constant/Trimmed","Constant/Pointed","Constant/Serifed","Low/Trimmed","Low/Pointed","Low/Serifed"],bXHeight:["Any","No Fit","Constant/Small","Constant/Standard","Constant/Large","Ducking/Small","Ducking/Standard","Ducking/Large"]},C=g.derive({title:i.lang.dialog_metrics,style:"setting-metrics",getTpl(){let t=n(101),e={lang:i.lang,weightOptions:Object.keys(w).map((function(t){return'<option value="'+t+'">'+w[t]+"</option>"})).join(""),widthOptions:Object.keys(b).map((function(t){return'<option value="'+t+'">'+b[t]+"</option>"})).join(""),panoseOptions:Object.keys(S).map((function(t,e){return'<div class="form-group"><div class="input-group input-group-sm"><span class="input-group-addon">'+(e+1)+"-"+t+'</span><select data-field="'+t+'" data-type="number" class="form-control">'+S[t].map((function(t,e){return'<option value="'+e+'">'+t+"</option>"})).join("")+"</select></div></div>"})).join("")};return p.a.format(t,e)},set(t){this.setFields(t);let e=this;$("#setting-calc-metrics").on("click",(function(t){t.preventDefault(),t.stopPropagation();let n=u.ttfManager.calcMetrics();e.setFields(n)}))},onDispose(){$("#setting-calc-metrics").off("click")},validate(){return this.getFields()}}),E=[{name:"fonteditor",url:"./font/fonteditor.ttf",from:"fonteditor图标"},{name:"fontawesome图标",url:"http://www.bootcss.com/p/font-awesome/assets/font/fontawesome-webfont.woff",from:"fontawesome"},{name:"百度移动图标",url:"http://m.baidu.com/static/index/iconfont/iconfont_78d9aaf6.woff",from:"baidu"},{name:"百度健康图标",url:"http://vs-static.baidu.com/m-health/new-composite/asset/common/css/font/baiduHealth.woff",from:"baidu"},{name:"百度健康医药馆图标",url:"http://vs-static.baidu.com/m-health/med-detail/201412301413/asset/common/css/fonts/fonteditor.woff",from:"baidu"},{name:"百度教育图标",url:"http://vs-static.baidu.com/edu/m/asset/common/css/font/i-edu.woff",from:"baidu"},{name:"阿里妈妈图标",url:"http://mkwiser.sinaapp.com/font/font_1438789372_0128245.ttf",from:"iconfont"},{name:"淘宝图标",url:"http://mkwiser.sinaapp.com/font/font_1438789398_3645205.ttf",from:"iconfont"},{name:"天猫图标",url:"http://mkwiser.sinaapp.com/font/font_1438789427_2512155.ttf",from:"iconfont"},{name:"1688 图标",url:"http://mkwiser.sinaapp.com/font/font_1438789809_9884617.ttf",from:"iconfont"},{name:"手机淘宝图标",url:"http://mkwiser.sinaapp.com/font/font_1438789803_2537308.ttf",from:"iconfont"},{name:"阿里通信图标",url:"http://mkwiser.sinaapp.com/font/font_1438789794_5659146.ttf",from:"iconfont"},{name:"Alibaba国际站图标",url:"http://mkwiser.sinaapp.com/font/font_1438789716_42745.ttf",from:"iconfont"},{name:"支付宝钱包图标",url:"http://mkwiser.sinaapp.com/font/font_1438789709_7418613.ttf",from:"iconfont"},{name:"商家产品图标",url:"http://mkwiser.sinaapp.com/font/font_1438789702_183668.ttf",from:"iconfont"}],T=g.derive({title:i.lang.dialog_onlinefont,nofooter:!0,getTpl(){let t='<div class="list-group list-font-online">';return E.forEach((function(e,n){t+='<a data-url="'+e.url+'" href="'+e.url+'" class="list-group-item"><span class="from">'+p.a.encodeHTML(e.from)+"</span>"+(n+1)+". "+p.a.encodeHTML(e.name)+"</a>"})),t+="</div>",t},set(){let t=this,e=this.getDialog();e.find(".list-group").on("click",".list-group-item",(function(n){n.preventDefault(),n.stopPropagation();let i=$(this).attr("data-url");e.find(".list-group").off("click",".list-group-item"),t.options.onChange&&t.options.onChange.call(this,decodeURIComponent(i)),$("#model-dialog").modal("hide")}))}});const M='<div class="input-group input-group-sm"><span class="input-group-addon">'+i.lang.dialog_fonturl+'</span><input data-field="url" type="text" class="form-control"></div>';var k=g.derive({title:i.lang.dialog_fonturl,getTpl:()=>M,validate(){let t=this.getFields();if(t.url)return t.url}}),O=n(13);const A=/^(?:\$[A-F0-9]+)(?:\,\$[A-F0-9]+)*$/gi;var P=g.derive({title:i.lang.dialog_glyph_info,getTpl:()=>n(102),set(t){$("#setting-glyf-unicode").on("blur",(function(t){let e=$(this).val(),n=$("#setting-glyf-name");n.val()||(e.match(A)?e=Number("0x"+e.split(",")[0].slice(1)):e&&(e=e.charCodeAt(0)),n.val(O.a.getUnicodeName(e)))})),this.setFields(t||{})},onDispose(){$("#setting-glyf-unicode").off("blur")},validate(){let t=this.getFields();return void 0===t.leftSideBearing&&void 0===t.rightSideBearing&&void 0===t.unicode&&void 0===t.name?(alert(i.lang.dialog_no_input),!1):t}}),I=g.derive({title:i.lang.dialog_editor_setting,getTpl:()=>n(103),set(t){this.setting=f.a.clone(t),this.setFields(this.setting);let e=this;$("#setting-editor-default").on("click",(function(t){t.preventDefault(),e.setting=u.setting.getDefault("editor"),e.setFields(e.setting),e.oldSetting=null}))},onDispose(){$("#setting-editor-default").off("click")},validate(){return this.getFields(f.a.clone(this.setting))}});const D=/^(?:\$[A-F0-9]+)(?:\,\$[A-F0-9]+)*$/gi,L='<div id="setting-find-condition"><label class="radio-inline"><input type="radio" name="setting-find-condition" value="unicode" checked="checked">'+i.lang.dialog_find_glyf_by_unicode+'</label><label class="radio-inline"><input type="radio" name="setting-find-condition" value="name">'+i.lang.dialog_find_glyf_by_name+'</label><label class="radio-inline"><input type="radio" name="setting-find-condition" value="index">'+i.lang.dialog_find_glyf_by_index+'</label></div><p class="form-line">'+i.lang.dialog_find_glyf_example+'</p><div><input value="" id="setting-find-value" class="form-control"></div>';var N=g.derive({title:i.lang.findglyf,getTpl:()=>L,set(t){$("#setting-find-condition").on("click",'input[type="radio"]',(function(){$("#setting-find-value").focus()}))},onDispose(){$("#setting-find-condition").off("click",'input[type="radio"]')},validate(){let t=$("#setting-find-condition").find('input[type="radio"]:checked').val(),e=$("#setting-find-value").val();if(!e.length)return alert(i.lang.dialog_set_unicode),!1;if("unicode"===t)e=e.match(D)?e.split(","):e.split("").map((function(t){return"$"+t.charCodeAt(0).toString(16)}));else if("index"===t){if(!e.match(/^\d+(,\d+)*$/))return alert(i.lang.dialog_set_unicode),!1;e=e.split(",")}let n={};return n[t]=e,n}}),R=n(89),z=n.n(R),U=g.derive({title:i.lang.dialog_import_and_export,getTpl:()=>z.a,set(t){this.setting=f.a.clone(t),this.setFields(this.setting);let e=this;$("#setting-ie-default").on("click",(function(t){t.preventDefault(),e.setting=u.setting.getDefault("ie"),e.setFields(e.setting),e.oldSetting=null}))},onDispose(){$("#setting-ie-default").off("click")},validate(){return this.getFields(f.a.clone(this.setting))}}),j=n(16),F=n(32),B=function(t){return{width:t.width,height:t.height,gray:t.gray,binarize:t.binarize,data:t.data.slice(0)}};function X(t,e,n,i,r){let s,a,o,l,u,h,c,d;for(a=0;a<n;a++)for(s=0;s<e;s++){for(h=0,u=0,o=-i;o<=i;o++)for(l=-i;l<=i;l++)c=s+o,(c<0||c>=e)&&(c=s-o),d=a+l,(d<0||d>=n)&&(d=a-l),h+=t[c+d*e]*r[u++];t[s+a*e]=Math.floor(h)}return t}function H(t,e,n){e=Math.floor((e||3)/2);let i=t.data,r=t.width,s=t.height,a=function(t,e){let n,i,r,s=[],a=0,o=1/(2*Math.PI*e*e),l=-1/(2*e*e);for(r=0,n=-t;n<=t;n++)for(i=-t;i<=t;i++){let t=o*Math.exp(l*(n*n+i*i));s[r++]=t,a+=t}for(r=0,n=-t;n<=t;n++)for(i=-t;i<=t;i++)s[r++]/=a;return s}(e,n||1.5);return t.data=X(i,r,s,e,a),t}function G(t,e){e=Math.floor((e||3)/2);let n=t.data,i=t.width,r=t.height,s=function(t){let e=[],n=Math.pow(2*t+1,2),i=1/n;for(let t=0;t<n;t++)e[t]=i;return e}(e);return t.data=X(n,i,r,e,s),t}function q(t,e,n,i,r,s,a){for(let o=0,l=s.length;o<l;o++){let l=i+s[o].x,u=r+s[o].y;l<0||l>=e||u<0||u>=n||(t[u*e+l]=a)}return!1}function V(t,e,n,i,r,s){let a=r*e;return i>0&&t[i-1+a]===s||r>0&&t[i+a-e]===s||i<e-1&&t[i+1+a]===s||r<n-1&&t[i+a+e]===s}function W(t,e,n="cross",i){i=Math.floor((i||2)/2);let r=255,s=0;"erode"===e&&(r=0,s=255);let a=t.width,o=t.height,l=t.data,u=function(t,e){let n,i,r=[];if("square"===t)for(n=0;n<2*e+1;n++)for(i=0;i<2*e+1;i++)r.push({x:n-e,y:i-e});else if("circle"===t)for(n=0;n<2*e+1;n++)for(i=0;i<2*e+1;i++){Math.pow(n-e,2)+Math.pow(i-e,2)<=e*e&&r.push({x:n-e,y:i-e})}else if("rhomb"===t)for(n=-e;n<=e;n++)for(i=-e;i<=e;i++)Math.abs(n)+Math.abs(i)<=e&&r.push({x:n,y:i});else if("cross"===t){for(n=e;n>0;n--)r.push({x:0,y:-n}),r.push({x:-n,y:0}),r.push({x:0,y:n}),r.push({x:n,y:0});r.push({x:0,y:0})}return r}(n,i),h=l.slice(0);for(let t=0,e=0;t<o;t++){e=t*a;for(let n=0;n<a;n++)l[e+n]===r&&V(l,a,o,n,t,s)&&q(h,a,o,n,t,u,s)}return t.data=h,t}function Y(t,e,n){return W(t,"dilate",e,n)}function Z(t,e,n){return W(t,"erode",e,n)}function K(t){let e=[],n=0,i=256;for(;n<i;n++)e[n]=0;let r=t.data;for(n=0,i=r.length;n<i;n++)e[r[n]]++;return e}function Q(t){let e=0;for(let n=1;n<255;n++)if(t[n-1]<t[n]&&t[n+1]<t[n]&&(e++,e>2))return!1;return 2===e}var J={mean(t){let e=0,n=0;for(let i=0;i<256;i++)n+=t[i],e+=i*t[i];return e/n},minimum(t){let e,n=0,i=[],r=[];for(e=0;e<256;e++)i[e]=t[e],r[e]=t[e];for(;!Q(r);){for(r[0]=(i[0]+i[0]+i[1])/3,e=1;e<255;e++)r[e]=(i[e-1]+i[e]+i[e+1])/3;if(r[255]=(i[254]+i[255]+i[255])/3,n++,n>=1e3)return-1;i=r.slice(0)}let s=!1;for(e=1;e<255;e++)if(r[e-1]<r[e]&&r[e+1]<r[e]&&(s=!0),s&&r[e-1]>=r[e]&&r[e+1]>=r[e])return 255-(e-1);return-1},intermodes(t){let e,n,i=0,r=[],s=[];for(e=0;e<256;e++)r[e]=t[e],s[e]=t[e];for(;!Q(s);){for(s[0]=(r[0]+r[0]+r[1])/3,e=1;e<255;e++)s[e]=(r[e-1]+r[e]+r[e+1])/3;if(s[255]=(r[254]+r[255]+r[255])/3,i++,i>=1e3)return-1;r=s.slice(0)}let a=[0,0];for(e=1,n=0;e<255;e++)s[e-1]<s[e]&&s[e+1]<s[e]&&(a[n++]=e-1);return 255-(a[0]+a[1])/2},ostu(t){let e,n,i,r,s,a,o,l,u,h=0,c=0,d=0,f=0,p=0,g=0,m=0;for(l=0;l<256&&0===t[l];l++);for(u=255;u>l&&0===t[l];u--);if(u===l)return u;if(l+1===u)return l;for(e=l;e<=u;e++)h+=t[e];for(g=0,e=l;e<=u;e++)g+=t[e]*e;for(a=-1,e=l;e<u;e++)c+=t[e],d=h-c,n=c/h,i=d/h,f+=t[e]*e,p=g-f,r=f/c,s=p/d,o=n*i*(r-s)*(r-s),o>a&&(a=o,m=e);return m},isoData(t){let e,n,i,r,s,a=0,o=t.length;for(e=1;e<o;e++)if(t[e]>0){a=e+1;break}for(;;){for(n=0,r=0,e=0;e<a;e++)r+=t[e],n+=t[e]*e;for(s=0,i=0,e=a+1;e<o;e++)i+=t[e],s+=t[e]*e;if(r>0&&i>0&&(n/=r,s/=i,a===Math.round((n+s)/2)))break;if(a++,a>o-2)return 0}return a}};function tt(t,e){return(J[e]||J.mean)(t)}class et{constructor(t){t&&this.set(t)}set(t){return t.gray||(t=function(t,e){let n=t.width,i=t.height,r=0,s=t.data,a=[];for(let t=0;t<i;t++){r=t*n;for(let t=0;t<n;t++){let n=4*(t+r),i=255;if(s[n+3]<25)i=255;else{let t=s[n+0],e=s[n+1],r=s[n+2];i=Math.floor(.299*t+.587*e+.114*r)}a[t+r]=e?255-i:i}}return{width:n,height:i,gray:!0,data:a}}(t)),this.imageData=t,this.originData=null,this}get(){return this.imageData}getOrigin(){return this.originData}save(){return this.originData=B(this.imageData),this}clone(){return new et(B(this.imageData))}restore(){return this.originData&&(this.imageData=B(this.originData)),this}getHistogram(){return K(this.imageData)}getThreshold(t){return tt(this.getHistogram(),t)}binarize(t){return this.imageData=function(t,e){e=e||200;let n=t.width,i=t.height,r=t.data;for(let t=0,s=0;t<i;t++){s=t*n;for(let t=0;t<n;t++)r[s+t]=r[s+t]<e?0:255}return t.binarize=!0,t}(this.imageData,t),this}reverse(){return this.imageData=function(t){let e=t.data;for(let t=0,n=e.length;t<n;t++)e[t]=255-e[t];return t}(this.imageData),this}close(t,e){return this.imageData.binarize||this.binarize(),this.imageData=function(t,e,n){return Z(Y(t,e,n))}(this.imageData,t,e),this}open(t,e){return this.imageData.binarize||this.binarize(),this.imageData=function(t,e,n){return Y(Z(t,e,n))}(this.imageData,t,e),this}dilate(t,e){return this.imageData.binarize||this.binarize(),this.imageData=Y(this.imageData,t,e),this}erode(t,e){return this.imageData.binarize||this.binarize(),this.imageData=Z(this.imageData,t,e),this}gaussBlur(t,e){return this.imageData=H(this.imageData,t,e),this}blur(t){return this.imageData=G(this.imageData,t),this}sharp(t){return this.imageData=function(t,e=.6){let n=t.width,i=t.height,r=t.data;for(let t=0,s=1;s<i;s++){t=s*n;for(let i=1;i<n;i++){let s=i+t,a=r[s]-(r[s-1]+r[s-n]+r[s-n-1])/3;r[s]+=Math.floor(a*e)}}return t}(this.imageData,t),this}brightness(t,e){return this.imageData=function(t,e,n){e=e||0,n=n||0;let i=t.data,r=e/50,s=n/50,a=Math.tan((45+44*s)*Math.PI/180);for(let t=0,e=i.length;t<e;t++)i[t]=Math.floor((i[t]-127.5*(1-r))*a+127.5*(1+r));return t}(this.imageData,t,e),this}dispose(){this.imageData=this.originData=null}}function nt(t,e){let n=2*(e=Math.floor((e||2)/2))+1;for(let i=0,r=t.length;i<r;i++){let s,a=t[i],o=a.x,l=a.y;for(let n=0;n<e;n++)s=(i+r-n)%r,o+=t[s].x,l+=t[s].y,s=(i+r+n)%r,o+=t[s].x,l+=t[s].y;a.x=Math.floor(o/n),a.y=Math.floor(l/n)}return t}function it(t){let e=[];for(let n=0,i=t.length;n<i;n++){let r=t[n],s=t[n===i-1?0:n+1];if(e.push(r),Math.abs(r.x-s.x)>1){let t,n;if(r.x<s.x)for(t=r.x+1,n=s.x;t<n;t++)e.push({x:t,y:r.y});else for(t=r.x-1,n=s.x;t>n;t--)e.push({x:t,y:r.y})}}return e}var rt=n(14);var st={getCos(t,e,n,i){let r,s,a,o;return"number"==typeof t?(r=t,s=e,a=n,o=i):(r=e.x-t.x,s=e.y-t.y,a=n.x-e.x,o=n.y-e.y),(r*a+s*o)/Math.sqrt(r*r+s*s)/Math.sqrt(a*a+o*o)},getDist:(t,e,n)=>Math.sqrt(function(t,e,n){let i=e.y-t.y,r=t.x-e.x;if(0===i&&0===r)return Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2);if(0===i)return Math.pow(n.y-t.y,2);if(0===r)return Math.pow(n.x-t.x,2);let s=e.x*t.y-t.x*e.y;return Math.pow(i*n.x+r*n.y+s,2)/(i*i+r*r)}(t,e,n)),dist:(t,e)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),normalize(t){let e=1/Math.sqrt(t.x*t.x+t.y*t.y);return t.x=t.x*e,t.y=t.y*e,t}};const at=st.getCos;function ot(t,e){let n=80*e,i=30*e,r=12*e,s=3*e,a=(t=rt.a.makeLink(t))[0],o=a;do{o.ndist=o.next.pdist=(l=o,u=o.next,Math.sqrt(Math.pow(l.x-u.x,2)+Math.pow(l.y-u.y,2))),Math.abs(o.x-o.next.x)<=s&&Math.abs(o.y-o.next.y)<=s&&(o.ntiny=!0,o.next.ptiny=!0);let t=at(o.ptiny?o.prev.prev:o.prev,o,o.ntiny?o.next.next:o.next);o.theta=Math.acos(t>1?1:t),Math.abs(o.next.x-o.x)<e&&Math.abs(o.next.y-o.y)>=r?(o.next.vertical=!0,o.vertical=!0):Math.abs(o.next.y-o.y)<e&&Math.abs(o.next.x-o.x)>=r&&(o.next.hoz=!0,o.hoz=!0),o.x<=o.prev.x&&o.x<=o.next.x&&(o.xTop=!0,o.apex=!0),o.y<=o.prev.y&&o.y<=o.next.y&&(o.yTop=!0,o.apex=!0),o.x>=o.prev.x&&o.x>=o.next.x&&(o.xBottom=!0,o.apex=!0),o.y>=o.prev.y&&o.y>=o.next.y&&(o.yBottom=!0,o.apex=!0),o=o.next}while(o!==a);var l,u;o=a;do{o.theta>1&&(o.corner=!0,o.visited=!0,o.breakPoint=!0),!o.visited&&o.theta>.3&&(o.ndist>n&&o.pdist>n||o.pdist>n&&o.ndist>n)&&(o.corner=!0,o.visited=!0,o.breakPoint=!0),!o.visited&&o.apex&&o.theta>.5&&(o.ndist>i||o.pdist>i)&&(o.corner=!0,o.visited=!0,o.breakPoint=!0),!o.visited&&o.theta>.5&&(o.ndist>i||o.pdist>i)&&(o.corner=!0,o.visited=!0,o.breakPoint=!0),o=o.next}while(o!==a);if(!t.some((function(t){return t.corner})))return!1;o=a;do{o.visited||!o.visited&&!o.breakpoint&&o.theta<.5&&o.theta>.2&&(o.pdist>i&&o.ndist<i||o.ndist>i&&o.pdist<i)&&(o.visited=!0,o.breakPoint=!0),o=o.next}while(o!==a);o=a;do{if(o.corner&&o.hoz&&o.vertical)o.x=Math.abs(o.prev.x-o.x)<=e?o.prev.x:o.next.x,o.y=Math.abs(o.prev.y-o.y)<=e?o.prev.y:o.next.y;else if(o.corner&&o.pdist<r&&o.ndist<r)o.tangency=!0;else if(o.apex&&o.next.apex&&o.prev.theta<.4&&o.next.theta<.4&&o.pdist>r&&o.ndist>r){let t;(o.xTop&&o.next.xTop||o.xBottom&&o.next.xBottom)&&(t=Math.max(Math.floor(Math.abs(o.next.y-o.y)/4),4*e),o.y=o.y>o.next.y?o.y-t:o.y+t,o.next.y=o.next.y>o.y?o.next.y-t:o.next.y+t),(o.yTop&&o.next.yTop||o.yBottom&&o.next.yBottom)&&(t=Math.max(Math.floor(Math.abs(o.next.x-o.x)/4),4*e),o.x=o.x>o.next.x?o.x-t:o.x+t,o.next.x=o.next.x>o.x?o.next.x-t:o.next.x+t)}o=o.next}while(o!==a);let h=t.filter((function(t){return t.breakPoint}));return h.sort((function(t,e){return t.index-e.index})),h}var lt=n(3);function ut(t,e=0,n,i,r){n=n||t.length-1;let s=[];return function t(e,n,i,r,s){if(i-n<3)return;let a=e[n],o=e[i],l=-1,u=0;for(let t=n+1;t<i;t++){let n=st.getDist(a,o,e[t]);n>u&&(u=n,l=t)}u>r&&(s.push(l),t(e,n,l,r,s),t(e,l,i,r,s))}(t,e,n,r=r||1*(i||1),s),s.length?(s.unshift(e),s=s.map((function(e){return t[e].contourIndex=e,t[e]})),s.sort((function(t,e){return t.contourIndex-e.contourIndex})),s):t}function ht(t){let e=1/Math.sqrt(t.x*t.x+t.y*t.y);return t.x=t.x*e,t.y=t.y*e,t}function ct(t){let e=1-t;return e*e*e}function dt(t){let e=1-t;return 3*t*(e*e)}function ft(t){return 3*t*t*(1-t)}function pt(t){return t*t*t}function gt(t,e){return t.x*e.x+t.y*e.y}function mt(t,e,n){let i,r,s=[];for(i=0;i<=t;i++)s[i]={x:e[i].x,y:e[i].y};for(i=1;i<=t;i++)for(r=0;r<=t-i;r++)s[r].x=(1-n)*s[r].x+n*s[r+1].x,s[r].y=(1-n)*s[r].y+n*s[r+1].y;return s[0]}function yt(t,e,n,i,r){let s=0,a=Math.floor((n-e+1)/2);for(let o=e+1;o<n;o++){let n=mt(3,i,r[o-e]),l=n.x-t[o].x,u=n.y-t[o].y,h=l*l+u*u;h>=s&&(s=h,a=o)}return{dist:s,index:a}}function vt(t,e,n){let i,r,s,a,o,l,u=[],h=[];for(s=mt(3,t,n),l=0;l<=2;l++)u[l]={x:3*(t[l+1].x-t[l].x),y:3*(t[l+1].y-t[l].y)};for(l=0;l<=1;l++)h[l]={x:6*(t[l+1].x-t[l].x),y:6*(t[l+1].y-t[l].y)};return a=mt(2,u,n),o=mt(1,h,n),i=(s.x-e.x)*a.x+(s.y-e.y)*a.y,r=a.x*a.x+a.y*a.y+(s.x-e.x)*o.x+(s.y-e.y)*o.y,0===r?n:n-i/r}function _t(t,e,n,i,r){let s=[];for(let a=e;a<=n;a++)s[a-e]=vt(r,t[a],i[a-e]);return s}function xt(t,e,n,i,r,s){let a,o,l,u=[],h=[[0,0],[0,0]],c=[0,0],d=n-e+1;for(l=0;l<d;l++){let t={x:r.x,y:r.y},e={x:s.x,y:s.y};o=i[l],t.x*=dt(o),t.y*=dt(o),e.x*=ft(o),e.y*=ft(o),u[l]=[t,e]}let f=t[e],p=t[n];for(l=0;l<d;l++){h[0][0]+=gt(u[l][0],u[l][0]),h[0][1]+=gt(u[l][0],u[l][1]),h[1][0]=h[0][1],h[1][1]+=gt(u[l][1],u[l][1]);let n=t[e+l];o=i[l],a={x:n.x-(f.x*ct(o)+f.x*dt(o)+p.x*ft(o)+p.x*pt(o)),y:n.y-(f.y*ct(o)+f.y*dt(o)+p.y*ft(o)+p.y*pt(o))},c[0]+=gt(u[l][0],a),c[1]+=gt(u[l][1],a)}let g=h[0][0]*h[1][1]-h[1][0]*h[0][1],m=h[0][0]*c[1]-h[1][0]*c[0],y=c[0]*h[1][1]-c[1]*h[0][1],v=0===g?0:y/g,_=0===g?0:m/g,x=Math.sqrt(Math.pow(f.x-p.x,2)+Math.pow(f.y-p.y,2)),w=1e-6*x,b=[];if(b[0]=f,b[3]=p,v<w||_<w){let t=x/3;return b[1]={x:r.x*t+f.x,y:r.y*t+f.y},b[2]={x:s.x*t+p.x,y:s.y*t+p.y},b}return b[1]={x:r.x*v+f.x,y:r.y*v+f.y},b[2]={x:s.x*_+p.x,y:s.y*_+p.y},b}function wt(t,e,n,i,r,s,a){let o,l,u,h=[];if(o=n-e+1,2===o){let s=t[e],o=t[n],l=Math.sqrt(Math.pow(s.x-o.x,2)+Math.pow(s.y-o.y,2))/3;return h[0]=s,h[3]=o,h[1]={x:i.x*l+s.x,y:i.y*l+s.y},h[2]={x:r.x*l+o.x,y:r.y*l+o.y},a.push(h[1]),a.push(h[2]),void a.push(h[3])}let c=function(t,e,n){let i,r=[0];for(i=e+1;i<=n;i++)r[i-e]=r[i-e-1]+(s=t[i-1],a=t[i],Math.sqrt(Math.pow(s.x-a.x,2)+Math.pow(s.y-a.y,2)));var s,a;let o=r[n-e];for(i=e+1;i<=n;i++)r[i-e]=r[i-e]/o;return r}(t,e,n);h=xt(t,e,n,c,i,r);let d=yt(t,e,n,h,c);if(d.dist<s)return a.push(h[1]),a.push(h[2]),void a.push(h[3]);if(d.dist<s*s)for(l=0;l<4;l++){if(u=_t(t,e,n,c,h),h=xt(t,e,n,u,i,r),d=yt(t,e,n,h,u),d.dist<s)return a.push(h[1]),a.push(h[2]),void a.push(h[3]);c=u}let f=d.index,p=function(t,e){return ht({x:(t[e-1].x-t[e+1].x)/2,y:(t[e-1].y-t[e+1].y)/2})}(t,f);wt(t,e,f,i,p,s,a),p.x=-p.x,p.y=-p.y,wt(t,f,n,p,r,s,a)}function bt(t,e,n,i){let r=t.length-1;n||(n=function(t,e){return ht({x:t[e+1].x-t[e].x,y:t[e+1].y-t[e].y})}(t,0)),i||(i=function(t,e){return ht({x:t[e-1].x-t[e].x,y:t[e-1].y-t[e].y})}(t,r));let s=[];return wt(t,0,r,n,i,e,s),s}bt.normalize=ht;var St=n(24);function Ct(t,e,n,i){let r=bt(t,2*(e=e||1)*e,n,i),s=t[0],a=[];for(let t=0,e=r.length;t<e;t+=3){let e=st.getCos(s,r[t],r[t+1]);if(Math.acos(e>1?1:e)>3)t||(s.onCurve=!0,a.push(s));else{let e=Object(St.a)(s,r[t],r[t+1],r[t+2]);1===e.length?(e[0][2].onCurve=!0,a.push(e[0][1]),a.push(e[0][2])):(e[0][2].onCurve=!0,a.push(e[0][1]),a.push(e[0][2]),e[1][2].onCurve=!0,a.push(e[1][1]),a.push(e[1][2]))}s=r[t+2]}return a.map((function(t){return{x:t.x,y:t.y,onCurve:!!t.onCurve}}))}var Et=n(4),Tt=n(56);function Mt(t){return!isNaN(t.x)&&!isNaN(t.y)}function kt(t,e=1,n={}){let i=function(t,e,n,i,r){let s=ut(t,e,n,i,r);s=rt.a.makeLink(s);let a=s[0],o=3*i,l=Math.PI/2,u=a;do{if(u.visited)u=u.next;else{if(Math.abs(u.x-u.next.x)<=o&&Math.abs(u.y-u.next.y)<=o){let t=st.getCos(u.x-u.prev.x,u.y-u.prev.y,u.next.next.x-u.next.x,u.next.next.y-u.next.y);Math.acos(t>1?1:t)<l&&(u.x>=u.prev.x&&u.x>=u.next.x||u.x<=u.prev.x&&u.x<=u.next.x||u.y>=u.prev.y&&u.y>=u.next.y||u.y<=u.prev.y&&u.y<=u.next.y?u.next.deleted=!0:u.deleted=!0),u.visited=u.next.visited=!0}u=u.next}}while(u!==a);return s.filter((function(t){return delete t.visited,!t.deleted}))}(t,0,t.length-1,e);if(n.segment)return i.map((function(t){return{x:t.x,y:t.y,onCurve:!0}}));let r=ot(i,e),s=[];if(!1===r){if(function(t){let e=t[0],n=e,i=lt.a.computeBounding(t);if(Math.abs(i.width-i.height)/i.width>.1)return!1;do{if(Math.abs(n.theta-n.next.theta)>.15)return!1;n=n.next}while(n!==e);return!0}(i))return function(t){let e=lt.a.computeBounding(t),n=lt.a.computePath(Tt.a),i=e.width/n.width,r=e.height/n.height,s=f.a.clone(Tt.a);return Object(Et.a)(s,i,r),Object(Et.a)(s,1,1,e.x-n.x,e.y-n.y),-1===rt.a.isClockWise(t)?s:s.reverse()}(i);i.forEach((function(t){s.push({x:t.x,y:t.y})}))}else{let t,n,a,o,l;for(let u,h,c=0,d=r.length;c<d;c++)if(t=c===d-1,n=r[c],a=r[t?0:c+1],1===n.right)s.push({x:n.x,y:n.y,onCurve:!0});else{if(s.push({x:n.x,y:n.y,onCurve:!n.tangency}),o=t?i.slice(n.index).concat(i.slice(0,a.index+1)):i.slice(n.index,a.index+1),o.length<=2)continue;if(l=Ct(o,e),l.length&&l.every(Mt))for(u=0,h=l.length-1;u<h;u++)s.push({x:l[u].x,y:l[u].y,onCurve:l[u].onCurve});else for(u=1,h=o.length-1;u<h;u++)s.push({x:o[u].x,y:o[u].y})}}return s.length<=2||s.length<=4&&st.getDist(s[0],s[1],s[2])<e?[]:function(t,e){let n=[],i=e;for(let e=0,r=t.length;e<r;e++){let s=t[e],a=t[e===r-1?0:e+1],o=t[0===e?r-1:e-1];s.onCurve&&Math.abs(s.x-a.x)<i&&Math.abs(s.y-a.y)<i||(!o.onCurve&&s.onCurve&&!a.onCurve&&Math.abs(2*s.x-o.x-a.x)<i&&Math.abs(2*s.y-o.y-a.y)<i||n.push(s))}return n}(s.map((function(t){return t.x=Math.round(t.x),t.y=Math.round(t.y),t})),e)}class Ot{constructor(t,e={}){this.scale=e.scale||2,this.segment=e.segment||!1,t&&this.set(t)}import(t){let e=function(t,e=10,n=3){let i,r,s,a,o,l,u,h,c,d,f,p,g,m,y=t.data,v=t.width,_=t.height,x=[],w=[];for(u=[],m={},r=0;r<_;r++)o=r*v,y[o]=255,y[o+v-1]=255;for(o=(_-1)*v,r=0;r<v;r++)y[r]=255,y[o+r]=255;for(r=0;r<v;){for(;r<v&&255===y[r];r++);if(r===v)break;for(m.next={x:r,y:0},u.push(m=m.next);r<v&&0===y[r];r++);m.next=m.link={x:r-1,y:0},u.push(m=m.next)}for(i=1;i<_;i++){for(o=i*v,d=[],r=0;r<v;){for(;r<v&&255===y[o+r];r++);if(r===v)break;for(m.next={x:r,y:i},d.push(m=m.next);r<v&&0===y[o+r];r++);m.next=m.link={x:r-1,y:i},d.push(m=m.next)}for(h=Math.floor(u.length/2),f=Math.floor(d.length/2),c=u[0],p=d[0],l=1,s=0,a=0;s<h&&a<f;)switch(l){case 1:c.next.x<p.next.x?(c.next.x>=p.x-1?(p.link=c,l=2,g=c.next):c.next.link=c,s++,c=c.next.next):(c.x<=p.next.x+1?(p.link=c,l=3,g=p.next):(p.link=p.next,x.push(p)),a++,p=p.next.next);break;case 2:c.x>p.next.x+1?(g.link=p.next,l=1,a++,p=p.next.next):(g.link=c,c.next.x<p.next.x?(s++,g=c.next,c=c.next.next):(l=3,g=p.next,a++,p=p.next.next));break;case 3:p.x>c.next.x+1?(c.next.link=g,l=1,s++,c=c.next.next):(w.push(p),p.link=g,p.next.x<c.next.x?(a++,g=p.next,p=p.next.next):(l=2,s++,g=c.next,c=c.next.next))}for(;a<f;a++)1===l?(p.link=p.next,x.push(p),p=p.next.next):(g.link=p.next,l=1,p=p.next.next);for(;s<h;s++)1===l?(c.next.link=c,c=c.next.next):(c.next.link=g,l=1,c=c.next.next);u=d}for(h=Math.floor(u.length/2),c=u[0],s=0;s<h;s++)c.next.link=c,c=c.next.next;let b,S,C,E,T=[],M=0;for(s=0;s<2;s++)for(E=0===s?x:w,r=0,a=E.length;r<a;r++,M++)if(S=b=E[r],b.link){C=[];do{C.push({x:b.x,y:b.y});let t=b;b=b.link,t.link=0}while(b&&b!==S);C.length<4||(C=it(C),C.length>=e&&(n>1&&C.length>=2*n&&(C=nt(C,n)),C.flag=0===s?0:1,T.push(C)))}return T}(t);this.set(e)}set(t=[]){let e=this.scale;t.forEach((function(t){rt.a.scale(t,e)})),this.contourPoints=t}get(){let t=1/this.scale;return this.contourPoints.map((function(e){return rt.a.scale(rt.a.clone(e),t)}))}getBreakPoints(t){let e=this.scale,n=[];return(t>=0?[this.contourPoints[t]]:this.contourPoints).forEach((function(t){let i=ut(t,0,t.length-1,e);n=n.concat(ot(rt.a.clone(i),e))})),rt.a.scale(n,1/this.scale)}getContours(){let t=this.scale,e=this.segment;return this.contourPoints.map((function(n){return kt(rt.a.clone(n),t,{segment:e})})).filter((function(t){return t&&t.length>2})).map((function(e){return rt.a.scale(e,1/t)}))}dispose(){this.contourPoints=null}}var At=n(18);function Pt(t){return $("#import-pic-dialog").find('[data-filter="'+t+'"]')}function It(t){let e=$("#import-pic-canvas-origin").get(0);e.style.visiblity="hidden";let n=t.width,i=t.height;e.width=n,e.height=i,1!==j.a&&(e.style.width=n/j.a+"px",e.style.height=i/j.a+"px"),e.ctx.drawImage(t,0,0,n,i);let r=e.ctx.getImageData(0,0,n,i),s=u.data.imageProcessor;s.set(r),s.grayData=s.clone(),s.resultContours=null;let a=K(s.get());Pt("threshold").val(tt(a,"ostu")),$("#import-pic-threshold-pre").val("ostu"),Lt(),Nt(),Dt()}function Dt(){let t=u.data.imageProcessor.get(),e=$("#import-pic-canvas-origin").get(0);e.style.visiblity="hidden";let n=t.width,i=t.height;t.binarize||(Nt(),t=u.data.imageProcessor.get());let r=e.ctx.getImageData(0,0,n,i),s=r.data,a=t.data;for(let t,e=0;e<i;e++){t=n*e;for(let e=0;e<n;e++){let n=t+e;0===a[n]?(s[4*n]=208,s[4*n+1]=247,s[4*n+2]=113,s[4*n+3]=255):(s[4*n]=255,s[4*n+1]=255,s[4*n+2]=255,s[4*n+3]=255)}}u.data.pointsProcessor.import(t),u.data.pointsProcessor.get().forEach((function(t){t.forEach((function(t){let e=t.y*n+t.x;s[4*e]=255,s[4*e+1]=0,s[4*e+2]=0,s[4*e+3]=255}))})),e.ctx.putImageData(r,0,0),e.style.visiblity="visible",u.loading.hide(),setTimeout((function(){!function(){let t=u.data.imageProcessor.get(),e=t.width,n=t.height,i=$("#import-pic-canvas-fit").get(0);i.ctx.clearRect(0,0,e,n),i.width=j.a*e,i.height=j.a*n,1!==j.a&&(i.style.width=e/j.a+"px",i.style.height=n/j.a+"px");i.ctx.fillStyle="green",i.ctx.beginPath(),(u.data.imageProcessor.resultContours=u.data.pointsProcessor.getContours()).forEach((function(t){Object(F.a)(i.ctx,t)})),i.ctx.fill()}()}),20)}function Lt(){let t=u.data.imageProcessor;t.set(t.grayData.clone().get()),Pt("reverse").is(":checked")&&t.reverse(),+Pt("gaussBlur").val()>=2&&t.gaussBlur(+Pt("gaussBlur").val()),+Pt("contrast").val()&&t.brightness(0,+Pt("contrast").val()),t.save()}function Nt(){u.data.imageProcessor.binarize(+Pt("threshold").val())}var Rt=g.derive({title:i.lang.dialog_import_pic,style:"import-pic-dialog",getTpl:()=>n(104),set(){u.data.imageProcessor=new et,u.data.pointsProcessor=new Ot,function(){let t=$("#import-pic-canvas-origin").get(0);t.ctx=t.getContext("2d");let e=$("#import-pic-canvas-fit").get(0);e.ctx=e.getContext("2d"),1!==j.a&&(t.width=t.height=0,t.style.width=t.style.height="auto",e.width=e.height=0,e.style.width=e.style.height="auto"),$("#import-pic-file").get(0).onchange=function(t){let e=t.target.files[0];if(!e)return;if(!/\.(?:jpg|gif|png|jpeg|bmp|svg)$/i.test(e.name))return void alert(i.lang.msg_not_support_file_type);let n=new FileReader;u.loading.show(i.lang.msg_loading_pic,1e4),n.onload=function(t){let e=new Image;e.onload=function(){It(e)},e.onerror=function(){u.loading.warn(i.lang.msg_read_pic_error,2e3)},e.src=t.target.result,t.target.value=""},n.onerror=function(){u.loading.warn(i.lang.msg_read_pic_error,2e3)},n.readAsDataURL(e)};let n=f.a.debounce((function(t){if("threshold"===t)u.data.imageProcessor.restore(),Nt();else if("threshold-pre"===t){if($("#import-pic-threshold-pre").val()){let t=K(u.data.imageProcessor.getOrigin());Pt("threshold").val(tt(t,$("#import-pic-threshold-pre").val())),u.data.imageProcessor.restore(),Nt()}}else"restore"===t?(Pt("reverse").get(0).checked=!1,Pt("gaussBlur").val(0),Pt("contrast").val(0),Lt(),Nt()):"reverse"===t||"gaussBlur"===t||"contrast"===t||"restore-binarize"===t?(Lt(),Nt()):"open"===t||"close"===t||"dilate"===t||"erode"===t?u.data.imageProcessor[t]():"smooth"===t&&(u.data.pointsProcessor.segment=!Pt("smooth").get(0).checked);Dt()}),100);$("#import-pic-dialog").on("click","[data-action]",(function(){let t=$(this).data("action");"openfile"===t?$("#import-pic-file").click():"fitwindow"===t?$("#import-pic-dialog").find(".preview-panel").toggleClass("fitpanel"):"fitwindow-left"===t?$("#import-pic-dialog").find(".preview-panel").removeClass("fitpanel").removeClass("showright").toggleClass("showleft"):"fitwindow-right"===t?$("#import-pic-dialog").find(".preview-panel").removeClass("fitpanel").removeClass("showleft").toggleClass("showright"):"import-url"===t&&$("#import-pic-dialog").find(".import-pic-url").toggleClass("show-url")})).on("click","[data-filter]",(function(t){if(!u.data.imageProcessor.grayData)return;let e=$(this).data("filter");u.loading.show(i.lang.msg_processing,1e4),n(e)})),$("#import-pic-threshold-pre").on("change",(function(t){u.data.imageProcessor.grayData&&(u.loading.show(i.lang.msg_processing,1e4),n("threshold-pre"))})),$("#import-pic-url-text").on("keyup",(function(t){if(13!==t.keyCode)return;let e=this.value.trim();if(/^https?:\/\//i.test(e)){this.value="",$("#import-pic-dialog").find(".import-pic-url").removeClass("show-url"),u.loading.show(i.lang.msg_loading_pic,1e4);let t=new Image;t.onload=function(){It(t)},t.onerror=function(){u.loading.warn(i.lang.msg_read_pic_error,2e3)},t.src=p.a.format(u.config.readOnline,["image",e])}else alert(i.lang.msg_input_pic_url)}))}()},onDispose(){$("#import-pic-file").get(0).onchange=null,$("#import-pic-dialog").off("click"),$("#import-pic-threshold-pre").off("change"),$("#import-pic-url-text").off("keyup"),u.data.imageProcessor.grayData&&u.data.imageProcessor.grayData.dispose(),u.data.imageProcessor.dispose(),u.data.pointsProcessor.dispose(),u.data.imageProcessor=u.data.pointsProcessor=null},validate(){let t=u.data.imageProcessor.resultContours;if(t){if(t&&t.length)return{contours:At.a.flip(t)};alert(i.lang.msg_no_glyph_to_import)}return{}}}),zt=g.derive({title:i.lang.syncfont,getTpl:()=>n(105),set(t){this.setFields(t||{}),this.newProject=t.newProject;let e=this;$("#setting-sync-cancel").on("click",(function(){e.hide(0)}))},onDispose(){$("#setting-sync-cancel").off("click")},validate(){let t=this.getFields();return t.name?t.url||t.pushUrl?this.newProject&&!t.url?(alert(i.lang.dialog_alert_set_sync_url),!1):t.woff||t.ttf||t.svg||t.eot?t:(alert(i.lang.dialog_alert_set_filetype),!1):(alert(i.lang.dialog_alert_set_url_or_syncurl),!1):(alert(i.lang.dialog_alert_set_sync_name),!1)}}),Ut=n(17),jt=n(9),Ft=n(20);function Bt(t,e){let n=document.createElement("a");if(n.download=t,n.href=e,n.addEventListener("click",(function(){n.remove()})),document.body.appendChild(n),n.click)n.click();else{let t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,document.defaultView,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(t)}}var $t=n(58);const Xt={customBG:"#222",margin:"5px -2px 0",doRender:"div div",cssAddon:'.cp-color-picker{border:1px solid #999; padding:10px 10px 0;background:#eee; overflow:visible; border-radius:3px;}.cp-color-picker:after{content:""; display:block; position:absolute; top:-15px; left:12px; border:8px solid #eee;border-color: transparent transparent #eee}.cp-color-picker:before{content:""; display:block; position:absolute; top:-16px; left:12px; border:8px solid #eee;border-color: transparent transparent #999}.cp-xy-slider:active {cursor:none;}.cp-xy-slider{border:1px solid #999; margin-bottom:10px;}.cp-xy-cursor{width:12px; height:12px; margin:-6px}.cp-z-slider{margin-left:10px; border:1px solid #999;}.cp-z-cursor{border-width:5px; margin-top:-5px;}.cp-color-picker .cp-alpha{margin:10px 0 0; height:6px; border-radius:6px;overflow:visible; border:1px solid #999; box-sizing:border-box;background: linear-gradient(to right, rgba(238,238,238,1) 0%,rgba(238,238,238,0) 100%);}.cp-color-picker .cp-alpha{margin:10px 0}.cp-alpha-cursor{background: #eee; border-radius: 100%;width:14px; height:14px; margin:-5px -7px; border:1px solid #666!important;box-shadow:inset -2px -4px 3px #ccc}',renderCallback(t,e){!1===e&&this.$trigger.trigger("change")}};var Ht={show:(t,e)=>$(t).colorPicker($.extend({},Xt,e))};function Gt(t){let e={fillColor:$("#glyf-download-color").val().trim(),size:+$("#glyf-download-size").val(),unitsPerEm:t.ttf.head.unitsPerEm};return function(t,e){let n={size:e.size,unitsPerEm:e.unitsPerEm,name:O.a.escape(t.name),fillColor:e.fillColor||"#000"};if(t.contours&&t.contours.length){let i=f.a.clone(t.contours),r=lt.a.computePath.apply(null,i),s=Math.max(r.width,r.height),a=e.unitsPerEm/s;i.forEach((function(t){Object(jt.a)(t,1,1,-r.x,-r.y-r.height/2),Object(jt.a)(t,1,-1,0,0),Object(jt.a)(t,a,a,(s-r.width)/2,r.height/2),Object(Ft.a)(t,2)})),n.d='d="'+Object(Ut.a)(i)+'"'}return p.a.format('<?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg id="${name}" width="${size}" height="${size}" style="width:${size}px;height:${size}px;" version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${unitsPerEm} ${unitsPerEm}" enable-background="new 0 0 ${unitsPerEm} ${unitsPerEm}" xml:space="preserve"><path fill="${fillColor}" ${d}/></svg>',n)}(t.glyf,e)}function qt(){let t=Gt(this.setting),e=+$("#glyf-download-size").val(),n=document.createElement("canvas");n.width=n.height=e;let i=new Image;i.src="data:image/svg+xml;base64,"+btoa(t),i.width=i.height=e,i.onload=function(t){n.getContext("2d").drawImage(i,0,0,e,e,0,0,j.a*e,j.a*e)};let r=$("#glyf-download-preview");r.children().remove(),r.append(n)}var Vt={unicode:y,name:v,"adjust-pos":_,"adjust-glyf":x,metrics:C,online:T,url:k,glyf:P,editor:I,"find-glyf":N,ie:U,"import-pic":Rt,sync:zt,"glyf-download":g.derive({title:i.lang.dialog_export_glyf,nofooter:!0,getTpl:()=>n(110),set(t){let e=$.proxy(qt,this);$("#glyf-download-color").on("change",e),$("#glyf-download-size").on("change",e),Ht.show("#glyf-download-color"),$("#glyf-download-svg").on("click",$.proxy((function(t){let e=Gt(this.setting);Bt((this.setting.glyf.name||"svg")+".svg",Object($t.a)(e))}),this)),$("#glyf-download-png").on("click",$.proxy((function(t){let e=$("#glyf-download-preview canvas").get(0).toDataURL();Bt((this.setting.glyf.name||"png")+".png",e)}),this)),$("#glyf-download-name").html(t.glyf.name),this.setting=t,qt.call(this)},onDispose(){$("#glyf-download-color").off("change"),$("#glyf-download-size").off("change"),$("#glyf-download-svg").off("click"),$("#glyf-download-png").off("click"),this.setting=null}})},Wt=n(30);function Yt(t){const e=new XMLHttpRequest;e.onreadystatechange=function(){if(4===e.readyState){const n=e.status;if(n>=200&&n<300||304===n){if(t.onSuccess)if("binary"===t.type){const n=e.responseBlob||e.response;t.onSuccess(n)}else"xml"===t.type?t.onSuccess(e.responseXML):"json"===t.type?t.onSuccess(JSON.parse(e.responseText)):t.onSuccess(e.responseText)}else t.onError&&t.onError(e,e.status)}};const n=(t.method||"GET").toUpperCase();let i=null;if(t.params){let e=[];Object.keys(t.params).forEach(n=>{e.push(n+"="+encodeURIComponent(t.params[n]))}),e=e.join("&"),"GET"===n?t.url+=(-1===t.url.indexOf("?")?"?":"&")+e:i=e}e.open(n,t.url,!0),"binary"===t.type&&(e.responseType="arraybuffer"),e.send(i)}var Zt=n(52);let Kt=null;function Qt(t,e){Yt({type:"svg"===t?"xml":"binary",url:e,onSuccess(e){u.loader.load(e,{type:t||"ttf",success(t){u.loading.hide(),u.ttfManager.set(t),u.data.projectId=null,u.projectViewer.unSelect()}})},onError(){alert(i.lang.msg_read_file_error)}})}const Jt=f.a.debounce((function(){u.editor.focus()}),20),te=f.a.debounce((function(t){u.loading.show(i.lang.msg_syncing,4e3),u.sync.addTask(t).then((function(e){t.newProject&&e&&e.newData?Kt.new({ttf:e.newData,config:{sync:t.config}}):"push"===t.type&&e&&e.newData&&(u.ttfManager.ttf.set(e.newData),u.ttfManager.fireChange(!0),u.project.update(t.projectId,e.newData).then((function(){u.ttfManager.setState("saved")}))),u.loading.show(i.lang.msg_sync_success,400)}),(function(e){t.newProject&&1===e.status&&alert(i.lang.msg_error_sync_font),e.reason&&console.warn(e.reason)}))}),500);Kt={undo(){u.editor.isEditing()?(u.editor.undo(),Jt()):u.ttfManager.undo()},redo(){u.editor.isEditing()?(u.editor.redo(),Jt()):u.ttfManager.redo()},new(t){u.ttfManager.isChanged()&&!window.confirm(i.lang.msg_confirm_save_proj)||(u.ttfManager.set(t&&t.ttf||Object(Zt.a)()),u.data.projectId=null,Kt.save(t))},open(){$("#font-import").click()},import(){u.ttfManager.get()&&$("#font-import").click()},export(t){if(u.ttfManager.get()){let e=$(t.target);u.exporter.export(u.ttfManager.get(),{type:e.attr("data-type"),error(t){u.fire("font-error",t)}})}},"sync-from-server"(){new(0,Vt.sync)({onChange(t){t.timestamp=-1,te({type:"pull",newProject:1,config:t})}}).show({newProject:1})},sync(t,e,n){te({type:"push",projectId:t,ttf:e,config:n})},dosync(t){let e=u.project.getConfig(t).sync;e&&e.autoSync&&Kt.sync(t,u.ttfManager.get(),e)},save(t){if(u.ttfManager.get()){let e=u.data.projectId;if(e)u.project.update(e,u.ttfManager.get()).then((function(){u.ttfManager.setState("saved"),u.loading.show(i.lang.msg_save_success,400),Kt.dosync(e)}),(function(){u.loading.show(i.lang.msg_save_failed,1e3)}));else{let e=u.ttfManager.get().name.fontFamily||"";(e=window.prompt(i.lang.msg_input_proj_name,e))&&(e=p.a.encodeHTML(e),t=t||{},u.project.add(e,t.ttf||u.ttfManager.get(),t.config).then((function(t){u.data.projectId=t,u.ttfManager.setState("new"),u.projectViewer.show(u.project.items(),t),u.loading.show(i.lang.msg_save_success,400)}),(function(){u.loading.show(i.lang.msg_save_failed,400)})))}}},"add-new"(){if(u.ttfManager.get()){let t=u.viewer.getSelected();u.ttfManager.insertGlyf({},t[0])}else Kt.new()},"add-online"(){new(0,Vt.online)({onChange(t){u.ttfManager.isChanged()&&!window.confirm(i.lang.msg_confirm_save_proj)||(u.loading.show(i.lang.msg_loading,1e3),setTimeout((function(){let e=t.slice(t.lastIndexOf(".")+1),n=t;/^https?:\/\//i.test(t)&&(n=p.a.format(u.config.readOnline,["font",encodeURIComponent(t)])),Qt(e,n)}),20))}}).show()},"add-url"(){new(0,Vt.url)({onChange(t){u.ttfManager.isChanged()&&!window.confirm(i.lang.msg_confirm_save_proj)||(u.loading.show(i.lang.msg_loading,1e3),setTimeout((function(){let e=p.a.format(u.config.readOnline,["font",encodeURIComponent(t)]);Qt(t.slice(t.lastIndexOf(".")+1),e)}),20))}}).show()},preview(t){let e=u.ttfManager.get();if(e){let n=t.target.getAttribute("data-format");u.previewer.load(e,n)}},"setting-name"(){let t=u.ttfManager.get();if(t){new(0,Vt.name)({onChange(t){u.ttfManager.setInfo(t)}}).show($.extend({},t.head,t.name))}},"setting-metrics"(){let t=u.ttfManager.get();if(t){new(0,Vt.metrics)({onChange(t){u.ttfManager.setMetrics(t)}}).show($.extend({},t["OS/2"],t.hhea,t.post))}},"setting-glyf-name"(){u.ttfManager.get()&&window.confirm(i.lang.msg_confirm_gen_names)&&u.ttfManager.genGlyfName(u.viewer.getSelected())},"setting-glyf-clearname"(){u.ttfManager.get()&&u.ttfManager.clearGlyfName(u.viewer.getSelected())},"setting-optimize"(){if(u.ttfManager.get()){let t=u.ttfManager.optimize();!0!==t&&(t.repeat&&u.fire("font-error",{number:10200,data:t.repeat}),alert(t.message))}},"setting-sort"(){if(u.ttfManager.get()){let t=u.ttfManager.sortGlyf();!0!==t&&alert(t.message)}},"setting-compound2simple"(){u.ttfManager.get()&&u.ttfManager.compound2simple(u.viewer.getSelected())},"setting-editor"(){new(0,Vt.editor)({onChange(t){u.setting.set("editor",t,t.saveSetting),setTimeout((function(){u.viewer.setSetting(t.viewer),u.editor.setSetting(t.editor)}),20)}}).show(u.setting.get("editor"))},"import-pic"(){let t=Vt["import-pic"];u.ttfManager.get()&&new t({onChange(t){if(t.contours)if(u.editor.isVisible())u.editor.execCommand("addcontours",t.contours,{scale:1,selected:!0}),Jt();else{let e=u.viewer.getSelected();u.ttfManager.insertGlyf(Object(d.a)({contours:t.contours},1,1,0,0,!1),e[0])}}}).show()},"setting-import-and-export"(){new(0,Vt.ie)({onChange(t){u.setting.set("ie",t,t.saveSetting)}}).show(u.setting.get("ie"))}};var ee=Kt;let ne;function ie(t){let e=ne.editor.isVisible(),n=ne.ttfManager.get();if(n){if($(".main").addClass("editing"),$(".editor").addClass("editing"),ne.viewer.setMode("editor"),e||(ne.editor.show(),ne.fire("editor-show")),ne.editor.setAxis(function(t){return{unitsPerEm:t.head.unitsPerEm,metrics:{ascent:t.hhea.ascent,descent:t.hhea.descent,capHeight:t["OS/2"].sCapHeight||.8*t.hhea.ascent,xHeight:t["OS/2"].sxHeight||.4*t.head.unitsPerEm}}}(n)),null==t)return;t=+t;let r=n.glyf[t];if(r){let t=f.a.clone(r);if(t.compound){if(!confirm(i.lang.msg_transform_compound_glyf))return;t=Object(c.a)(t,Object(h.a)(r,n))}ne.editor.setFont(t)}}}function re(){$(".main").removeClass("editing"),$(".editor").removeClass("editing"),ne.editor&&ne.editor.hide(),ne.fire("editor-hide"),ne.viewer.clearEditing(),ne.viewer.setMode("list"),ne.viewer.focus()}function se(t,e,n){let i=t.glyf.length,r=ne.setting.get("editor").viewer.pageSize,s=Math.ceil(i/r);e>s?e=s:e<1&&(e=1),ne.viewer.setPage(e-1),ne.viewer.show(t,n||ne.viewer.getSelected()),ne.viewer.focus(),i>r?ne.viewerPager.show(e,r,i):ne.viewerPager.hide()}function ae(t,e){let n,i=ne.ttfManager.get(),r=i.glyf,s=r.length,a=t.length,o=e?-1:1;if(1===a){n=t[0];let e=n+o;if(e>=0&&e<s){let t=r[n];r[n]=r[e],r[e]=t,ne.viewer.setSelected([e]),ne.viewer.refresh(i,[n,e])}}else if(a&&(t=t.sort((function(t,e){return t-e})),e&&t[0]>0||!e&&t[a-1]<s-1)){let s;if(e){for(n=t[0]-1,s=1;s<a;s++)t[s-1]+1!==t[s]&&(r.splice(t[s-1]+1,0,r[n]),r.splice(n,1),n=t[s]-1);r.splice(t[a-1]+1,0,r[n]),r.splice(n,1)}else{for(n=t[a-1]+1,s=a-2;s>=0;s--)t[s+1]-1!==t[s]&&(r.splice(t[s+1],0,r[n]),r.splice(n+1,1),n=t[s]+1);r.splice(t[0],0,r[n]),r.splice(n+1,1)}ne.viewer.setSelected(t.map((function(t){return t+o}))),ne.viewer.refresh(i)}}function oe(t){let e=function(){let e=t.viewer.getEditing();-1!==e?t.ttfManager.replaceGlyf(t.editor.getFont(),e):t.ttfManager.insertGlyf(t.editor.getFont()),t.editor.setChanged(!1)};t.on("save",(function(n){if(t.ttfManager.get()){let i=n.saveType;"force"===i?(t.editor.isEditing()&&e(),ee.save()):"editor"===i||t.editor.isEditing()?(e(),t.viewer.blur(),t.editor.focus()):(ee.save(),t.editor.blur(),t.viewer.focus())}})).on("paste",(function(e){let n=Wt.a.get("glyf");n&&n.glyf.length&&(t.editor.isEditing()?t.editor.execCommand("addcontours",n.glyf[0].contours,{selected:!0}):t.viewer.fire("paste"))})).on("function",(function(e){if(113===e.keyCode)t.editor.isVisible()?re():ie();else if(114===e.keyCode||115===e.keyCode){let n=t.ttfManager.get();n&&t.previewer.load(n,114===e.keyCode?"ttf":"woff")}})).on("font-error",(function(t){!function(t){if(10200===t.number&&t.data){let e=Array.isArray(t.data)?t.data:[t.data],n=ne.setting.get("editor").viewer.pageSize,i=Math.ceil(e[0]/n);se(ne.ttfManager.get(),i,e)}}(t)}))}var le={init(t){var e;ne=t,function(t){let e=f.a.debounce((function(){t.ttfManager.pushHistory()}),200);t.viewer.on("del",(function(e){e.list&&t.ttfManager.removeGlyf(e.list)})).on("edit",(function(e){e.lastEditing!==e.list[0]?t.editor.isChanged()&&!confirm(i.lang.msg_confirm_save_glyph)||($(".main").addClass("editing"),$(".editor").addClass("editing"),t.viewer.setEditing(e.list[0]),ie(e.list[0])):ie()})).on("copy",(function(e){let n=t.ttfManager.getCopiedGlyf(e.list),i={unitsPerEm:t.ttfManager.get().head.unitsPerEm,glyf:n};Wt.a.set(i,"glyf")})).on("cut",(function(e){let n=t.ttfManager.getGlyf(e.list),i={unitsPerEm:t.ttfManager.get().head.unitsPerEm,glyf:n};Wt.a.set(i,"glyf"),t.ttfManager.removeGlyf(e.list)})).on("paste",(function(e){let n=Wt.a.get("glyf");if(n&&n.glyf.length){if(t.ttfManager.get().head.unitsPerEm!==n.unitsPerEm){let e=t.ttfManager.get().head.unitsPerEm/(n.unitsPerEm||1024);n.glyf.forEach((function(t){Object(d.a)(t,e,e)}))}t.ttfManager.appendGlyf(n.glyf,t.viewer.getSelected())}})).on("undo",(function(e){t.ttfManager.undo()})).on("redo",(function(e){t.ttfManager.redo()})).on("adjust-pos",(function(e){let n=t.viewer.getSelected(),i={};if(1===n.length){let e=t.ttfManager.getGlyf(n)[0];i={unicode:e.unicode,leftSideBearing:e.leftSideBearing,rightSideBearing:e.advanceWidth-e.xMax}}new(0,Vt["adjust-pos"])({onChange(e){setTimeout((function(){t.ttfManager.adjustGlyfPos(n,e)}),20)}}).show(i)})).on("adjust-glyf",(function(e){new(0,Vt["adjust-glyf"])({onChange(e){setTimeout((function(){t.ttfManager.adjustGlyf(t.viewer.getSelected(),e)}),20)}}).show()})).on("setting-font",(function(e){let n=t.viewer.getSelected();if(n.length){let e=t.ttfManager.getGlyf(n)[0];new(0,Vt.glyf)({onChange(e){t.ttfManager.updateGlyf(e,n[0])}}).show({unicode:e.unicode,leftSideBearing:e.leftSideBearing,rightSideBearing:e.advanceWidth-(e.xMax||0),name:e.name})}})).on("find-glyf",(function(e){new(0,Vt["find-glyf"])({onChange(e){let n=t.ttfManager.findGlyf(e);if(n.length){let e=t.setting.get("editor").viewer.pageSize,i=Math.ceil(n[0]/e);se(t.ttfManager.get(),i,n)}else t.loading.warn(i.lang.msg_no_related_glhph,1e3)}}).show()})).on("download-glyf",(function(e){let n=Vt["glyf-download"],i=t.ttfManager.getCopiedGlyf(e.list);(new n).show({ttf:t.ttfManager.get(),glyf:i[0]})})).on("setting-unicode",(function(e){new(0,Vt.unicode)({onChange(e){setTimeout((function(){if(t.ttfManager.get()){let n=t.viewer.getSelected();t.ttfManager.setUnicode(e.unicode,n,e.isGenerateName)}}),20)}}).show()})).on("setting-sync",(function(e){if(t.data.projectId){let e=t.project.getConfig(t.data.projectId).sync;e||(e={name:t.ttfManager.get().name.fontFamily}),new(0,Vt.sync)({onChange(n){t.project.updateConfig(t.data.projectId,{sync:n?$.extend(e,n):null}),t.projectViewer.show(t.project.items(),t.data.projectId)}}).show(e)}})).on("refresh",(function(e){t.ttfManager.get()&&se(t.ttfManager.get(),1)})).on("moveleft",(function(n){let r=t.viewer.getEditing();if(t.editor.isVisible()){if(r<=0&&(r=t.ttfManager.get().glyf.length),t.editor.isChanged()&&!confirm(i.lang.msg_confirm_save_glyph))return;t.viewer.setEditing(--r),ie(r)}else{let n=t.viewer.getSelected();n.length&&(ae(n,!0),e())}})).on("moveright",(function(n){let r=t.viewer.getEditing();if(t.editor.isVisible()){if(r>=t.ttfManager.get().glyf.length-1&&(r=-1),t.editor.isChanged()&&!confirm(i.lang.msg_confirm_save_glyph))return;t.viewer.setEditing(++r),ie(r)}else{let n=t.viewer.getSelected();n.length&&(ae(n,!1),e())}})),t.viewerPager.on("change",(function(e){se(t.ttfManager.get(),e.page)}))}(ne),function(t){let e=function(){let t=$(".editor").css("width");t&&$(".main").css("margin-left",t)};t.on("editor-show",(function(){t.editor.editor.render.resizeCapture.un("resize",e),t.editor.editor.render.resizeCapture.on("resize",e),e(),t.spliter.enable()})).on("editor-hide",(function(){t.editor.editor.render.resizeCapture.un("resize",e),$(".main").css("margin-left",""),t.spliter.disable()})),t.spliter.disable().on("change",(function(e){let n=$(".editor"),i=n.width();e.delta+i>400&&(n.width(i+e.delta),t.editor.editor.render.resizeCapture.fire("resize",e))}))}(ne),(e=ne).ttfManager.on("change",(function(t){let n=e.viewer.getEditing();"update"===t.changeType&&e.editor.isEditing()&&-1!==n?e.viewer.refresh(t.ttf,[n]):se(t.ttf,e.viewer.getPage()+1)})).on("set",(function(t){e.viewer.inited||(e.viewer.setMode("list"),e.viewer.inited=!0),e.menuInited||($('.action-groups [data-disabled="1"]').removeAttr("data-disabled"),e.menuInited=!0),se(t.ttf,1,[])})),function(t){t.projectViewer.on("open",(function(e){let n=t.data.projectId;t.project.get(e.projectId).then((function(n){if(n){if(t.ttfManager.isChanged()&&!window.confirm(i.lang.msg_confirm_save_proj))return;t.ttfManager.set(n),t.data.projectId=e.projectId,t.projectViewer.select(e.projectId),t.viewer.focus(),window.localStorage.setItem("project-cur",e.projectId)}}),(function(){if(window.confirm(i.lang.msg_error_open_proj)){let i=function(){t.projectViewer.show(t.project.items(),n)};t.project.remove(e.projectId,!0).then(i,i)}}))})).on("saveas",(function(){t.data.projectId=null,ee.save(),t.viewer.focus()})).on("sync",(function(t){ee.dosync(t.projectId)})).on("del",(function(e){t.project.remove(e.projectId).then((function(){e.projectId===t.data.projectId&&(t.data.projectId=null)}),(function(){t.loading.warn(i.lang.msg_error_del_proj,1e3)})),t.viewer.focus()}))}(ne),oe(ne),$(".close-editor").click((function(){re()})),ne.init({viewer:ne.viewer.main.get(0),editor:ne.editor.main.get(0)}),window.onbeforeunload=function(){if(ne.ttfManager.isChanged())return i.lang.msg_confirm_save_proj}}},ue=n(23);const he=ue.a.editor;var ce={editor:{saveSetting:!0,viewer:{color:"",shapeSize:"normal",pageSize:100},editor:{sorption:{enableGrid:!1,enableShape:!0},fontLayer:{strokeColor:he.fontLayer.strokeColor,fill:!0,fillColor:he.fontLayer.fillColor},referenceline:{style:{strokeColor:he.referenceline.style.strokeColor}},axis:{showGrid:!0,gapColor:he.axis.gapColor,metricsColor:he.axis.metricsColor,graduation:{gap:he.axis.graduation.gap}}}},ie:{saveSetting:!0,import:{combinePath:!0},export:{saveWithGlyfName:!0}}};const de=window.localStorage,fe={};var pe={get(t){if(!t)throw"setting name empty";if(fe[t])return fe[t];let e=null,n=de.getItem("setting."+t);return e=n?f.a.overwrite(this.getDefault(t),JSON.parse(n)):this.getDefault(t),fe[t]=e},set(t,e,n){if(!t)throw"setting name empty";return n&&(f.a.equals(e,this.getDefault(t))?de.removeItem("setting."+t):de.setItem("setting."+t,JSON.stringify(e))),fe[t]=e},isStored:t=>!!de.getItem("setting."+t),getDefault:t=>ce[t]?f.a.clone(ce[t]):null},ge={readOnline:location.hostname.indexOf("baidu.com")>=0?"/font/proxy?type=${0}&url=${1}":"./php/readOnline.php?type=${0}&file=${1}",proxyUrl:function(){let t=document.createElement("a");return t.href="proxy.html",t.href}()},me=n(0),ye=[{name:"copy",title:me.a.lang.copy,quickKey:"C",disabled:!0},{name:"cut",title:me.a.lang.cut,quickKey:"X"},{name:"paste",title:me.a.lang.paste,quickKey:"V"},{name:"del",title:me.a.lang.del,quickKey:"D",disabled:!0},{type:"split"},{name:"adjust-pos",title:me.a.lang.adjustpos},{name:"adjust-glyf",title:me.a.lang.adjustglyf},{name:"setting-font",title:me.a.lang.fontsetting,disabled:!0},{type:"split"},{name:"find-glyf",title:i.lang.findglyf},{name:"download-glyf",title:i.lang.downloadglyf},{type:"split"},{name:"setting-unicode",title:i.lang.setunicode},{name:"setting-sync",title:i.lang.syncfont}],ve=[{name:"copyshapes",title:me.a.lang.copy,quickKey:"C",disabled:!0},{name:"pasteshapes",title:me.a.lang.paste,quickKey:"V"},{name:"removeshapes",title:me.a.lang.del,quickKey:"D",disabled:!0},{name:"save",title:me.a.lang.save,quickKey:"S"},{type:"split"},{name:"rangemode",title:me.a.lang.rangemode,ico:"rangemode"},{name:"pointmode",title:me.a.lang.pointmode,ico:"pointmode"},{type:"split"},{name:"upshape",title:me.a.lang.upshape,ico:"upshape",disabled:!0},{name:"downshape",title:me.a.lang.downshape,ico:"downshape",disabled:!0},{name:"reversepoints",title:me.a.lang.reversepoints,ico:"reversepoints",disabled:!0},{type:"split"},{name:"horizontalalignshapes",title:me.a.lang.alignleft,ico:"alignleft",align:"left",disabled:!0},{name:"horizontalalignshapes",title:me.a.lang.aligncenter,ico:"aligncenter",align:"center",disabled:!0},{name:"horizontalalignshapes",title:me.a.lang.alignright,ico:"alignright",align:"right",disabled:!0},{name:"verticalalignshapes",title:me.a.lang.aligntop,ico:"aligntop",align:"ascent",disabled:!0},{name:"verticalalignshapes",title:me.a.lang.alignmiddle,ico:"alignmiddle",align:"middle",disabled:!0},{name:"verticalalignshapes",title:me.a.lang.aligndescent,ico:"aligndescent",align:"descent",disabled:!0},{name:"verticalalignshapes",title:me.a.lang.alignbaseline,ico:"alignbaseline",align:"baseline",disabled:!0},{type:"split"},{name:"rotateleft",title:me.a.lang.rotateleft,ico:"rotateleft",disabled:!0},{name:"rotateright",title:me.a.lang.rotateright,ico:"rotateright",disabled:!0},{name:"flipshapes",title:me.a.lang.flip,ico:"flip",disabled:!0},{name:"mirrorshapes",title:me.a.lang.mirror,ico:"mirror",disabled:!0},{type:"split"},{name:"splitshapes",title:me.a.lang.splitshapes,ico:"splitshapes"},{name:"joinshapes",title:me.a.lang.joinshapes,ico:"joinshapes",disabled:!0},{name:"intersectshapes",title:me.a.lang.intersectshapes,ico:"intersectshapes",disabled:!0},{name:"tangencyshapes",title:me.a.lang.tangencyshapes,ico:"tangencyshapes",disabled:!0}],_e=n(43);function xe(t){let e=[];return this.main.children().each((function(n,i){let r=$(i),s=r.offset(),a=s.left+r.width()/2,o=s.top+r.height()/2;a>=t.x&&a<=t.x+t.width&&o>=t.y&&o<=t.y+t.height&&e.push(i)})),e}class we{constructor(t,e){this.main=$(t),this.rangeElement=$(e.rangeElement||"#selection-range"),this.onSelect=e.onSelect,this.init()}init(){let t=this;t.capture=new _e.a(t.main.get(0),{events:{dblclick:!1,mousewheel:!1,mouseover:!1,mouseout:!1}}),t.capture.on("dragstart",(function(e){t.rangeElement.show(),t.main.addClass("no-hover"),t.startX=e.originEvent.pageX,t.startY=e.originEvent.pageY}));t.capture.on("drag",(function(e){let n=e.originEvent.pageX,i=e.originEvent.pageY;t.rangeElement.css({left:Math.min(t.startX,n),top:Math.min(t.startY,i),width:Math.abs(t.startX-n),height:Math.abs(t.startY-i)})})),t.capture.on("dragend",(function(e){t.rangeElement.hide(),t.main.removeClass("no-hover");let n=e.originEvent.pageX,i=e.originEvent.pageY,r=Math.abs(t.startX-n),s=Math.abs(t.startY-i);r<20&&s<20||(e.items=xe.call(t,{x:Math.min(t.startX,n),y:Math.min(t.startY,i),width:r,height:s}),t.onSelect&&t.onSelect(e))}))}dispose(){this.capture.dispose(),this.main=this.rangeElement=this.capture=null}}function be(t){let e=$(t.target),n=e.attr("data-action"),r=e.parent("[data-index]"),s=+r.attr("data-index"),a=this.getEditing();if("del"===n){if(!window.confirm(i.lang.msg_confirm_del_glyph))return;r.remove();let t=this.getSelected().indexOf(s);t>=0&&this.selectedList.splice(t,1),s===a&&this.setEditing(-1),this.fire("del",{list:[s]})}else"edit"===n&&this.fire("edit",{lastEditing:a,list:[s]})}function Se(t){let e=t.items,n=t.ctrl,i=t.shiftKey;n||i||this.main.children().removeClass("selected"),e.forEach((function(t){n?$(t).toggleClass("selected"):$(t).addClass("selected")})),this.fire("selection:change")}function Ce(t){t.preventDefault(),t.stopPropagation()}function Ee(t){if(!u.listening)return;let e,n=this;if(t.ctrl=t.ctrl||t.metaKey,n.listening)if(65===t.keyCode&&t.ctrl)Ce(t),n.main.children().addClass("selected"),n.fire("selection:change");else if(90===t.keyCode&&t.ctrl)Ce(t),n.fire("undo");else if(89===t.keyCode&&t.ctrl)Ce(t),n.fire("redo");else if(27===t.keyCode)t.stopPropagation(),n.clearSelected(),n.clearEditing(),n.fire("selection:change");else if(37===t.keyCode)n.fire("moveleft");else if(39===t.keyCode)n.fire("moveright");else if(46===t.keyCode||88===t.keyCode&&t.ctrl){if(Ce(t),e=n.getSelected(),e.length){n.clearSelected(),e.indexOf(n.getEditing())>=0&&n.clearEditing(),n.fire("selection:change"),n.fire(46===t.keyCode?"del":"cut",{list:e})}}else 67===t.keyCode&&t.ctrl&&(Ce(t),e=n.getSelected(),e.length&&n.fire("copy",{list:e}))}function Te(){let t=this;t.main.on("click","[data-action]",be.bind(this)).on("dblclick","[data-index]",(function(e){if(e.ctrl=e.ctrlKey||e.metaKey,!e.ctrl&&!e.shiftKey&&!e.target.getAttribute("data-action")&&"list"===t.mode){let e=$(this).attr("data-index");t.fire("edit",{lastEditing:t.getEditing(),list:[e]})}})).on("click","[data-index]",(function(e){if(e.ctrl=e.ctrlKey||e.metaKey,!e.target.getAttribute("data-action")){let n=null,i=this,r=$(i);if(!e.ctrl&&!e.shiftKey){if("editor"===t.mode){let e=r.attr("data-index");t.fire("edit",{lastEditing:t.getEditing(),list:[e]})}if(n=t.main.find(".selected"),r.hasClass("selected")&&1===n.length&&n[0]===i)return;return n.removeClass("selected"),r.addClass("selected"),void t.fire("selection:change")}if(e.ctrl)return r.toggleClass("selected"),void t.fire("selection:change");if(e.shiftKey)if(n=Array.prototype.slice.call(t.main.find(".selected")),r.addClass("selected"),n.length){if(-1===n.indexOf(i)){let e=+i.getAttribute("data-index"),r=null,s=0,a=4294967295;if(n.forEach((function(t){s=Math.abs(e-t.getAttribute("data-index")),s<a&&(r=t,a=s)})),a>1)for(r=e<+r.getAttribute("data-index")?i:r,s=1;s<a;s++)$(r=r.nextElementSibling).addClass("selected");t.fire("selection:change")}}else t.fire("selection:change")}})),t.downlistener=Ee.bind(this)}function Me(){let t=[];return this.main.find(".selected").each((function(e,n){t.push(+n.getAttribute("data-index"))})),t}function ke(){let t=this.commandMenu,e=this;e.on("selection:change",f.a.debounce((function(){let n=Me.call(e);e.selectedList=n,n.length?(t.enableCommands(["copy","cut","del"]),t[1===n.length?"enableCommands":"disableCommands"](["setting-font","download-glyf"])):t.disableCommands(["copy","cut","del","setting-font","download-glyf"])}),100));let n=f.a.debounce((function(){e.focus()}),20);t.on("command",(function(t){let i=t.command;if("paste"===i||"adjust-pos"===i||"adjust-glyf"===i)e.fire(i);else{let t=e.getSelected();"cut"!==i&&"del"!==i||e.clearSelected(),e.fire(i,{list:t})}n()}))}var Oe=function(){Te.call(this),this.dragSelector=new we(this.main,{onSelect:Se.bind(this)}),this.options.commandMenu&&(this.commandMenu=this.options.commandMenu,delete this.options.commandMenu,ke.call(this))};const Ae='<div data-index="${index}" class="glyf-item ${compound} ${modify} ${selected} ${editing}"><i data-action="edit" class="ico i-edit" title="'+i.lang.edit+'"></i><i data-action="del" class="ico i-del" title="'+i.lang.del+'"></i><svg class="glyf" viewbox="0 0 ${unitsPerEm} ${unitsPerEm}"><g transform="scale(1, -1) translate(0, -${translateY}) scale(0.9, 0.9) "><path class="path" ${fillColor} ${d}/></g></svg><div data-field="unicode" class="unicode" title="${unicode}">${unicode}</div><div data-field="name" class="name" title="${name}">${name}</div></div>';var Pe={render(t,e,n){let i={index:n.index,compound:t.compound?"compound":"",selected:n.selected?"selected":"",editing:n.editing?"editing":"",modify:t.modify,unitsPerEm:n.unitsPerEm,translateY:n.unitsPerEm+n.descent,unicode:(t.unicode||[]).map((function(t){return"$"+t.toString(16).toUpperCase()})).join(","),name:p.a.encodeHTML(t.name||""),fillColor:n.color?'style="fill:'+n.color+'"':""},r="";return(r=function(t,e){if(!t)return"";const n=[];if(t.compound){const i=Object(h.a)(t,e);i&&i.length&&n.push(Object(Ut.a)(i))}else t.contours&&t.contours.length&&n.push(Object(Ut.a)(t.contours));return n.join(" ")}(t,e))&&(i.d='d="'+r+'"'),p.a.format(Ae,i)}};function Ie(t){let e=t.head.unitsPerEm,n=t.hhea.descent,i={};(this.selectedList||[]).forEach((function(t){i[t]=!0}));let r="",s=this.options.color,a=this.getEditing(),o=this.page*this.options.pageSize,l=o+this.options.pageSize,u=t.glyf.slice(o,l),h=Pe.render;u.forEach((function(l,u){let c=o+u;r+=h(l,t,{index:c,unitsPerEm:e,descent:n,selected:i[c],editing:a===c,color:s})})),this.main.html(r)}function De(t,e){let n=t.head.unitsPerEm,i=t.hhea.descent,r={};(this.selectedList||[]).forEach((function(t){r[t]=!0}));let s=this.main,a=this.options.color,o=this.getEditing(),l=Pe.render;s.hide(),e.forEach((function(e){let u=l(t.glyf[e],t,{index:e,unitsPerEm:n,descent:i,selected:r[e],editing:o===e,color:a}),h=s.find('[data-index="'+e+'"]');h.length&&($(u).insertBefore(h),h.remove())})),s.show()}class Le{constructor(t,e){this.options=Object.assign({color:"",shapeSize:"normal",pageSize:100},e),this.main=$(t),this.mode="list",this.page=0,this.selectedList=[],Oe.call(this)}focus(){this.listening||(this.listening=!0,document.body.addEventListener("keydown",this.downlistener))}blur(){this.listening&&(this.listening=!1,document.body.removeEventListener("keydown",this.downlistener))}setPage(t){this.page=t||0}getPage(){return this.page}show(t,e){e&&this.setSelected(e),Ie.call(this,t),this.fire("selection:change")}refresh(t,e){e&&0!==e.length?De.call(this,t,e):Ie.call(this,t)}setSelected(t){this.selectedList=t||[]}getSelected(){return this.selectedList}clearSelected(){this.main.children().removeClass("selected"),this.selectedList=[]}getEditing(){return this.editingIndex>=0?this.editingIndex:-1}setEditing(t){this.clearEditing(),t=+t,this.editingIndex=t>=0?t:-1,-1!==t&&this.main.find('[data-index="'+t+'"]').addClass("editing")}clearEditing(){this.main.find(".editing").removeClass("editing"),this.editingIndex=-1}setSetting(t){let e=this.options;t.shapeSize!==e.shapeSize&&(this.main.removeClass(e.shapeSize),this.main.addClass(t.shapeSize));let n=!1;t.color!==e.color&&(n=!0),t.pageSize!==e.pageSize&&(n=!0),this.options=f.a.overwrite(e,t),n&&this.fire("refresh")}getSetting(){return this.options}setMode(t){this.mode=t||"list",this.commandMenu&&this.commandMenu["list"===this.mode?"show":"hide"]()}}r.a.mixin(Le.prototype);class Ne{constructor(t){this.main=$(t);this.cover=$('<div style="position:fixed;z-index: 100;width: 100%;height: 100%;left:0;top:0;cursor:e-resize"></div>'),function(t){const e=f.a.throttle((function(e){if(!e)return;let n=e.pageX-t.x,i=e.pageX-t.deltaX;t.deltaX=e.pageX,i&&t.fire("change",{offset:n,delta:i})}),200);function n(t){e(t)}function i(r){t.cover.remove(),e(r),$(window).off("mousemove",n).off("mouseup",i)}t.onMouseDown=function(e){t.deltaX=t.x=e.pageX,t.cover.appendTo(document.body),$(window).on("mousemove",n).on("mouseup",i)},t.enable()}(this)}enable(){return this.isEnabled||(this.isEnabled=!0,this.main.css("cursor","e-resize").on("mousedown",this.onMouseDown)),this}disable(){return this.isEnabled&&(delete this.isEnabled,this.main.css("cursor","").off("mousedown",this.onMouseDown)),this}dispose(){this.disable(),this.cover.remove(),this.main=this.cover=null}}function Re(t){let e={};for(let n=0,i=t.length;n<i;n++)t[n]&&(e[t[n]]=!0);return e}function ze(){let t=this;this.main.on("click","[data-id]",(function(e){if(this.getAttribute("data-disabled"))return;let n=this.getAttribute("data-id"),i=t.commands[n];if(i){let e=i.name;if("toggle"===i.type){if(i.on)return this.removeAttribute("data-on"),i.on=!1,void t.fire("command:un",{command:e,args:i});this.setAttribute("data-on",1),i.on=!0}t.fire("command",{command:e,args:i})}}))}r.a.mixin(Ne.prototype);class Ue{constructor(t,e={}){this.main=$(t),this.commands=e.commands||[],ze.call(this),this.commands.length&&this.setCommands()}setCommands(t){t=t||this.commands;let e="";return t.forEach((function(t,n){"split"===t.type?e+='<li data-id="-1" data-split="1"></li>':(e+='<li data-id="'+n+'"'+(t.disabled?' data-disabled="1"':"")+(t.on?' data-on="1"':"")+(t.ico?'data-theme="ico" title="'+t.title+'"':"")+">",t.ico?e+='<i class="ico i-'+t.ico+'"></i>':e+=t.title+(t.quickKey?"(<i>"+t.quickKey+"</i>)":""),e+="</li>")})),this.main.html(e),this.commands=t,this}disableCommands(t){let e=this.main.find("[data-id]");return t&&(t=Re(t),this.commands.forEach((function(n,i){t[n.name]&&(n.disabled=!0,$(e[i]).attr("data-disabled",1))}))),this}enableCommands(t){let e=this.main.find("[data-id]");return t&&(t=Re(t),this.commands.forEach((function(n,i){t[n.name]&&(delete n.disabled,$(e[i]).attr("data-disabled",null))}))),this}removeCommands(t){if(t){t=Re(t);for(let e=this.commands.length;e>=0;e--){t[this.commands[e].name]&&(this.commands.splice(e,1),this.main.find('[data-id="'+e+'"]').remove())}}return this}show(){return this.main.show(),this}hide(){return this.main.hide(),this}dispose(){this.main.un("click","[data-id]"),this.main=null,this.commands=null}}r.a.mixin(Ue.prototype);class je{constructor(t,e){this.options=e||{},this.main=$(t);let n=this;n.main.on("click","[data-action]",(function(t){t.stopPropagation();let e=$(t.target),r=e.attr("data-action"),s=e.parents("[data-id]").attr("data-id");if("del"===r){if(!window.confirm(i.lang.msg_confirm_del_proj))return;n.current&&n.current.remove(),n.current=null}n.fire(r,{projectId:s})})),n.main.on("click","[data-id]",(function(t){n.fire("open",{projectId:$(this).attr("data-id")})}))}select(t){this.current&&this.current.removeClass("selected"),this.current=$('[data-id="'+t+'"]',this.main).addClass("selected")}unSelect(){this.current&&this.current.removeClass("selected"),this.current=null}show(t,e){let n="";(t||[]).forEach((function(t){n+='<dl data-id="'+p.a.encodeHTML(t.id)+'"><dt>'+p.a.encodeHTML(t.name)+"</dt><dd>"+(t.config&&t.config.sync?'<span data-action="sync" title="'+i.lang.syncfont+'">'+i.lang.sync+"</span>":"")+'<span data-action="saveas">'+i.lang.saveas+'</span><span data-action="del">'+i.lang.del+"</span></dd></dl>"})),this.main.html(n),void 0!==e&&this.select(e)}}r.a.mixin(je.prototype);var Fe=n(44),Be=n(38);class $e{constructor(t){this.ttf=new Be.a(t),this.changed=!1,this.history=new Fe.a}pushHistory(){return this.history.add(f.a.clone(this.ttf.get())),this}fireChange(t,e){return t&&this.pushHistory(),this.changed=!0,this.fire("change",{ttf:this.ttf.get(),changeType:e||"change"}),this}set(t){return this.ttf.get()!==t&&(this.ttf.set(t),this.clearGlyfTag(this.ttf.getGlyf()),this.history.reset(),this.pushHistory(),this.changed=!1,this.fire("set",{ttf:this.ttf.get()})),this}get(){return this.ttf.get()}findGlyf(t){if(null!=t.index){let e=this.ttf.getGlyf().length;return t.index.filter((function(t){return t>=0&&t<e}))}return this.ttf.findGlyf(t)}insertGlyf(t,e){let n=this.ttf.getGlyf(),i=32;if(!t.unicode||!t.unicode.length){for(let t=n.length-1;t>0;t--){let e=n[t];if(e.unicode&&e.unicode.length){let t=Math.max.apply(null,e.unicode);i=Math.max(t,i)}}i++,65535===i&&i++,t.unicode=[i]}return t.name||(t.name=O.a.getUnicodeName(t.unicode[0])),t.modify="new",this.ttf.insertGlyf(t,e),this.fireChange(!0),this}merge(t,e){let n=this.ttf.mergeGlyf(t,e);return n.length&&(n.forEach((function(t){t.modify="new"})),this.fireChange(!0)),this}removeGlyf(t){return this.ttf.removeGlyf(t).length&&this.fireChange(!0),this}setUnicode(t,e,n){let i=this.ttf.setUnicode(t,e,n);return i.length&&(i.forEach((function(t){t.modify="edit"})),this.fireChange(!0)),this}genGlyfName(t){let e=this.ttf.genGlyfName(t);return e.length&&(e.forEach((function(t){t.modify="edit"})),this.fireChange(!0)),this}clearGlyfName(t){let e=this.ttf.clearGlyfName(t);return e.length&&(e.forEach((function(t){t.modify="edit"})),this.fireChange(!0)),this}appendGlyf(t,e){let n=this.ttf.appendGlyf(t,e);return n.length&&(n.forEach((function(t){t.modify="new"})),this.fireChange(!0)),this}replaceGlyf(t,e){let n=this.ttf.replaceGlyf(t,e);return n.length&&(n[0].modify="edit",this.fireChange(!0,"replace")),this}adjustGlyfPos(t,e){let n=this.ttf.adjustGlyfPos(t,e);return n.length&&(n.forEach((function(t){t.modify="edit"})),this.fireChange(!0)),this}adjustGlyf(t,e){let n=this.ttf.adjustGlyf(t,e);return n.length&&(n.forEach((function(t){t.modify="edit"})),this.fireChange(!0)),this}updateGlyf(t,e){let n=this.getGlyf([e])[0],i=!1;if(t.unicode.length&&(n.unicode=t.unicode,n.modify="edit",i=!0),t.name!==n.name&&(n.name=t.name,n.modify="edit",i=!0),void 0!==t.leftSideBearing&&t.leftSideBearing!==n.leftSideBearing||void 0!==t.rightSideBearing&&t.rightSideBearing+(n.xMax||0)!==n.advanceWidth){let n=this.ttf.adjustGlyfPos([e],t);n.length&&(n.forEach((function(t){t.modify="edit"})),i=!0)}return i&&this.fireChange(!0),this}getGlyf(t){return this.ttf.getGlyf(t)}setInfo(t){return this.ttf.setName(t),this.ttf.setHead(t),this.fireChange(!0),this}setMetrics(t){return this.ttf.setHhea(t),this.ttf.setOS2(t),this.ttf.setPost(t),this.fireChange(!0),this}optimize(){let t=this.ttf.optimize();if(this.ttf.get().glyf.forEach((function(t){t.modify="edit"})),this.fireChange(!0),!0===t)return!0;let e="";return t.repeat&&(e=i.lang.msg_repeat_unicode+t.repeat.join(",")),{repeat:t.repeat,message:e}}sortGlyf(){let t=this.ttf.sortGlyf();return-1===t?{message:i.lang.msg_no_sort_glyf}:-2===t?{message:i.lang.msg_has_compound_glyf_sort}:(t.length&&(t.forEach((function(t){t.modify="edit"})),this.fireChange(!0)),!0)}compound2simple(t){let e=this.ttf.compound2simple(t);return e.length&&(e.forEach((function(t){t.modify="edit"})),this.fireChange(!0)),this}undo(){return this.history.atFirst()||(this.ttf.set(this.history.back()),this.fireChange(!1)),this}redo(){return this.history.atLast()||(this.ttf.set(this.history.forward()),this.fireChange(!1)),this}isChanged(){return!!this.changed}setState(t){return"new"===t?this.changed=!1:"saved"===t&&(this.ttf.get().glyf.forEach((function(t){delete t.modify})),this.fire("change",{ttf:this.ttf.get(),changeType:t}),this.changed=!1),this}getCopiedGlyf(t){let e=[],n=this.ttf.get();for(let i=0,r=t.length;i<r;++i){let r=t[i],s=f.a.clone(n.glyf[r]);n.glyf[r].compound&&Object(c.a)(s,Object(h.a)(n.glyf[r],n)),e.push(s)}return e}clearGlyfTag(t){return t.forEach((function(t){delete t.modify})),t}calcMetrics(){if(this.ttf)return this.ttf.calcMetrics()}dispose(){this.un(),delete this.ttf}}r.a.mixin($e.prototype);var Xe=n(57);const He=["copyshapes","removeshapes","reversepoints","horizontalalignshapes","verticalalignshapes","rotateleft","rotateright","flipshapes","mirrorshapes"],Ge=["joinshapes","intersectshapes","tangencyshapes"],qe=["pointmode","upshape","downshape"];function Ve(){let t=this,e=this.editor,n=f.a.debounce((function(){t.focus()}),20);e.on("setting:font",(function(t){new(0,Vt.glyf)({onChange(t){e.adjustFont(t),n()}}).show(t.setting)})),e.on("setting:editor",(function(e){new(0,Vt.editor)({onChange(e){setTimeout((function(){u.viewer.setSetting(e.viewer),t.setSetting(e.editor)}),20)}}).show({viewer:u.viewer.getSetting(),editor:e.setting})}));let i=this.commandMenu;i&&(e.on("selection:change",f.a.debounce((function(t){let e=t.shapes?t.shapes.length:0;e?(i.enableCommands(He),i[e>=2?"enableCommands":"disableCommands"](Ge),i[1===e?"enableCommands":"disableCommands"](qe)):(i.disableCommands(He),i.disableCommands(Ge),i.disableCommands(qe))})),100),i.on("command",(function(t){n();let i,r=t.command,s=t.args;if("save"!==r)if("splitshapes"!==r)if(i="pasteshapes"===r?e.getClipBoard():e.getSelected(),i&&i.length)switch(r){case"pointmode":e.setMode("point",i[0]);break;case"topshape":case"bottomshape":case"upshape":case"downshape":e.execCommand(r,i[0]);break;case"copyshapes":case"pasteshapes":case"removeshapes":case"joinshapes":case"intersectshapes":case"tangencyshapes":case"rotateleft":case"rotateright":case"flipshapes":case"mirrorshapes":case"cutshapes":case"reversepoints":e.execCommand(r,i);break;case"alignshapes":case"verticalalignshapes":case"horizontalalignshapes":e.execCommand(r,i,s.align)}else"rangemode"===r&&e.setMode("bound");else e.setMode("split");else u.fire("save",{saveType:"editor"})})))}class We{constructor(t,e){this.main=$(t),this.options=Object.assign({},e),this.options.commandMenu&&(this.commandMenu=this.options.commandMenu,delete this.options.commandMenu)}show(){this.main.show(),this.editor||(this.editor=Xe.a.create(this.main.get(0)),Ve.call(this)),this.editing=!0}hide(){this.editor&&this.editor.blur(),this.main.hide(),this.editing=!1}isEditing(){return this.editing}isVisible(){return this.editor&&"none"!==this.main.get(0).style.display}focus(){this.editing=!0,this.editor&&this.editor.focus()}blur(){this.editing=!1,this.editor&&this.editor.blur()}undo(){this.execCommand("undo")}redo(){this.execCommand("redo")}setSetting(t){this.editor?this.editor.setOptions(t):f.a.overwrite(ue.a.editor,t)}getSetting(){return this.editor?this.editor.options:ue.a.editor}execCommand(...t){this.editor&&this.editor.execCommand.apply(this.editor,t)}dispose(){this.editor.dispose(),this.main=this.options=this.editor=null}}["reset","setFont","getFont","isChanged","setChanged","setAxis","adjustFont"].forEach((function(t){We.prototype[t]=function(...e){return this.editor?this.editor[t].apply(this.editor,e):void 0}}));const Ye='<button data-pager="prev" type="button" class="btn btn-flat btn-new btn-sm">'+i.lang.prevpage+'</button><input data-pager="text" type="text" class="form-control"><span data-pager="info"></span><button data-pager="goto" type="button" class="btn btn-flat btn-new btn-sm">'+i.lang.gotopage+'</button><button data-pager="next" type="button" class="btn btn-flat btn-new btn-sm">'+i.lang.nextpage+"</button>";class Ze{constructor(t,e={}){this.main=$(t),this.options=e,this.main.html(Ye),this.textPage=this.main.find('input[data-pager="text"]');let n=this;n.main.on("click","button[data-pager]",(function(t){if(this.getAttribute("data-disabled"))return;let e=this.getAttribute("data-pager"),i=n.page;if("prev"===e)i=n.page>1?n.page-1:1;else if("next"===e)i=n.page<n.totalPage?n.page+1:n.totalPage;else if("goto"===e){let t=+n.textPage.val();i=t>=1&&t<=n.totalPage?t:n.page}n.textPage.val(i),i!==n.page&&(n.page=i,n.fire("change",{page:i}))})),n.textPage.on("keyup",(function(t){if(13===t.keyCode){let t=+this.value.trim();t>=1&&t<=n.totalPage?(n.page=t,n.fire("change",{page:t})):this.value=n.page}}))}show(t,e,n){n<=e?this.hide():(this.page=t,this.totalPage=Math.ceil(n/e),this.main.find('[data-pager="text"]').val(t),this.main.find('[data-pager="info"]').html("/ "+this.totalPage),this.main.find('[data-pager="prev"]')[1===t?"attr":"removeAttr"]("data-disabled",1),this.main.find('[data-pager="next"]')[t===this.totalPage?"attr":"removeAttr"]("data-disabled",1)),this.main.show()}hide(){this.main.hide()}dispose(){this.main.un("click","button[data-pager]"),this.main.find('input[data-pager="text"]').un("keyup")}}r.a.mixin(Ze.prototype);var Ke=n(26),Qe=n(93),Je=n.n(Qe);function tn(t){let e=u.setting.get("ie").import;return e.type="svg",Ke.a.create(t,e).data}function en(t,e){"woff"===e.type&&(e.inflate=Je.a.inflate);let n=Ke.a.create(t,e).data;return delete e.inflate,n}var nn={load(t,e){"svg"===e.type?"string"==typeof t||t instanceof window.XMLDocument?function(t,e){s.show();try{let n=tn(t);s.hide(),e.success&&e.success(n)}catch(t){throw s.hide(),alert(t.message),t}}(t,e):function(t,e){s.show();let n=new FileReader,r=t.name.replace(/\.\w+$/,"");n.onload=function(t){try{let i=tn(t.target.result);i.glyf&&1===i.glyf.length&&(i.glyf[0].name=r),n=null,e.success&&e.success(i)}catch(t){throw alert(t.message),t}s.hide()},n.onerror=function(t){s.hide(),n=null,alert(i.lang.msg_error_read_file),e.error&&e.error(t)},n.readAsText(t)}(t,e):"ttf"===e.type||"woff"===e.type||"woff2"===e.type||"eot"===e.type||"otf"===e.type?t instanceof ArrayBuffer?function(t,e){s.show();try{e.success&&e.success(en(t,e))}catch(t){throw alert(t.message),t}s.hide()}(t,e):function(t,e){s.show();let n=new FileReader;n.onload=function(t){try{e.success&&e.success(en(t.target.result,e))}catch(t){throw alert(t.message),t}s.hide()},n.onerror=function(t){s.hide(),n=null,alert(i.lang.msg_error_read_file),e.error&&e.error(t)},n.readAsArrayBuffer(t)}(t,e):e.error&&e.error({message:i.lang.msg_not_support_file_type})},supportLoad:t=>!!t.match(/(\.ttf|\.woff|\.woff2|\.eot|\.otf)$/i),supportImport:t=>!!t.match(/(\.ttf|\.woff|\.woff2|\.svg|\.eot|\.otf)$/i)},rn=n(46);function sn(t,e={}){let n=u.setting.get("ie");return t.post=t.post||{},n&&n.export.saveWithGlyfName?t.post.format=2:t.post.format=3,t}var an=n(53),on=n.n(an),ln=n(95),un=n.n(ln);let hn=null,cn=null,dn=null;var fn={renderFontExample:t=>(hn=hn||on.a.template(n(118)),hn(t)),renderSymbolExample:t=>(dn=dn||on.a.template(n(119)),dn(t)),renderFontCss:t=>(cn=cn||on.a.template(n(120)),cn(t)),renderPreviewCss:()=>un.a.toString()},pn=n(96),gn=n.n(pn);const mn=rn.a.Font,yn=rn.a.ttf2icon;function vn(t,e){return e.type=e.type||"ttf",t=sn(t,e),mn.create(t).write(e)}rn.a.woff2.init("dep/woff2/woff2.wasm");var _n={export:function(t,e){if(t)try{let n="",i=e.fileName||t.name.fontFamily||"export";if("zip"===e.type){let e,r=new gn.a,s=r.folder("fonteditor");["woff","woff2","eot","svg","ttf","symbol"].forEach((function(n){let r=i+"."+n,a=vn(t,{type:n});"symbol"===n&&(r=i+"-symbol.svg",e=a),s.file(r,a)}));let a=yn(t);s.file("icon.css",fn.renderFontCss(a)),s.file("page.css",fn.renderPreviewCss()),s.file("example.html",fn.renderFontExample(a)),a.symbolText=e,s.file("example-symbol.html",fn.renderSymbolExample(a)),n="data:application/zip;base64,"+r.generate({type:"base64"})}else{let i=vn(t,e);n=mn.toBase64(i),n="data:font/"+e.type+";charset=utf-8;base64,"+n}Bt(i+"."+e.type,n),e.success&&e.success(n)}catch(t){throw e.error&&e.error(t),alert(t.message),t}}};let xn=null;var wn={renderPreview(t){t.previewCss=fn.renderPreviewCss();let e=p.a.format(n(121),i);return xn=xn||on.a.template(e),xn(t)}};const bn=!!window.ActiveXObject||"ActiveXObject"in window,Sn=rn.a.Font,Cn=rn.a.ttf2icon;var En={load(t,e){try{let n=function(t,e){let n={type:e||"ttf"};t=sn(t);let i=null;try{i=Sn.create(t).toBase64(n)}catch(t){throw u.fire("font-error",t),t}let r=Object.assign({fontData:i,fontFormat:n.type},Cn(t));return wn.renderPreview(r)}(t,e),i=window.open("./empty.html");bn&&i.document&&i.document.body?(i.document.body.innerHTML=n,i.focus()):i.onload=function(){i.document.body.innerHTML=n,i.focus(),i=null,n=null}}catch(t){throw alert(t.message),t}}};const Tn=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.msIndexedDB;class Mn{constructor(t){if(!Tn)throw"not support indexed db";Object.assign(this,t),this.name=this.name||"default-datastore"}open(t,e){let n=Tn.open(this.name),i=this;return n.onerror=function(t){e&&e(t)},n.onsuccess=function(n){i.db=n.target.result,i.db.objectStoreNames.contains(i.storeName)?t&&t(n):i.switchStore(i.storeName,t,e)},this}add(t,e,n,i){if(null==e)throw"can't save `null` to datastore";if(this.db){let r=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).add({id:t,data:e});r.onsuccess=function(e){n&&n(t)},r.onerror=function(t){i&&i(t)}}return this}update(t,e,n,i){if(this.db){let r=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).put({id:t,data:e});r.onsuccess=function(e){null==e.target.result?i&&i(e):n&&n(t)},r.onerror=function(t){i&&i(t)}}return this}get(t,e,n){if(this.db){let i=this.db.transaction([this.storeName]).objectStore(this.storeName).get(t);i.onsuccess=function(t){let i=t.target.result;null==i?n&&n(t):e&&e(i.data)},i.onerror=function(t){n&&n(t)}}return this}remove(t,e,n){if(this.db){let i=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).delete(t);i.onsuccess=function(){e&&e(t)},i.onerror=function(t){n&&n(t)}}return this}clear(t,e){if(this.db){let n=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).clear();n.onsuccess=function(e){t&&t(e)},n.onerror=function(t){e&&e(t)}}return this}removeStore(t,e,n){if(this.db){let i=this,r=this.db.version;i.close();let s=Tn.open(this.name,r+1);s.onerror=function(t){n&&n(t)},s.onupgradeneeded=function(n){i.db=n.target.result,i.db.deleteObjectStore(t),setTimeout((function(){e&&e(n)}))}}return this}switchStore(t,e,n){if(this.db){let i=this;if(i.storeName=t,i.db.objectStoreNames.contains(i.storeName))e&&e();else{let t=i.db.version;i.close();let r=Tn.open(i.name,t+1);r.onerror=function(t){n&&n(t)},r.onupgradeneeded=function(t){i.db=t.target.result,i.db.createObjectStore(i.storeName,{keyPath:"id"}),setTimeout((function(){e&&e(t)}))}}}return this}removeDataBase(){return Tn.deleteDataStore(this.name),this}close(){return this.db&&this.db.close(),this.db=null,this}dispose(){this.close(),this.onError=this.onOpen=this.onUpdate=null}}Mn.enabled=!!Tn;const kn=window.localStorage||window.sessionStorate;let On,An;const Pn=new Promise(t=>{Mn.enabled&&(On=new Mn({name:"fonteditor-datastore",storeName:"project"}),On.open((function(){t(An)}),(function(){On=null,t(An)})))});An={ready:()=>Pn,getId:()=>""+Date.now(),items(){let t=kn.getItem("project-list");return t?JSON.parse(t).map((function(t){return t.id=""+t.id,t})):[]},add(t,e,n){let i=this.items(),r=n&&n.id||this.getId(),s={name:t,id:r};return n&&(s.config=n),i.push(s),kn.setItem("project-list",JSON.stringify(i)),On?new Promise((t,n)=>{On.add(r,e,(function(){t(r)}),(function(){n(e)}))}):(kn.setItem(r,JSON.stringify(e)),Promise.resolve(r))},update(t,e,n){return n&&this.updateConfig(t,n),On?new Promise((n,i)=>{On.update(t,e,(function(){n(t)}),(function(){i(t)}))}):(kn.setItem(t,JSON.stringify(e)),Promise.resolve(t))},remove(t,e){let n=this.items();for(let e=n.length-1;e>=0;e--)n[e].id===t&&(kn.removeItem(n[e].id),n.splice(e,1));return On?new Promise((i,r)=>{On.remove(t,(function(){kn.setItem("project-list",JSON.stringify(n)),i(n)}),(function(){e&&kn.setItem("project-list",JSON.stringify(n)),r(t)}))}):(kn.setItem("project-list",JSON.stringify(n)),Promise.resolve(n))},get(t){let e=this.items();for(let n=0,i=e.length;n<i;n++)if(e[n].id===t){if(On)return new Promise((e,n)=>{On.get(t,(function(t){e(t)}),(function(){n(t)}))});let i=kn.getItem(e[n].id);if(i)return Promise.resolve(JSON.parse(i))}return Promise.reject(t)},getConfig(t){let e=this.items().filter((function(e){return e.id===t}))[0];return!!e&&(e.config||{})},updateConfig(t,e){let n=this.items(),i=!1;for(let r=n.length-1;r>=0;r--)if(n[r].id===t){n[r].config?Object.assign(n[r].config,e):n[r].config=e,i=!0;break}return i&&kn.setItem("project-list",JSON.stringify(n)),i},clear(){let t=this.items();On?t.forEach((function(t){On.remove(t.id)})):t.forEach((function(t){kn.removeItem(t.id)})),kn.removeItem("project-list")}};var In=An,Dn=n(50),Ln=n(49);var Nn=1,Rn=2,zn=4,Un=1001,jn=1002,Fn=1003,Bn=1004;let $n=0;function Xn(t){let e=document.createElement("form");return e.id="form_sync_"+$n++,e.target="sync-frame",e.method="post",e.action=this.url+(~this.url.indexOf("?")?"&":"?")+"action=push",t.callbackUrl=u.config.proxyUrl+"?callback="+this.callback,Object.keys(t).forEach((function(n){let i=document.createElement("input");i.type="hidden",i.name=n,i.value=t[n],e.appendChild(i)})),document.body.appendChild(e),e}class Hn{constructor(t,e={}){this.url=t,this.serviceStatus=e.serviceStatus||0}submit(t){this.callback="script_sync_"+$n++;const e=Xn.call(this,t);return e.submit(),document.body.removeChild(e),new Promise((t,e)=>{if(window[this.callback]=e=>{t(e),this.dispose()},this.serviceStatus&zn)return delete window[this.callback],void t({status:0});this.timer=setTimeout(()=>{e({status:zn,reason:"sync time out!"}),this.dispose()},1e4)})}reset(){return clearTimeout(this.timer),this.callback&&(delete window[this.callback],delete this.callback),this}dispose(){this.reset()}}const Gn={};function qn(t,e){Gn[t]=(Gn[t]||65535)&e,e||delete Gn[t]}function Vn(t){let e={action:"pull",encode:"base64",fontName:t.name,fontType:"ttf",timestamp:t.timestamp||0};return new Promise((n,r)=>{$.ajax({url:t.url,dataType:"jsonp",data:e}).then((function(e){e&&0===e.status?n(e.data):(qn(t.url,Rn),n({status:Un}))}),(function(e){qn(t.url,Rn),200===e.status?n({status:Rn}):(qn(t.url,Nn),r({status:Nn,reason:"sync no response"}),alert(i.lang.msg_error_sync_font_address))}))})}function Wn(t){return new Promise((e,n)=>{if(t.hasNew&&"ttf"===t.fontType&&t[t.fontType])if(window.confirm(p.a.format(i.lang.msg_has_new_font_version,t.fontName))){let r=new Int8Array(function(t){const e=atob(t),n=[];for(let t=0,i=e.length;t<i;t++)n.push(e[t].charCodeAt(0));return n}(t[t.fontType])).buffer;nn.load(r,{type:t.fontType,success(n){e({status:0,hasNew:1,newData:n,timestamp:t.timestamp})},error(){t.status=jn,n(t),alert(i.lang.msg_error_sync_font_version)}})}else t.status=Bn,n(t);else t.status=Fn,n(t)})}function Yn(t,e){let n=[],i={},r=null;if(t.woff||t.ttf||t.eot){e=sn(e);try{r=Ke.a.create(e).write({type:"ttf"})}catch(t){throw u.fire("font-error",t),alert(t.message),t}t.ttf&&(n.push("ttf"),i.ttf=Ke.a.toBase64(r)),t.woff&&(n.push("woff"),i.woff=Ke.a.toBase64(Object(Dn.a)(r))),t.eot&&(n.push("eot"),i.eot=Ke.a.toBase64(Object(Ln.a)(r))),r=null}if(t.svg){n.push("svg");let t=Ke.a.create(e).write({type:"svg"});i.svg=Ke.a.toBase64(t)}return i.encode="base64",i.fontName=t.name,i.fontType=n.join(","),i}function Zn(t,e,n,i){if(!t.pushUrl)return void n({});let r=new Hn(t.pushUrl,{serviceStatus:zn}),s=Yn(t,e);r.submit(s).then((function(t){n(t)}),(function(t){i(t)}))}var Kn={addTask(t={}){let e=t.type||"push",n=t.projectId,r=t.ttf,s=t.config;if(t=null,s||(s=In.getConfig(n).sync),!s||!s.url&&!s.pushUrl)return Promise.reject({status:2,statusInfo:i.lang.msg_not_set_sync_info});let a=new Promise((t,n)=>{"push"!==e||s.url||!s.pushUrl?"pull"===e?Vn(s).then(Wn).then((function(e){t(e)}),(function(t){n(t)})):Vn(s).then(Wn).then((function(e){t(e)}),(function(e){e.status!==Nn?r?(!function(t,e,n,i){let r=new Hn(t.url,{serviceStatus:(s=t.url,Gn[s]||0)});var s;let a=Yn(t,e);r.submit(a).then((function(t){0===t.status?n(t.data):(t.status=Un,i(t))}),(function(e){e.status===zn&&qn(t.url,zn),i(e)}))}(s,r,t,n),s.pushUrl&&s.pushUrl!==s.url&&setTimeout(()=>{Zn(s,r,t,n)},200)):n({status:2,statusInfo:i.lang.msg_no_sync_font}):n(e)})):Zn(s,r,t,n)});return a.then((function(t){t&&t.timestamp&&function(t,e,n){n||(n=In.getConfig(t).sync),n.timestamp=e||0,In.updateConfig(t,{sync:n})}(n,t.timestamp,s)})),a}};function Qn(t){let e=t[0];if("open"===u.data.action&&u.loader.supportLoad(e.name))u.loader.load(e,{type:e.name.slice(e.name.lastIndexOf(".")+1).toLowerCase(),success(t){u.viewer.clearSelected(),u.ttfManager.set(t),u.data.projectId=null}});else if("import"===u.data.action&&u.loader.supportImport(e.name)){if(u.ttfManager.get()){let n=e.name.slice(e.name.lastIndexOf(".")+1).toLowerCase(),i=new RegExp("."+n+"$","i");(t=Array.prototype.slice.call(t).filter((function(t){return i.test(t.name)}))).forEach((function(t){u.loader.load(t,{type:n,success(t){t.glyf.length&&u.ttfManager.merge(t,{scale:!0,adjustGlyf:"svg"===t.from})}})}))}}else alert(i.lang.msg_not_support_file_type)}function Jn(t){Qn(t.target.files),t.target.value=""}function ti(t){t.stopPropagation(),t.preventDefault();let e=t.dataTransfer.files[0],n=e.name.slice(e.name.lastIndexOf(".")+1).toLowerCase();u.data.action="svg"===n?"import":"open",Qn(t.dataTransfer.files)}!function(){$(".action-groups").delegate("[data-action]","click",(function(t){let e=this.getAttribute("data-action");"1"!==this.getAttribute("data-disabled")&&ee[e]&&(u.data.action=e,ee[e].call(this,t))})),document.getElementById("font-import").addEventListener("change",Jn),$(document).on("dragleave drop dragenter dragover",(function(t){t.preventDefault()})),document.getElementById("glyf-list").addEventListener("drop",ti),u.setting=pe,u.config=ge,u.spliter=new Ne($("#glyf-list-spliter"));let t=new Ue($("#glyf-list-commandmenu"),{commands:ye});u.viewerPager=new Ze($("#glyf-list-pager")),u.viewer=new Le($("#glyf-list"),{commandMenu:t});let e=new Ue($("#editor-commandmenu"),{commands:ve});if(u.editor=new We($("#glyf-editor"),{commandMenu:e}),u.project=In,u.projectViewer=new je($("#project-list")),u.ttfManager=new $e,u.loader=nn,u.exporter=_n,u.previewer=En,u.sync=Kn,le.init(u),u.setting.isStored("editor")){let t=u.setting.get("editor");u.viewer.setSetting(t.viewer),u.editor.setSetting(t.editor)}u.projectViewer.show(u.project.items());let n=function(){let t=null;if(location.search){let e=f.a.parseQuery(location.search.slice(1));e.project&&(t=e.project)}return t||(t=window.localStorage.getItem("project-cur")),t}();n&&function(t){u.project.getConfig(t)&&u.project.ready().then((function(){u.projectViewer.select(t),u.projectViewer.fire("open",{projectId:t})}))}(n)}()}]);